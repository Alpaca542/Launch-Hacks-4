function P6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function _p(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iy={exports:{}},eh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2;function M6(){if(c2)return eh;c2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:u,ref:s!==void 0?s:null,props:o}}return eh.Fragment=e,eh.jsx=n,eh.jsxs=n,eh}var h2;function B6(){return h2||(h2=1,iy.exports=M6()),iy.exports}var P=B6(),sy={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d2;function U6(){if(d2)return tt;d2=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.iterator;function b(A){return A===null||typeof A!="object"?null:(A=y&&A[y]||A["@@iterator"],typeof A=="function"?A:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,I={};function L(A,ee,ae){this.props=A,this.context=ee,this.refs=I,this.updater=ae||T}L.prototype.isReactComponent={},L.prototype.setState=function(A,ee){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,ee,"setState")},L.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function k(){}k.prototype=L.prototype;function q(A,ee,ae){this.props=A,this.context=ee,this.refs=I,this.updater=ae||T}var $=q.prototype=new k;$.constructor=q,w($,L.prototype),$.isPureReactComponent=!0;var j=Array.isArray,te={H:null,A:null,T:null,S:null,V:null},Y=Object.prototype.hasOwnProperty;function M(A,ee,ae,R,oe,Ee){return ae=Ee.ref,{$$typeof:t,type:A,key:ee,ref:ae!==void 0?ae:null,props:Ee}}function N(A,ee){return M(A.type,ee,void 0,void 0,void 0,A.props)}function D(A){return typeof A=="object"&&A!==null&&A.$$typeof===t}function U(A){var ee={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(ae){return ee[ae]})}var B=/\/+/g;function V(A,ee){return typeof A=="object"&&A!==null&&A.key!=null?U(""+A.key):ee.toString(36)}function C(){}function O(A){switch(A.status){case"fulfilled":return A.value;case"rejected":throw A.reason;default:switch(typeof A.status=="string"?A.then(C,C):(A.status="pending",A.then(function(ee){A.status==="pending"&&(A.status="fulfilled",A.value=ee)},function(ee){A.status==="pending"&&(A.status="rejected",A.reason=ee)})),A.status){case"fulfilled":return A.value;case"rejected":throw A.reason}}throw A}function K(A,ee,ae,R,oe){var Ee=typeof A;(Ee==="undefined"||Ee==="boolean")&&(A=null);var me=!1;if(A===null)me=!0;else switch(Ee){case"bigint":case"string":case"number":me=!0;break;case"object":switch(A.$$typeof){case t:case e:me=!0;break;case m:return me=A._init,K(me(A._payload),ee,ae,R,oe)}}if(me)return oe=oe(A),me=R===""?"."+V(A,0):R,j(oe)?(ae="",me!=null&&(ae=me.replace(B,"$&/")+"/"),K(oe,ee,ae,"",function(Le){return Le})):oe!=null&&(D(oe)&&(oe=N(oe,ae+(oe.key==null||A&&A.key===oe.key?"":(""+oe.key).replace(B,"$&/")+"/")+me)),ee.push(oe)),1;me=0;var we=R===""?".":R+":";if(j(A))for(var Ce=0;Ce<A.length;Ce++)R=A[Ce],Ee=we+V(R,Ce),me+=K(R,ee,ae,Ee,oe);else if(Ce=b(A),typeof Ce=="function")for(A=Ce.call(A),Ce=0;!(R=A.next()).done;)R=R.value,Ee=we+V(R,Ce++),me+=K(R,ee,ae,Ee,oe);else if(Ee==="object"){if(typeof A.then=="function")return K(O(A),ee,ae,R,oe);throw ee=String(A),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return me}function z(A,ee,ae){if(A==null)return A;var R=[],oe=0;return K(A,R,"","",function(Ee){return ee.call(ae,Ee,oe++)}),R}function J(A){if(A._status===-1){var ee=A._result;ee=ee(),ee.then(function(ae){(A._status===0||A._status===-1)&&(A._status=1,A._result=ae)},function(ae){(A._status===0||A._status===-1)&&(A._status=2,A._result=ae)}),A._status===-1&&(A._status=0,A._result=ee)}if(A._status===1)return A._result.default;throw A._result}var se=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function re(){}return tt.Children={map:z,forEach:function(A,ee,ae){z(A,function(){ee.apply(this,arguments)},ae)},count:function(A){var ee=0;return z(A,function(){ee++}),ee},toArray:function(A){return z(A,function(ee){return ee})||[]},only:function(A){if(!D(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},tt.Component=L,tt.Fragment=n,tt.Profiler=s,tt.PureComponent=q,tt.StrictMode=r,tt.Suspense=d,tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=te,tt.__COMPILER_RUNTIME={__proto__:null,c:function(A){return te.H.useMemoCache(A)}},tt.cache=function(A){return function(){return A.apply(null,arguments)}},tt.cloneElement=function(A,ee,ae){if(A==null)throw Error("The argument must be a React element, but you passed "+A+".");var R=w({},A.props),oe=A.key,Ee=void 0;if(ee!=null)for(me in ee.ref!==void 0&&(Ee=void 0),ee.key!==void 0&&(oe=""+ee.key),ee)!Y.call(ee,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&ee.ref===void 0||(R[me]=ee[me]);var me=arguments.length-2;if(me===1)R.children=ae;else if(1<me){for(var we=Array(me),Ce=0;Ce<me;Ce++)we[Ce]=arguments[Ce+2];R.children=we}return M(A.type,oe,void 0,void 0,Ee,R)},tt.createContext=function(A){return A={$$typeof:u,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null},A.Provider=A,A.Consumer={$$typeof:o,_context:A},A},tt.createElement=function(A,ee,ae){var R,oe={},Ee=null;if(ee!=null)for(R in ee.key!==void 0&&(Ee=""+ee.key),ee)Y.call(ee,R)&&R!=="key"&&R!=="__self"&&R!=="__source"&&(oe[R]=ee[R]);var me=arguments.length-2;if(me===1)oe.children=ae;else if(1<me){for(var we=Array(me),Ce=0;Ce<me;Ce++)we[Ce]=arguments[Ce+2];oe.children=we}if(A&&A.defaultProps)for(R in me=A.defaultProps,me)oe[R]===void 0&&(oe[R]=me[R]);return M(A,Ee,void 0,void 0,null,oe)},tt.createRef=function(){return{current:null}},tt.forwardRef=function(A){return{$$typeof:c,render:A}},tt.isValidElement=D,tt.lazy=function(A){return{$$typeof:m,_payload:{_status:-1,_result:A},_init:J}},tt.memo=function(A,ee){return{$$typeof:f,type:A,compare:ee===void 0?null:ee}},tt.startTransition=function(A){var ee=te.T,ae={};te.T=ae;try{var R=A(),oe=te.S;oe!==null&&oe(ae,R),typeof R=="object"&&R!==null&&typeof R.then=="function"&&R.then(re,se)}catch(Ee){se(Ee)}finally{te.T=ee}},tt.unstable_useCacheRefresh=function(){return te.H.useCacheRefresh()},tt.use=function(A){return te.H.use(A)},tt.useActionState=function(A,ee,ae){return te.H.useActionState(A,ee,ae)},tt.useCallback=function(A,ee){return te.H.useCallback(A,ee)},tt.useContext=function(A){return te.H.useContext(A)},tt.useDebugValue=function(){},tt.useDeferredValue=function(A,ee){return te.H.useDeferredValue(A,ee)},tt.useEffect=function(A,ee,ae){var R=te.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return R.useEffect(A,ee)},tt.useId=function(){return te.H.useId()},tt.useImperativeHandle=function(A,ee,ae){return te.H.useImperativeHandle(A,ee,ae)},tt.useInsertionEffect=function(A,ee){return te.H.useInsertionEffect(A,ee)},tt.useLayoutEffect=function(A,ee){return te.H.useLayoutEffect(A,ee)},tt.useMemo=function(A,ee){return te.H.useMemo(A,ee)},tt.useOptimistic=function(A,ee){return te.H.useOptimistic(A,ee)},tt.useReducer=function(A,ee,ae){return te.H.useReducer(A,ee,ae)},tt.useRef=function(A){return te.H.useRef(A)},tt.useState=function(A){return te.H.useState(A)},tt.useSyncExternalStore=function(A,ee,ae){return te.H.useSyncExternalStore(A,ee,ae)},tt.useTransition=function(){return te.H.useTransition()},tt.version="19.1.0",tt}var f2;function ud(){return f2||(f2=1,sy.exports=U6()),sy.exports}var Q=ud();const be=_p(Q),H6=P6({__proto__:null,default:be},[Q]);var ay={exports:{}},th={},oy={exports:{}},uy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p2;function V6(){return p2||(p2=1,function(t){function e(z,J){var se=z.length;z.push(J);e:for(;0<se;){var re=se-1>>>1,A=z[re];if(0<s(A,J))z[re]=J,z[se]=A,se=re;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var J=z[0],se=z.pop();if(se!==J){z[0]=se;e:for(var re=0,A=z.length,ee=A>>>1;re<ee;){var ae=2*(re+1)-1,R=z[ae],oe=ae+1,Ee=z[oe];if(0>s(R,se))oe<A&&0>s(Ee,R)?(z[re]=Ee,z[oe]=se,re=oe):(z[re]=R,z[ae]=se,re=ae);else if(oe<A&&0>s(Ee,se))z[re]=Ee,z[oe]=se,re=oe;else break e}}return J}function s(z,J){var se=z.sortIndex-J.sortIndex;return se!==0?se:z.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();t.unstable_now=function(){return u.now()-c}}var d=[],f=[],m=1,y=null,b=3,T=!1,w=!1,I=!1,L=!1,k=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function j(z){for(var J=n(f);J!==null;){if(J.callback===null)r(f);else if(J.startTime<=z)r(f),J.sortIndex=J.expirationTime,e(d,J);else break;J=n(f)}}function te(z){if(I=!1,j(z),!w)if(n(d)!==null)w=!0,Y||(Y=!0,V());else{var J=n(f);J!==null&&K(te,J.startTime-z)}}var Y=!1,M=-1,N=5,D=-1;function U(){return L?!0:!(t.unstable_now()-D<N)}function B(){if(L=!1,Y){var z=t.unstable_now();D=z;var J=!0;try{e:{w=!1,I&&(I=!1,q(M),M=-1),T=!0;var se=b;try{t:{for(j(z),y=n(d);y!==null&&!(y.expirationTime>z&&U());){var re=y.callback;if(typeof re=="function"){y.callback=null,b=y.priorityLevel;var A=re(y.expirationTime<=z);if(z=t.unstable_now(),typeof A=="function"){y.callback=A,j(z),J=!0;break t}y===n(d)&&r(d),j(z)}else r(d);y=n(d)}if(y!==null)J=!0;else{var ee=n(f);ee!==null&&K(te,ee.startTime-z),J=!1}}break e}finally{y=null,b=se,T=!1}J=void 0}}finally{J?V():Y=!1}}}var V;if(typeof $=="function")V=function(){$(B)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,O=C.port2;C.port1.onmessage=B,V=function(){O.postMessage(null)}}else V=function(){k(B,0)};function K(z,J){M=k(function(){z(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(z){switch(b){case 1:case 2:case 3:var J=3;break;default:J=b}var se=b;b=J;try{return z()}finally{b=se}},t.unstable_requestPaint=function(){L=!0},t.unstable_runWithPriority=function(z,J){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var se=b;b=z;try{return J()}finally{b=se}},t.unstable_scheduleCallback=function(z,J,se){var re=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?re+se:re):se=re,z){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=se+A,z={id:m++,callback:J,priorityLevel:z,startTime:se,expirationTime:A,sortIndex:-1},se>re?(z.sortIndex=se,e(f,z),n(d)===null&&z===n(f)&&(I?(q(M),M=-1):I=!0,K(te,se-re))):(z.sortIndex=A,e(d,z),w||T||(w=!0,Y||(Y=!0,V()))),z},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(z){var J=b;return function(){var se=b;b=J;try{return z.apply(this,arguments)}finally{b=se}}}}(uy)),uy}var m2;function z6(){return m2||(m2=1,oy.exports=V6()),oy.exports}var ly={exports:{}},Wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g2;function F6(){if(g2)return Wn;g2=1;var t=ud();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(d,f,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:d,containerInfo:f,implementation:m}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Wn.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,m)},Wn.flushSync=function(d){var f=u.T,m=r.p;try{if(u.T=null,r.p=2,d)return d()}finally{u.T=f,r.p=m,r.d.f()}},Wn.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(d,f))},Wn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},Wn.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,y=c(m,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,T=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?r.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:T}):m==="script"&&r.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:T,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Wn.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=c(f.as,f.crossOrigin);r.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(d)},Wn.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,y=c(m,f.crossOrigin);r.d.L(d,m,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Wn.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=c(f.as,f.crossOrigin);r.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(d)},Wn.requestFormReset=function(d){r.d.r(d)},Wn.unstable_batchedUpdates=function(d,f){return d(f)},Wn.useFormState=function(d,f,m){return u.H.useFormState(d,f,m)},Wn.useFormStatus=function(){return u.H.useHostTransitionStatus()},Wn.version="19.1.0",Wn}var y2;function mw(){if(y2)return ly.exports;y2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ly.exports=F6(),ly.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E2;function j6(){if(E2)return th;E2=1;var t=z6(),e=ud(),n=mw();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var a=i,l=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(l=a.return),i=a.return;while(i)}return a.tag===3?l:null}function u(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(r(188))}function d(i){var a=i.alternate;if(!a){if(a=o(i),a===null)throw Error(r(188));return a!==i?null:i}for(var l=i,h=a;;){var g=l.return;if(g===null)break;var E=g.alternate;if(E===null){if(h=g.return,h!==null){l=h;continue}break}if(g.child===E.child){for(E=g.child;E;){if(E===l)return c(g),i;if(E===h)return c(g),a;E=E.sibling}throw Error(r(188))}if(l.return!==h.return)l=g,h=E;else{for(var x=!1,H=g.child;H;){if(H===l){x=!0,l=g,h=E;break}if(H===h){x=!0,h=g,l=E;break}H=H.sibling}if(!x){for(H=E.child;H;){if(H===l){x=!0,l=E,h=g;break}if(H===h){x=!0,h=E,l=g;break}H=H.sibling}if(!x)throw Error(r(189))}}if(l.alternate!==h)throw Error(r(190))}if(l.tag!==3)throw Error(r(188));return l.stateNode.current===l?i:a}function f(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=f(i),a!==null)return a;i=i.sibling}return null}var m=Object.assign,y=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),$=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function V(i){return i===null||typeof i!="object"?null:(i=B&&i[B]||i["@@iterator"],typeof i=="function"?i:null)}var C=Symbol.for("react.client.reference");function O(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===C?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case L:return"Profiler";case I:return"StrictMode";case te:return"Suspense";case Y:return"SuspenseList";case D:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case T:return"Portal";case $:return(i.displayName||"Context")+".Provider";case q:return(i._context.displayName||"Context")+".Consumer";case j:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case M:return a=i.displayName||null,a!==null?a:O(i.type)||"Memo";case N:a=i._payload,i=i._init;try{return O(i(a))}catch{}}return null}var K=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},re=[],A=-1;function ee(i){return{current:i}}function ae(i){0>A||(i.current=re[A],re[A]=null,A--)}function R(i,a){A++,re[A]=i.current,i.current=a}var oe=ee(null),Ee=ee(null),me=ee(null),we=ee(null);function Ce(i,a){switch(R(me,a),R(Ee,i),R(oe,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?Uv(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=Uv(a),i=Hv(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ae(oe),R(oe,i)}function Le(){ae(oe),ae(Ee),ae(me)}function Ve(i){i.memoizedState!==null&&R(we,i);var a=oe.current,l=Hv(a,i.type);a!==l&&(R(Ee,i),R(oe,l))}function ct(i){Ee.current===i&&(ae(oe),ae(Ee)),we.current===i&&(ae(we),Xc._currentValue=se)}var Tt=Object.prototype.hasOwnProperty,Ze=t.unstable_scheduleCallback,mt=t.unstable_cancelCallback,gt=t.unstable_shouldYield,Xt=t.unstable_requestPaint,Qe=t.unstable_now,Oe=t.unstable_getCurrentPriorityLevel,Ft=t.unstable_ImmediatePriority,An=t.unstable_UserBlockingPriority,un=t.unstable_NormalPriority,sr=t.unstable_LowPriority,Vn=t.unstable_IdlePriority,zn=t.log,Sr=t.unstable_setDisableYieldValue,fe=null,Te=null;function Be(i){if(typeof zn=="function"&&Sr(i),Te&&typeof Te.setStrictMode=="function")try{Te.setStrictMode(fe,i)}catch{}}var ze=Math.clz32?Math.clz32:Mt,at=Math.log,vt=Math.LN2;function Mt(i){return i>>>=0,i===0?32:31-(at(i)/vt|0)|0}var jt=256,ln=4194304;function Gt(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function St(i,a,l){var h=i.pendingLanes;if(h===0)return 0;var g=0,E=i.suspendedLanes,x=i.pingedLanes;i=i.warmLanes;var H=h&134217727;return H!==0?(h=H&~E,h!==0?g=Gt(h):(x&=H,x!==0?g=Gt(x):l||(l=H&~i,l!==0&&(g=Gt(l))))):(H=h&~E,H!==0?g=Gt(H):x!==0?g=Gt(x):l||(l=h&~i,l!==0&&(g=Gt(l)))),g===0?0:a!==0&&a!==g&&(a&E)===0&&(E=g&-g,l=a&-a,E>=l||E===32&&(l&4194048)!==0)?a:g}function en(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Sn(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ds(){var i=jt;return jt<<=1,(jt&4194048)===0&&(jt=256),i}function pi(){var i=ln;return ln<<=1,(ln&62914560)===0&&(ln=4194304),i}function xr(i){for(var a=[],l=0;31>l;l++)a.push(i);return a}function Gr(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function wr(i,a,l,h,g,E){var x=i.pendingLanes;i.pendingLanes=l,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=l,i.entangledLanes&=l,i.errorRecoveryDisabledLanes&=l,i.shellSuspendCounter=0;var H=i.entanglements,Z=i.expirationTimes,he=i.hiddenUpdates;for(l=x&~l;0<l;){var _e=31-ze(l),Ae=1<<_e;H[_e]=0,Z[_e]=-1;var de=he[_e];if(de!==null)for(he[_e]=null,_e=0;_e<de.length;_e++){var pe=de[_e];pe!==null&&(pe.lane&=-536870913)}l&=~Ae}h!==0&&$r(i,h,0),E!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=E&~(x&~a))}function $r(i,a,l){i.pendingLanes|=a,i.suspendedLanes&=~a;var h=31-ze(a);i.entangledLanes|=a,i.entanglements[h]=i.entanglements[h]|1073741824|l&4194090}function no(i,a){var l=i.entangledLanes|=a;for(i=i.entanglements;l;){var h=31-ze(l),g=1<<h;g&a|i[h]&a&&(i[h]|=a),l&=~g}}function Ri(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ks(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ki(){var i=J.p;return i!==0?i:(i=window.event,i===void 0?32:i2(i.type))}function au(i,a){var l=J.p;try{return J.p=i,a()}finally{J.p=l}}var Bt=Math.random().toString(36).slice(2),cn="__reactFiber$"+Bt,tn="__reactProps$"+Bt,hr="__reactContainer$"+Bt,ro="__reactEvents$"+Bt,tc="__reactListeners$"+Bt,Di="__reactHandles$"+Bt,ou="__reactResources$"+Bt,fs="__reactMarker$"+Bt;function Oi(i){delete i[cn],delete i[tn],delete i[ro],delete i[tc],delete i[Di]}function Kr(i){var a=i[cn];if(a)return a;for(var l=i.parentNode;l;){if(a=l[hr]||l[cn]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(i=jv(i);i!==null;){if(l=i[cn])return l;i=jv(i)}return a}i=l,l=i.parentNode}return null}function Xr(i){if(i=i[cn]||i[hr]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Qr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function Fn(i){var a=i[ou];return a||(a=i[ou]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Qt(i){i[fs]=!0}var io=new Set,Xs={};function Cr(i,a){mi(i,a),mi(i+"Capture",a)}function mi(i,a){for(Xs[i]=a,i=0;i<a.length;i++)io.add(a[i])}var so=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uu={},ps={};function lu(i){return Tt.call(ps,i)?!0:Tt.call(uu,i)?!1:so.test(i)?ps[i]=!0:(uu[i]=!0,!1)}function Li(i,a,l){if(lu(a))if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+l)}}function Wr(i,a,l){if(l===null)i.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+l)}}function xn(i,a,l,h){if(h===null)i.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttributeNS(a,l,""+h)}}var Pi,cu;function gi(i){if(Pi===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Pi=a&&a[1]||"",cu=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pi+i+cu}var Qs=!1;function Mi(i,a){if(!i||Qs)return"";Qs=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(pe){var de=pe}Reflect.construct(i,[],Ae)}else{try{Ae.call()}catch(pe){de=pe}i.call(Ae.prototype)}}else{try{throw Error()}catch(pe){de=pe}(Ae=i())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(pe){if(pe&&de&&typeof pe.stack=="string")return[pe.stack,de.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=h.DetermineComponentFrameRoot(),x=E[0],H=E[1];if(x&&H){var Z=x.split(`
`),he=H.split(`
`);for(g=h=0;h<Z.length&&!Z[h].includes("DetermineComponentFrameRoot");)h++;for(;g<he.length&&!he[g].includes("DetermineComponentFrameRoot");)g++;if(h===Z.length||g===he.length)for(h=Z.length-1,g=he.length-1;1<=h&&0<=g&&Z[h]!==he[g];)g--;for(;1<=h&&0<=g;h--,g--)if(Z[h]!==he[g]){if(h!==1||g!==1)do if(h--,g--,0>g||Z[h]!==he[g]){var _e=`
`+Z[h].replace(" at new "," at ");return i.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",i.displayName)),_e}while(1<=h&&0<=g);break}}}finally{Qs=!1,Error.prepareStackTrace=l}return(l=i?i.displayName||i.name:"")?gi(l):""}function nc(i){switch(i.tag){case 26:case 27:case 5:return gi(i.type);case 16:return gi("Lazy");case 13:return gi("Suspense");case 19:return gi("SuspenseList");case 0:case 15:return Mi(i.type,!1);case 11:return Mi(i.type.render,!1);case 1:return Mi(i.type,!0);case 31:return gi("Activity");default:return""}}function hu(i){try{var a="";do a+=nc(i),i=i.return;while(i);return a}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function ar(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function rc(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function um(i){var a=rc(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),h=""+i[a];if(!i.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var g=l.get,E=l.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return g.call(this)},set:function(x){h=""+x,E.call(this,x)}}),Object.defineProperty(i,a,{enumerable:l.enumerable}),{getValue:function(){return h},setValue:function(x){h=""+x},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function du(i){i._valueTracker||(i._valueTracker=um(i))}function ic(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var l=a.getValue(),h="";return i&&(h=rc(i)?i.checked?"true":"false":i.value),i=h,i!==l?(a.setValue(i),!0):!1}function ao(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var lm=/[\n"\\]/g;function mn(i){return i.replace(lm,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ir(i,a,l,h,g,E,x,H){i.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?i.type=x:i.removeAttribute("type"),a!=null?x==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+ar(a)):i.value!==""+ar(a)&&(i.value=""+ar(a)):x!=="submit"&&x!=="reset"||i.removeAttribute("value"),a!=null?Ws(i,x,ar(a)):l!=null?Ws(i,x,ar(l)):h!=null&&i.removeAttribute("value"),g==null&&E!=null&&(i.defaultChecked=!!E),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?i.name=""+ar(H):i.removeAttribute("name")}function oo(i,a,l,h,g,E,x,H){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(i.type=E),a!=null||l!=null){if(!(E!=="submit"&&E!=="reset"||a!=null))return;l=l!=null?""+ar(l):"",a=a!=null?""+ar(a):l,H||a===i.value||(i.value=a),i.defaultValue=a}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=H?i.checked:!!h,i.defaultChecked=!!h,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(i.name=x)}function Ws(i,a,l){a==="number"&&ao(i.ownerDocument)===i||i.defaultValue===""+l||(i.defaultValue=""+l)}function ms(i,a,l,h){if(i=i.options,a){a={};for(var g=0;g<l.length;g++)a["$"+l[g]]=!0;for(l=0;l<i.length;l++)g=a.hasOwnProperty("$"+i[l].value),i[l].selected!==g&&(i[l].selected=g),g&&h&&(i[l].defaultSelected=!0)}else{for(l=""+ar(l),a=null,g=0;g<i.length;g++){if(i[g].value===l){i[g].selected=!0,h&&(i[g].defaultSelected=!0);return}a!==null||i[g].disabled||(a=i[g])}a!==null&&(a.selected=!0)}}function kt(i,a,l){if(a!=null&&(a=""+ar(a),a!==i.value&&(i.value=a),l==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=l!=null?""+ar(l):""}function uo(i,a,l,h){if(a==null){if(h!=null){if(l!=null)throw Error(r(92));if(K(h)){if(1<h.length)throw Error(r(93));h=h[0]}l=h}l==null&&(l=""),a=l}l=ar(a),i.defaultValue=l,h=i.textContent,h===l&&h!==""&&h!==null&&(i.value=h)}function Zr(i,a){if(a){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=a;return}}i.textContent=a}var lo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Rd(i,a,l){var h=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?h?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":h?i.setProperty(a,l):typeof l!="number"||l===0||lo.has(a)?a==="float"?i.cssFloat=l:i[a]=(""+l).trim():i[a]=l+"px"}function sc(i,a,l){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,l!=null){for(var h in l)!l.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var g in a)h=a[g],a.hasOwnProperty(g)&&l[g]!==h&&Rd(i,g,h)}else for(var E in a)a.hasOwnProperty(E)&&Rd(i,E,a[E])}function ac(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fu(i){return hm.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var gs=null;function Jr(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ys=null,Es=null;function oc(i){var a=Xr(i);if(a&&(i=a.stateNode)){var l=i[tn]||null;e:switch(i=a.stateNode,a.type){case"input":if(Ir(i,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+mn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var h=l[a];if(h!==i&&h.form===i.form){var g=h[tn]||null;if(!g)throw Error(r(90));Ir(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<l.length;a++)h=l[a],h.form===i.form&&ic(h)}break e;case"textarea":kt(i,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ms(i,!!l.multiple,a,!1)}}}var Bi=!1;function kd(i,a,l){if(Bi)return i(a,l);Bi=!0;try{var h=i(a);return h}finally{if(Bi=!1,(ys!==null||Es!==null)&&(xf(),ys&&(a=ys,i=Es,Es=ys=null,oc(a),i)))for(a=0;a<i.length;a++)oc(i[a])}}function co(i,a){var l=i.stateNode;if(l===null)return null;var h=l[tn]||null;if(h===null)return null;l=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(r(231,a,typeof l));return l}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ei=!1;if(yi)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){ei=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{ei=!1}var Ui=null,Zs=null,_s=null;function uc(){if(_s)return _s;var i,a=Zs,l=a.length,h,g="value"in Ui?Ui.value:Ui.textContent,E=g.length;for(i=0;i<l&&a[i]===g[i];i++);var x=l-i;for(h=1;h<=x&&a[l-h]===g[E-h];h++);return _s=g.slice(i,1<h?1-h:void 0)}function Hi(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Vi(){return!0}function lc(){return!1}function kn(i){function a(l,h,g,E,x){this._reactName=l,this._targetInst=g,this.type=h,this.nativeEvent=E,this.target=x,this.currentTarget=null;for(var H in i)i.hasOwnProperty(H)&&(l=i[H],this[H]=l?l(E):E[H]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Vi:lc,this.isPropagationStopped=lc,this}return m(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),a}var Ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pu=kn(Ct),fo=m({},Ct,{view:0,detail:0}),Dd=kn(fo),mu,gu,zi,po=m({},fo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==zi&&(zi&&i.type==="mousemove"?(mu=i.screenX-zi.screenX,gu=i.screenY-zi.screenY):gu=mu=0,zi=i),mu)},movementY:function(i){return"movementY"in i?i.movementY:gu}}),ti=kn(po),Od=m({},po,{dataTransfer:0}),dm=kn(Od),mo=m({},fo,{relatedTarget:0}),yu=kn(mo),cc=m({},Ct,{animationName:0,elapsedTime:0,pseudoElement:0}),Eu=kn(cc),Ld=m({},Ct,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),_u=kn(Ld),fm=m({},Ct,{data:0}),hc=kn(fm),go={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Md={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dc(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Md[i])?!!a[i]:!1}function yo(){return dc}var Bd=m({},fo,{key:function(i){if(i.key){var a=go[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Hi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Pd[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yo,charCode:function(i){return i.type==="keypress"?Hi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Hi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),bu=kn(Bd),Ud=m({},po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fc=kn(Ud),bs=m({},fo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yo}),Hd=kn(bs),Vd=m({},Ct,{propertyName:0,elapsedTime:0,pseudoElement:0}),zd=kn(Vd),Fd=m({},po,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Tu=kn(Fd),or=m({},Ct,{newState:0,oldState:0}),jd=kn(or),qd=[9,13,27,32],Fi=yi&&"CompositionEvent"in window,p=null;yi&&"documentMode"in document&&(p=document.documentMode);var v=yi&&"TextEvent"in window&&!p,S=yi&&(!Fi||p&&8<p&&11>=p),F=" ",ue=!1;function ge(i,a){switch(i){case"keyup":return qd.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function De(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var yt=!1;function wn(i,a){switch(i){case"compositionend":return De(a);case"keypress":return a.which!==32?null:(ue=!0,F);case"textInput":return i=a.data,i===F&&ue?null:i;default:return null}}function Et(i,a){if(yt)return i==="compositionend"||!Fi&&ge(i,a)?(i=uc(),_s=Zs=Ui=null,yt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return S&&a.locale!=="ko"?null:a.data;default:return null}}var Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cn(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Dn[i.type]:a==="textarea"}function Ts(i,a,l,h){ys?Es?Es.push(h):Es=[h]:ys=h,a=kf(a,"onChange"),0<a.length&&(l=new pu("onChange","change",null,l,h),i.push({event:l,listeners:a}))}var jn=null,ji=null;function pc(i){Ov(i,0)}function Yd(i){var a=Qr(i);if(ic(a))return i}function eb(i,a){if(i==="change")return a}var tb=!1;if(yi){var pm;if(yi){var mm="oninput"in document;if(!mm){var nb=document.createElement("div");nb.setAttribute("oninput","return;"),mm=typeof nb.oninput=="function"}pm=mm}else pm=!1;tb=pm&&(!document.documentMode||9<document.documentMode)}function rb(){jn&&(jn.detachEvent("onpropertychange",ib),ji=jn=null)}function ib(i){if(i.propertyName==="value"&&Yd(ji)){var a=[];Ts(a,ji,i,Jr(i)),kd(pc,a)}}function h4(i,a,l){i==="focusin"?(rb(),jn=a,ji=l,jn.attachEvent("onpropertychange",ib)):i==="focusout"&&rb()}function d4(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Yd(ji)}function f4(i,a){if(i==="click")return Yd(a)}function p4(i,a){if(i==="input"||i==="change")return Yd(a)}function m4(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var Nr=typeof Object.is=="function"?Object.is:m4;function mc(i,a){if(Nr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var l=Object.keys(i),h=Object.keys(a);if(l.length!==h.length)return!1;for(h=0;h<l.length;h++){var g=l[h];if(!Tt.call(a,g)||!Nr(i[g],a[g]))return!1}return!0}function sb(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function ab(i,a){var l=sb(i);i=0;for(var h;l;){if(l.nodeType===3){if(h=i+l.textContent.length,i<=a&&h>=a)return{node:l,offset:a-i};i=h}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=sb(l)}}function ob(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?ob(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function ub(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=ao(i.document);a instanceof i.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)i=a.contentWindow;else break;a=ao(i.document)}return a}function gm(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var g4=yi&&"documentMode"in document&&11>=document.documentMode,vu=null,ym=null,gc=null,Em=!1;function lb(i,a,l){var h=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Em||vu==null||vu!==ao(h)||(h=vu,"selectionStart"in h&&gm(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),gc&&mc(gc,h)||(gc=h,h=kf(ym,"onSelect"),0<h.length&&(a=new pu("onSelect","select",null,a,l),i.push({event:a,listeners:h}),a.target=vu)))}function Eo(i,a){var l={};return l[i.toLowerCase()]=a.toLowerCase(),l["Webkit"+i]="webkit"+a,l["Moz"+i]="moz"+a,l}var Au={animationend:Eo("Animation","AnimationEnd"),animationiteration:Eo("Animation","AnimationIteration"),animationstart:Eo("Animation","AnimationStart"),transitionrun:Eo("Transition","TransitionRun"),transitionstart:Eo("Transition","TransitionStart"),transitioncancel:Eo("Transition","TransitionCancel"),transitionend:Eo("Transition","TransitionEnd")},_m={},cb={};yi&&(cb=document.createElement("div").style,"AnimationEvent"in window||(delete Au.animationend.animation,delete Au.animationiteration.animation,delete Au.animationstart.animation),"TransitionEvent"in window||delete Au.transitionend.transition);function _o(i){if(_m[i])return _m[i];if(!Au[i])return i;var a=Au[i],l;for(l in a)if(a.hasOwnProperty(l)&&l in cb)return _m[i]=a[l];return i}var hb=_o("animationend"),db=_o("animationiteration"),fb=_o("animationstart"),y4=_o("transitionrun"),E4=_o("transitionstart"),_4=_o("transitioncancel"),pb=_o("transitionend"),mb=new Map,bm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bm.push("scrollEnd");function Ei(i,a){mb.set(i,a),Cr(a,[i])}var gb=new WeakMap;function ni(i,a){if(typeof i=="object"&&i!==null){var l=gb.get(i);return l!==void 0?l:(a={value:i,source:a,stack:hu(a)},gb.set(i,a),a)}return{value:i,source:a,stack:hu(a)}}var ri=[],Su=0,Tm=0;function Gd(){for(var i=Su,a=Tm=Su=0;a<i;){var l=ri[a];ri[a++]=null;var h=ri[a];ri[a++]=null;var g=ri[a];ri[a++]=null;var E=ri[a];if(ri[a++]=null,h!==null&&g!==null){var x=h.pending;x===null?g.next=g:(g.next=x.next,x.next=g),h.pending=g}E!==0&&yb(l,g,E)}}function $d(i,a,l,h){ri[Su++]=i,ri[Su++]=a,ri[Su++]=l,ri[Su++]=h,Tm|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function vm(i,a,l,h){return $d(i,a,l,h),Kd(i)}function xu(i,a){return $d(i,null,null,a),Kd(i)}function yb(i,a,l){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l);for(var g=!1,E=i.return;E!==null;)E.childLanes|=l,h=E.alternate,h!==null&&(h.childLanes|=l),E.tag===22&&(i=E.stateNode,i===null||i._visibility&1||(g=!0)),i=E,E=E.return;return i.tag===3?(E=i.stateNode,g&&a!==null&&(g=31-ze(l),i=E.hiddenUpdates,h=i[g],h===null?i[g]=[a]:h.push(a),a.lane=l|536870912),E):null}function Kd(i){if(50<zc)throw zc=0,Ig=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var wu={};function b4(i,a,l,h){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(i,a,l,h){return new b4(i,a,l,h)}function Am(i){return i=i.prototype,!(!i||!i.isReactComponent)}function vs(i,a){var l=i.alternate;return l===null?(l=Rr(i.tag,a,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=a,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&65011712,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,a=i.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l.refCleanup=i.refCleanup,l}function Eb(i,a){i.flags&=65011714;var l=i.alternate;return l===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,a=l.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Xd(i,a,l,h,g,E){var x=0;if(h=i,typeof i=="function")Am(i)&&(x=1);else if(typeof i=="string")x=v6(i,l,oe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case D:return i=Rr(31,l,a,g),i.elementType=D,i.lanes=E,i;case w:return bo(l.children,g,E,a);case I:x=8,g|=24;break;case L:return i=Rr(12,l,a,g|2),i.elementType=L,i.lanes=E,i;case te:return i=Rr(13,l,a,g),i.elementType=te,i.lanes=E,i;case Y:return i=Rr(19,l,a,g),i.elementType=Y,i.lanes=E,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case k:case $:x=10;break e;case q:x=9;break e;case j:x=11;break e;case M:x=14;break e;case N:x=16,h=null;break e}x=29,l=Error(r(130,i===null?"null":typeof i,"")),h=null}return a=Rr(x,l,a,g),a.elementType=i,a.type=h,a.lanes=E,a}function bo(i,a,l,h){return i=Rr(7,i,h,a),i.lanes=l,i}function Sm(i,a,l){return i=Rr(6,i,null,a),i.lanes=l,i}function xm(i,a,l){return a=Rr(4,i.children!==null?i.children:[],i.key,a),a.lanes=l,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Cu=[],Iu=0,Qd=null,Wd=0,ii=[],si=0,To=null,As=1,Ss="";function vo(i,a){Cu[Iu++]=Wd,Cu[Iu++]=Qd,Qd=i,Wd=a}function _b(i,a,l){ii[si++]=As,ii[si++]=Ss,ii[si++]=To,To=i;var h=As;i=Ss;var g=32-ze(h)-1;h&=~(1<<g),l+=1;var E=32-ze(a)+g;if(30<E){var x=g-g%5;E=(h&(1<<x)-1).toString(32),h>>=x,g-=x,As=1<<32-ze(a)+g|l<<g|h,Ss=E+i}else As=1<<E|l<<g|h,Ss=i}function wm(i){i.return!==null&&(vo(i,1),_b(i,1,0))}function Cm(i){for(;i===Qd;)Qd=Cu[--Iu],Cu[Iu]=null,Wd=Cu[--Iu],Cu[Iu]=null;for(;i===To;)To=ii[--si],ii[si]=null,Ss=ii[--si],ii[si]=null,As=ii[--si],ii[si]=null}var ur=null,nn=null,xt=!1,Ao=null,qi=!1,Im=Error(r(519));function So(i){var a=Error(r(418,""));throw _c(ni(a,i)),Im}function bb(i){var a=i.stateNode,l=i.type,h=i.memoizedProps;switch(a[cn]=i,a[tn]=h,l){case"dialog":dt("cancel",a),dt("close",a);break;case"iframe":case"object":case"embed":dt("load",a);break;case"video":case"audio":for(l=0;l<jc.length;l++)dt(jc[l],a);break;case"source":dt("error",a);break;case"img":case"image":case"link":dt("error",a),dt("load",a);break;case"details":dt("toggle",a);break;case"input":dt("invalid",a),oo(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),du(a);break;case"select":dt("invalid",a);break;case"textarea":dt("invalid",a),uo(a,h.value,h.defaultValue,h.children),du(a)}l=h.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||h.suppressHydrationWarning===!0||Bv(a.textContent,l)?(h.popover!=null&&(dt("beforetoggle",a),dt("toggle",a)),h.onScroll!=null&&dt("scroll",a),h.onScrollEnd!=null&&dt("scrollend",a),h.onClick!=null&&(a.onclick=Df),a=!0):a=!1,a||So(i)}function Tb(i){for(ur=i.return;ur;)switch(ur.tag){case 5:case 13:qi=!1;return;case 27:case 3:qi=!0;return;default:ur=ur.return}}function yc(i){if(i!==ur)return!1;if(!xt)return Tb(i),xt=!0,!1;var a=i.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=i.type,l=!(l!=="form"&&l!=="button")||qg(i.type,i.memoizedProps)),l=!l),l&&nn&&So(i),Tb(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(l=i.data,l==="/$"){if(a===0){nn=bi(i.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++;i=i.nextSibling}nn=null}}else a===27?(a=nn,pa(i.type)?(i=Kg,Kg=null,nn=i):nn=a):nn=ur?bi(i.stateNode.nextSibling):null;return!0}function Ec(){nn=ur=null,xt=!1}function vb(){var i=Ao;return i!==null&&(pr===null?pr=i:pr.push.apply(pr,i),Ao=null),i}function _c(i){Ao===null?Ao=[i]:Ao.push(i)}var Nm=ee(null),xo=null,xs=null;function Js(i,a,l){R(Nm,a._currentValue),a._currentValue=l}function ws(i){i._currentValue=Nm.current,ae(Nm)}function Rm(i,a,l){for(;i!==null;){var h=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),i===l)break;i=i.return}}function km(i,a,l,h){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var E=g.dependencies;if(E!==null){var x=g.child;E=E.firstContext;e:for(;E!==null;){var H=E;E=g;for(var Z=0;Z<a.length;Z++)if(H.context===a[Z]){E.lanes|=l,H=E.alternate,H!==null&&(H.lanes|=l),Rm(E.return,l,i),h||(x=null);break e}E=H.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(r(341));x.lanes|=l,E=x.alternate,E!==null&&(E.lanes|=l),Rm(x,l,i),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===i){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function bc(i,a,l,h){i=null;for(var g=a,E=!1;g!==null;){if(!E){if((g.flags&524288)!==0)E=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(r(387));if(x=x.memoizedProps,x!==null){var H=g.type;Nr(g.pendingProps.value,x.value)||(i!==null?i.push(H):i=[H])}}else if(g===we.current){if(x=g.alternate,x===null)throw Error(r(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(Xc):i=[Xc])}g=g.return}i!==null&&km(a,i,l,h),a.flags|=262144}function Zd(i){for(i=i.firstContext;i!==null;){if(!Nr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function wo(i){xo=i,xs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Qn(i){return Ab(xo,i)}function Jd(i,a){return xo===null&&wo(i),Ab(i,a)}function Ab(i,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},xs===null){if(i===null)throw Error(r(308));xs=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else xs=xs.next=a;return l}var T4=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(l,h){i.push(h)}};this.abort=function(){a.aborted=!0,i.forEach(function(l){return l()})}},v4=t.unstable_scheduleCallback,A4=t.unstable_NormalPriority,In={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Dm(){return{controller:new T4,data:new Map,refCount:0}}function Tc(i){i.refCount--,i.refCount===0&&v4(A4,function(){i.controller.abort()})}var vc=null,Om=0,Nu=0,Ru=null;function S4(i,a){if(vc===null){var l=vc=[];Om=0,Nu=Pg(),Ru={status:"pending",value:void 0,then:function(h){l.push(h)}}}return Om++,a.then(Sb,Sb),a}function Sb(){if(--Om===0&&vc!==null){Ru!==null&&(Ru.status="fulfilled");var i=vc;vc=null,Nu=0,Ru=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function x4(i,a){var l=[],h={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return i.then(function(){h.status="fulfilled",h.value=a;for(var g=0;g<l.length;g++)(0,l[g])(a)},function(g){for(h.status="rejected",h.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),h}var xb=z.S;z.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&S4(i,a),xb!==null&&xb(i,a)};var Co=ee(null);function Lm(){var i=Co.current;return i!==null?i:Ut.pooledCache}function ef(i,a){a===null?R(Co,Co.current):R(Co,a.pool)}function wb(){var i=Lm();return i===null?null:{parent:In._currentValue,pool:i}}var Ac=Error(r(460)),Cb=Error(r(474)),tf=Error(r(542)),Pm={then:function(){}};function Ib(i){return i=i.status,i==="fulfilled"||i==="rejected"}function nf(){}function Nb(i,a,l){switch(l=i[l],l===void 0?i.push(a):l!==a&&(a.then(nf,nf),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,kb(i),i;default:if(typeof a.status=="string")a.then(nf,nf);else{if(i=Ut,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(h){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=h}},function(h){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,kb(i),i}throw Sc=a,Ac}}var Sc=null;function Rb(){if(Sc===null)throw Error(r(459));var i=Sc;return Sc=null,i}function kb(i){if(i===Ac||i===tf)throw Error(r(483))}var ea=!1;function Mm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bm(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ta(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function na(i,a,l){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(Nt&2)!==0){var g=h.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),h.pending=a,a=Kd(i),yb(i,null,l),a}return $d(i,h,a,l),Kd(i)}function xc(i,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,no(i,l)}}function Um(i,a){var l=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,l===h)){var g=null,E=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};E===null?g=E=x:E=E.next=x,l=l.next}while(l!==null);E===null?g=E=a:E=E.next=a}else g=E=a;l={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:E,shared:h.shared,callbacks:h.callbacks},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=a:i.next=a,l.lastBaseUpdate=a}var Hm=!1;function wc(){if(Hm){var i=Ru;if(i!==null)throw i}}function Cc(i,a,l,h){Hm=!1;var g=i.updateQueue;ea=!1;var E=g.firstBaseUpdate,x=g.lastBaseUpdate,H=g.shared.pending;if(H!==null){g.shared.pending=null;var Z=H,he=Z.next;Z.next=null,x===null?E=he:x.next=he,x=Z;var _e=i.alternate;_e!==null&&(_e=_e.updateQueue,H=_e.lastBaseUpdate,H!==x&&(H===null?_e.firstBaseUpdate=he:H.next=he,_e.lastBaseUpdate=Z))}if(E!==null){var Ae=g.baseState;x=0,_e=he=Z=null,H=E;do{var de=H.lane&-536870913,pe=de!==H.lane;if(pe?(_t&de)===de:(h&de)===de){de!==0&&de===Nu&&(Hm=!0),_e!==null&&(_e=_e.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});e:{var Ke=i,qe=H;de=a;var Lt=l;switch(qe.tag){case 1:if(Ke=qe.payload,typeof Ke=="function"){Ae=Ke.call(Lt,Ae,de);break e}Ae=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=qe.payload,de=typeof Ke=="function"?Ke.call(Lt,Ae,de):Ke,de==null)break e;Ae=m({},Ae,de);break e;case 2:ea=!0}}de=H.callback,de!==null&&(i.flags|=64,pe&&(i.flags|=8192),pe=g.callbacks,pe===null?g.callbacks=[de]:pe.push(de))}else pe={lane:de,tag:H.tag,payload:H.payload,callback:H.callback,next:null},_e===null?(he=_e=pe,Z=Ae):_e=_e.next=pe,x|=de;if(H=H.next,H===null){if(H=g.shared.pending,H===null)break;pe=H,H=pe.next,pe.next=null,g.lastBaseUpdate=pe,g.shared.pending=null}}while(!0);_e===null&&(Z=Ae),g.baseState=Z,g.firstBaseUpdate=he,g.lastBaseUpdate=_e,E===null&&(g.shared.lanes=0),ca|=x,i.lanes=x,i.memoizedState=Ae}}function Db(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function Ob(i,a){var l=i.callbacks;if(l!==null)for(i.callbacks=null,i=0;i<l.length;i++)Db(l[i],a)}var ku=ee(null),rf=ee(0);function Lb(i,a){i=Os,R(rf,i),R(ku,a),Os=i|a.baseLanes}function Vm(){R(rf,Os),R(ku,ku.current)}function zm(){Os=rf.current,ae(ku),ae(rf)}var ra=0,it=null,Dt=null,gn=null,sf=!1,Du=!1,Io=!1,af=0,Ic=0,Ou=null,w4=0;function hn(){throw Error(r(321))}function Fm(i,a){if(a===null)return!1;for(var l=0;l<a.length&&l<i.length;l++)if(!Nr(i[l],a[l]))return!1;return!0}function jm(i,a,l,h,g,E){return ra=E,it=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,z.H=i===null||i.memoizedState===null?yT:ET,Io=!1,E=l(h,g),Io=!1,Du&&(E=Mb(a,l,h,g)),Pb(i),E}function Pb(i){z.H=df;var a=Dt!==null&&Dt.next!==null;if(ra=0,gn=Dt=it=null,sf=!1,Ic=0,Ou=null,a)throw Error(r(300));i===null||On||(i=i.dependencies,i!==null&&Zd(i)&&(On=!0))}function Mb(i,a,l,h){it=i;var g=0;do{if(Du&&(Ou=null),Ic=0,Du=!1,25<=g)throw Error(r(301));if(g+=1,gn=Dt=null,i.updateQueue!=null){var E=i.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}z.H=O4,E=a(l,h)}while(Du);return E}function C4(){var i=z.H,a=i.useState()[0];return a=typeof a.then=="function"?Nc(a):a,i=i.useState()[0],(Dt!==null?Dt.memoizedState:null)!==i&&(it.flags|=1024),a}function qm(){var i=af!==0;return af=0,i}function Ym(i,a,l){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~l}function Gm(i){if(sf){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}sf=!1}ra=0,gn=Dt=it=null,Du=!1,Ic=af=0,Ou=null}function dr(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?it.memoizedState=gn=i:gn=gn.next=i,gn}function yn(){if(Dt===null){var i=it.alternate;i=i!==null?i.memoizedState:null}else i=Dt.next;var a=gn===null?it.memoizedState:gn.next;if(a!==null)gn=a,Dt=i;else{if(i===null)throw it.alternate===null?Error(r(467)):Error(r(310));Dt=i,i={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},gn===null?it.memoizedState=gn=i:gn=gn.next=i}return gn}function $m(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nc(i){var a=Ic;return Ic+=1,Ou===null&&(Ou=[]),i=Nb(Ou,i,a),a=it,(gn===null?a.memoizedState:gn.next)===null&&(a=a.alternate,z.H=a===null||a.memoizedState===null?yT:ET),i}function of(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Nc(i);if(i.$$typeof===$)return Qn(i)}throw Error(r(438,String(i)))}function Km(i){var a=null,l=it.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var h=it.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=$m(),it.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(i),h=0;h<i;h++)l[h]=U;return a.index++,l}function Cs(i,a){return typeof a=="function"?a(i):a}function uf(i){var a=yn();return Xm(a,Dt,i)}function Xm(i,a,l){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=l;var g=i.baseQueue,E=h.pending;if(E!==null){if(g!==null){var x=g.next;g.next=E.next,E.next=x}a.baseQueue=g=E,h.pending=null}if(E=i.baseState,g===null)i.memoizedState=E;else{a=g.next;var H=x=null,Z=null,he=a,_e=!1;do{var Ae=he.lane&-536870913;if(Ae!==he.lane?(_t&Ae)===Ae:(ra&Ae)===Ae){var de=he.revertLane;if(de===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),Ae===Nu&&(_e=!0);else if((ra&de)===de){he=he.next,de===Nu&&(_e=!0);continue}else Ae={lane:0,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(H=Z=Ae,x=E):Z=Z.next=Ae,it.lanes|=de,ca|=de;Ae=he.action,Io&&l(E,Ae),E=he.hasEagerState?he.eagerState:l(E,Ae)}else de={lane:Ae,revertLane:he.revertLane,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null},Z===null?(H=Z=de,x=E):Z=Z.next=de,it.lanes|=Ae,ca|=Ae;he=he.next}while(he!==null&&he!==a);if(Z===null?x=E:Z.next=H,!Nr(E,i.memoizedState)&&(On=!0,_e&&(l=Ru,l!==null)))throw l;i.memoizedState=E,i.baseState=x,i.baseQueue=Z,h.lastRenderedState=E}return g===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Qm(i){var a=yn(),l=a.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=i;var h=l.dispatch,g=l.pending,E=a.memoizedState;if(g!==null){l.pending=null;var x=g=g.next;do E=i(E,x.action),x=x.next;while(x!==g);Nr(E,a.memoizedState)||(On=!0),a.memoizedState=E,a.baseQueue===null&&(a.baseState=E),l.lastRenderedState=E}return[E,h]}function Bb(i,a,l){var h=it,g=yn(),E=xt;if(E){if(l===void 0)throw Error(r(407));l=l()}else l=a();var x=!Nr((Dt||g).memoizedState,l);x&&(g.memoizedState=l,On=!0),g=g.queue;var H=Vb.bind(null,h,g,i);if(Rc(2048,8,H,[i]),g.getSnapshot!==a||x||gn!==null&&gn.memoizedState.tag&1){if(h.flags|=2048,Lu(9,lf(),Hb.bind(null,h,g,l,a),null),Ut===null)throw Error(r(349));E||(ra&124)!==0||Ub(h,a,l)}return l}function Ub(i,a,l){i.flags|=16384,i={getSnapshot:a,value:l},a=it.updateQueue,a===null?(a=$m(),it.updateQueue=a,a.stores=[i]):(l=a.stores,l===null?a.stores=[i]:l.push(i))}function Hb(i,a,l,h){a.value=l,a.getSnapshot=h,zb(a)&&Fb(i)}function Vb(i,a,l){return l(function(){zb(a)&&Fb(i)})}function zb(i){var a=i.getSnapshot;i=i.value;try{var l=a();return!Nr(i,l)}catch{return!0}}function Fb(i){var a=xu(i,2);a!==null&&Pr(a,i,2)}function Wm(i){var a=dr();if(typeof i=="function"){var l=i;if(i=l(),Io){Be(!0);try{l()}finally{Be(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:i},a}function jb(i,a,l,h){return i.baseState=l,Xm(i,Dt,typeof h=="function"?h:Cs)}function I4(i,a,l,h,g){if(hf(i))throw Error(r(485));if(i=a.action,i!==null){var E={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){E.listeners.push(x)}};z.T!==null?l(!0):E.isTransition=!1,h(E),l=a.pending,l===null?(E.next=a.pending=E,qb(a,E)):(E.next=l.next,a.pending=l.next=E)}}function qb(i,a){var l=a.action,h=a.payload,g=i.state;if(a.isTransition){var E=z.T,x={};z.T=x;try{var H=l(g,h),Z=z.S;Z!==null&&Z(x,H),Yb(i,a,H)}catch(he){Zm(i,a,he)}finally{z.T=E}}else try{E=l(g,h),Yb(i,a,E)}catch(he){Zm(i,a,he)}}function Yb(i,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(h){Gb(i,a,h)},function(h){return Zm(i,a,h)}):Gb(i,a,l)}function Gb(i,a,l){a.status="fulfilled",a.value=l,$b(a),i.state=l,a=i.pending,a!==null&&(l=a.next,l===a?i.pending=null:(l=l.next,a.next=l,qb(i,l)))}function Zm(i,a,l){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=l,$b(a),a=a.next;while(a!==h)}i.action=null}function $b(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Kb(i,a){return a}function Xb(i,a){if(xt){var l=Ut.formState;if(l!==null){e:{var h=it;if(xt){if(nn){t:{for(var g=nn,E=qi;g.nodeType!==8;){if(!E){g=null;break t}if(g=bi(g.nextSibling),g===null){g=null;break t}}E=g.data,g=E==="F!"||E==="F"?g:null}if(g){nn=bi(g.nextSibling),h=g.data==="F!";break e}}So(h)}h=!1}h&&(a=l[0])}}return l=dr(),l.memoizedState=l.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kb,lastRenderedState:a},l.queue=h,l=pT.bind(null,it,h),h.dispatch=l,h=Wm(!1),E=rg.bind(null,it,!1,h.queue),h=dr(),g={state:a,dispatch:null,action:i,pending:null},h.queue=g,l=I4.bind(null,it,g,E,l),g.dispatch=l,h.memoizedState=i,[a,l,!1]}function Qb(i){var a=yn();return Wb(a,Dt,i)}function Wb(i,a,l){if(a=Xm(i,a,Kb)[0],i=uf(Cs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Nc(a)}catch(x){throw x===Ac?tf:x}else h=a;a=yn();var g=a.queue,E=g.dispatch;return l!==a.memoizedState&&(it.flags|=2048,Lu(9,lf(),N4.bind(null,g,l),null)),[h,E,i]}function N4(i,a){i.action=a}function Zb(i){var a=yn(),l=Dt;if(l!==null)return Wb(a,l,i);yn(),a=a.memoizedState,l=yn();var h=l.queue.dispatch;return l.memoizedState=i,[a,h,!1]}function Lu(i,a,l,h){return i={tag:i,create:l,deps:h,inst:a,next:null},a=it.updateQueue,a===null&&(a=$m(),it.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=i.next=i:(h=l.next,l.next=i,i.next=h,a.lastEffect=i),i}function lf(){return{destroy:void 0,resource:void 0}}function Jb(){return yn().memoizedState}function cf(i,a,l,h){var g=dr();h=h===void 0?null:h,it.flags|=i,g.memoizedState=Lu(1|a,lf(),l,h)}function Rc(i,a,l,h){var g=yn();h=h===void 0?null:h;var E=g.memoizedState.inst;Dt!==null&&h!==null&&Fm(h,Dt.memoizedState.deps)?g.memoizedState=Lu(a,E,l,h):(it.flags|=i,g.memoizedState=Lu(1|a,E,l,h))}function eT(i,a){cf(8390656,8,i,a)}function tT(i,a){Rc(2048,8,i,a)}function nT(i,a){return Rc(4,2,i,a)}function rT(i,a){return Rc(4,4,i,a)}function iT(i,a){if(typeof a=="function"){i=i();var l=a(i);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function sT(i,a,l){l=l!=null?l.concat([i]):null,Rc(4,4,iT.bind(null,a,i),l)}function Jm(){}function aT(i,a){var l=yn();a=a===void 0?null:a;var h=l.memoizedState;return a!==null&&Fm(a,h[1])?h[0]:(l.memoizedState=[i,a],i)}function oT(i,a){var l=yn();a=a===void 0?null:a;var h=l.memoizedState;if(a!==null&&Fm(a,h[1]))return h[0];if(h=i(),Io){Be(!0);try{i()}finally{Be(!1)}}return l.memoizedState=[h,a],h}function eg(i,a,l){return l===void 0||(ra&1073741824)!==0?i.memoizedState=a:(i.memoizedState=l,i=cv(),it.lanes|=i,ca|=i,l)}function uT(i,a,l,h){return Nr(l,a)?l:ku.current!==null?(i=eg(i,l,h),Nr(i,a)||(On=!0),i):(ra&42)===0?(On=!0,i.memoizedState=l):(i=cv(),it.lanes|=i,ca|=i,a)}function lT(i,a,l,h,g){var E=J.p;J.p=E!==0&&8>E?E:8;var x=z.T,H={};z.T=H,rg(i,!1,a,l);try{var Z=g(),he=z.S;if(he!==null&&he(H,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var _e=x4(Z,h);kc(i,a,_e,Lr(i))}else kc(i,a,h,Lr(i))}catch(Ae){kc(i,a,{then:function(){},status:"rejected",reason:Ae},Lr())}finally{J.p=E,z.T=x}}function R4(){}function tg(i,a,l,h){if(i.tag!==5)throw Error(r(476));var g=cT(i).queue;lT(i,g,a,se,l===null?R4:function(){return hT(i),l(h)})}function cT(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:se},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:l},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function hT(i){var a=cT(i).next.queue;kc(i,a,{},Lr())}function ng(){return Qn(Xc)}function dT(){return yn().memoizedState}function fT(){return yn().memoizedState}function k4(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var l=Lr();i=ta(l);var h=na(a,i,l);h!==null&&(Pr(h,a,l),xc(h,a,l)),a={cache:Dm()},i.payload=a;return}a=a.return}}function D4(i,a,l){var h=Lr();l={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},hf(i)?mT(a,l):(l=vm(i,a,l,h),l!==null&&(Pr(l,i,h),gT(l,a,h)))}function pT(i,a,l){var h=Lr();kc(i,a,l,h)}function kc(i,a,l,h){var g={lane:h,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(hf(i))mT(a,g);else{var E=i.alternate;if(i.lanes===0&&(E===null||E.lanes===0)&&(E=a.lastRenderedReducer,E!==null))try{var x=a.lastRenderedState,H=E(x,l);if(g.hasEagerState=!0,g.eagerState=H,Nr(H,x))return $d(i,a,g,0),Ut===null&&Gd(),!1}catch{}finally{}if(l=vm(i,a,g,h),l!==null)return Pr(l,i,h),gT(l,a,h),!0}return!1}function rg(i,a,l,h){if(h={lane:2,revertLane:Pg(),action:h,hasEagerState:!1,eagerState:null,next:null},hf(i)){if(a)throw Error(r(479))}else a=vm(i,l,h,2),a!==null&&Pr(a,i,2)}function hf(i){var a=i.alternate;return i===it||a!==null&&a===it}function mT(i,a){Du=sf=!0;var l=i.pending;l===null?a.next=a:(a.next=l.next,l.next=a),i.pending=a}function gT(i,a,l){if((l&4194048)!==0){var h=a.lanes;h&=i.pendingLanes,l|=h,a.lanes=l,no(i,l)}}var df={readContext:Qn,use:of,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn},yT={readContext:Qn,use:of,useCallback:function(i,a){return dr().memoizedState=[i,a===void 0?null:a],i},useContext:Qn,useEffect:eT,useImperativeHandle:function(i,a,l){l=l!=null?l.concat([i]):null,cf(4194308,4,iT.bind(null,a,i),l)},useLayoutEffect:function(i,a){return cf(4194308,4,i,a)},useInsertionEffect:function(i,a){cf(4,2,i,a)},useMemo:function(i,a){var l=dr();a=a===void 0?null:a;var h=i();if(Io){Be(!0);try{i()}finally{Be(!1)}}return l.memoizedState=[h,a],h},useReducer:function(i,a,l){var h=dr();if(l!==void 0){var g=l(a);if(Io){Be(!0);try{l(a)}finally{Be(!1)}}}else g=a;return h.memoizedState=h.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},h.queue=i,i=i.dispatch=D4.bind(null,it,i),[h.memoizedState,i]},useRef:function(i){var a=dr();return i={current:i},a.memoizedState=i},useState:function(i){i=Wm(i);var a=i.queue,l=pT.bind(null,it,a);return a.dispatch=l,[i.memoizedState,l]},useDebugValue:Jm,useDeferredValue:function(i,a){var l=dr();return eg(l,i,a)},useTransition:function(){var i=Wm(!1);return i=lT.bind(null,it,i.queue,!0,!1),dr().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,l){var h=it,g=dr();if(xt){if(l===void 0)throw Error(r(407));l=l()}else{if(l=a(),Ut===null)throw Error(r(349));(_t&124)!==0||Ub(h,a,l)}g.memoizedState=l;var E={value:l,getSnapshot:a};return g.queue=E,eT(Vb.bind(null,h,E,i),[i]),h.flags|=2048,Lu(9,lf(),Hb.bind(null,h,E,l,a),null),l},useId:function(){var i=dr(),a=Ut.identifierPrefix;if(xt){var l=Ss,h=As;l=(h&~(1<<32-ze(h)-1)).toString(32)+l,a=""+a+"R"+l,l=af++,0<l&&(a+="H"+l.toString(32)),a+=""}else l=w4++,a=""+a+"r"+l.toString(32)+"";return i.memoizedState=a},useHostTransitionStatus:ng,useFormState:Xb,useActionState:Xb,useOptimistic:function(i){var a=dr();a.memoizedState=a.baseState=i;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=rg.bind(null,it,!0,l),l.dispatch=a,[i,a]},useMemoCache:Km,useCacheRefresh:function(){return dr().memoizedState=k4.bind(null,it)}},ET={readContext:Qn,use:of,useCallback:aT,useContext:Qn,useEffect:tT,useImperativeHandle:sT,useInsertionEffect:nT,useLayoutEffect:rT,useMemo:oT,useReducer:uf,useRef:Jb,useState:function(){return uf(Cs)},useDebugValue:Jm,useDeferredValue:function(i,a){var l=yn();return uT(l,Dt.memoizedState,i,a)},useTransition:function(){var i=uf(Cs)[0],a=yn().memoizedState;return[typeof i=="boolean"?i:Nc(i),a]},useSyncExternalStore:Bb,useId:dT,useHostTransitionStatus:ng,useFormState:Qb,useActionState:Qb,useOptimistic:function(i,a){var l=yn();return jb(l,Dt,i,a)},useMemoCache:Km,useCacheRefresh:fT},O4={readContext:Qn,use:of,useCallback:aT,useContext:Qn,useEffect:tT,useImperativeHandle:sT,useInsertionEffect:nT,useLayoutEffect:rT,useMemo:oT,useReducer:Qm,useRef:Jb,useState:function(){return Qm(Cs)},useDebugValue:Jm,useDeferredValue:function(i,a){var l=yn();return Dt===null?eg(l,i,a):uT(l,Dt.memoizedState,i,a)},useTransition:function(){var i=Qm(Cs)[0],a=yn().memoizedState;return[typeof i=="boolean"?i:Nc(i),a]},useSyncExternalStore:Bb,useId:dT,useHostTransitionStatus:ng,useFormState:Zb,useActionState:Zb,useOptimistic:function(i,a){var l=yn();return Dt!==null?jb(l,Dt,i,a):(l.baseState=i,[i,l.queue.dispatch])},useMemoCache:Km,useCacheRefresh:fT},Pu=null,Dc=0;function ff(i){var a=Dc;return Dc+=1,Pu===null&&(Pu=[]),Nb(Pu,i,a)}function Oc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function pf(i,a){throw a.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function _T(i){var a=i._init;return a(i._payload)}function bT(i){function a(ie,ne){if(i){var le=ie.deletions;le===null?(ie.deletions=[ne],ie.flags|=16):le.push(ne)}}function l(ie,ne){if(!i)return null;for(;ne!==null;)a(ie,ne),ne=ne.sibling;return null}function h(ie){for(var ne=new Map;ie!==null;)ie.key!==null?ne.set(ie.key,ie):ne.set(ie.index,ie),ie=ie.sibling;return ne}function g(ie,ne){return ie=vs(ie,ne),ie.index=0,ie.sibling=null,ie}function E(ie,ne,le){return ie.index=le,i?(le=ie.alternate,le!==null?(le=le.index,le<ne?(ie.flags|=67108866,ne):le):(ie.flags|=67108866,ne)):(ie.flags|=1048576,ne)}function x(ie){return i&&ie.alternate===null&&(ie.flags|=67108866),ie}function H(ie,ne,le,ve){return ne===null||ne.tag!==6?(ne=Sm(le,ie.mode,ve),ne.return=ie,ne):(ne=g(ne,le),ne.return=ie,ne)}function Z(ie,ne,le,ve){var Ue=le.type;return Ue===w?_e(ie,ne,le.props.children,ve,le.key):ne!==null&&(ne.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===N&&_T(Ue)===ne.type)?(ne=g(ne,le.props),Oc(ne,le),ne.return=ie,ne):(ne=Xd(le.type,le.key,le.props,null,ie.mode,ve),Oc(ne,le),ne.return=ie,ne)}function he(ie,ne,le,ve){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==le.containerInfo||ne.stateNode.implementation!==le.implementation?(ne=xm(le,ie.mode,ve),ne.return=ie,ne):(ne=g(ne,le.children||[]),ne.return=ie,ne)}function _e(ie,ne,le,ve,Ue){return ne===null||ne.tag!==7?(ne=bo(le,ie.mode,ve,Ue),ne.return=ie,ne):(ne=g(ne,le),ne.return=ie,ne)}function Ae(ie,ne,le){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=Sm(""+ne,ie.mode,le),ne.return=ie,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case b:return le=Xd(ne.type,ne.key,ne.props,null,ie.mode,le),Oc(le,ne),le.return=ie,le;case T:return ne=xm(ne,ie.mode,le),ne.return=ie,ne;case N:var ve=ne._init;return ne=ve(ne._payload),Ae(ie,ne,le)}if(K(ne)||V(ne))return ne=bo(ne,ie.mode,le,null),ne.return=ie,ne;if(typeof ne.then=="function")return Ae(ie,ff(ne),le);if(ne.$$typeof===$)return Ae(ie,Jd(ie,ne),le);pf(ie,ne)}return null}function de(ie,ne,le,ve){var Ue=ne!==null?ne.key:null;if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return Ue!==null?null:H(ie,ne,""+le,ve);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case b:return le.key===Ue?Z(ie,ne,le,ve):null;case T:return le.key===Ue?he(ie,ne,le,ve):null;case N:return Ue=le._init,le=Ue(le._payload),de(ie,ne,le,ve)}if(K(le)||V(le))return Ue!==null?null:_e(ie,ne,le,ve,null);if(typeof le.then=="function")return de(ie,ne,ff(le),ve);if(le.$$typeof===$)return de(ie,ne,Jd(ie,le),ve);pf(ie,le)}return null}function pe(ie,ne,le,ve,Ue){if(typeof ve=="string"&&ve!==""||typeof ve=="number"||typeof ve=="bigint")return ie=ie.get(le)||null,H(ne,ie,""+ve,Ue);if(typeof ve=="object"&&ve!==null){switch(ve.$$typeof){case b:return ie=ie.get(ve.key===null?le:ve.key)||null,Z(ne,ie,ve,Ue);case T:return ie=ie.get(ve.key===null?le:ve.key)||null,he(ne,ie,ve,Ue);case N:var ot=ve._init;return ve=ot(ve._payload),pe(ie,ne,le,ve,Ue)}if(K(ve)||V(ve))return ie=ie.get(le)||null,_e(ne,ie,ve,Ue,null);if(typeof ve.then=="function")return pe(ie,ne,le,ff(ve),Ue);if(ve.$$typeof===$)return pe(ie,ne,le,Jd(ne,ve),Ue);pf(ne,ve)}return null}function Ke(ie,ne,le,ve){for(var Ue=null,ot=null,Fe=ne,Ye=ne=0,Pn=null;Fe!==null&&Ye<le.length;Ye++){Fe.index>Ye?(Pn=Fe,Fe=null):Pn=Fe.sibling;var At=de(ie,Fe,le[Ye],ve);if(At===null){Fe===null&&(Fe=Pn);break}i&&Fe&&At.alternate===null&&a(ie,Fe),ne=E(At,ne,Ye),ot===null?Ue=At:ot.sibling=At,ot=At,Fe=Pn}if(Ye===le.length)return l(ie,Fe),xt&&vo(ie,Ye),Ue;if(Fe===null){for(;Ye<le.length;Ye++)Fe=Ae(ie,le[Ye],ve),Fe!==null&&(ne=E(Fe,ne,Ye),ot===null?Ue=Fe:ot.sibling=Fe,ot=Fe);return xt&&vo(ie,Ye),Ue}for(Fe=h(Fe);Ye<le.length;Ye++)Pn=pe(Fe,ie,Ye,le[Ye],ve),Pn!==null&&(i&&Pn.alternate!==null&&Fe.delete(Pn.key===null?Ye:Pn.key),ne=E(Pn,ne,Ye),ot===null?Ue=Pn:ot.sibling=Pn,ot=Pn);return i&&Fe.forEach(function(_a){return a(ie,_a)}),xt&&vo(ie,Ye),Ue}function qe(ie,ne,le,ve){if(le==null)throw Error(r(151));for(var Ue=null,ot=null,Fe=ne,Ye=ne=0,Pn=null,At=le.next();Fe!==null&&!At.done;Ye++,At=le.next()){Fe.index>Ye?(Pn=Fe,Fe=null):Pn=Fe.sibling;var _a=de(ie,Fe,At.value,ve);if(_a===null){Fe===null&&(Fe=Pn);break}i&&Fe&&_a.alternate===null&&a(ie,Fe),ne=E(_a,ne,Ye),ot===null?Ue=_a:ot.sibling=_a,ot=_a,Fe=Pn}if(At.done)return l(ie,Fe),xt&&vo(ie,Ye),Ue;if(Fe===null){for(;!At.done;Ye++,At=le.next())At=Ae(ie,At.value,ve),At!==null&&(ne=E(At,ne,Ye),ot===null?Ue=At:ot.sibling=At,ot=At);return xt&&vo(ie,Ye),Ue}for(Fe=h(Fe);!At.done;Ye++,At=le.next())At=pe(Fe,ie,Ye,At.value,ve),At!==null&&(i&&At.alternate!==null&&Fe.delete(At.key===null?Ye:At.key),ne=E(At,ne,Ye),ot===null?Ue=At:ot.sibling=At,ot=At);return i&&Fe.forEach(function(L6){return a(ie,L6)}),xt&&vo(ie,Ye),Ue}function Lt(ie,ne,le,ve){if(typeof le=="object"&&le!==null&&le.type===w&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case b:e:{for(var Ue=le.key;ne!==null;){if(ne.key===Ue){if(Ue=le.type,Ue===w){if(ne.tag===7){l(ie,ne.sibling),ve=g(ne,le.props.children),ve.return=ie,ie=ve;break e}}else if(ne.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===N&&_T(Ue)===ne.type){l(ie,ne.sibling),ve=g(ne,le.props),Oc(ve,le),ve.return=ie,ie=ve;break e}l(ie,ne);break}else a(ie,ne);ne=ne.sibling}le.type===w?(ve=bo(le.props.children,ie.mode,ve,le.key),ve.return=ie,ie=ve):(ve=Xd(le.type,le.key,le.props,null,ie.mode,ve),Oc(ve,le),ve.return=ie,ie=ve)}return x(ie);case T:e:{for(Ue=le.key;ne!==null;){if(ne.key===Ue)if(ne.tag===4&&ne.stateNode.containerInfo===le.containerInfo&&ne.stateNode.implementation===le.implementation){l(ie,ne.sibling),ve=g(ne,le.children||[]),ve.return=ie,ie=ve;break e}else{l(ie,ne);break}else a(ie,ne);ne=ne.sibling}ve=xm(le,ie.mode,ve),ve.return=ie,ie=ve}return x(ie);case N:return Ue=le._init,le=Ue(le._payload),Lt(ie,ne,le,ve)}if(K(le))return Ke(ie,ne,le,ve);if(V(le)){if(Ue=V(le),typeof Ue!="function")throw Error(r(150));return le=Ue.call(le),qe(ie,ne,le,ve)}if(typeof le.then=="function")return Lt(ie,ne,ff(le),ve);if(le.$$typeof===$)return Lt(ie,ne,Jd(ie,le),ve);pf(ie,le)}return typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint"?(le=""+le,ne!==null&&ne.tag===6?(l(ie,ne.sibling),ve=g(ne,le),ve.return=ie,ie=ve):(l(ie,ne),ve=Sm(le,ie.mode,ve),ve.return=ie,ie=ve),x(ie)):l(ie,ne)}return function(ie,ne,le,ve){try{Dc=0;var Ue=Lt(ie,ne,le,ve);return Pu=null,Ue}catch(Fe){if(Fe===Ac||Fe===tf)throw Fe;var ot=Rr(29,Fe,null,ie.mode);return ot.lanes=ve,ot.return=ie,ot}finally{}}}var Mu=bT(!0),TT=bT(!1),ai=ee(null),Yi=null;function ia(i){var a=i.alternate;R(Nn,Nn.current&1),R(ai,i),Yi===null&&(a===null||ku.current!==null||a.memoizedState!==null)&&(Yi=i)}function vT(i){if(i.tag===22){if(R(Nn,Nn.current),R(ai,i),Yi===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Yi=i)}}else sa()}function sa(){R(Nn,Nn.current),R(ai,ai.current)}function Is(i){ae(ai),Yi===i&&(Yi=null),ae(Nn)}var Nn=ee(0);function mf(i){for(var a=i;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||$g(l)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function ig(i,a,l,h){a=i.memoizedState,l=l(h,a),l=l==null?a:m({},a,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var sg={enqueueSetState:function(i,a,l){i=i._reactInternals;var h=Lr(),g=ta(h);g.payload=a,l!=null&&(g.callback=l),a=na(i,g,h),a!==null&&(Pr(a,i,h),xc(a,i,h))},enqueueReplaceState:function(i,a,l){i=i._reactInternals;var h=Lr(),g=ta(h);g.tag=1,g.payload=a,l!=null&&(g.callback=l),a=na(i,g,h),a!==null&&(Pr(a,i,h),xc(a,i,h))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var l=Lr(),h=ta(l);h.tag=2,a!=null&&(h.callback=a),a=na(i,h,l),a!==null&&(Pr(a,i,l),xc(a,i,l))}};function AT(i,a,l,h,g,E,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,E,x):a.prototype&&a.prototype.isPureReactComponent?!mc(l,h)||!mc(g,E):!0}function ST(i,a,l,h){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,h),a.state!==i&&sg.enqueueReplaceState(a,a.state,null)}function No(i,a){var l=a;if("ref"in a){l={};for(var h in a)h!=="ref"&&(l[h]=a[h])}if(i=i.defaultProps){l===a&&(l=m({},l));for(var g in i)l[g]===void 0&&(l[g]=i[g])}return l}var gf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function xT(i){gf(i)}function wT(i){console.error(i)}function CT(i){gf(i)}function yf(i,a){try{var l=i.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function IT(i,a,l){try{var h=i.onCaughtError;h(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function ag(i,a,l){return l=ta(l),l.tag=3,l.payload={element:null},l.callback=function(){yf(i,a)},l}function NT(i){return i=ta(i),i.tag=3,i}function RT(i,a,l,h){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var E=h.value;i.payload=function(){return g(E)},i.callback=function(){IT(a,l,h)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(i.callback=function(){IT(a,l,h),typeof g!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var H=h.stack;this.componentDidCatch(h.value,{componentStack:H!==null?H:""})})}function L4(i,a,l,h,g){if(l.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=l.alternate,a!==null&&bc(a,l,g,!0),l=ai.current,l!==null){switch(l.tag){case 13:return Yi===null?Rg():l.alternate===null&&rn===0&&(rn=3),l.flags&=-257,l.flags|=65536,l.lanes=g,h===Pm?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([h]):a.add(h),Dg(i,h,g)),!1;case 22:return l.flags|=65536,h===Pm?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([h]):l.add(h)),Dg(i,h,g)),!1}throw Error(r(435,l.tag))}return Dg(i,h,g),Rg(),!1}if(xt)return a=ai.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,h!==Im&&(i=Error(r(422),{cause:h}),_c(ni(i,l)))):(h!==Im&&(a=Error(r(423),{cause:h}),_c(ni(a,l))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,h=ni(h,l),g=ag(i.stateNode,h,g),Um(i,g),rn!==4&&(rn=2)),!1;var E=Error(r(520),{cause:h});if(E=ni(E,l),Vc===null?Vc=[E]:Vc.push(E),rn!==4&&(rn=2),a===null)return!0;h=ni(h,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,i=g&-g,l.lanes|=i,i=ag(l.stateNode,h,i),Um(l,i),!1;case 1:if(a=l.type,E=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ha===null||!ha.has(E))))return l.flags|=65536,g&=-g,l.lanes|=g,g=NT(g),RT(g,i,l,h),Um(l,g),!1}l=l.return}while(l!==null);return!1}var kT=Error(r(461)),On=!1;function qn(i,a,l,h){a.child=i===null?TT(a,null,l,h):Mu(a,i.child,l,h)}function DT(i,a,l,h,g){l=l.render;var E=a.ref;if("ref"in h){var x={};for(var H in h)H!=="ref"&&(x[H]=h[H])}else x=h;return wo(a),h=jm(i,a,l,x,E,g),H=qm(),i!==null&&!On?(Ym(i,a,g),Ns(i,a,g)):(xt&&H&&wm(a),a.flags|=1,qn(i,a,h,g),a.child)}function OT(i,a,l,h,g){if(i===null){var E=l.type;return typeof E=="function"&&!Am(E)&&E.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=E,LT(i,a,E,h,g)):(i=Xd(l.type,null,h,a,a.mode,g),i.ref=a.ref,i.return=a,a.child=i)}if(E=i.child,!pg(i,g)){var x=E.memoizedProps;if(l=l.compare,l=l!==null?l:mc,l(x,h)&&i.ref===a.ref)return Ns(i,a,g)}return a.flags|=1,i=vs(E,h),i.ref=a.ref,i.return=a,a.child=i}function LT(i,a,l,h,g){if(i!==null){var E=i.memoizedProps;if(mc(E,h)&&i.ref===a.ref)if(On=!1,a.pendingProps=h=E,pg(i,g))(i.flags&131072)!==0&&(On=!0);else return a.lanes=i.lanes,Ns(i,a,g)}return og(i,a,l,h,g)}function PT(i,a,l){var h=a.pendingProps,g=h.children,E=i!==null?i.memoizedState:null;if(h.mode==="hidden"){if((a.flags&128)!==0){if(h=E!==null?E.baseLanes|l:l,i!==null){for(g=a.child=i.child,E=0;g!==null;)E=E|g.lanes|g.childLanes,g=g.sibling;a.childLanes=E&~h}else a.childLanes=0,a.child=null;return MT(i,a,h,l)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&ef(a,E!==null?E.cachePool:null),E!==null?Lb(a,E):Vm(),vT(a);else return a.lanes=a.childLanes=536870912,MT(i,a,E!==null?E.baseLanes|l:l,l)}else E!==null?(ef(a,E.cachePool),Lb(a,E),sa(),a.memoizedState=null):(i!==null&&ef(a,null),Vm(),sa());return qn(i,a,g,l),a.child}function MT(i,a,l,h){var g=Lm();return g=g===null?null:{parent:In._currentValue,pool:g},a.memoizedState={baseLanes:l,cachePool:g},i!==null&&ef(a,null),Vm(),vT(a),i!==null&&bc(i,a,h,!0),null}function Ef(i,a){var l=a.ref;if(l===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(r(284));(i===null||i.ref!==l)&&(a.flags|=4194816)}}function og(i,a,l,h,g){return wo(a),l=jm(i,a,l,h,void 0,g),h=qm(),i!==null&&!On?(Ym(i,a,g),Ns(i,a,g)):(xt&&h&&wm(a),a.flags|=1,qn(i,a,l,g),a.child)}function BT(i,a,l,h,g,E){return wo(a),a.updateQueue=null,l=Mb(a,h,l,g),Pb(i),h=qm(),i!==null&&!On?(Ym(i,a,E),Ns(i,a,E)):(xt&&h&&wm(a),a.flags|=1,qn(i,a,l,E),a.child)}function UT(i,a,l,h,g){if(wo(a),a.stateNode===null){var E=wu,x=l.contextType;typeof x=="object"&&x!==null&&(E=Qn(x)),E=new l(h,E),a.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=sg,a.stateNode=E,E._reactInternals=a,E=a.stateNode,E.props=h,E.state=a.memoizedState,E.refs={},Mm(a),x=l.contextType,E.context=typeof x=="object"&&x!==null?Qn(x):wu,E.state=a.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(ig(a,l,x,h),E.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(x=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),x!==E.state&&sg.enqueueReplaceState(E,E.state,null),Cc(a,h,E,g),wc(),E.state=a.memoizedState),typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(i===null){E=a.stateNode;var H=a.memoizedProps,Z=No(l,H);E.props=Z;var he=E.context,_e=l.contextType;x=wu,typeof _e=="object"&&_e!==null&&(x=Qn(_e));var Ae=l.getDerivedStateFromProps;_e=typeof Ae=="function"||typeof E.getSnapshotBeforeUpdate=="function",H=a.pendingProps!==H,_e||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(H||he!==x)&&ST(a,E,h,x),ea=!1;var de=a.memoizedState;E.state=de,Cc(a,h,E,g),wc(),he=a.memoizedState,H||de!==he||ea?(typeof Ae=="function"&&(ig(a,l,Ae,h),he=a.memoizedState),(Z=ea||AT(a,l,Z,h,de,he,x))?(_e||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(a.flags|=4194308)):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=he),E.props=h,E.state=he,E.context=x,h=Z):(typeof E.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{E=a.stateNode,Bm(i,a),x=a.memoizedProps,_e=No(l,x),E.props=_e,Ae=a.pendingProps,de=E.context,he=l.contextType,Z=wu,typeof he=="object"&&he!==null&&(Z=Qn(he)),H=l.getDerivedStateFromProps,(he=typeof H=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(x!==Ae||de!==Z)&&ST(a,E,h,Z),ea=!1,de=a.memoizedState,E.state=de,Cc(a,h,E,g),wc();var pe=a.memoizedState;x!==Ae||de!==pe||ea||i!==null&&i.dependencies!==null&&Zd(i.dependencies)?(typeof H=="function"&&(ig(a,l,H,h),pe=a.memoizedState),(_e=ea||AT(a,l,_e,h,de,pe,Z)||i!==null&&i.dependencies!==null&&Zd(i.dependencies))?(he||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(h,pe,Z),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(h,pe,Z)),typeof E.componentDidUpdate=="function"&&(a.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof E.componentDidUpdate!="function"||x===i.memoizedProps&&de===i.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&de===i.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=pe),E.props=h,E.state=pe,E.context=Z,h=_e):(typeof E.componentDidUpdate!="function"||x===i.memoizedProps&&de===i.memoizedState||(a.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||x===i.memoizedProps&&de===i.memoizedState||(a.flags|=1024),h=!1)}return E=h,Ef(i,a),h=(a.flags&128)!==0,E||h?(E=a.stateNode,l=h&&typeof l.getDerivedStateFromError!="function"?null:E.render(),a.flags|=1,i!==null&&h?(a.child=Mu(a,i.child,null,g),a.child=Mu(a,null,l,g)):qn(i,a,l,g),a.memoizedState=E.state,i=a.child):i=Ns(i,a,g),i}function HT(i,a,l,h){return Ec(),a.flags|=256,qn(i,a,l,h),a.child}var ug={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lg(i){return{baseLanes:i,cachePool:wb()}}function cg(i,a,l){return i=i!==null?i.childLanes&~l:0,a&&(i|=oi),i}function VT(i,a,l){var h=a.pendingProps,g=!1,E=(a.flags&128)!==0,x;if((x=E)||(x=i!==null&&i.memoizedState===null?!1:(Nn.current&2)!==0),x&&(g=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,i===null){if(xt){if(g?ia(a):sa(),xt){var H=nn,Z;if(Z=H){e:{for(Z=H,H=qi;Z.nodeType!==8;){if(!H){H=null;break e}if(Z=bi(Z.nextSibling),Z===null){H=null;break e}}H=Z}H!==null?(a.memoizedState={dehydrated:H,treeContext:To!==null?{id:As,overflow:Ss}:null,retryLane:536870912,hydrationErrors:null},Z=Rr(18,null,null,0),Z.stateNode=H,Z.return=a,a.child=Z,ur=a,nn=null,Z=!0):Z=!1}Z||So(a)}if(H=a.memoizedState,H!==null&&(H=H.dehydrated,H!==null))return $g(H)?a.lanes=32:a.lanes=536870912,null;Is(a)}return H=h.children,h=h.fallback,g?(sa(),g=a.mode,H=_f({mode:"hidden",children:H},g),h=bo(h,g,l,null),H.return=a,h.return=a,H.sibling=h,a.child=H,g=a.child,g.memoizedState=lg(l),g.childLanes=cg(i,x,l),a.memoizedState=ug,h):(ia(a),hg(a,H))}if(Z=i.memoizedState,Z!==null&&(H=Z.dehydrated,H!==null)){if(E)a.flags&256?(ia(a),a.flags&=-257,a=dg(i,a,l)):a.memoizedState!==null?(sa(),a.child=i.child,a.flags|=128,a=null):(sa(),g=h.fallback,H=a.mode,h=_f({mode:"visible",children:h.children},H),g=bo(g,H,l,null),g.flags|=2,h.return=a,g.return=a,h.sibling=g,a.child=h,Mu(a,i.child,null,l),h=a.child,h.memoizedState=lg(l),h.childLanes=cg(i,x,l),a.memoizedState=ug,a=g);else if(ia(a),$g(H)){if(x=H.nextSibling&&H.nextSibling.dataset,x)var he=x.dgst;x=he,h=Error(r(419)),h.stack="",h.digest=x,_c({value:h,source:null,stack:null}),a=dg(i,a,l)}else if(On||bc(i,a,l,!1),x=(l&i.childLanes)!==0,On||x){if(x=Ut,x!==null&&(h=l&-l,h=(h&42)!==0?1:Ri(h),h=(h&(x.suspendedLanes|l))!==0?0:h,h!==0&&h!==Z.retryLane))throw Z.retryLane=h,xu(i,h),Pr(x,i,h),kT;H.data==="$?"||Rg(),a=dg(i,a,l)}else H.data==="$?"?(a.flags|=192,a.child=i.child,a=null):(i=Z.treeContext,nn=bi(H.nextSibling),ur=a,xt=!0,Ao=null,qi=!1,i!==null&&(ii[si++]=As,ii[si++]=Ss,ii[si++]=To,As=i.id,Ss=i.overflow,To=a),a=hg(a,h.children),a.flags|=4096);return a}return g?(sa(),g=h.fallback,H=a.mode,Z=i.child,he=Z.sibling,h=vs(Z,{mode:"hidden",children:h.children}),h.subtreeFlags=Z.subtreeFlags&65011712,he!==null?g=vs(he,g):(g=bo(g,H,l,null),g.flags|=2),g.return=a,h.return=a,h.sibling=g,a.child=h,h=g,g=a.child,H=i.child.memoizedState,H===null?H=lg(l):(Z=H.cachePool,Z!==null?(he=In._currentValue,Z=Z.parent!==he?{parent:he,pool:he}:Z):Z=wb(),H={baseLanes:H.baseLanes|l,cachePool:Z}),g.memoizedState=H,g.childLanes=cg(i,x,l),a.memoizedState=ug,h):(ia(a),l=i.child,i=l.sibling,l=vs(l,{mode:"visible",children:h.children}),l.return=a,l.sibling=null,i!==null&&(x=a.deletions,x===null?(a.deletions=[i],a.flags|=16):x.push(i)),a.child=l,a.memoizedState=null,l)}function hg(i,a){return a=_f({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function _f(i,a){return i=Rr(22,i,null,a),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function dg(i,a,l){return Mu(a,i.child,null,l),i=hg(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function zT(i,a,l){i.lanes|=a;var h=i.alternate;h!==null&&(h.lanes|=a),Rm(i.return,a,l)}function fg(i,a,l,h,g){var E=i.memoizedState;E===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:l,tailMode:g}:(E.isBackwards=a,E.rendering=null,E.renderingStartTime=0,E.last=h,E.tail=l,E.tailMode=g)}function FT(i,a,l){var h=a.pendingProps,g=h.revealOrder,E=h.tail;if(qn(i,a,h.children,l),h=Nn.current,(h&2)!==0)h=h&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&zT(i,l,a);else if(i.tag===19)zT(i,l,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}switch(R(Nn,h),g){case"forwards":for(l=a.child,g=null;l!==null;)i=l.alternate,i!==null&&mf(i)===null&&(g=l),l=l.sibling;l=g,l===null?(g=a.child,a.child=null):(g=l.sibling,l.sibling=null),fg(a,!1,g,l,E);break;case"backwards":for(l=null,g=a.child,a.child=null;g!==null;){if(i=g.alternate,i!==null&&mf(i)===null){a.child=g;break}i=g.sibling,g.sibling=l,l=g,g=i}fg(a,!0,l,null,E);break;case"together":fg(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Ns(i,a,l){if(i!==null&&(a.dependencies=i.dependencies),ca|=a.lanes,(l&a.childLanes)===0)if(i!==null){if(bc(i,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,l=vs(i,i.pendingProps),a.child=l,l.return=a;i.sibling!==null;)i=i.sibling,l=l.sibling=vs(i,i.pendingProps),l.return=a;l.sibling=null}return a.child}function pg(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Zd(i)))}function P4(i,a,l){switch(a.tag){case 3:Ce(a,a.stateNode.containerInfo),Js(a,In,i.memoizedState.cache),Ec();break;case 27:case 5:Ve(a);break;case 4:Ce(a,a.stateNode.containerInfo);break;case 10:Js(a,a.type,a.memoizedProps.value);break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(ia(a),a.flags|=128,null):(l&a.child.childLanes)!==0?VT(i,a,l):(ia(a),i=Ns(i,a,l),i!==null?i.sibling:null);ia(a);break;case 19:var g=(i.flags&128)!==0;if(h=(l&a.childLanes)!==0,h||(bc(i,a,l,!1),h=(l&a.childLanes)!==0),g){if(h)return FT(i,a,l);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),R(Nn,Nn.current),h)break;return null;case 22:case 23:return a.lanes=0,PT(i,a,l);case 24:Js(a,In,i.memoizedState.cache)}return Ns(i,a,l)}function jT(i,a,l){if(i!==null)if(i.memoizedProps!==a.pendingProps)On=!0;else{if(!pg(i,l)&&(a.flags&128)===0)return On=!1,P4(i,a,l);On=(i.flags&131072)!==0}else On=!1,xt&&(a.flags&1048576)!==0&&_b(a,Wd,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var h=a.elementType,g=h._init;if(h=g(h._payload),a.type=h,typeof h=="function")Am(h)?(i=No(h,i),a.tag=1,a=UT(null,a,h,i,l)):(a.tag=0,a=og(null,a,h,i,l));else{if(h!=null){if(g=h.$$typeof,g===j){a.tag=11,a=DT(null,a,h,i,l);break e}else if(g===M){a.tag=14,a=OT(null,a,h,i,l);break e}}throw a=O(h)||h,Error(r(306,a,""))}}return a;case 0:return og(i,a,a.type,a.pendingProps,l);case 1:return h=a.type,g=No(h,a.pendingProps),UT(i,a,h,g,l);case 3:e:{if(Ce(a,a.stateNode.containerInfo),i===null)throw Error(r(387));h=a.pendingProps;var E=a.memoizedState;g=E.element,Bm(i,a),Cc(a,h,null,l);var x=a.memoizedState;if(h=x.cache,Js(a,In,h),h!==E.cache&&km(a,[In],l,!0),wc(),h=x.element,E.isDehydrated)if(E={element:h,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=E,a.memoizedState=E,a.flags&256){a=HT(i,a,h,l);break e}else if(h!==g){g=ni(Error(r(424)),a),_c(g),a=HT(i,a,h,l);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(nn=bi(i.firstChild),ur=a,xt=!0,Ao=null,qi=!0,l=TT(a,null,h,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ec(),h===g){a=Ns(i,a,l);break e}qn(i,a,h,l)}a=a.child}return a;case 26:return Ef(i,a),i===null?(l=$v(a.type,null,a.pendingProps,null))?a.memoizedState=l:xt||(l=a.type,i=a.pendingProps,h=Of(me.current).createElement(l),h[cn]=a,h[tn]=i,Gn(h,l,i),Qt(h),a.stateNode=h):a.memoizedState=$v(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Ve(a),i===null&&xt&&(h=a.stateNode=qv(a.type,a.pendingProps,me.current),ur=a,qi=!0,g=nn,pa(a.type)?(Kg=g,nn=bi(h.firstChild)):nn=g),qn(i,a,a.pendingProps.children,l),Ef(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&xt&&((g=h=nn)&&(h=l6(h,a.type,a.pendingProps,qi),h!==null?(a.stateNode=h,ur=a,nn=bi(h.firstChild),qi=!1,g=!0):g=!1),g||So(a)),Ve(a),g=a.type,E=a.pendingProps,x=i!==null?i.memoizedProps:null,h=E.children,qg(g,E)?h=null:x!==null&&qg(g,x)&&(a.flags|=32),a.memoizedState!==null&&(g=jm(i,a,C4,null,null,l),Xc._currentValue=g),Ef(i,a),qn(i,a,h,l),a.child;case 6:return i===null&&xt&&((i=l=nn)&&(l=c6(l,a.pendingProps,qi),l!==null?(a.stateNode=l,ur=a,nn=null,i=!0):i=!1),i||So(a)),null;case 13:return VT(i,a,l);case 4:return Ce(a,a.stateNode.containerInfo),h=a.pendingProps,i===null?a.child=Mu(a,null,h,l):qn(i,a,h,l),a.child;case 11:return DT(i,a,a.type,a.pendingProps,l);case 7:return qn(i,a,a.pendingProps,l),a.child;case 8:return qn(i,a,a.pendingProps.children,l),a.child;case 12:return qn(i,a,a.pendingProps.children,l),a.child;case 10:return h=a.pendingProps,Js(a,a.type,h.value),qn(i,a,h.children,l),a.child;case 9:return g=a.type._context,h=a.pendingProps.children,wo(a),g=Qn(g),h=h(g),a.flags|=1,qn(i,a,h,l),a.child;case 14:return OT(i,a,a.type,a.pendingProps,l);case 15:return LT(i,a,a.type,a.pendingProps,l);case 19:return FT(i,a,l);case 31:return h=a.pendingProps,l=a.mode,h={mode:h.mode,children:h.children},i===null?(l=_f(h,l),l.ref=a.ref,a.child=l,l.return=a,a=l):(l=vs(i.child,h),l.ref=a.ref,a.child=l,l.return=a,a=l),a;case 22:return PT(i,a,l);case 24:return wo(a),h=Qn(In),i===null?(g=Lm(),g===null&&(g=Ut,E=Dm(),g.pooledCache=E,E.refCount++,E!==null&&(g.pooledCacheLanes|=l),g=E),a.memoizedState={parent:h,cache:g},Mm(a),Js(a,In,g)):((i.lanes&l)!==0&&(Bm(i,a),Cc(a,null,null,l),wc()),g=i.memoizedState,E=a.memoizedState,g.parent!==h?(g={parent:h,cache:h},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Js(a,In,h)):(h=E.cache,Js(a,In,h),h!==g.cache&&km(a,[In],l,!0))),qn(i,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Rs(i){i.flags|=4}function qT(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Zv(a)){if(a=ai.current,a!==null&&((_t&4194048)===_t?Yi!==null:(_t&62914560)!==_t&&(_t&536870912)===0||a!==Yi))throw Sc=Pm,Cb;i.flags|=8192}}function bf(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?pi():536870912,i.lanes|=a,Vu|=a)}function Lc(i,a){if(!xt)switch(i.tailMode){case"hidden":a=i.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Wt(i){var a=i.alternate!==null&&i.alternate.child===i.child,l=0,h=0;if(a)for(var g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)l|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=h,i.childLanes=l,a}function M4(i,a,l){var h=a.pendingProps;switch(Cm(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(a),null;case 1:return Wt(a),null;case 3:return l=a.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),ws(In),Le(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(i===null||i.child===null)&&(yc(a)?Rs(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,vb())),Wt(a),null;case 26:return l=a.memoizedState,i===null?(Rs(a),l!==null?(Wt(a),qT(a,l)):(Wt(a),a.flags&=-16777217)):l?l!==i.memoizedState?(Rs(a),Wt(a),qT(a,l)):(Wt(a),a.flags&=-16777217):(i.memoizedProps!==h&&Rs(a),Wt(a),a.flags&=-16777217),null;case 27:ct(a),l=me.current;var g=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==h&&Rs(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return Wt(a),null}i=oe.current,yc(a)?bb(a):(i=qv(g,h,l),a.stateNode=i,Rs(a))}return Wt(a),null;case 5:if(ct(a),l=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==h&&Rs(a);else{if(!h){if(a.stateNode===null)throw Error(r(166));return Wt(a),null}if(i=oe.current,yc(a))bb(a);else{switch(g=Of(me.current),i){case 1:i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":i=g.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":i=g.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":i=g.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof h.is=="string"?g.createElement("select",{is:h.is}):g.createElement("select"),h.multiple?i.multiple=!0:h.size&&(i.size=h.size);break;default:i=typeof h.is=="string"?g.createElement(l,{is:h.is}):g.createElement(l)}}i[cn]=a,i[tn]=h;e:for(g=a.child;g!==null;){if(g.tag===5||g.tag===6)i.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===a)break e;for(;g.sibling===null;){if(g.return===null||g.return===a)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}a.stateNode=i;e:switch(Gn(i,l,h),l){case"button":case"input":case"select":case"textarea":i=!!h.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Rs(a)}}return Wt(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==h&&Rs(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(r(166));if(i=me.current,yc(a)){if(i=a.stateNode,l=a.memoizedProps,h=null,g=ur,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}i[cn]=a,i=!!(i.nodeValue===l||h!==null&&h.suppressHydrationWarning===!0||Bv(i.nodeValue,l)),i||So(a)}else i=Of(i).createTextNode(h),i[cn]=a,a.stateNode=i}return Wt(a),null;case 13:if(h=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=yc(a),h!==null&&h.dehydrated!==null){if(i===null){if(!g)throw Error(r(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(r(317));g[cn]=a}else Ec(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Wt(a),g=!1}else g=vb(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Is(a),a):(Is(a),null)}if(Is(a),(a.flags&128)!==0)return a.lanes=l,a;if(l=h!==null,i=i!==null&&i.memoizedState!==null,l){h=a.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool);var E=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(E=h.memoizedState.cachePool.pool),E!==g&&(h.flags|=2048)}return l!==i&&l&&(a.child.flags|=8192),bf(a,a.updateQueue),Wt(a),null;case 4:return Le(),i===null&&Hg(a.stateNode.containerInfo),Wt(a),null;case 10:return ws(a.type),Wt(a),null;case 19:if(ae(Nn),g=a.memoizedState,g===null)return Wt(a),null;if(h=(a.flags&128)!==0,E=g.rendering,E===null)if(h)Lc(g,!1);else{if(rn!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(E=mf(i),E!==null){for(a.flags|=128,Lc(g,!1),i=E.updateQueue,a.updateQueue=i,bf(a,i),a.subtreeFlags=0,i=l,l=a.child;l!==null;)Eb(l,i),l=l.sibling;return R(Nn,Nn.current&1|2),a.child}i=i.sibling}g.tail!==null&&Qe()>Af&&(a.flags|=128,h=!0,Lc(g,!1),a.lanes=4194304)}else{if(!h)if(i=mf(E),i!==null){if(a.flags|=128,h=!0,i=i.updateQueue,a.updateQueue=i,bf(a,i),Lc(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!xt)return Wt(a),null}else 2*Qe()-g.renderingStartTime>Af&&l!==536870912&&(a.flags|=128,h=!0,Lc(g,!1),a.lanes=4194304);g.isBackwards?(E.sibling=a.child,a.child=E):(i=g.last,i!==null?i.sibling=E:a.child=E,g.last=E)}return g.tail!==null?(a=g.tail,g.rendering=a,g.tail=a.sibling,g.renderingStartTime=Qe(),a.sibling=null,i=Nn.current,R(Nn,h?i&1|2:i&1),a):(Wt(a),null);case 22:case 23:return Is(a),zm(),h=a.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(l&536870912)!==0&&(a.flags&128)===0&&(Wt(a),a.subtreeFlags&6&&(a.flags|=8192)):Wt(a),l=a.updateQueue,l!==null&&bf(a,l.retryQueue),l=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==l&&(a.flags|=2048),i!==null&&ae(Co),null;case 24:return l=null,i!==null&&(l=i.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),ws(In),Wt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function B4(i,a){switch(Cm(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return ws(In),Le(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return ct(a),null;case 13:if(Is(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Ec()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return ae(Nn),null;case 4:return Le(),null;case 10:return ws(a.type),null;case 22:case 23:return Is(a),zm(),i!==null&&ae(Co),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return ws(In),null;case 25:return null;default:return null}}function YT(i,a){switch(Cm(a),a.tag){case 3:ws(In),Le();break;case 26:case 27:case 5:ct(a);break;case 4:Le();break;case 13:Is(a);break;case 19:ae(Nn);break;case 10:ws(a.type);break;case 22:case 23:Is(a),zm(),i!==null&&ae(Co);break;case 24:ws(In)}}function Pc(i,a){try{var l=a.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var g=h.next;l=g;do{if((l.tag&i)===i){h=void 0;var E=l.create,x=l.inst;h=E(),x.destroy=h}l=l.next}while(l!==g)}}catch(H){Pt(a,a.return,H)}}function aa(i,a,l){try{var h=a.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var E=g.next;h=E;do{if((h.tag&i)===i){var x=h.inst,H=x.destroy;if(H!==void 0){x.destroy=void 0,g=a;var Z=l,he=H;try{he()}catch(_e){Pt(g,Z,_e)}}}h=h.next}while(h!==E)}}catch(_e){Pt(a,a.return,_e)}}function GT(i){var a=i.updateQueue;if(a!==null){var l=i.stateNode;try{Ob(a,l)}catch(h){Pt(i,i.return,h)}}}function $T(i,a,l){l.props=No(i.type,i.memoizedProps),l.state=i.memoizedState;try{l.componentWillUnmount()}catch(h){Pt(i,a,h)}}function Mc(i,a){try{var l=i.ref;if(l!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof l=="function"?i.refCleanup=l(h):l.current=h}}catch(g){Pt(i,a,g)}}function Gi(i,a){var l=i.ref,h=i.refCleanup;if(l!==null)if(typeof h=="function")try{h()}catch(g){Pt(i,a,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Pt(i,a,g)}else l.current=null}function KT(i){var a=i.type,l=i.memoizedProps,h=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&h.focus();break e;case"img":l.src?h.src=l.src:l.srcSet&&(h.srcset=l.srcSet)}}catch(g){Pt(i,i.return,g)}}function mg(i,a,l){try{var h=i.stateNode;i6(h,i.type,l,a),h[tn]=a}catch(g){Pt(i,i.return,g)}}function XT(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&pa(i.type)||i.tag===4}function gg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||XT(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&pa(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function yg(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(i,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(i),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Df));else if(h!==4&&(h===27&&pa(i.type)&&(l=i.stateNode,a=null),i=i.child,i!==null))for(yg(i,a,l),i=i.sibling;i!==null;)yg(i,a,l),i=i.sibling}function Tf(i,a,l){var h=i.tag;if(h===5||h===6)i=i.stateNode,a?l.insertBefore(i,a):l.appendChild(i);else if(h!==4&&(h===27&&pa(i.type)&&(l=i.stateNode),i=i.child,i!==null))for(Tf(i,a,l),i=i.sibling;i!==null;)Tf(i,a,l),i=i.sibling}function QT(i){var a=i.stateNode,l=i.memoizedProps;try{for(var h=i.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Gn(a,h,l),a[cn]=i,a[tn]=l}catch(E){Pt(i,i.return,E)}}var ks=!1,dn=!1,Eg=!1,WT=typeof WeakSet=="function"?WeakSet:Set,Ln=null;function U4(i,a){if(i=i.containerInfo,Fg=Hf,i=ub(i),gm(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var h=l.getSelection&&l.getSelection();if(h&&h.rangeCount!==0){l=h.anchorNode;var g=h.anchorOffset,E=h.focusNode;h=h.focusOffset;try{l.nodeType,E.nodeType}catch{l=null;break e}var x=0,H=-1,Z=-1,he=0,_e=0,Ae=i,de=null;t:for(;;){for(var pe;Ae!==l||g!==0&&Ae.nodeType!==3||(H=x+g),Ae!==E||h!==0&&Ae.nodeType!==3||(Z=x+h),Ae.nodeType===3&&(x+=Ae.nodeValue.length),(pe=Ae.firstChild)!==null;)de=Ae,Ae=pe;for(;;){if(Ae===i)break t;if(de===l&&++he===g&&(H=x),de===E&&++_e===h&&(Z=x),(pe=Ae.nextSibling)!==null)break;Ae=de,de=Ae.parentNode}Ae=pe}l=H===-1||Z===-1?null:{start:H,end:Z}}else l=null}l=l||{start:0,end:0}}else l=null;for(jg={focusedElem:i,selectionRange:l},Hf=!1,Ln=a;Ln!==null;)if(a=Ln,i=a.child,(a.subtreeFlags&1024)!==0&&i!==null)i.return=a,Ln=i;else for(;Ln!==null;){switch(a=Ln,E=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&E!==null){i=void 0,l=a,g=E.memoizedProps,E=E.memoizedState,h=l.stateNode;try{var Ke=No(l.type,g,l.elementType===l.type);i=h.getSnapshotBeforeUpdate(Ke,E),h.__reactInternalSnapshotBeforeUpdate=i}catch(qe){Pt(l,l.return,qe)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,l=i.nodeType,l===9)Gg(i);else if(l===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Gg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,Ln=i;break}Ln=a.return}}function ZT(i,a,l){var h=l.flags;switch(l.tag){case 0:case 11:case 15:oa(i,l),h&4&&Pc(5,l);break;case 1:if(oa(i,l),h&4)if(i=l.stateNode,a===null)try{i.componentDidMount()}catch(x){Pt(l,l.return,x)}else{var g=No(l.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(g,a,i.__reactInternalSnapshotBeforeUpdate)}catch(x){Pt(l,l.return,x)}}h&64&&GT(l),h&512&&Mc(l,l.return);break;case 3:if(oa(i,l),h&64&&(i=l.updateQueue,i!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Ob(i,a)}catch(x){Pt(l,l.return,x)}}break;case 27:a===null&&h&4&&QT(l);case 26:case 5:oa(i,l),a===null&&h&4&&KT(l),h&512&&Mc(l,l.return);break;case 12:oa(i,l);break;case 13:oa(i,l),h&4&&tv(i,l),h&64&&(i=l.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(l=$4.bind(null,l),h6(i,l))));break;case 22:if(h=l.memoizedState!==null||ks,!h){a=a!==null&&a.memoizedState!==null||dn,g=ks;var E=dn;ks=h,(dn=a)&&!E?ua(i,l,(l.subtreeFlags&8772)!==0):oa(i,l),ks=g,dn=E}break;case 30:break;default:oa(i,l)}}function JT(i){var a=i.alternate;a!==null&&(i.alternate=null,JT(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Oi(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var $t=null,fr=!1;function Ds(i,a,l){for(l=l.child;l!==null;)ev(i,a,l),l=l.sibling}function ev(i,a,l){if(Te&&typeof Te.onCommitFiberUnmount=="function")try{Te.onCommitFiberUnmount(fe,l)}catch{}switch(l.tag){case 26:dn||Gi(l,a),Ds(i,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:dn||Gi(l,a);var h=$t,g=fr;pa(l.type)&&($t=l.stateNode,fr=!1),Ds(i,a,l),Yc(l.stateNode),$t=h,fr=g;break;case 5:dn||Gi(l,a);case 6:if(h=$t,g=fr,$t=null,Ds(i,a,l),$t=h,fr=g,$t!==null)if(fr)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(l.stateNode)}catch(E){Pt(l,a,E)}else try{$t.removeChild(l.stateNode)}catch(E){Pt(l,a,E)}break;case 18:$t!==null&&(fr?(i=$t,Fv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,l.stateNode),Jc(i)):Fv($t,l.stateNode));break;case 4:h=$t,g=fr,$t=l.stateNode.containerInfo,fr=!0,Ds(i,a,l),$t=h,fr=g;break;case 0:case 11:case 14:case 15:dn||aa(2,l,a),dn||aa(4,l,a),Ds(i,a,l);break;case 1:dn||(Gi(l,a),h=l.stateNode,typeof h.componentWillUnmount=="function"&&$T(l,a,h)),Ds(i,a,l);break;case 21:Ds(i,a,l);break;case 22:dn=(h=dn)||l.memoizedState!==null,Ds(i,a,l),dn=h;break;default:Ds(i,a,l)}}function tv(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Jc(i)}catch(l){Pt(a,a.return,l)}}function H4(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new WT),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new WT),a;default:throw Error(r(435,i.tag))}}function _g(i,a){var l=H4(i);a.forEach(function(h){var g=K4.bind(null,i,h);l.has(h)||(l.add(h),h.then(g,g))})}function kr(i,a){var l=a.deletions;if(l!==null)for(var h=0;h<l.length;h++){var g=l[h],E=i,x=a,H=x;e:for(;H!==null;){switch(H.tag){case 27:if(pa(H.type)){$t=H.stateNode,fr=!1;break e}break;case 5:$t=H.stateNode,fr=!1;break e;case 3:case 4:$t=H.stateNode.containerInfo,fr=!0;break e}H=H.return}if($t===null)throw Error(r(160));ev(E,x,g),$t=null,fr=!1,E=g.alternate,E!==null&&(E.return=null),g.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)nv(a,i),a=a.sibling}var _i=null;function nv(i,a){var l=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:kr(a,i),Dr(i),h&4&&(aa(3,i,i.return),Pc(3,i),aa(5,i,i.return));break;case 1:kr(a,i),Dr(i),h&512&&(dn||l===null||Gi(l,l.return)),h&64&&ks&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(l=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=l===null?h:l.concat(h))));break;case 26:var g=_i;if(kr(a,i),Dr(i),h&512&&(dn||l===null||Gi(l,l.return)),h&4){var E=l!==null?l.memoizedState:null;if(h=i.memoizedState,l===null)if(h===null)if(i.stateNode===null){e:{h=i.type,l=i.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":E=g.getElementsByTagName("title")[0],(!E||E[fs]||E[cn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=g.createElement(h),g.head.insertBefore(E,g.querySelector("head > title"))),Gn(E,h,l),E[cn]=i,Qt(E),h=E;break e;case"link":var x=Qv("link","href",g).get(h+(l.href||""));if(x){for(var H=0;H<x.length;H++)if(E=x[H],E.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&E.getAttribute("rel")===(l.rel==null?null:l.rel)&&E.getAttribute("title")===(l.title==null?null:l.title)&&E.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(H,1);break t}}E=g.createElement(h),Gn(E,h,l),g.head.appendChild(E);break;case"meta":if(x=Qv("meta","content",g).get(h+(l.content||""))){for(H=0;H<x.length;H++)if(E=x[H],E.getAttribute("content")===(l.content==null?null:""+l.content)&&E.getAttribute("name")===(l.name==null?null:l.name)&&E.getAttribute("property")===(l.property==null?null:l.property)&&E.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&E.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(H,1);break t}}E=g.createElement(h),Gn(E,h,l),g.head.appendChild(E);break;default:throw Error(r(468,h))}E[cn]=i,Qt(E),h=E}i.stateNode=h}else Wv(g,i.type,i.stateNode);else i.stateNode=Xv(g,h,i.memoizedProps);else E!==h?(E===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):E.count--,h===null?Wv(g,i.type,i.stateNode):Xv(g,h,i.memoizedProps)):h===null&&i.stateNode!==null&&mg(i,i.memoizedProps,l.memoizedProps)}break;case 27:kr(a,i),Dr(i),h&512&&(dn||l===null||Gi(l,l.return)),l!==null&&h&4&&mg(i,i.memoizedProps,l.memoizedProps);break;case 5:if(kr(a,i),Dr(i),h&512&&(dn||l===null||Gi(l,l.return)),i.flags&32){g=i.stateNode;try{Zr(g,"")}catch(pe){Pt(i,i.return,pe)}}h&4&&i.stateNode!=null&&(g=i.memoizedProps,mg(i,g,l!==null?l.memoizedProps:g)),h&1024&&(Eg=!0);break;case 6:if(kr(a,i),Dr(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,l=i.stateNode;try{l.nodeValue=h}catch(pe){Pt(i,i.return,pe)}}break;case 3:if(Mf=null,g=_i,_i=Lf(a.containerInfo),kr(a,i),_i=g,Dr(i),h&4&&l!==null&&l.memoizedState.isDehydrated)try{Jc(a.containerInfo)}catch(pe){Pt(i,i.return,pe)}Eg&&(Eg=!1,rv(i));break;case 4:h=_i,_i=Lf(i.stateNode.containerInfo),kr(a,i),Dr(i),_i=h;break;case 12:kr(a,i),Dr(i);break;case 13:kr(a,i),Dr(i),i.child.flags&8192&&i.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(xg=Qe()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,_g(i,h)));break;case 22:g=i.memoizedState!==null;var Z=l!==null&&l.memoizedState!==null,he=ks,_e=dn;if(ks=he||g,dn=_e||Z,kr(a,i),dn=_e,ks=he,Dr(i),h&8192)e:for(a=i.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(l===null||Z||ks||dn||Ro(i)),l=null,a=i;;){if(a.tag===5||a.tag===26){if(l===null){Z=l=a;try{if(E=Z.stateNode,g)x=E.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{H=Z.stateNode;var Ae=Z.memoizedProps.style,de=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;H.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(pe){Pt(Z,Z.return,pe)}}}else if(a.tag===6){if(l===null){Z=a;try{Z.stateNode.nodeValue=g?"":Z.memoizedProps}catch(pe){Pt(Z,Z.return,pe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=i.updateQueue,h!==null&&(l=h.retryQueue,l!==null&&(h.retryQueue=null,_g(i,l))));break;case 19:kr(a,i),Dr(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,_g(i,h)));break;case 30:break;case 21:break;default:kr(a,i),Dr(i)}}function Dr(i){var a=i.flags;if(a&2){try{for(var l,h=i.return;h!==null;){if(XT(h)){l=h;break}h=h.return}if(l==null)throw Error(r(160));switch(l.tag){case 27:var g=l.stateNode,E=gg(i);Tf(i,E,g);break;case 5:var x=l.stateNode;l.flags&32&&(Zr(x,""),l.flags&=-33);var H=gg(i);Tf(i,H,x);break;case 3:case 4:var Z=l.stateNode.containerInfo,he=gg(i);yg(i,he,Z);break;default:throw Error(r(161))}}catch(_e){Pt(i,i.return,_e)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function rv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;rv(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function oa(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ZT(i,a.alternate,a),a=a.sibling}function Ro(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:aa(4,a,a.return),Ro(a);break;case 1:Gi(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&$T(a,a.return,l),Ro(a);break;case 27:Yc(a.stateNode);case 26:case 5:Gi(a,a.return),Ro(a);break;case 22:a.memoizedState===null&&Ro(a);break;case 30:Ro(a);break;default:Ro(a)}i=i.sibling}}function ua(i,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,g=i,E=a,x=E.flags;switch(E.tag){case 0:case 11:case 15:ua(g,E,l),Pc(4,E);break;case 1:if(ua(g,E,l),h=E,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(he){Pt(h,h.return,he)}if(h=E,g=h.updateQueue,g!==null){var H=h.stateNode;try{var Z=g.shared.hiddenCallbacks;if(Z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<Z.length;g++)Db(Z[g],H)}catch(he){Pt(h,h.return,he)}}l&&x&64&&GT(E),Mc(E,E.return);break;case 27:QT(E);case 26:case 5:ua(g,E,l),l&&h===null&&x&4&&KT(E),Mc(E,E.return);break;case 12:ua(g,E,l);break;case 13:ua(g,E,l),l&&x&4&&tv(g,E);break;case 22:E.memoizedState===null&&ua(g,E,l),Mc(E,E.return);break;case 30:break;default:ua(g,E,l)}a=a.sibling}}function bg(i,a){var l=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==l&&(i!=null&&i.refCount++,l!=null&&Tc(l))}function Tg(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Tc(i))}function $i(i,a,l,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)iv(i,a,l,h),a=a.sibling}function iv(i,a,l,h){var g=a.flags;switch(a.tag){case 0:case 11:case 15:$i(i,a,l,h),g&2048&&Pc(9,a);break;case 1:$i(i,a,l,h);break;case 3:$i(i,a,l,h),g&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Tc(i)));break;case 12:if(g&2048){$i(i,a,l,h),i=a.stateNode;try{var E=a.memoizedProps,x=E.id,H=E.onPostCommit;typeof H=="function"&&H(x,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(Z){Pt(a,a.return,Z)}}else $i(i,a,l,h);break;case 13:$i(i,a,l,h);break;case 23:break;case 22:E=a.stateNode,x=a.alternate,a.memoizedState!==null?E._visibility&2?$i(i,a,l,h):Bc(i,a):E._visibility&2?$i(i,a,l,h):(E._visibility|=2,Bu(i,a,l,h,(a.subtreeFlags&10256)!==0)),g&2048&&bg(x,a);break;case 24:$i(i,a,l,h),g&2048&&Tg(a.alternate,a);break;default:$i(i,a,l,h)}}function Bu(i,a,l,h,g){for(g=g&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var E=i,x=a,H=l,Z=h,he=x.flags;switch(x.tag){case 0:case 11:case 15:Bu(E,x,H,Z,g),Pc(8,x);break;case 23:break;case 22:var _e=x.stateNode;x.memoizedState!==null?_e._visibility&2?Bu(E,x,H,Z,g):Bc(E,x):(_e._visibility|=2,Bu(E,x,H,Z,g)),g&&he&2048&&bg(x.alternate,x);break;case 24:Bu(E,x,H,Z,g),g&&he&2048&&Tg(x.alternate,x);break;default:Bu(E,x,H,Z,g)}a=a.sibling}}function Bc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=i,h=a,g=h.flags;switch(h.tag){case 22:Bc(l,h),g&2048&&bg(h.alternate,h);break;case 24:Bc(l,h),g&2048&&Tg(h.alternate,h);break;default:Bc(l,h)}a=a.sibling}}var Uc=8192;function Uu(i){if(i.subtreeFlags&Uc)for(i=i.child;i!==null;)sv(i),i=i.sibling}function sv(i){switch(i.tag){case 26:Uu(i),i.flags&Uc&&i.memoizedState!==null&&S6(_i,i.memoizedState,i.memoizedProps);break;case 5:Uu(i);break;case 3:case 4:var a=_i;_i=Lf(i.stateNode.containerInfo),Uu(i),_i=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=Uc,Uc=16777216,Uu(i),Uc=a):Uu(i));break;default:Uu(i)}}function av(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Hc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];Ln=h,uv(h,i)}av(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ov(i),i=i.sibling}function ov(i){switch(i.tag){case 0:case 11:case 15:Hc(i),i.flags&2048&&aa(9,i,i.return);break;case 3:Hc(i);break;case 12:Hc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,vf(i)):Hc(i);break;default:Hc(i)}}function vf(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var h=a[l];Ln=h,uv(h,i)}av(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:aa(8,a,a.return),vf(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,vf(a));break;default:vf(a)}i=i.sibling}}function uv(i,a){for(;Ln!==null;){var l=Ln;switch(l.tag){case 0:case 11:case 15:aa(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var h=l.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Tc(l.memoizedState.cache)}if(h=l.child,h!==null)h.return=l,Ln=h;else e:for(l=i;Ln!==null;){h=Ln;var g=h.sibling,E=h.return;if(JT(h),h===l){Ln=null;break e}if(g!==null){g.return=E,Ln=g;break e}Ln=E}}}var V4={getCacheForType:function(i){var a=Qn(In),l=a.data.get(i);return l===void 0&&(l=i(),a.data.set(i,l)),l}},z4=typeof WeakMap=="function"?WeakMap:Map,Nt=0,Ut=null,ht=null,_t=0,Rt=0,Or=null,la=!1,Hu=!1,vg=!1,Os=0,rn=0,ca=0,ko=0,Ag=0,oi=0,Vu=0,Vc=null,pr=null,Sg=!1,xg=0,Af=1/0,Sf=null,ha=null,Yn=0,da=null,zu=null,Fu=0,wg=0,Cg=null,lv=null,zc=0,Ig=null;function Lr(){if((Nt&2)!==0&&_t!==0)return _t&-_t;if(z.T!==null){var i=Nu;return i!==0?i:Pg()}return ki()}function cv(){oi===0&&(oi=(_t&536870912)===0||xt?ds():536870912);var i=ai.current;return i!==null&&(i.flags|=32),oi}function Pr(i,a,l){(i===Ut&&(Rt===2||Rt===9)||i.cancelPendingCommit!==null)&&(ju(i,0),fa(i,_t,oi,!1)),Gr(i,l),((Nt&2)===0||i!==Ut)&&(i===Ut&&((Nt&2)===0&&(ko|=l),rn===4&&fa(i,_t,oi,!1)),Ki(i))}function hv(i,a,l){if((Nt&6)!==0)throw Error(r(327));var h=!l&&(a&124)===0&&(a&i.expiredLanes)===0||en(i,a),g=h?q4(i,a):kg(i,a,!0),E=h;do{if(g===0){Hu&&!h&&fa(i,a,0,!1);break}else{if(l=i.current.alternate,E&&!F4(l)){g=kg(i,a,!1),E=!1;continue}if(g===2){if(E=a,i.errorRecoveryDisabledLanes&E)var x=0;else x=i.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var H=i;g=Vc;var Z=H.current.memoizedState.isDehydrated;if(Z&&(ju(H,x).flags|=256),x=kg(H,x,!1),x!==2){if(vg&&!Z){H.errorRecoveryDisabledLanes|=E,ko|=E,g=4;break e}E=pr,pr=g,E!==null&&(pr===null?pr=E:pr.push.apply(pr,E))}g=x}if(E=!1,g!==2)continue}}if(g===1){ju(i,0),fa(i,a,0,!0);break}e:{switch(h=i,E=g,E){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:fa(h,a,oi,!la);break e;case 2:pr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(g=xg+300-Qe(),10<g)){if(fa(h,a,oi,!la),St(h,0,!0)!==0)break e;h.timeoutHandle=Vv(dv.bind(null,h,l,pr,Sf,Sg,a,oi,ko,Vu,la,E,2,-0,0),g);break e}dv(h,l,pr,Sf,Sg,a,oi,ko,Vu,la,E,0,-0,0)}}break}while(!0);Ki(i)}function dv(i,a,l,h,g,E,x,H,Z,he,_e,Ae,de,pe){if(i.timeoutHandle=-1,Ae=a.subtreeFlags,(Ae&8192||(Ae&16785408)===16785408)&&(Kc={stylesheets:null,count:0,unsuspend:A6},sv(a),Ae=x6(),Ae!==null)){i.cancelPendingCommit=Ae(_v.bind(null,i,a,E,l,h,g,x,H,Z,_e,1,de,pe)),fa(i,E,x,!he);return}_v(i,a,E,l,h,g,x,H,Z)}function F4(i){for(var a=i;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var h=0;h<l.length;h++){var g=l[h],E=g.getSnapshot;g=g.value;try{if(!Nr(E(),g))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function fa(i,a,l,h){a&=~Ag,a&=~ko,i.suspendedLanes|=a,i.pingedLanes&=~a,h&&(i.warmLanes|=a),h=i.expirationTimes;for(var g=a;0<g;){var E=31-ze(g),x=1<<E;h[E]=-1,g&=~x}l!==0&&$r(i,l,a)}function xf(){return(Nt&6)===0?(Fc(0),!1):!0}function Ng(){if(ht!==null){if(Rt===0)var i=ht.return;else i=ht,xs=xo=null,Gm(i),Pu=null,Dc=0,i=ht;for(;i!==null;)YT(i.alternate,i),i=i.return;ht=null}}function ju(i,a){var l=i.timeoutHandle;l!==-1&&(i.timeoutHandle=-1,a6(l)),l=i.cancelPendingCommit,l!==null&&(i.cancelPendingCommit=null,l()),Ng(),Ut=i,ht=l=vs(i.current,null),_t=a,Rt=0,Or=null,la=!1,Hu=en(i,a),vg=!1,Vu=oi=Ag=ko=ca=rn=0,pr=Vc=null,Sg=!1,(a&8)!==0&&(a|=a&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=a;0<h;){var g=31-ze(h),E=1<<g;a|=i[g],h&=~E}return Os=a,Gd(),l}function fv(i,a){it=null,z.H=df,a===Ac||a===tf?(a=Rb(),Rt=3):a===Cb?(a=Rb(),Rt=4):Rt=a===kT?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Or=a,ht===null&&(rn=1,yf(i,ni(a,i.current)))}function pv(){var i=z.H;return z.H=df,i===null?df:i}function mv(){var i=z.A;return z.A=V4,i}function Rg(){rn=4,la||(_t&4194048)!==_t&&ai.current!==null||(Hu=!0),(ca&134217727)===0&&(ko&134217727)===0||Ut===null||fa(Ut,_t,oi,!1)}function kg(i,a,l){var h=Nt;Nt|=2;var g=pv(),E=mv();(Ut!==i||_t!==a)&&(Sf=null,ju(i,a)),a=!1;var x=rn;e:do try{if(Rt!==0&&ht!==null){var H=ht,Z=Or;switch(Rt){case 8:Ng(),x=6;break e;case 3:case 2:case 9:case 6:ai.current===null&&(a=!0);var he=Rt;if(Rt=0,Or=null,qu(i,H,Z,he),l&&Hu){x=0;break e}break;default:he=Rt,Rt=0,Or=null,qu(i,H,Z,he)}}j4(),x=rn;break}catch(_e){fv(i,_e)}while(!0);return a&&i.shellSuspendCounter++,xs=xo=null,Nt=h,z.H=g,z.A=E,ht===null&&(Ut=null,_t=0,Gd()),x}function j4(){for(;ht!==null;)gv(ht)}function q4(i,a){var l=Nt;Nt|=2;var h=pv(),g=mv();Ut!==i||_t!==a?(Sf=null,Af=Qe()+500,ju(i,a)):Hu=en(i,a);e:do try{if(Rt!==0&&ht!==null){a=ht;var E=Or;t:switch(Rt){case 1:Rt=0,Or=null,qu(i,a,E,1);break;case 2:case 9:if(Ib(E)){Rt=0,Or=null,yv(a);break}a=function(){Rt!==2&&Rt!==9||Ut!==i||(Rt=7),Ki(i)},E.then(a,a);break e;case 3:Rt=7;break e;case 4:Rt=5;break e;case 7:Ib(E)?(Rt=0,Or=null,yv(a)):(Rt=0,Or=null,qu(i,a,E,7));break;case 5:var x=null;switch(ht.tag){case 26:x=ht.memoizedState;case 5:case 27:var H=ht;if(!x||Zv(x)){Rt=0,Or=null;var Z=H.sibling;if(Z!==null)ht=Z;else{var he=H.return;he!==null?(ht=he,wf(he)):ht=null}break t}}Rt=0,Or=null,qu(i,a,E,5);break;case 6:Rt=0,Or=null,qu(i,a,E,6);break;case 8:Ng(),rn=6;break e;default:throw Error(r(462))}}Y4();break}catch(_e){fv(i,_e)}while(!0);return xs=xo=null,z.H=h,z.A=g,Nt=l,ht!==null?0:(Ut=null,_t=0,Gd(),rn)}function Y4(){for(;ht!==null&&!gt();)gv(ht)}function gv(i){var a=jT(i.alternate,i,Os);i.memoizedProps=i.pendingProps,a===null?wf(i):ht=a}function yv(i){var a=i,l=a.alternate;switch(a.tag){case 15:case 0:a=BT(l,a,a.pendingProps,a.type,void 0,_t);break;case 11:a=BT(l,a,a.pendingProps,a.type.render,a.ref,_t);break;case 5:Gm(a);default:YT(l,a),a=ht=Eb(a,Os),a=jT(l,a,Os)}i.memoizedProps=i.pendingProps,a===null?wf(i):ht=a}function qu(i,a,l,h){xs=xo=null,Gm(a),Pu=null,Dc=0;var g=a.return;try{if(L4(i,g,a,l,_t)){rn=1,yf(i,ni(l,i.current)),ht=null;return}}catch(E){if(g!==null)throw ht=g,E;rn=1,yf(i,ni(l,i.current)),ht=null;return}a.flags&32768?(xt||h===1?i=!0:Hu||(_t&536870912)!==0?i=!1:(la=i=!0,(h===2||h===9||h===3||h===6)&&(h=ai.current,h!==null&&h.tag===13&&(h.flags|=16384))),Ev(a,i)):wf(a)}function wf(i){var a=i;do{if((a.flags&32768)!==0){Ev(a,la);return}i=a.return;var l=M4(a.alternate,a,Os);if(l!==null){ht=l;return}if(a=a.sibling,a!==null){ht=a;return}ht=a=i}while(a!==null);rn===0&&(rn=5)}function Ev(i,a){do{var l=B4(i.alternate,i);if(l!==null){l.flags&=32767,ht=l;return}if(l=i.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(i=i.sibling,i!==null)){ht=i;return}ht=i=l}while(i!==null);rn=6,ht=null}function _v(i,a,l,h,g,E,x,H,Z){i.cancelPendingCommit=null;do Cf();while(Yn!==0);if((Nt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(E=a.lanes|a.childLanes,E|=Tm,wr(i,l,E,x,H,Z),i===Ut&&(ht=Ut=null,_t=0),zu=a,da=i,Fu=l,wg=E,Cg=g,lv=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,X4(un,function(){return Sv(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=z.T,z.T=null,g=J.p,J.p=2,x=Nt,Nt|=4;try{U4(i,a,l)}finally{Nt=x,J.p=g,z.T=h}}Yn=1,bv(),Tv(),vv()}}function bv(){if(Yn===1){Yn=0;var i=da,a=zu,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=z.T,z.T=null;var h=J.p;J.p=2;var g=Nt;Nt|=4;try{nv(a,i);var E=jg,x=ub(i.containerInfo),H=E.focusedElem,Z=E.selectionRange;if(x!==H&&H&&H.ownerDocument&&ob(H.ownerDocument.documentElement,H)){if(Z!==null&&gm(H)){var he=Z.start,_e=Z.end;if(_e===void 0&&(_e=he),"selectionStart"in H)H.selectionStart=he,H.selectionEnd=Math.min(_e,H.value.length);else{var Ae=H.ownerDocument||document,de=Ae&&Ae.defaultView||window;if(de.getSelection){var pe=de.getSelection(),Ke=H.textContent.length,qe=Math.min(Z.start,Ke),Lt=Z.end===void 0?qe:Math.min(Z.end,Ke);!pe.extend&&qe>Lt&&(x=Lt,Lt=qe,qe=x);var ie=ab(H,qe),ne=ab(H,Lt);if(ie&&ne&&(pe.rangeCount!==1||pe.anchorNode!==ie.node||pe.anchorOffset!==ie.offset||pe.focusNode!==ne.node||pe.focusOffset!==ne.offset)){var le=Ae.createRange();le.setStart(ie.node,ie.offset),pe.removeAllRanges(),qe>Lt?(pe.addRange(le),pe.extend(ne.node,ne.offset)):(le.setEnd(ne.node,ne.offset),pe.addRange(le))}}}}for(Ae=[],pe=H;pe=pe.parentNode;)pe.nodeType===1&&Ae.push({element:pe,left:pe.scrollLeft,top:pe.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Ae.length;H++){var ve=Ae[H];ve.element.scrollLeft=ve.left,ve.element.scrollTop=ve.top}}Hf=!!Fg,jg=Fg=null}finally{Nt=g,J.p=h,z.T=l}}i.current=a,Yn=2}}function Tv(){if(Yn===2){Yn=0;var i=da,a=zu,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=z.T,z.T=null;var h=J.p;J.p=2;var g=Nt;Nt|=4;try{ZT(i,a.alternate,a)}finally{Nt=g,J.p=h,z.T=l}}Yn=3}}function vv(){if(Yn===4||Yn===3){Yn=0,Xt();var i=da,a=zu,l=Fu,h=lv;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Yn=5:(Yn=0,zu=da=null,Av(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(ha=null),Ks(l),a=a.stateNode,Te&&typeof Te.onCommitFiberRoot=="function")try{Te.onCommitFiberRoot(fe,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=z.T,g=J.p,J.p=2,z.T=null;try{for(var E=i.onRecoverableError,x=0;x<h.length;x++){var H=h[x];E(H.value,{componentStack:H.stack})}}finally{z.T=a,J.p=g}}(Fu&3)!==0&&Cf(),Ki(i),g=i.pendingLanes,(l&4194090)!==0&&(g&42)!==0?i===Ig?zc++:(zc=0,Ig=i):zc=0,Fc(0)}}function Av(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Tc(a)))}function Cf(i){return bv(),Tv(),vv(),Sv()}function Sv(){if(Yn!==5)return!1;var i=da,a=wg;wg=0;var l=Ks(Fu),h=z.T,g=J.p;try{J.p=32>l?32:l,z.T=null,l=Cg,Cg=null;var E=da,x=Fu;if(Yn=0,zu=da=null,Fu=0,(Nt&6)!==0)throw Error(r(331));var H=Nt;if(Nt|=4,ov(E.current),iv(E,E.current,x,l),Nt=H,Fc(0,!1),Te&&typeof Te.onPostCommitFiberRoot=="function")try{Te.onPostCommitFiberRoot(fe,E)}catch{}return!0}finally{J.p=g,z.T=h,Av(i,a)}}function xv(i,a,l){a=ni(l,a),a=ag(i.stateNode,a,2),i=na(i,a,2),i!==null&&(Gr(i,2),Ki(i))}function Pt(i,a,l){if(i.tag===3)xv(i,i,l);else for(;a!==null;){if(a.tag===3){xv(a,i,l);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ha===null||!ha.has(h))){i=ni(l,i),l=NT(2),h=na(a,l,2),h!==null&&(RT(l,h,a,i),Gr(h,2),Ki(h));break}}a=a.return}}function Dg(i,a,l){var h=i.pingCache;if(h===null){h=i.pingCache=new z4;var g=new Set;h.set(a,g)}else g=h.get(a),g===void 0&&(g=new Set,h.set(a,g));g.has(l)||(vg=!0,g.add(l),i=G4.bind(null,i,a,l),a.then(i,i))}function G4(i,a,l){var h=i.pingCache;h!==null&&h.delete(a),i.pingedLanes|=i.suspendedLanes&l,i.warmLanes&=~l,Ut===i&&(_t&l)===l&&(rn===4||rn===3&&(_t&62914560)===_t&&300>Qe()-xg?(Nt&2)===0&&ju(i,0):Ag|=l,Vu===_t&&(Vu=0)),Ki(i)}function wv(i,a){a===0&&(a=pi()),i=xu(i,a),i!==null&&(Gr(i,a),Ki(i))}function $4(i){var a=i.memoizedState,l=0;a!==null&&(l=a.retryLane),wv(i,l)}function K4(i,a){var l=0;switch(i.tag){case 13:var h=i.stateNode,g=i.memoizedState;g!==null&&(l=g.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(a),wv(i,l)}function X4(i,a){return Ze(i,a)}var If=null,Yu=null,Og=!1,Nf=!1,Lg=!1,Do=0;function Ki(i){i!==Yu&&i.next===null&&(Yu===null?If=Yu=i:Yu=Yu.next=i),Nf=!0,Og||(Og=!0,W4())}function Fc(i,a){if(!Lg&&Nf){Lg=!0;do for(var l=!1,h=If;h!==null;){if(i!==0){var g=h.pendingLanes;if(g===0)var E=0;else{var x=h.suspendedLanes,H=h.pingedLanes;E=(1<<31-ze(42|i)+1)-1,E&=g&~(x&~H),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(l=!0,Rv(h,E))}else E=_t,E=St(h,h===Ut?E:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(E&3)===0||en(h,E)||(l=!0,Rv(h,E));h=h.next}while(l);Lg=!1}}function Q4(){Cv()}function Cv(){Nf=Og=!1;var i=0;Do!==0&&(s6()&&(i=Do),Do=0);for(var a=Qe(),l=null,h=If;h!==null;){var g=h.next,E=Iv(h,a);E===0?(h.next=null,l===null?If=g:l.next=g,g===null&&(Yu=l)):(l=h,(i!==0||(E&3)!==0)&&(Nf=!0)),h=g}Fc(i)}function Iv(i,a){for(var l=i.suspendedLanes,h=i.pingedLanes,g=i.expirationTimes,E=i.pendingLanes&-62914561;0<E;){var x=31-ze(E),H=1<<x,Z=g[x];Z===-1?((H&l)===0||(H&h)!==0)&&(g[x]=Sn(H,a)):Z<=a&&(i.expiredLanes|=H),E&=~H}if(a=Ut,l=_t,l=St(i,i===a?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,l===0||i===a&&(Rt===2||Rt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&mt(h),i.callbackNode=null,i.callbackPriority=0;if((l&3)===0||en(i,l)){if(a=l&-l,a===i.callbackPriority)return a;switch(h!==null&&mt(h),Ks(l)){case 2:case 8:l=An;break;case 32:l=un;break;case 268435456:l=Vn;break;default:l=un}return h=Nv.bind(null,i),l=Ze(l,h),i.callbackPriority=a,i.callbackNode=l,a}return h!==null&&h!==null&&mt(h),i.callbackPriority=2,i.callbackNode=null,2}function Nv(i,a){if(Yn!==0&&Yn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var l=i.callbackNode;if(Cf()&&i.callbackNode!==l)return null;var h=_t;return h=St(i,i===Ut?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(hv(i,h,a),Iv(i,Qe()),i.callbackNode!=null&&i.callbackNode===l?Nv.bind(null,i):null)}function Rv(i,a){if(Cf())return null;hv(i,a,!0)}function W4(){o6(function(){(Nt&6)!==0?Ze(Ft,Q4):Cv()})}function Pg(){return Do===0&&(Do=ds()),Do}function kv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:fu(""+i)}function Dv(i,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,i.id&&l.setAttribute("form",i.id),a.parentNode.insertBefore(l,a),i=new FormData(i),l.parentNode.removeChild(l),i}function Z4(i,a,l,h,g){if(a==="submit"&&l&&l.stateNode===g){var E=kv((g[tn]||null).action),x=h.submitter;x&&(a=(a=x[tn]||null)?kv(a.formAction):x.getAttribute("formAction"),a!==null&&(E=a,x=null));var H=new pu("action","action",null,h,g);i.push({event:H,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Do!==0){var Z=x?Dv(g,x):new FormData(g);tg(l,{pending:!0,data:Z,method:g.method,action:E},null,Z)}}else typeof E=="function"&&(H.preventDefault(),Z=x?Dv(g,x):new FormData(g),tg(l,{pending:!0,data:Z,method:g.method,action:E},E,Z))},currentTarget:g}]})}}for(var Mg=0;Mg<bm.length;Mg++){var Bg=bm[Mg],J4=Bg.toLowerCase(),e6=Bg[0].toUpperCase()+Bg.slice(1);Ei(J4,"on"+e6)}Ei(hb,"onAnimationEnd"),Ei(db,"onAnimationIteration"),Ei(fb,"onAnimationStart"),Ei("dblclick","onDoubleClick"),Ei("focusin","onFocus"),Ei("focusout","onBlur"),Ei(y4,"onTransitionRun"),Ei(E4,"onTransitionStart"),Ei(_4,"onTransitionCancel"),Ei(pb,"onTransitionEnd"),mi("onMouseEnter",["mouseout","mouseover"]),mi("onMouseLeave",["mouseout","mouseover"]),mi("onPointerEnter",["pointerout","pointerover"]),mi("onPointerLeave",["pointerout","pointerover"]),Cr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),t6=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jc));function Ov(i,a){a=(a&4)!==0;for(var l=0;l<i.length;l++){var h=i[l],g=h.event;h=h.listeners;e:{var E=void 0;if(a)for(var x=h.length-1;0<=x;x--){var H=h[x],Z=H.instance,he=H.currentTarget;if(H=H.listener,Z!==E&&g.isPropagationStopped())break e;E=H,g.currentTarget=he;try{E(g)}catch(_e){gf(_e)}g.currentTarget=null,E=Z}else for(x=0;x<h.length;x++){if(H=h[x],Z=H.instance,he=H.currentTarget,H=H.listener,Z!==E&&g.isPropagationStopped())break e;E=H,g.currentTarget=he;try{E(g)}catch(_e){gf(_e)}g.currentTarget=null,E=Z}}}}function dt(i,a){var l=a[ro];l===void 0&&(l=a[ro]=new Set);var h=i+"__bubble";l.has(h)||(Lv(a,i,2,!1),l.add(h))}function Ug(i,a,l){var h=0;a&&(h|=4),Lv(l,i,h,a)}var Rf="_reactListening"+Math.random().toString(36).slice(2);function Hg(i){if(!i[Rf]){i[Rf]=!0,io.forEach(function(l){l!=="selectionchange"&&(t6.has(l)||Ug(l,!1,i),Ug(l,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[Rf]||(a[Rf]=!0,Ug("selectionchange",!1,a))}}function Lv(i,a,l,h){switch(i2(a)){case 2:var g=I6;break;case 8:g=N6;break;default:g=Jg}l=g.bind(null,a,l,i),g=void 0,!ei||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),h?g!==void 0?i.addEventListener(a,l,{capture:!0,passive:g}):i.addEventListener(a,l,!0):g!==void 0?i.addEventListener(a,l,{passive:g}):i.addEventListener(a,l,!1)}function Vg(i,a,l,h,g){var E=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var x=h.tag;if(x===3||x===4){var H=h.stateNode.containerInfo;if(H===g)break;if(x===4)for(x=h.return;x!==null;){var Z=x.tag;if((Z===3||Z===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;H!==null;){if(x=Kr(H),x===null)return;if(Z=x.tag,Z===5||Z===6||Z===26||Z===27){h=E=x;continue e}H=H.parentNode}}h=h.return}kd(function(){var he=E,_e=Jr(l),Ae=[];e:{var de=mb.get(i);if(de!==void 0){var pe=pu,Ke=i;switch(i){case"keypress":if(Hi(l)===0)break e;case"keydown":case"keyup":pe=bu;break;case"focusin":Ke="focus",pe=yu;break;case"focusout":Ke="blur",pe=yu;break;case"beforeblur":case"afterblur":pe=yu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pe=ti;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pe=dm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pe=Hd;break;case hb:case db:case fb:pe=Eu;break;case pb:pe=zd;break;case"scroll":case"scrollend":pe=Dd;break;case"wheel":pe=Tu;break;case"copy":case"cut":case"paste":pe=_u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pe=fc;break;case"toggle":case"beforetoggle":pe=jd}var qe=(a&4)!==0,Lt=!qe&&(i==="scroll"||i==="scrollend"),ie=qe?de!==null?de+"Capture":null:de;qe=[];for(var ne=he,le;ne!==null;){var ve=ne;if(le=ve.stateNode,ve=ve.tag,ve!==5&&ve!==26&&ve!==27||le===null||ie===null||(ve=co(ne,ie),ve!=null&&qe.push(qc(ne,ve,le))),Lt)break;ne=ne.return}0<qe.length&&(de=new pe(de,Ke,null,l,_e),Ae.push({event:de,listeners:qe}))}}if((a&7)===0){e:{if(de=i==="mouseover"||i==="pointerover",pe=i==="mouseout"||i==="pointerout",de&&l!==gs&&(Ke=l.relatedTarget||l.fromElement)&&(Kr(Ke)||Ke[hr]))break e;if((pe||de)&&(de=_e.window===_e?_e:(de=_e.ownerDocument)?de.defaultView||de.parentWindow:window,pe?(Ke=l.relatedTarget||l.toElement,pe=he,Ke=Ke?Kr(Ke):null,Ke!==null&&(Lt=o(Ke),qe=Ke.tag,Ke!==Lt||qe!==5&&qe!==27&&qe!==6)&&(Ke=null)):(pe=null,Ke=he),pe!==Ke)){if(qe=ti,ve="onMouseLeave",ie="onMouseEnter",ne="mouse",(i==="pointerout"||i==="pointerover")&&(qe=fc,ve="onPointerLeave",ie="onPointerEnter",ne="pointer"),Lt=pe==null?de:Qr(pe),le=Ke==null?de:Qr(Ke),de=new qe(ve,ne+"leave",pe,l,_e),de.target=Lt,de.relatedTarget=le,ve=null,Kr(_e)===he&&(qe=new qe(ie,ne+"enter",Ke,l,_e),qe.target=le,qe.relatedTarget=Lt,ve=qe),Lt=ve,pe&&Ke)t:{for(qe=pe,ie=Ke,ne=0,le=qe;le;le=Gu(le))ne++;for(le=0,ve=ie;ve;ve=Gu(ve))le++;for(;0<ne-le;)qe=Gu(qe),ne--;for(;0<le-ne;)ie=Gu(ie),le--;for(;ne--;){if(qe===ie||ie!==null&&qe===ie.alternate)break t;qe=Gu(qe),ie=Gu(ie)}qe=null}else qe=null;pe!==null&&Pv(Ae,de,pe,qe,!1),Ke!==null&&Lt!==null&&Pv(Ae,Lt,Ke,qe,!0)}}e:{if(de=he?Qr(he):window,pe=de.nodeName&&de.nodeName.toLowerCase(),pe==="select"||pe==="input"&&de.type==="file")var Ue=eb;else if(Cn(de))if(tb)Ue=p4;else{Ue=d4;var ot=h4}else pe=de.nodeName,!pe||pe.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?he&&ac(he.elementType)&&(Ue=eb):Ue=f4;if(Ue&&(Ue=Ue(i,he))){Ts(Ae,Ue,l,_e);break e}ot&&ot(i,de,he),i==="focusout"&&he&&de.type==="number"&&he.memoizedProps.value!=null&&Ws(de,"number",de.value)}switch(ot=he?Qr(he):window,i){case"focusin":(Cn(ot)||ot.contentEditable==="true")&&(vu=ot,ym=he,gc=null);break;case"focusout":gc=ym=vu=null;break;case"mousedown":Em=!0;break;case"contextmenu":case"mouseup":case"dragend":Em=!1,lb(Ae,l,_e);break;case"selectionchange":if(g4)break;case"keydown":case"keyup":lb(Ae,l,_e)}var Fe;if(Fi)e:{switch(i){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else yt?ge(i,l)&&(Ye="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(Ye="onCompositionStart");Ye&&(S&&l.locale!=="ko"&&(yt||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&yt&&(Fe=uc()):(Ui=_e,Zs="value"in Ui?Ui.value:Ui.textContent,yt=!0)),ot=kf(he,Ye),0<ot.length&&(Ye=new hc(Ye,i,null,l,_e),Ae.push({event:Ye,listeners:ot}),Fe?Ye.data=Fe:(Fe=De(l),Fe!==null&&(Ye.data=Fe)))),(Fe=v?wn(i,l):Et(i,l))&&(Ye=kf(he,"onBeforeInput"),0<Ye.length&&(ot=new hc("onBeforeInput","beforeinput",null,l,_e),Ae.push({event:ot,listeners:Ye}),ot.data=Fe)),Z4(Ae,i,he,l,_e)}Ov(Ae,a)})}function qc(i,a,l){return{instance:i,listener:a,currentTarget:l}}function kf(i,a){for(var l=a+"Capture",h=[];i!==null;){var g=i,E=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||E===null||(g=co(i,l),g!=null&&h.unshift(qc(i,g,E)),g=co(i,a),g!=null&&h.push(qc(i,g,E))),i.tag===3)return h;i=i.return}return[]}function Gu(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Pv(i,a,l,h,g){for(var E=a._reactName,x=[];l!==null&&l!==h;){var H=l,Z=H.alternate,he=H.stateNode;if(H=H.tag,Z!==null&&Z===h)break;H!==5&&H!==26&&H!==27||he===null||(Z=he,g?(he=co(l,E),he!=null&&x.unshift(qc(l,he,Z))):g||(he=co(l,E),he!=null&&x.push(qc(l,he,Z)))),l=l.return}x.length!==0&&i.push({event:a,listeners:x})}var n6=/\r\n?/g,r6=/\u0000|\uFFFD/g;function Mv(i){return(typeof i=="string"?i:""+i).replace(n6,`
`).replace(r6,"")}function Bv(i,a){return a=Mv(a),Mv(i)===a}function Df(){}function Ot(i,a,l,h,g,E){switch(l){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||Zr(i,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&Zr(i,""+h);break;case"className":Wr(i,"class",h);break;case"tabIndex":Wr(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Wr(i,l,h);break;case"style":sc(i,h,E);break;case"data":if(a!=="object"){Wr(i,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||l!=="href")){i.removeAttribute(l);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=fu(""+h),i.setAttribute(l,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(l==="formAction"?(a!=="input"&&Ot(i,a,"name",g.name,g,null),Ot(i,a,"formEncType",g.formEncType,g,null),Ot(i,a,"formMethod",g.formMethod,g,null),Ot(i,a,"formTarget",g.formTarget,g,null)):(Ot(i,a,"encType",g.encType,g,null),Ot(i,a,"method",g.method,g,null),Ot(i,a,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(l);break}h=fu(""+h),i.setAttribute(l,h);break;case"onClick":h!=null&&(i.onclick=Df);break;case"onScroll":h!=null&&dt("scroll",i);break;case"onScrollEnd":h!=null&&dt("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}l=fu(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""+h):i.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,""):i.removeAttribute(l);break;case"capture":case"download":h===!0?i.setAttribute(l,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(l,h):i.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(l,h):i.removeAttribute(l);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(l):i.setAttribute(l,h);break;case"popover":dt("beforetoggle",i),dt("toggle",i),Li(i,"popover",h);break;case"xlinkActuate":xn(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":xn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":xn(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":xn(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":xn(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":xn(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":xn(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":xn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":xn(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Li(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=cm.get(l)||l,Li(i,l,h))}}function zg(i,a,l,h,g,E){switch(l){case"style":sc(i,h,E);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(l=h.__html,l!=null){if(g.children!=null)throw Error(r(60));i.innerHTML=l}}break;case"children":typeof h=="string"?Zr(i,h):(typeof h=="number"||typeof h=="bigint")&&Zr(i,""+h);break;case"onScroll":h!=null&&dt("scroll",i);break;case"onScrollEnd":h!=null&&dt("scrollend",i);break;case"onClick":h!=null&&(i.onclick=Df);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xs.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),a=l.slice(2,g?l.length-7:void 0),E=i[tn]||null,E=E!=null?E[l]:null,typeof E=="function"&&i.removeEventListener(a,E,g),typeof h=="function")){typeof E!="function"&&E!==null&&(l in i?i[l]=null:i.hasAttribute(l)&&i.removeAttribute(l)),i.addEventListener(a,h,g);break e}l in i?i[l]=h:h===!0?i.setAttribute(l,""):Li(i,l,h)}}}function Gn(i,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dt("error",i),dt("load",i);var h=!1,g=!1,E;for(E in l)if(l.hasOwnProperty(E)){var x=l[E];if(x!=null)switch(E){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ot(i,a,E,x,l,null)}}g&&Ot(i,a,"srcSet",l.srcSet,l,null),h&&Ot(i,a,"src",l.src,l,null);return;case"input":dt("invalid",i);var H=E=x=g=null,Z=null,he=null;for(h in l)if(l.hasOwnProperty(h)){var _e=l[h];if(_e!=null)switch(h){case"name":g=_e;break;case"type":x=_e;break;case"checked":Z=_e;break;case"defaultChecked":he=_e;break;case"value":E=_e;break;case"defaultValue":H=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,a));break;default:Ot(i,a,h,_e,l,null)}}oo(i,E,H,Z,he,x,g,!1),du(i);return;case"select":dt("invalid",i),h=x=E=null;for(g in l)if(l.hasOwnProperty(g)&&(H=l[g],H!=null))switch(g){case"value":E=H;break;case"defaultValue":x=H;break;case"multiple":h=H;default:Ot(i,a,g,H,l,null)}a=E,l=x,i.multiple=!!h,a!=null?ms(i,!!h,a,!1):l!=null&&ms(i,!!h,l,!0);return;case"textarea":dt("invalid",i),E=g=h=null;for(x in l)if(l.hasOwnProperty(x)&&(H=l[x],H!=null))switch(x){case"value":h=H;break;case"defaultValue":g=H;break;case"children":E=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(91));break;default:Ot(i,a,x,H,l,null)}uo(i,h,g,E),du(i);return;case"option":for(Z in l)if(l.hasOwnProperty(Z)&&(h=l[Z],h!=null))switch(Z){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ot(i,a,Z,h,l,null)}return;case"dialog":dt("beforetoggle",i),dt("toggle",i),dt("cancel",i),dt("close",i);break;case"iframe":case"object":dt("load",i);break;case"video":case"audio":for(h=0;h<jc.length;h++)dt(jc[h],i);break;case"image":dt("error",i),dt("load",i);break;case"details":dt("toggle",i);break;case"embed":case"source":case"link":dt("error",i),dt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(he in l)if(l.hasOwnProperty(he)&&(h=l[he],h!=null))switch(he){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ot(i,a,he,h,l,null)}return;default:if(ac(a)){for(_e in l)l.hasOwnProperty(_e)&&(h=l[_e],h!==void 0&&zg(i,a,_e,h,l,void 0));return}}for(H in l)l.hasOwnProperty(H)&&(h=l[H],h!=null&&Ot(i,a,H,h,l,null))}function i6(i,a,l,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,E=null,x=null,H=null,Z=null,he=null,_e=null;for(pe in l){var Ae=l[pe];if(l.hasOwnProperty(pe)&&Ae!=null)switch(pe){case"checked":break;case"value":break;case"defaultValue":Z=Ae;default:h.hasOwnProperty(pe)||Ot(i,a,pe,null,h,Ae)}}for(var de in h){var pe=h[de];if(Ae=l[de],h.hasOwnProperty(de)&&(pe!=null||Ae!=null))switch(de){case"type":E=pe;break;case"name":g=pe;break;case"checked":he=pe;break;case"defaultChecked":_e=pe;break;case"value":x=pe;break;case"defaultValue":H=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(r(137,a));break;default:pe!==Ae&&Ot(i,a,de,pe,h,Ae)}}Ir(i,x,H,Z,he,_e,E,g);return;case"select":pe=x=H=de=null;for(E in l)if(Z=l[E],l.hasOwnProperty(E)&&Z!=null)switch(E){case"value":break;case"multiple":pe=Z;default:h.hasOwnProperty(E)||Ot(i,a,E,null,h,Z)}for(g in h)if(E=h[g],Z=l[g],h.hasOwnProperty(g)&&(E!=null||Z!=null))switch(g){case"value":de=E;break;case"defaultValue":H=E;break;case"multiple":x=E;default:E!==Z&&Ot(i,a,g,E,h,Z)}a=H,l=x,h=pe,de!=null?ms(i,!!l,de,!1):!!h!=!!l&&(a!=null?ms(i,!!l,a,!0):ms(i,!!l,l?[]:"",!1));return;case"textarea":pe=de=null;for(H in l)if(g=l[H],l.hasOwnProperty(H)&&g!=null&&!h.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:Ot(i,a,H,null,h,g)}for(x in h)if(g=h[x],E=l[x],h.hasOwnProperty(x)&&(g!=null||E!=null))switch(x){case"value":de=g;break;case"defaultValue":pe=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(r(91));break;default:g!==E&&Ot(i,a,x,g,h,E)}kt(i,de,pe);return;case"option":for(var Ke in l)if(de=l[Ke],l.hasOwnProperty(Ke)&&de!=null&&!h.hasOwnProperty(Ke))switch(Ke){case"selected":i.selected=!1;break;default:Ot(i,a,Ke,null,h,de)}for(Z in h)if(de=h[Z],pe=l[Z],h.hasOwnProperty(Z)&&de!==pe&&(de!=null||pe!=null))switch(Z){case"selected":i.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:Ot(i,a,Z,de,h,pe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in l)de=l[qe],l.hasOwnProperty(qe)&&de!=null&&!h.hasOwnProperty(qe)&&Ot(i,a,qe,null,h,de);for(he in h)if(de=h[he],pe=l[he],h.hasOwnProperty(he)&&de!==pe&&(de!=null||pe!=null))switch(he){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(137,a));break;default:Ot(i,a,he,de,h,pe)}return;default:if(ac(a)){for(var Lt in l)de=l[Lt],l.hasOwnProperty(Lt)&&de!==void 0&&!h.hasOwnProperty(Lt)&&zg(i,a,Lt,void 0,h,de);for(_e in h)de=h[_e],pe=l[_e],!h.hasOwnProperty(_e)||de===pe||de===void 0&&pe===void 0||zg(i,a,_e,de,h,pe);return}}for(var ie in l)de=l[ie],l.hasOwnProperty(ie)&&de!=null&&!h.hasOwnProperty(ie)&&Ot(i,a,ie,null,h,de);for(Ae in h)de=h[Ae],pe=l[Ae],!h.hasOwnProperty(Ae)||de===pe||de==null&&pe==null||Ot(i,a,Ae,de,h,pe)}var Fg=null,jg=null;function Of(i){return i.nodeType===9?i:i.ownerDocument}function Uv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hv(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function qg(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Yg=null;function s6(){var i=window.event;return i&&i.type==="popstate"?i===Yg?!1:(Yg=i,!0):(Yg=null,!1)}var Vv=typeof setTimeout=="function"?setTimeout:void 0,a6=typeof clearTimeout=="function"?clearTimeout:void 0,zv=typeof Promise=="function"?Promise:void 0,o6=typeof queueMicrotask=="function"?queueMicrotask:typeof zv<"u"?function(i){return zv.resolve(null).then(i).catch(u6)}:Vv;function u6(i){setTimeout(function(){throw i})}function pa(i){return i==="head"}function Fv(i,a){var l=a,h=0,g=0;do{var E=l.nextSibling;if(i.removeChild(l),E&&E.nodeType===8)if(l=E.data,l==="/$"){if(0<h&&8>h){l=h;var x=i.ownerDocument;if(l&1&&Yc(x.documentElement),l&2&&Yc(x.body),l&4)for(l=x.head,Yc(l),x=l.firstChild;x;){var H=x.nextSibling,Z=x.nodeName;x[fs]||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&x.rel.toLowerCase()==="stylesheet"||l.removeChild(x),x=H}}if(g===0){i.removeChild(E),Jc(a);return}g--}else l==="$"||l==="$?"||l==="$!"?g++:h=l.charCodeAt(0)-48;else h=0;l=E}while(l);Jc(a)}function Gg(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Gg(l),Oi(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}i.removeChild(l)}}function l6(i,a,l,h){for(;i.nodeType===1;){var g=l;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[fs])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(E=i.getAttribute("rel"),E==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(E!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(E=i.getAttribute("src"),(E!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&E&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var E=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===E)return i}else return i;if(i=bi(i.nextSibling),i===null)break}return null}function c6(i,a,l){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!l||(i=bi(i.nextSibling),i===null))return null;return i}function $g(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function h6(i,a){var l=i.ownerDocument;if(i.data!=="$?"||l.readyState==="complete")a();else{var h=function(){a(),l.removeEventListener("DOMContentLoaded",h)};l.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function bi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}var Kg=null;function jv(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return i;a--}else l==="/$"&&a++}i=i.previousSibling}return null}function qv(i,a,l){switch(a=Of(l),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Yc(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Oi(i)}var ui=new Map,Yv=new Set;function Lf(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ls=J.d;J.d={f:d6,r:f6,D:p6,C:m6,L:g6,m:y6,X:_6,S:E6,M:b6};function d6(){var i=Ls.f(),a=xf();return i||a}function f6(i){var a=Xr(i);a!==null&&a.tag===5&&a.type==="form"?hT(a):Ls.r(i)}var $u=typeof document>"u"?null:document;function Gv(i,a,l){var h=$u;if(h&&typeof a=="string"&&a){var g=mn(a);g='link[rel="'+i+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Yv.has(g)||(Yv.add(g),i={rel:i,crossOrigin:l,href:a},h.querySelector(g)===null&&(a=h.createElement("link"),Gn(a,"link",i),Qt(a),h.head.appendChild(a)))}}function p6(i){Ls.D(i),Gv("dns-prefetch",i,null)}function m6(i,a){Ls.C(i,a),Gv("preconnect",i,a)}function g6(i,a,l){Ls.L(i,a,l);var h=$u;if(h&&i&&a){var g='link[rel="preload"][as="'+mn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+mn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+mn(l.imageSizes)+'"]')):g+='[href="'+mn(i)+'"]';var E=g;switch(a){case"style":E=Ku(i);break;case"script":E=Xu(i)}ui.has(E)||(i=m({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:i,as:a},l),ui.set(E,i),h.querySelector(g)!==null||a==="style"&&h.querySelector(Gc(E))||a==="script"&&h.querySelector($c(E))||(a=h.createElement("link"),Gn(a,"link",i),Qt(a),h.head.appendChild(a)))}}function y6(i,a){Ls.m(i,a);var l=$u;if(l&&i){var h=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+mn(h)+'"][href="'+mn(i)+'"]',E=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Xu(i)}if(!ui.has(E)&&(i=m({rel:"modulepreload",href:i},a),ui.set(E,i),l.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector($c(E)))return}h=l.createElement("link"),Gn(h,"link",i),Qt(h),l.head.appendChild(h)}}}function E6(i,a,l){Ls.S(i,a,l);var h=$u;if(h&&i){var g=Fn(h).hoistableStyles,E=Ku(i);a=a||"default";var x=g.get(E);if(!x){var H={loading:0,preload:null};if(x=h.querySelector(Gc(E)))H.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":a},l),(l=ui.get(E))&&Xg(i,l);var Z=x=h.createElement("link");Qt(Z),Gn(Z,"link",i),Z._p=new Promise(function(he,_e){Z.onload=he,Z.onerror=_e}),Z.addEventListener("load",function(){H.loading|=1}),Z.addEventListener("error",function(){H.loading|=2}),H.loading|=4,Pf(x,a,h)}x={type:"stylesheet",instance:x,count:1,state:H},g.set(E,x)}}}function _6(i,a){Ls.X(i,a);var l=$u;if(l&&i){var h=Fn(l).hoistableScripts,g=Xu(i),E=h.get(g);E||(E=l.querySelector($c(g)),E||(i=m({src:i,async:!0},a),(a=ui.get(g))&&Qg(i,a),E=l.createElement("script"),Qt(E),Gn(E,"link",i),l.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(g,E))}}function b6(i,a){Ls.M(i,a);var l=$u;if(l&&i){var h=Fn(l).hoistableScripts,g=Xu(i),E=h.get(g);E||(E=l.querySelector($c(g)),E||(i=m({src:i,async:!0,type:"module"},a),(a=ui.get(g))&&Qg(i,a),E=l.createElement("script"),Qt(E),Gn(E,"link",i),l.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},h.set(g,E))}}function $v(i,a,l,h){var g=(g=me.current)?Lf(g):null;if(!g)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Ku(l.href),l=Fn(g).hoistableStyles,h=l.get(a),h||(h={type:"style",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){i=Ku(l.href);var E=Fn(g).hoistableStyles,x=E.get(i);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(i,x),(E=g.querySelector(Gc(i)))&&!E._p&&(x.instance=E,x.state.loading=5),ui.has(i)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},ui.set(i,l),E||T6(g,i,l,x.state))),a&&h===null)throw Error(r(528,""));return x}if(a&&h!==null)throw Error(r(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Xu(l),l=Fn(g).hoistableScripts,h=l.get(a),h||(h={type:"script",instance:null,count:0,state:null},l.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ku(i){return'href="'+mn(i)+'"'}function Gc(i){return'link[rel="stylesheet"]['+i+"]"}function Kv(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function T6(i,a,l,h){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=i.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Gn(a,"link",l),Qt(a),i.head.appendChild(a))}function Xu(i){return'[src="'+mn(i)+'"]'}function $c(i){return"script[async]"+i}function Xv(i,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var h=i.querySelector('style[data-href~="'+mn(l.href)+'"]');if(h)return a.instance=h,Qt(h),h;var g=m({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Qt(h),Gn(h,"style",g),Pf(h,l.precedence,i),a.instance=h;case"stylesheet":g=Ku(l.href);var E=i.querySelector(Gc(g));if(E)return a.state.loading|=4,a.instance=E,Qt(E),E;h=Kv(l),(g=ui.get(g))&&Xg(h,g),E=(i.ownerDocument||i).createElement("link"),Qt(E);var x=E;return x._p=new Promise(function(H,Z){x.onload=H,x.onerror=Z}),Gn(E,"link",h),a.state.loading|=4,Pf(E,l.precedence,i),a.instance=E;case"script":return E=Xu(l.src),(g=i.querySelector($c(E)))?(a.instance=g,Qt(g),g):(h=l,(g=ui.get(E))&&(h=m({},l),Qg(h,g)),i=i.ownerDocument||i,g=i.createElement("script"),Qt(g),Gn(g,"link",h),i.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Pf(h,l.precedence,i));return a.instance}function Pf(i,a,l){for(var h=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,E=g,x=0;x<h.length;x++){var H=h[x];if(H.dataset.precedence===a)E=H;else if(E!==g)break}E?E.parentNode.insertBefore(i,E.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(i,a.firstChild))}function Xg(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Qg(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var Mf=null;function Qv(i,a,l){if(Mf===null){var h=new Map,g=Mf=new Map;g.set(l,h)}else g=Mf,h=g.get(l),h||(h=new Map,g.set(l,h));if(h.has(i))return h;for(h.set(i,null),l=l.getElementsByTagName(i),g=0;g<l.length;g++){var E=l[g];if(!(E[fs]||E[cn]||i==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var x=E.getAttribute(a)||"";x=i+x;var H=h.get(x);H?H.push(E):h.set(x,[E])}}return h}function Wv(i,a,l){i=i.ownerDocument||i,i.head.insertBefore(l,a==="title"?i.querySelector("head > title"):null)}function v6(i,a,l){if(l===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Zv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Kc=null;function A6(){}function S6(i,a,l){if(Kc===null)throw Error(r(475));var h=Kc;if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=Ku(l.href),E=i.querySelector(Gc(g));if(E){i=E._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(h.count++,h=Bf.bind(h),i.then(h,h)),a.state.loading|=4,a.instance=E,Qt(E);return}E=i.ownerDocument||i,l=Kv(l),(g=ui.get(g))&&Xg(l,g),E=E.createElement("link"),Qt(E);var x=E;x._p=new Promise(function(H,Z){x.onload=H,x.onerror=Z}),Gn(E,"link",l),a.instance=E}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(h.count++,a=Bf.bind(h),i.addEventListener("load",a),i.addEventListener("error",a))}}function x6(){if(Kc===null)throw Error(r(475));var i=Kc;return i.stylesheets&&i.count===0&&Wg(i,i.stylesheets),0<i.count?function(a){var l=setTimeout(function(){if(i.stylesheets&&Wg(i,i.stylesheets),i.unsuspend){var h=i.unsuspend;i.unsuspend=null,h()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(l)}}:null}function Bf(){if(this.count--,this.count===0){if(this.stylesheets)Wg(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Uf=null;function Wg(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Uf=new Map,a.forEach(w6,i),Uf=null,Bf.call(i))}function w6(i,a){if(!(a.state.loading&4)){var l=Uf.get(i);if(l)var h=l.get(null);else{l=new Map,Uf.set(i,l);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<g.length;E++){var x=g[E];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),h=x)}h&&l.set(null,h)}g=a.instance,x=g.getAttribute("data-precedence"),E=l.get(x)||h,E===h&&l.set(null,g),l.set(x,g),this.count++,h=Bf.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),E?E.parentNode.insertBefore(g,E.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),a.state.loading|=4}}var Xc={$$typeof:$,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function C6(i,a,l,h,g,E,x,H){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xr(0),this.hiddenUpdates=xr(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=E,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=H,this.incompleteTransitions=new Map}function Jv(i,a,l,h,g,E,x,H,Z,he,_e,Ae){return i=new C6(i,a,l,x,H,Z,he,Ae),a=1,E===!0&&(a|=24),E=Rr(3,null,null,a),i.current=E,E.stateNode=i,a=Dm(),a.refCount++,i.pooledCache=a,a.refCount++,E.memoizedState={element:h,isDehydrated:l,cache:a},Mm(E),i}function e2(i){return i?(i=wu,i):wu}function t2(i,a,l,h,g,E){g=e2(g),h.context===null?h.context=g:h.pendingContext=g,h=ta(a),h.payload={element:l},E=E===void 0?null:E,E!==null&&(h.callback=E),l=na(i,h,a),l!==null&&(Pr(l,i,a),xc(l,i,a))}function n2(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<a?l:a}}function Zg(i,a){n2(i,a),(i=i.alternate)&&n2(i,a)}function r2(i){if(i.tag===13){var a=xu(i,67108864);a!==null&&Pr(a,i,67108864),Zg(i,67108864)}}var Hf=!0;function I6(i,a,l,h){var g=z.T;z.T=null;var E=J.p;try{J.p=2,Jg(i,a,l,h)}finally{J.p=E,z.T=g}}function N6(i,a,l,h){var g=z.T;z.T=null;var E=J.p;try{J.p=8,Jg(i,a,l,h)}finally{J.p=E,z.T=g}}function Jg(i,a,l,h){if(Hf){var g=ey(h);if(g===null)Vg(i,a,h,Vf,l),s2(i,h);else if(k6(g,i,a,l,h))h.stopPropagation();else if(s2(i,h),a&4&&-1<R6.indexOf(i)){for(;g!==null;){var E=Xr(g);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var x=Gt(E.pendingLanes);if(x!==0){var H=E;for(H.pendingLanes|=2,H.entangledLanes|=2;x;){var Z=1<<31-ze(x);H.entanglements[1]|=Z,x&=~Z}Ki(E),(Nt&6)===0&&(Af=Qe()+500,Fc(0))}}break;case 13:H=xu(E,2),H!==null&&Pr(H,E,2),xf(),Zg(E,2)}if(E=ey(h),E===null&&Vg(i,a,h,Vf,l),E===g)break;g=E}g!==null&&h.stopPropagation()}else Vg(i,a,h,null,l)}}function ey(i){return i=Jr(i),ty(i)}var Vf=null;function ty(i){if(Vf=null,i=Kr(i),i!==null){var a=o(i);if(a===null)i=null;else{var l=a.tag;if(l===13){if(i=u(a),i!==null)return i;i=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Vf=i,null}function i2(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Oe()){case Ft:return 2;case An:return 8;case un:case sr:return 32;case Vn:return 268435456;default:return 32}default:return 32}}var ny=!1,ma=null,ga=null,ya=null,Qc=new Map,Wc=new Map,Ea=[],R6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s2(i,a){switch(i){case"focusin":case"focusout":ma=null;break;case"dragenter":case"dragleave":ga=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":Qc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wc.delete(a.pointerId)}}function Zc(i,a,l,h,g,E){return i===null||i.nativeEvent!==E?(i={blockedOn:a,domEventName:l,eventSystemFlags:h,nativeEvent:E,targetContainers:[g]},a!==null&&(a=Xr(a),a!==null&&r2(a)),i):(i.eventSystemFlags|=h,a=i.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),i)}function k6(i,a,l,h,g){switch(a){case"focusin":return ma=Zc(ma,i,a,l,h,g),!0;case"dragenter":return ga=Zc(ga,i,a,l,h,g),!0;case"mouseover":return ya=Zc(ya,i,a,l,h,g),!0;case"pointerover":var E=g.pointerId;return Qc.set(E,Zc(Qc.get(E)||null,i,a,l,h,g)),!0;case"gotpointercapture":return E=g.pointerId,Wc.set(E,Zc(Wc.get(E)||null,i,a,l,h,g)),!0}return!1}function a2(i){var a=Kr(i.target);if(a!==null){var l=o(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){i.blockedOn=a,au(i.priority,function(){if(l.tag===13){var h=Lr();h=Ri(h);var g=xu(l,h);g!==null&&Pr(g,l,h),Zg(l,h)}});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function zf(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var l=ey(i.nativeEvent);if(l===null){l=i.nativeEvent;var h=new l.constructor(l.type,l);gs=h,l.target.dispatchEvent(h),gs=null}else return a=Xr(l),a!==null&&r2(a),i.blockedOn=l,!1;a.shift()}return!0}function o2(i,a,l){zf(i)&&l.delete(a)}function D6(){ny=!1,ma!==null&&zf(ma)&&(ma=null),ga!==null&&zf(ga)&&(ga=null),ya!==null&&zf(ya)&&(ya=null),Qc.forEach(o2),Wc.forEach(o2)}function Ff(i,a){i.blockedOn===a&&(i.blockedOn=null,ny||(ny=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,D6)))}var jf=null;function u2(i){jf!==i&&(jf=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){jf===i&&(jf=null);for(var a=0;a<i.length;a+=3){var l=i[a],h=i[a+1],g=i[a+2];if(typeof h!="function"){if(ty(h||l)===null)continue;break}var E=Xr(l);E!==null&&(i.splice(a,3),a-=3,tg(E,{pending:!0,data:g,method:l.method,action:h},h,g))}}))}function Jc(i){function a(Z){return Ff(Z,i)}ma!==null&&Ff(ma,i),ga!==null&&Ff(ga,i),ya!==null&&Ff(ya,i),Qc.forEach(a),Wc.forEach(a);for(var l=0;l<Ea.length;l++){var h=Ea[l];h.blockedOn===i&&(h.blockedOn=null)}for(;0<Ea.length&&(l=Ea[0],l.blockedOn===null);)a2(l),l.blockedOn===null&&Ea.shift();if(l=(i.ownerDocument||i).$$reactFormReplay,l!=null)for(h=0;h<l.length;h+=3){var g=l[h],E=l[h+1],x=g[tn]||null;if(typeof E=="function")x||u2(l);else if(x){var H=null;if(E&&E.hasAttribute("formAction")){if(g=E,x=E[tn]||null)H=x.formAction;else if(ty(g)!==null)continue}else H=x.action;typeof H=="function"?l[h+1]=H:(l.splice(h,3),h-=3),u2(l)}}}function ry(i){this._internalRoot=i}qf.prototype.render=ry.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var l=a.current,h=Lr();t2(l,h,i,a,null,null)},qf.prototype.unmount=ry.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;t2(i.current,2,null,i,null,null),xf(),a[hr]=null}};function qf(i){this._internalRoot=i}qf.prototype.unstable_scheduleHydration=function(i){if(i){var a=ki();i={blockedOn:null,target:i,priority:a};for(var l=0;l<Ea.length&&a!==0&&a<Ea[l].priority;l++);Ea.splice(l,0,i),l===0&&a2(i)}};var l2=e.version;if(l2!=="19.1.0")throw Error(r(527,l2,"19.1.0"));J.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=d(a),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var O6={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yf.isDisabled&&Yf.supportsFiber)try{fe=Yf.inject(O6),Te=Yf}catch{}}return th.createRoot=function(i,a){if(!s(i))throw Error(r(299));var l=!1,h="",g=xT,E=wT,x=CT,H=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(H=a.unstable_transitionCallbacks)),a=Jv(i,1,!1,null,null,l,h,g,E,x,H,null),i[hr]=a.current,Hg(i),new ry(a)},th.hydrateRoot=function(i,a,l){if(!s(i))throw Error(r(299));var h=!1,g="",E=xT,x=wT,H=CT,Z=null,he=null;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(E=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(H=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(Z=l.unstable_transitionCallbacks),l.formState!==void 0&&(he=l.formState)),a=Jv(i,1,!0,a,l??null,h,g,E,x,H,Z,he),a.context=e2(null),l=a.current,h=Lr(),h=Ri(h),g=ta(h),g.callback=null,na(l,g,h),l=h,a.current.lanes=l,Gr(a,l),Ki(a),i[hr]=a.current,Hg(i),new qf(a)},th.version="19.1.0",th}var _2;function q6(){if(_2)return ay.exports;_2=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ay.exports=j6(),ay.exports}var Y6=q6();function cr(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,r;n<t.length;n++)(r=cr(t[n]))!==""&&(e+=(e&&" ")+r);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var cy={exports:{}},hy={},dy={exports:{}},fy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b2;function G6(){if(b2)return fy;b2=1;var t=ud();function e(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,u=t.useDebugValue;function c(y,b){var T=b(),w=r({inst:{value:T,getSnapshot:b}}),I=w[0].inst,L=w[1];return o(function(){I.value=T,I.getSnapshot=b,d(I)&&L({inst:I})},[y,T,b]),s(function(){return d(I)&&L({inst:I}),y(function(){d(I)&&L({inst:I})})},[y]),u(T),T}function d(y){var b=y.getSnapshot;y=y.value;try{var T=b();return!n(y,T)}catch{return!0}}function f(y,b){return b()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:c;return fy.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,fy}var T2;function $6(){return T2||(T2=1,dy.exports=G6()),dy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v2;function K6(){if(v2)return hy;v2=1;var t=ud(),e=$6();function n(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,u=t.useEffect,c=t.useMemo,d=t.useDebugValue;return hy.useSyncExternalStoreWithSelector=function(f,m,y,b,T){var w=o(null);if(w.current===null){var I={hasValue:!1,value:null};w.current=I}else I=w.current;w=c(function(){function k(Y){if(!q){if(q=!0,$=Y,Y=b(Y),T!==void 0&&I.hasValue){var M=I.value;if(T(M,Y))return j=M}return j=Y}if(M=j,r($,Y))return M;var N=b(Y);return T!==void 0&&T(M,N)?($=Y,M):($=Y,j=N)}var q=!1,$,j,te=y===void 0?null:y;return[function(){return k(m())},te===null?void 0:function(){return k(te())}]},[m,y,b,T]);var L=s(f,w[0],w[1]);return u(function(){I.hasValue=!0,I.value=L},[L]),d(L),L},hy}var A2;function X6(){return A2||(A2=1,cy.exports=K6()),cy.exports}var Q6=X6();const W6=_p(Q6),Z6={},S2=t=>{let e;const n=new Set,r=(m,y)=>{const b=typeof m=="function"?m(e):m;if(!Object.is(b,e)){const T=e;e=y??(typeof b!="object"||b===null)?b:Object.assign({},e,b),n.forEach(w=>w(e,T))}},s=()=>e,d={setState:r,getState:s,getInitialState:()=>f,subscribe:m=>(n.add(m),()=>n.delete(m)),destroy:()=>{(Z6?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=e=t(r,s,d);return d},J6=t=>t?S2(t):S2,{useDebugValue:ek}=be,{useSyncExternalStoreWithSelector:tk}=W6,nk=t=>t;function gw(t,e=nk,n){const r=tk(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return ek(r),r}const x2=(t,e)=>{const n=J6(t),r=(s,o=e)=>gw(n,s,o);return Object.assign(r,n),r},rk=(t,e)=>t?x2(t,e):x2;function tr(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[r,s]of t)if(!Object.is(s,e.get(r)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const r of t)if(!e.has(r))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(e,r)||!Object.is(t[r],e[r]))return!1;return!0}var ik={value:()=>{}};function bp(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new y0(n)}function y0(t){this._=t}function sk(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}y0.prototype=bp.prototype={constructor:y0,on:function(t,e){var n=this._,r=sk(t+"",n),s,o=-1,u=r.length;if(arguments.length<2){for(;++o<u;)if((s=(t=r[o]).type)&&(s=ak(n[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++o<u;)if(s=(t=r[o]).type)n[s]=w2(n[s],t.name,e);else if(e==null)for(s in n)n[s]=w2(n[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new y0(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,o;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=this._[t],r=0,s=o.length;r<s;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],s=0,o=r.length;s<o;++s)r[s].value.apply(e,n)}};function ak(t,e){for(var n=0,r=t.length,s;n<r;++n)if((s=t[n]).name===e)return s.value}function w2(t,e,n){for(var r=0,s=t.length;r<s;++r)if(t[r].name===e){t[r]=ik,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var rE="http://www.w3.org/1999/xhtml";const C2={svg:"http://www.w3.org/2000/svg",xhtml:rE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Tp(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),C2.hasOwnProperty(e)?{space:C2[e],local:t}:t}function ok(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===rE&&e.documentElement.namespaceURI===rE?e.createElement(t):e.createElementNS(n,t)}}function uk(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function yw(t){var e=Tp(t);return(e.local?uk:ok)(e)}function lk(){}function h1(t){return t==null?lk:function(){return this.querySelector(t)}}function ck(t){typeof t!="function"&&(t=h1(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=new Array(u),d,f,m=0;m<u;++m)(d=o[m])&&(f=t.call(d,d.__data__,m,o))&&("__data__"in d&&(f.__data__=d.__data__),c[m]=f);return new qr(r,this._parents)}function hk(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function dk(){return[]}function Ew(t){return t==null?dk:function(){return this.querySelectorAll(t)}}function fk(t){return function(){return hk(t.apply(this,arguments))}}function pk(t){typeof t=="function"?t=fk(t):t=Ew(t);for(var e=this._groups,n=e.length,r=[],s=[],o=0;o<n;++o)for(var u=e[o],c=u.length,d,f=0;f<c;++f)(d=u[f])&&(r.push(t.call(d,d.__data__,f,u)),s.push(d));return new qr(r,s)}function _w(t){return function(){return this.matches(t)}}function bw(t){return function(e){return e.matches(t)}}var mk=Array.prototype.find;function gk(t){return function(){return mk.call(this.children,t)}}function yk(){return this.firstElementChild}function Ek(t){return this.select(t==null?yk:gk(typeof t=="function"?t:bw(t)))}var _k=Array.prototype.filter;function bk(){return Array.from(this.children)}function Tk(t){return function(){return _k.call(this.children,t)}}function vk(t){return this.selectAll(t==null?bk:Tk(typeof t=="function"?t:bw(t)))}function Ak(t){typeof t!="function"&&(t=_w(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=[],d,f=0;f<u;++f)(d=o[f])&&t.call(d,d.__data__,f,o)&&c.push(d);return new qr(r,this._parents)}function Tw(t){return new Array(t.length)}function Sk(){return new qr(this._enter||this._groups.map(Tw),this._parents)}function B0(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}B0.prototype={constructor:B0,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function xk(t){return function(){return t}}function wk(t,e,n,r,s,o){for(var u=0,c,d=e.length,f=o.length;u<f;++u)(c=e[u])?(c.__data__=o[u],r[u]=c):n[u]=new B0(t,o[u]);for(;u<d;++u)(c=e[u])&&(s[u]=c)}function Ck(t,e,n,r,s,o,u){var c,d,f=new Map,m=e.length,y=o.length,b=new Array(m),T;for(c=0;c<m;++c)(d=e[c])&&(b[c]=T=u.call(d,d.__data__,c,e)+"",f.has(T)?s[c]=d:f.set(T,d));for(c=0;c<y;++c)T=u.call(t,o[c],c,o)+"",(d=f.get(T))?(r[c]=d,d.__data__=o[c],f.delete(T)):n[c]=new B0(t,o[c]);for(c=0;c<m;++c)(d=e[c])&&f.get(b[c])===d&&(s[c]=d)}function Ik(t){return t.__data__}function Nk(t,e){if(!arguments.length)return Array.from(this,Ik);var n=e?Ck:wk,r=this._parents,s=this._groups;typeof t!="function"&&(t=xk(t));for(var o=s.length,u=new Array(o),c=new Array(o),d=new Array(o),f=0;f<o;++f){var m=r[f],y=s[f],b=y.length,T=Rk(t.call(m,m&&m.__data__,f,r)),w=T.length,I=c[f]=new Array(w),L=u[f]=new Array(w),k=d[f]=new Array(b);n(m,y,I,L,k,T,e);for(var q=0,$=0,j,te;q<w;++q)if(j=I[q]){for(q>=$&&($=q+1);!(te=L[$])&&++$<w;);j._next=te||null}}return u=new qr(u,r),u._enter=c,u._exit=d,u}function Rk(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function kk(){return new qr(this._exit||this._groups.map(Tw),this._parents)}function Dk(t,e,n){var r=this.enter(),s=this,o=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),n==null?o.remove():n(o),r&&s?r.merge(s).order():s}function Ok(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,s=n.length,o=r.length,u=Math.min(s,o),c=new Array(s),d=0;d<u;++d)for(var f=n[d],m=r[d],y=f.length,b=c[d]=new Array(y),T,w=0;w<y;++w)(T=f[w]||m[w])&&(b[w]=T);for(;d<s;++d)c[d]=n[d];return new qr(c,this._parents)}function Lk(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],s=r.length-1,o=r[s],u;--s>=0;)(u=r[s])&&(o&&u.compareDocumentPosition(o)^4&&o.parentNode.insertBefore(u,o),o=u);return this}function Pk(t){t||(t=Mk);function e(y,b){return y&&b?t(y.__data__,b.__data__):!y-!b}for(var n=this._groups,r=n.length,s=new Array(r),o=0;o<r;++o){for(var u=n[o],c=u.length,d=s[o]=new Array(c),f,m=0;m<c;++m)(f=u[m])&&(d[m]=f);d.sort(e)}return new qr(s,this._parents).order()}function Mk(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Bk(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Uk(){return Array.from(this)}function Hk(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length;s<o;++s){var u=r[s];if(u)return u}return null}function Vk(){let t=0;for(const e of this)++t;return t}function zk(){return!this.node()}function Fk(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var s=e[n],o=0,u=s.length,c;o<u;++o)(c=s[o])&&t.call(c,c.__data__,o,s);return this}function jk(t){return function(){this.removeAttribute(t)}}function qk(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Yk(t,e){return function(){this.setAttribute(t,e)}}function Gk(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function $k(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Kk(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Xk(t,e){var n=Tp(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?qk:jk:typeof e=="function"?n.local?Kk:$k:n.local?Gk:Yk)(n,e))}function vw(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Qk(t){return function(){this.style.removeProperty(t)}}function Wk(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Zk(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Jk(t,e,n){return arguments.length>1?this.each((e==null?Qk:typeof e=="function"?Zk:Wk)(t,e,n??"")):Cl(this.node(),t)}function Cl(t,e){return t.style.getPropertyValue(e)||vw(t).getComputedStyle(t,null).getPropertyValue(e)}function eD(t){return function(){delete this[t]}}function tD(t,e){return function(){this[t]=e}}function nD(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function rD(t,e){return arguments.length>1?this.each((e==null?eD:typeof e=="function"?nD:tD)(t,e)):this.node()[t]}function Aw(t){return t.trim().split(/^|\s+/)}function d1(t){return t.classList||new Sw(t)}function Sw(t){this._node=t,this._names=Aw(t.getAttribute("class")||"")}Sw.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function xw(t,e){for(var n=d1(t),r=-1,s=e.length;++r<s;)n.add(e[r])}function ww(t,e){for(var n=d1(t),r=-1,s=e.length;++r<s;)n.remove(e[r])}function iD(t){return function(){xw(this,t)}}function sD(t){return function(){ww(this,t)}}function aD(t,e){return function(){(e.apply(this,arguments)?xw:ww)(this,t)}}function oD(t,e){var n=Aw(t+"");if(arguments.length<2){for(var r=d1(this.node()),s=-1,o=n.length;++s<o;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof e=="function"?aD:e?iD:sD)(n,e))}function uD(){this.textContent=""}function lD(t){return function(){this.textContent=t}}function cD(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function hD(t){return arguments.length?this.each(t==null?uD:(typeof t=="function"?cD:lD)(t)):this.node().textContent}function dD(){this.innerHTML=""}function fD(t){return function(){this.innerHTML=t}}function pD(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function mD(t){return arguments.length?this.each(t==null?dD:(typeof t=="function"?pD:fD)(t)):this.node().innerHTML}function gD(){this.nextSibling&&this.parentNode.appendChild(this)}function yD(){return this.each(gD)}function ED(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _D(){return this.each(ED)}function bD(t){var e=typeof t=="function"?t:yw(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function TD(){return null}function vD(t,e){var n=typeof t=="function"?t:yw(t),r=e==null?TD:typeof e=="function"?e:h1(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function AD(){var t=this.parentNode;t&&t.removeChild(this)}function SD(){return this.each(AD)}function xD(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function wD(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function CD(t){return this.select(t?wD:xD)}function ID(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ND(t){return function(e){t.call(this,e,this.__data__)}}function RD(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function kD(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,s=e.length,o;n<s;++n)o=e[n],(!t.type||o.type===t.type)&&o.name===t.name?this.removeEventListener(o.type,o.listener,o.options):e[++r]=o;++r?e.length=r:delete this.__on}}}function DD(t,e,n){return function(){var r=this.__on,s,o=ND(e);if(r){for(var u=0,c=r.length;u<c;++u)if((s=r[u]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=o,s.options=n),s.value=e;return}}this.addEventListener(t.type,o,n),s={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(s):this.__on=[s]}}function OD(t,e,n){var r=RD(t+""),s,o=r.length,u;if(arguments.length<2){var c=this.node().__on;if(c){for(var d=0,f=c.length,m;d<f;++d)for(s=0,m=c[d];s<o;++s)if((u=r[s]).type===m.type&&u.name===m.name)return m.value}return}for(c=e?DD:kD,s=0;s<o;++s)this.each(c(r[s],e,n));return this}function Cw(t,e,n){var r=vw(t),s=r.CustomEvent;typeof s=="function"?s=new s(e,n):(s=r.document.createEvent("Event"),n?(s.initEvent(e,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function LD(t,e){return function(){return Cw(this,t,e)}}function PD(t,e){return function(){return Cw(this,t,e.apply(this,arguments))}}function MD(t,e){return this.each((typeof e=="function"?PD:LD)(t,e))}function*BD(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],s=0,o=r.length,u;s<o;++s)(u=r[s])&&(yield u)}var Iw=[null];function qr(t,e){this._groups=t,this._parents=e}function ld(){return new qr([[document.documentElement]],Iw)}function UD(){return this}qr.prototype=ld.prototype={constructor:qr,select:ck,selectAll:pk,selectChild:Ek,selectChildren:vk,filter:Ak,data:Nk,enter:Sk,exit:kk,join:Dk,merge:Ok,selection:UD,order:Lk,sort:Pk,call:Bk,nodes:Uk,node:Hk,size:Vk,empty:zk,each:Fk,attr:Xk,style:Jk,property:rD,classed:oD,text:hD,html:mD,raise:yD,lower:_D,append:bD,insert:vD,remove:SD,clone:CD,datum:ID,on:OD,dispatch:MD,[Symbol.iterator]:BD};function Ti(t){return typeof t=="string"?new qr([[document.querySelector(t)]],[document.documentElement]):new qr([[t]],Iw)}function HD(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Wi(t,e){if(t=HD(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,r=r.matrixTransform(e.getScreenCTM().inverse()),[r.x,r.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const VD={passive:!1},Hh={capture:!0,passive:!1};function py(t){t.stopImmediatePropagation()}function pl(t){t.preventDefault(),t.stopImmediatePropagation()}function Nw(t){var e=t.document.documentElement,n=Ti(t).on("dragstart.drag",pl,Hh);"onselectstart"in e?n.on("selectstart.drag",pl,Hh):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Rw(t,e){var n=t.document.documentElement,r=Ti(t).on("dragstart.drag",null);e&&(r.on("click.drag",pl,Hh),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Gf=t=>()=>t;function iE(t,{sourceEvent:e,subject:n,target:r,identifier:s,active:o,x:u,y:c,dx:d,dy:f,dispatch:m}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:m}})}iE.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function zD(t){return!t.ctrlKey&&!t.button}function FD(){return this.parentNode}function jD(t,e){return e??{x:t.x,y:t.y}}function qD(){return navigator.maxTouchPoints||"ontouchstart"in this}function YD(){var t=zD,e=FD,n=jD,r=qD,s={},o=bp("start","drag","end"),u=0,c,d,f,m,y=0;function b(j){j.on("mousedown.drag",T).filter(r).on("touchstart.drag",L).on("touchmove.drag",k,VD).on("touchend.drag touchcancel.drag",q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function T(j,te){if(!(m||!t.call(this,j,te))){var Y=$(this,e.call(this,j,te),j,te,"mouse");Y&&(Ti(j.view).on("mousemove.drag",w,Hh).on("mouseup.drag",I,Hh),Nw(j.view),py(j),f=!1,c=j.clientX,d=j.clientY,Y("start",j))}}function w(j){if(pl(j),!f){var te=j.clientX-c,Y=j.clientY-d;f=te*te+Y*Y>y}s.mouse("drag",j)}function I(j){Ti(j.view).on("mousemove.drag mouseup.drag",null),Rw(j.view,f),pl(j),s.mouse("end",j)}function L(j,te){if(t.call(this,j,te)){var Y=j.changedTouches,M=e.call(this,j,te),N=Y.length,D,U;for(D=0;D<N;++D)(U=$(this,M,j,te,Y[D].identifier,Y[D]))&&(py(j),U("start",j,Y[D]))}}function k(j){var te=j.changedTouches,Y=te.length,M,N;for(M=0;M<Y;++M)(N=s[te[M].identifier])&&(pl(j),N("drag",j,te[M]))}function q(j){var te=j.changedTouches,Y=te.length,M,N;for(m&&clearTimeout(m),m=setTimeout(function(){m=null},500),M=0;M<Y;++M)(N=s[te[M].identifier])&&(py(j),N("end",j,te[M]))}function $(j,te,Y,M,N,D){var U=o.copy(),B=Wi(D||Y,te),V,C,O;if((O=n.call(j,new iE("beforestart",{sourceEvent:Y,target:b,identifier:N,active:u,x:B[0],y:B[1],dx:0,dy:0,dispatch:U}),M))!=null)return V=O.x-B[0]||0,C=O.y-B[1]||0,function K(z,J,se){var re=B,A;switch(z){case"start":s[N]=K,A=u++;break;case"end":delete s[N],--u;case"drag":B=Wi(se||J,te),A=u;break}U.call(z,j,new iE(z,{sourceEvent:J,subject:O,target:b,identifier:N,active:A,x:B[0]+V,y:B[1]+C,dx:B[0]-re[0],dy:B[1]-re[1],dispatch:U}),M)}}return b.filter=function(j){return arguments.length?(t=typeof j=="function"?j:Gf(!!j),b):t},b.container=function(j){return arguments.length?(e=typeof j=="function"?j:Gf(j),b):e},b.subject=function(j){return arguments.length?(n=typeof j=="function"?j:Gf(j),b):n},b.touchable=function(j){return arguments.length?(r=typeof j=="function"?j:Gf(!!j),b):r},b.on=function(){var j=o.on.apply(o,arguments);return j===o?b:j},b.clickDistance=function(j){return arguments.length?(y=(j=+j)*j,b):Math.sqrt(y)},b}function f1(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function kw(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function cd(){}var Vh=.7,U0=1/Vh,ml="\\s*([+-]?\\d+)\\s*",zh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ts="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",GD=/^#([0-9a-f]{3,8})$/,$D=new RegExp(`^rgb\\(${ml},${ml},${ml}\\)$`),KD=new RegExp(`^rgb\\(${ts},${ts},${ts}\\)$`),XD=new RegExp(`^rgba\\(${ml},${ml},${ml},${zh}\\)$`),QD=new RegExp(`^rgba\\(${ts},${ts},${ts},${zh}\\)$`),WD=new RegExp(`^hsl\\(${zh},${ts},${ts}\\)$`),ZD=new RegExp(`^hsla\\(${zh},${ts},${ts},${zh}\\)$`),I2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};f1(cd,Fh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:N2,formatHex:N2,formatHex8:JD,formatHsl:eO,formatRgb:R2,toString:R2});function N2(){return this.rgb().formatHex()}function JD(){return this.rgb().formatHex8()}function eO(){return Dw(this).formatHsl()}function R2(){return this.rgb().formatRgb()}function Fh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=GD.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?k2(e):n===3?new br(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?$f(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?$f(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=$D.exec(t))?new br(e[1],e[2],e[3],1):(e=KD.exec(t))?new br(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=XD.exec(t))?$f(e[1],e[2],e[3],e[4]):(e=QD.exec(t))?$f(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=WD.exec(t))?L2(e[1],e[2]/100,e[3]/100,1):(e=ZD.exec(t))?L2(e[1],e[2]/100,e[3]/100,e[4]):I2.hasOwnProperty(t)?k2(I2[t]):t==="transparent"?new br(NaN,NaN,NaN,0):null}function k2(t){return new br(t>>16&255,t>>8&255,t&255,1)}function $f(t,e,n,r){return r<=0&&(t=e=n=NaN),new br(t,e,n,r)}function tO(t){return t instanceof cd||(t=Fh(t)),t?(t=t.rgb(),new br(t.r,t.g,t.b,t.opacity)):new br}function sE(t,e,n,r){return arguments.length===1?tO(t):new br(t,e,n,r??1)}function br(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}f1(br,sE,kw(cd,{brighter(t){return t=t==null?U0:Math.pow(U0,t),new br(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Vh:Math.pow(Vh,t),new br(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new br(Vo(this.r),Vo(this.g),Vo(this.b),H0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:D2,formatHex:D2,formatHex8:nO,formatRgb:O2,toString:O2}));function D2(){return`#${Mo(this.r)}${Mo(this.g)}${Mo(this.b)}`}function nO(){return`#${Mo(this.r)}${Mo(this.g)}${Mo(this.b)}${Mo((isNaN(this.opacity)?1:this.opacity)*255)}`}function O2(){const t=H0(this.opacity);return`${t===1?"rgb(":"rgba("}${Vo(this.r)}, ${Vo(this.g)}, ${Vo(this.b)}${t===1?")":`, ${t})`}`}function H0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Vo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Mo(t){return t=Vo(t),(t<16?"0":"")+t.toString(16)}function L2(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new vi(t,e,n,r)}function Dw(t){if(t instanceof vi)return new vi(t.h,t.s,t.l,t.opacity);if(t instanceof cd||(t=Fh(t)),!t)return new vi;if(t instanceof vi)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,s=Math.min(e,n,r),o=Math.max(e,n,r),u=NaN,c=o-s,d=(o+s)/2;return c?(e===o?u=(n-r)/c+(n<r)*6:n===o?u=(r-e)/c+2:u=(e-n)/c+4,c/=d<.5?o+s:2-o-s,u*=60):c=d>0&&d<1?0:u,new vi(u,c,d,t.opacity)}function rO(t,e,n,r){return arguments.length===1?Dw(t):new vi(t,e,n,r??1)}function vi(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}f1(vi,rO,kw(cd,{brighter(t){return t=t==null?U0:Math.pow(U0,t),new vi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Vh:Math.pow(Vh,t),new vi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,s=2*n-r;return new br(my(t>=240?t-240:t+120,s,r),my(t,s,r),my(t<120?t+240:t-120,s,r),this.opacity)},clamp(){return new vi(P2(this.h),Kf(this.s),Kf(this.l),H0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=H0(this.opacity);return`${t===1?"hsl(":"hsla("}${P2(this.h)}, ${Kf(this.s)*100}%, ${Kf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function P2(t){return t=(t||0)%360,t<0?t+360:t}function Kf(t){return Math.max(0,Math.min(1,t||0))}function my(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ow=t=>()=>t;function iO(t,e){return function(n){return t+n*e}}function sO(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function aO(t){return(t=+t)==1?Lw:function(e,n){return n-e?sO(e,n,t):Ow(isNaN(e)?n:e)}}function Lw(t,e){var n=e-t;return n?iO(t,n):Ow(isNaN(t)?e:t)}const M2=function t(e){var n=aO(e);function r(s,o){var u=n((s=sE(s)).r,(o=sE(o)).r),c=n(s.g,o.g),d=n(s.b,o.b),f=Lw(s.opacity,o.opacity);return function(m){return s.r=u(m),s.g=c(m),s.b=d(m),s.opacity=f(m),s+""}}return r.gamma=t,r}(1);function xa(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var aE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gy=new RegExp(aE.source,"g");function oO(t){return function(){return t}}function uO(t){return function(e){return t(e)+""}}function lO(t,e){var n=aE.lastIndex=gy.lastIndex=0,r,s,o,u=-1,c=[],d=[];for(t=t+"",e=e+"";(r=aE.exec(t))&&(s=gy.exec(e));)(o=s.index)>n&&(o=e.slice(n,o),c[u]?c[u]+=o:c[++u]=o),(r=r[0])===(s=s[0])?c[u]?c[u]+=s:c[++u]=s:(c[++u]=null,d.push({i:u,x:xa(r,s)})),n=gy.lastIndex;return n<e.length&&(o=e.slice(n),c[u]?c[u]+=o:c[++u]=o),c.length<2?d[0]?uO(d[0].x):oO(e):(e=d.length,function(f){for(var m=0,y;m<e;++m)c[(y=d[m]).i]=y.x(f);return c.join("")})}var B2=180/Math.PI,oE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Pw(t,e,n,r,s,o){var u,c,d;return(u=Math.sqrt(t*t+e*e))&&(t/=u,e/=u),(d=t*n+e*r)&&(n-=t*d,r-=e*d),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,d/=c),t*r<e*n&&(t=-t,e=-e,d=-d,u=-u),{translateX:s,translateY:o,rotate:Math.atan2(e,t)*B2,skewX:Math.atan(d)*B2,scaleX:u,scaleY:c}}var Xf;function cO(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?oE:Pw(e.a,e.b,e.c,e.d,e.e,e.f)}function hO(t){return t==null||(Xf||(Xf=document.createElementNS("http://www.w3.org/2000/svg","g")),Xf.setAttribute("transform",t),!(t=Xf.transform.baseVal.consolidate()))?oE:(t=t.matrix,Pw(t.a,t.b,t.c,t.d,t.e,t.f))}function Mw(t,e,n,r){function s(f){return f.length?f.pop()+" ":""}function o(f,m,y,b,T,w){if(f!==y||m!==b){var I=T.push("translate(",null,e,null,n);w.push({i:I-4,x:xa(f,y)},{i:I-2,x:xa(m,b)})}else(y||b)&&T.push("translate("+y+e+b+n)}function u(f,m,y,b){f!==m?(f-m>180?m+=360:m-f>180&&(f+=360),b.push({i:y.push(s(y)+"rotate(",null,r)-2,x:xa(f,m)})):m&&y.push(s(y)+"rotate("+m+r)}function c(f,m,y,b){f!==m?b.push({i:y.push(s(y)+"skewX(",null,r)-2,x:xa(f,m)}):m&&y.push(s(y)+"skewX("+m+r)}function d(f,m,y,b,T,w){if(f!==y||m!==b){var I=T.push(s(T)+"scale(",null,",",null,")");w.push({i:I-4,x:xa(f,y)},{i:I-2,x:xa(m,b)})}else(y!==1||b!==1)&&T.push(s(T)+"scale("+y+","+b+")")}return function(f,m){var y=[],b=[];return f=t(f),m=t(m),o(f.translateX,f.translateY,m.translateX,m.translateY,y,b),u(f.rotate,m.rotate,y,b),c(f.skewX,m.skewX,y,b),d(f.scaleX,f.scaleY,m.scaleX,m.scaleY,y,b),f=m=null,function(T){for(var w=-1,I=b.length,L;++w<I;)y[(L=b[w]).i]=L.x(T);return y.join("")}}}var dO=Mw(cO,"px, ","px)","deg)"),fO=Mw(hO,", ",")",")"),pO=1e-12;function U2(t){return((t=Math.exp(t))+1/t)/2}function mO(t){return((t=Math.exp(t))-1/t)/2}function gO(t){return((t=Math.exp(2*t))-1)/(t+1)}const yO=function t(e,n,r){function s(o,u){var c=o[0],d=o[1],f=o[2],m=u[0],y=u[1],b=u[2],T=m-c,w=y-d,I=T*T+w*w,L,k;if(I<pO)k=Math.log(b/f)/e,L=function(M){return[c+M*T,d+M*w,f*Math.exp(e*M*k)]};else{var q=Math.sqrt(I),$=(b*b-f*f+r*I)/(2*f*n*q),j=(b*b-f*f-r*I)/(2*b*n*q),te=Math.log(Math.sqrt($*$+1)-$),Y=Math.log(Math.sqrt(j*j+1)-j);k=(Y-te)/e,L=function(M){var N=M*k,D=U2(te),U=f/(n*q)*(D*gO(e*N+te)-mO(te));return[c+U*T,d+U*w,f*D/U2(e*N+te)]}}return L.duration=k*1e3*e/Math.SQRT2,L}return s.rho=function(o){var u=Math.max(.001,+o),c=u*u,d=c*c;return t(u,c,d)},s}(Math.SQRT2,2,4);var Il=0,fh=0,nh=0,Bw=1e3,V0,ph,z0=0,jo=0,vp=0,jh=typeof performance=="object"&&performance.now?performance:Date,Uw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function p1(){return jo||(Uw(EO),jo=jh.now()+vp)}function EO(){jo=0}function F0(){this._call=this._time=this._next=null}F0.prototype=Hw.prototype={constructor:F0,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?p1():+n)+(e==null?0:+e),!this._next&&ph!==this&&(ph?ph._next=this:V0=this,ph=this),this._call=t,this._time=n,uE()},stop:function(){this._call&&(this._call=null,this._time=1/0,uE())}};function Hw(t,e,n){var r=new F0;return r.restart(t,e,n),r}function _O(){p1(),++Il;for(var t=V0,e;t;)(e=jo-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Il}function H2(){jo=(z0=jh.now())+vp,Il=fh=0;try{_O()}finally{Il=0,TO(),jo=0}}function bO(){var t=jh.now(),e=t-z0;e>Bw&&(vp-=e,z0=t)}function TO(){for(var t,e=V0,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:V0=n);ph=t,uE(r)}function uE(t){if(!Il){fh&&(fh=clearTimeout(fh));var e=t-jo;e>24?(t<1/0&&(fh=setTimeout(H2,t-jh.now()-vp)),nh&&(nh=clearInterval(nh))):(nh||(z0=jh.now(),nh=setInterval(bO,Bw)),Il=1,Uw(H2))}}function V2(t,e,n){var r=new F0;return e=e==null?0:+e,r.restart(s=>{r.stop(),t(s+e)},e,n),r}var vO=bp("start","end","cancel","interrupt"),AO=[],Vw=0,z2=1,lE=2,E0=3,F2=4,cE=5,_0=6;function Ap(t,e,n,r,s,o){var u=t.__transition;if(!u)t.__transition={};else if(n in u)return;SO(t,n,{name:e,index:r,group:s,on:vO,tween:AO,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Vw})}function m1(t,e){var n=Ii(t,e);if(n.state>Vw)throw new Error("too late; already scheduled");return n}function ls(t,e){var n=Ii(t,e);if(n.state>E0)throw new Error("too late; already running");return n}function Ii(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function SO(t,e,n){var r=t.__transition,s;r[e]=n,n.timer=Hw(o,0,n.time);function o(f){n.state=z2,n.timer.restart(u,n.delay,n.time),n.delay<=f&&u(f-n.delay)}function u(f){var m,y,b,T;if(n.state!==z2)return d();for(m in r)if(T=r[m],T.name===n.name){if(T.state===E0)return V2(u);T.state===F2?(T.state=_0,T.timer.stop(),T.on.call("interrupt",t,t.__data__,T.index,T.group),delete r[m]):+m<e&&(T.state=_0,T.timer.stop(),T.on.call("cancel",t,t.__data__,T.index,T.group),delete r[m])}if(V2(function(){n.state===E0&&(n.state=F2,n.timer.restart(c,n.delay,n.time),c(f))}),n.state=lE,n.on.call("start",t,t.__data__,n.index,n.group),n.state===lE){for(n.state=E0,s=new Array(b=n.tween.length),m=0,y=-1;m<b;++m)(T=n.tween[m].value.call(t,t.__data__,n.index,n.group))&&(s[++y]=T);s.length=y+1}}function c(f){for(var m=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(d),n.state=cE,1),y=-1,b=s.length;++y<b;)s[y].call(t,m);n.state===cE&&(n.on.call("end",t,t.__data__,n.index,n.group),d())}function d(){n.state=_0,n.timer.stop(),delete r[e];for(var f in r)return;delete t.__transition}}function b0(t,e){var n=t.__transition,r,s,o=!0,u;if(n){e=e==null?null:e+"";for(u in n){if((r=n[u]).name!==e){o=!1;continue}s=r.state>lE&&r.state<cE,r.state=_0,r.timer.stop(),r.on.call(s?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[u]}o&&delete t.__transition}}function xO(t){return this.each(function(){b0(this,t)})}function wO(t,e){var n,r;return function(){var s=ls(this,t),o=s.tween;if(o!==n){r=n=o;for(var u=0,c=r.length;u<c;++u)if(r[u].name===e){r=r.slice(),r.splice(u,1);break}}s.tween=r}}function CO(t,e,n){var r,s;if(typeof n!="function")throw new Error;return function(){var o=ls(this,t),u=o.tween;if(u!==r){s=(r=u).slice();for(var c={name:e,value:n},d=0,f=s.length;d<f;++d)if(s[d].name===e){s[d]=c;break}d===f&&s.push(c)}o.tween=s}}function IO(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=Ii(this.node(),n).tween,s=0,o=r.length,u;s<o;++s)if((u=r[s]).name===t)return u.value;return null}return this.each((e==null?wO:CO)(n,t,e))}function g1(t,e,n){var r=t._id;return t.each(function(){var s=ls(this,r);(s.value||(s.value={}))[e]=n.apply(this,arguments)}),function(s){return Ii(s,r).value[e]}}function zw(t,e){var n;return(typeof e=="number"?xa:e instanceof Fh?M2:(n=Fh(e))?(e=n,M2):lO)(t,e)}function NO(t){return function(){this.removeAttribute(t)}}function RO(t){return function(){this.removeAttributeNS(t.space,t.local)}}function kO(t,e,n){var r,s=n+"",o;return function(){var u=this.getAttribute(t);return u===s?null:u===r?o:o=e(r=u,n)}}function DO(t,e,n){var r,s=n+"",o;return function(){var u=this.getAttributeNS(t.space,t.local);return u===s?null:u===r?o:o=e(r=u,n)}}function OO(t,e,n){var r,s,o;return function(){var u,c=n(this),d;return c==null?void this.removeAttribute(t):(u=this.getAttribute(t),d=c+"",u===d?null:u===r&&d===s?o:(s=d,o=e(r=u,c)))}}function LO(t,e,n){var r,s,o;return function(){var u,c=n(this),d;return c==null?void this.removeAttributeNS(t.space,t.local):(u=this.getAttributeNS(t.space,t.local),d=c+"",u===d?null:u===r&&d===s?o:(s=d,o=e(r=u,c)))}}function PO(t,e){var n=Tp(t),r=n==="transform"?fO:zw;return this.attrTween(t,typeof e=="function"?(n.local?LO:OO)(n,r,g1(this,"attr."+t,e)):e==null?(n.local?RO:NO)(n):(n.local?DO:kO)(n,r,e))}function MO(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function BO(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function UO(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&BO(t,o)),n}return s._value=e,s}function HO(t,e){var n,r;function s(){var o=e.apply(this,arguments);return o!==r&&(n=(r=o)&&MO(t,o)),n}return s._value=e,s}function VO(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=Tp(t);return this.tween(n,(r.local?UO:HO)(r,e))}function zO(t,e){return function(){m1(this,t).delay=+e.apply(this,arguments)}}function FO(t,e){return e=+e,function(){m1(this,t).delay=e}}function jO(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?zO:FO)(e,t)):Ii(this.node(),e).delay}function qO(t,e){return function(){ls(this,t).duration=+e.apply(this,arguments)}}function YO(t,e){return e=+e,function(){ls(this,t).duration=e}}function GO(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?qO:YO)(e,t)):Ii(this.node(),e).duration}function $O(t,e){if(typeof e!="function")throw new Error;return function(){ls(this,t).ease=e}}function KO(t){var e=this._id;return arguments.length?this.each($O(e,t)):Ii(this.node(),e).ease}function XO(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ls(this,t).ease=n}}function QO(t){if(typeof t!="function")throw new Error;return this.each(XO(this._id,t))}function WO(t){typeof t!="function"&&(t=_w(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o=e[s],u=o.length,c=r[s]=[],d,f=0;f<u;++f)(d=o[f])&&t.call(d,d.__data__,f,o)&&c.push(d);return new Fs(r,this._parents,this._name,this._id)}function ZO(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,s=n.length,o=Math.min(r,s),u=new Array(r),c=0;c<o;++c)for(var d=e[c],f=n[c],m=d.length,y=u[c]=new Array(m),b,T=0;T<m;++T)(b=d[T]||f[T])&&(y[T]=b);for(;c<r;++c)u[c]=e[c];return new Fs(u,this._parents,this._name,this._id)}function JO(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function eL(t,e,n){var r,s,o=JO(e)?m1:ls;return function(){var u=o(this,t),c=u.on;c!==r&&(s=(r=c).copy()).on(e,n),u.on=s}}function tL(t,e){var n=this._id;return arguments.length<2?Ii(this.node(),n).on.on(t):this.each(eL(n,t,e))}function nL(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function rL(){return this.on("end.remove",nL(this._id))}function iL(t){var e=this._name,n=this._id;typeof t!="function"&&(t=h1(t));for(var r=this._groups,s=r.length,o=new Array(s),u=0;u<s;++u)for(var c=r[u],d=c.length,f=o[u]=new Array(d),m,y,b=0;b<d;++b)(m=c[b])&&(y=t.call(m,m.__data__,b,c))&&("__data__"in m&&(y.__data__=m.__data__),f[b]=y,Ap(f[b],e,n,b,f,Ii(m,n)));return new Fs(o,this._parents,e,n)}function sL(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ew(t));for(var r=this._groups,s=r.length,o=[],u=[],c=0;c<s;++c)for(var d=r[c],f=d.length,m,y=0;y<f;++y)if(m=d[y]){for(var b=t.call(m,m.__data__,y,d),T,w=Ii(m,n),I=0,L=b.length;I<L;++I)(T=b[I])&&Ap(T,e,n,I,b,w);o.push(b),u.push(m)}return new Fs(o,u,e,n)}var aL=ld.prototype.constructor;function oL(){return new aL(this._groups,this._parents)}function uL(t,e){var n,r,s;return function(){var o=Cl(this,t),u=(this.style.removeProperty(t),Cl(this,t));return o===u?null:o===n&&u===r?s:s=e(n=o,r=u)}}function Fw(t){return function(){this.style.removeProperty(t)}}function lL(t,e,n){var r,s=n+"",o;return function(){var u=Cl(this,t);return u===s?null:u===r?o:o=e(r=u,n)}}function cL(t,e,n){var r,s,o;return function(){var u=Cl(this,t),c=n(this),d=c+"";return c==null&&(d=c=(this.style.removeProperty(t),Cl(this,t))),u===d?null:u===r&&d===s?o:(s=d,o=e(r=u,c))}}function hL(t,e){var n,r,s,o="style."+e,u="end."+o,c;return function(){var d=ls(this,t),f=d.on,m=d.value[o]==null?c||(c=Fw(e)):void 0;(f!==n||s!==m)&&(r=(n=f).copy()).on(u,s=m),d.on=r}}function dL(t,e,n){var r=(t+="")=="transform"?dO:zw;return e==null?this.styleTween(t,uL(t,r)).on("end.style."+t,Fw(t)):typeof e=="function"?this.styleTween(t,cL(t,r,g1(this,"style."+t,e))).each(hL(this._id,t)):this.styleTween(t,lL(t,r,e),n).on("end.style."+t,null)}function fL(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function pL(t,e,n){var r,s;function o(){var u=e.apply(this,arguments);return u!==s&&(r=(s=u)&&fL(t,u,n)),r}return o._value=e,o}function mL(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,pL(t,e,n??""))}function gL(t){return function(){this.textContent=t}}function yL(t){return function(){var e=t(this);this.textContent=e??""}}function EL(t){return this.tween("text",typeof t=="function"?yL(g1(this,"text",t)):gL(t==null?"":t+""))}function _L(t){return function(e){this.textContent=t.call(this,e)}}function bL(t){var e,n;function r(){var s=t.apply(this,arguments);return s!==n&&(e=(n=s)&&_L(s)),e}return r._value=t,r}function TL(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,bL(t))}function vL(){for(var t=this._name,e=this._id,n=jw(),r=this._groups,s=r.length,o=0;o<s;++o)for(var u=r[o],c=u.length,d,f=0;f<c;++f)if(d=u[f]){var m=Ii(d,e);Ap(d,t,n,f,u,{time:m.time+m.delay+m.duration,delay:0,duration:m.duration,ease:m.ease})}return new Fs(r,this._parents,t,n)}function AL(){var t,e,n=this,r=n._id,s=n.size();return new Promise(function(o,u){var c={value:u},d={value:function(){--s===0&&o()}};n.each(function(){var f=ls(this,r),m=f.on;m!==t&&(e=(t=m).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(d)),f.on=e}),s===0&&o()})}var SL=0;function Fs(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function jw(){return++SL}var Ps=ld.prototype;Fs.prototype={constructor:Fs,select:iL,selectAll:sL,selectChild:Ps.selectChild,selectChildren:Ps.selectChildren,filter:WO,merge:ZO,selection:oL,transition:vL,call:Ps.call,nodes:Ps.nodes,node:Ps.node,size:Ps.size,empty:Ps.empty,each:Ps.each,on:tL,attr:PO,attrTween:VO,style:dL,styleTween:mL,text:EL,textTween:TL,remove:rL,tween:IO,delay:jO,duration:GO,ease:KO,easeVarying:QO,end:AL,[Symbol.iterator]:Ps[Symbol.iterator]};function xL(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var wL={time:null,delay:0,duration:250,ease:xL};function CL(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function IL(t){var e,n;t instanceof Fs?(e=t._id,t=t._name):(e=jw(),(n=wL).time=p1(),t=t==null?null:t+"");for(var r=this._groups,s=r.length,o=0;o<s;++o)for(var u=r[o],c=u.length,d,f=0;f<c;++f)(d=u[f])&&Ap(d,t,e,f,u,n||CL(d,e));return new Fs(r,this._parents,t,e)}ld.prototype.interrupt=xO;ld.prototype.transition=IL;const Qf=t=>()=>t;function NL(t,{sourceEvent:e,target:n,transform:r,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:s}})}function Us(t,e,n){this.k=t,this.x=e,this.y=n}Us.prototype={constructor:Us,scale:function(t){return t===1?this:new Us(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Us(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ma=new Us(1,0,0);Us.prototype;function yy(t){t.stopImmediatePropagation()}function rh(t){t.preventDefault(),t.stopImmediatePropagation()}function RL(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function kL(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function j2(){return this.__zoom||Ma}function DL(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function OL(){return navigator.maxTouchPoints||"ontouchstart"in this}function LL(t,e,n){var r=t.invertX(e[0][0])-n[0][0],s=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],u=t.invertY(e[1][1])-n[1][1];return t.translate(s>r?(r+s)/2:Math.min(0,r)||Math.max(0,s),u>o?(o+u)/2:Math.min(0,o)||Math.max(0,u))}function PL(){var t=RL,e=kL,n=LL,r=DL,s=OL,o=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,d=yO,f=bp("start","zoom","end"),m,y,b,T=500,w=150,I=0,L=10;function k(O){O.property("__zoom",j2).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",D).on("dblclick.zoom",U).filter(s).on("touchstart.zoom",B).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(O,K,z,J){var se=O.selection?O.selection():O;se.property("__zoom",j2),O!==se?te(O,K,z,J):se.interrupt().each(function(){Y(this,arguments).event(J).start().zoom(null,typeof K=="function"?K.apply(this,arguments):K).end()})},k.scaleBy=function(O,K,z,J){k.scaleTo(O,function(){var se=this.__zoom.k,re=typeof K=="function"?K.apply(this,arguments):K;return se*re},z,J)},k.scaleTo=function(O,K,z,J){k.transform(O,function(){var se=e.apply(this,arguments),re=this.__zoom,A=z==null?j(se):typeof z=="function"?z.apply(this,arguments):z,ee=re.invert(A),ae=typeof K=="function"?K.apply(this,arguments):K;return n($(q(re,ae),A,ee),se,u)},z,J)},k.translateBy=function(O,K,z,J){k.transform(O,function(){return n(this.__zoom.translate(typeof K=="function"?K.apply(this,arguments):K,typeof z=="function"?z.apply(this,arguments):z),e.apply(this,arguments),u)},null,J)},k.translateTo=function(O,K,z,J,se){k.transform(O,function(){var re=e.apply(this,arguments),A=this.__zoom,ee=J==null?j(re):typeof J=="function"?J.apply(this,arguments):J;return n(Ma.translate(ee[0],ee[1]).scale(A.k).translate(typeof K=="function"?-K.apply(this,arguments):-K,typeof z=="function"?-z.apply(this,arguments):-z),re,u)},J,se)};function q(O,K){return K=Math.max(o[0],Math.min(o[1],K)),K===O.k?O:new Us(K,O.x,O.y)}function $(O,K,z){var J=K[0]-z[0]*O.k,se=K[1]-z[1]*O.k;return J===O.x&&se===O.y?O:new Us(O.k,J,se)}function j(O){return[(+O[0][0]+ +O[1][0])/2,(+O[0][1]+ +O[1][1])/2]}function te(O,K,z,J){O.on("start.zoom",function(){Y(this,arguments).event(J).start()}).on("interrupt.zoom end.zoom",function(){Y(this,arguments).event(J).end()}).tween("zoom",function(){var se=this,re=arguments,A=Y(se,re).event(J),ee=e.apply(se,re),ae=z==null?j(ee):typeof z=="function"?z.apply(se,re):z,R=Math.max(ee[1][0]-ee[0][0],ee[1][1]-ee[0][1]),oe=se.__zoom,Ee=typeof K=="function"?K.apply(se,re):K,me=d(oe.invert(ae).concat(R/oe.k),Ee.invert(ae).concat(R/Ee.k));return function(we){if(we===1)we=Ee;else{var Ce=me(we),Le=R/Ce[2];we=new Us(Le,ae[0]-Ce[0]*Le,ae[1]-Ce[1]*Le)}A.zoom(null,we)}})}function Y(O,K,z){return!z&&O.__zooming||new M(O,K)}function M(O,K){this.that=O,this.args=K,this.active=0,this.sourceEvent=null,this.extent=e.apply(O,K),this.taps=0}M.prototype={event:function(O){return O&&(this.sourceEvent=O),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(O,K){return this.mouse&&O!=="mouse"&&(this.mouse[1]=K.invert(this.mouse[0])),this.touch0&&O!=="touch"&&(this.touch0[1]=K.invert(this.touch0[0])),this.touch1&&O!=="touch"&&(this.touch1[1]=K.invert(this.touch1[0])),this.that.__zoom=K,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(O){var K=Ti(this.that).datum();f.call(O,this.that,new NL(O,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:f}),K)}};function N(O,...K){if(!t.apply(this,arguments))return;var z=Y(this,K).event(O),J=this.__zoom,se=Math.max(o[0],Math.min(o[1],J.k*Math.pow(2,r.apply(this,arguments)))),re=Wi(O);if(z.wheel)(z.mouse[0][0]!==re[0]||z.mouse[0][1]!==re[1])&&(z.mouse[1]=J.invert(z.mouse[0]=re)),clearTimeout(z.wheel);else{if(J.k===se)return;z.mouse=[re,J.invert(re)],b0(this),z.start()}rh(O),z.wheel=setTimeout(A,w),z.zoom("mouse",n($(q(J,se),z.mouse[0],z.mouse[1]),z.extent,u));function A(){z.wheel=null,z.end()}}function D(O,...K){if(b||!t.apply(this,arguments))return;var z=O.currentTarget,J=Y(this,K,!0).event(O),se=Ti(O.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",R,!0),re=Wi(O,z),A=O.clientX,ee=O.clientY;Nw(O.view),yy(O),J.mouse=[re,this.__zoom.invert(re)],b0(this),J.start();function ae(oe){if(rh(oe),!J.moved){var Ee=oe.clientX-A,me=oe.clientY-ee;J.moved=Ee*Ee+me*me>I}J.event(oe).zoom("mouse",n($(J.that.__zoom,J.mouse[0]=Wi(oe,z),J.mouse[1]),J.extent,u))}function R(oe){se.on("mousemove.zoom mouseup.zoom",null),Rw(oe.view,J.moved),rh(oe),J.event(oe).end()}}function U(O,...K){if(t.apply(this,arguments)){var z=this.__zoom,J=Wi(O.changedTouches?O.changedTouches[0]:O,this),se=z.invert(J),re=z.k*(O.shiftKey?.5:2),A=n($(q(z,re),J,se),e.apply(this,K),u);rh(O),c>0?Ti(this).transition().duration(c).call(te,A,J,O):Ti(this).call(k.transform,A,J,O)}}function B(O,...K){if(t.apply(this,arguments)){var z=O.touches,J=z.length,se=Y(this,K,O.changedTouches.length===J).event(O),re,A,ee,ae;for(yy(O),A=0;A<J;++A)ee=z[A],ae=Wi(ee,this),ae=[ae,this.__zoom.invert(ae),ee.identifier],se.touch0?!se.touch1&&se.touch0[2]!==ae[2]&&(se.touch1=ae,se.taps=0):(se.touch0=ae,re=!0,se.taps=1+!!m);m&&(m=clearTimeout(m)),re&&(se.taps<2&&(y=ae[0],m=setTimeout(function(){m=null},T)),b0(this),se.start())}}function V(O,...K){if(this.__zooming){var z=Y(this,K).event(O),J=O.changedTouches,se=J.length,re,A,ee,ae;for(rh(O),re=0;re<se;++re)A=J[re],ee=Wi(A,this),z.touch0&&z.touch0[2]===A.identifier?z.touch0[0]=ee:z.touch1&&z.touch1[2]===A.identifier&&(z.touch1[0]=ee);if(A=z.that.__zoom,z.touch1){var R=z.touch0[0],oe=z.touch0[1],Ee=z.touch1[0],me=z.touch1[1],we=(we=Ee[0]-R[0])*we+(we=Ee[1]-R[1])*we,Ce=(Ce=me[0]-oe[0])*Ce+(Ce=me[1]-oe[1])*Ce;A=q(A,Math.sqrt(we/Ce)),ee=[(R[0]+Ee[0])/2,(R[1]+Ee[1])/2],ae=[(oe[0]+me[0])/2,(oe[1]+me[1])/2]}else if(z.touch0)ee=z.touch0[0],ae=z.touch0[1];else return;z.zoom("touch",n($(A,ee,ae),z.extent,u))}}function C(O,...K){if(this.__zooming){var z=Y(this,K).event(O),J=O.changedTouches,se=J.length,re,A;for(yy(O),b&&clearTimeout(b),b=setTimeout(function(){b=null},T),re=0;re<se;++re)A=J[re],z.touch0&&z.touch0[2]===A.identifier?delete z.touch0:z.touch1&&z.touch1[2]===A.identifier&&delete z.touch1;if(z.touch1&&!z.touch0&&(z.touch0=z.touch1,delete z.touch1),z.touch0)z.touch0[1]=this.__zoom.invert(z.touch0[0]);else if(z.end(),z.taps===2&&(A=Wi(A,this),Math.hypot(y[0]-A[0],y[1]-A[1])<L)){var ee=Ti(this).on("dblclick.zoom");ee&&ee.apply(this,arguments)}}}return k.wheelDelta=function(O){return arguments.length?(r=typeof O=="function"?O:Qf(+O),k):r},k.filter=function(O){return arguments.length?(t=typeof O=="function"?O:Qf(!!O),k):t},k.touchable=function(O){return arguments.length?(s=typeof O=="function"?O:Qf(!!O),k):s},k.extent=function(O){return arguments.length?(e=typeof O=="function"?O:Qf([[+O[0][0],+O[0][1]],[+O[1][0],+O[1][1]]]),k):e},k.scaleExtent=function(O){return arguments.length?(o[0]=+O[0],o[1]=+O[1],k):[o[0],o[1]]},k.translateExtent=function(O){return arguments.length?(u[0][0]=+O[0][0],u[1][0]=+O[1][0],u[0][1]=+O[0][1],u[1][1]=+O[1][1],k):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},k.constrain=function(O){return arguments.length?(n=O,k):n},k.duration=function(O){return arguments.length?(c=+O,k):c},k.interpolate=function(O){return arguments.length?(d=O,k):d},k.on=function(){var O=f.on.apply(f,arguments);return O===f?k:O},k.clickDistance=function(O){return arguments.length?(I=(O=+O)*O,k):Math.sqrt(I)},k.tapDistance=function(O){return arguments.length?(L=+O,k):L},k}var ML=mw();const Sp=Q.createContext(null),BL=Sp.Provider,js={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},qw=js.error001();function Zt(t,e){const n=Q.useContext(Sp);if(n===null)throw new Error(qw);return gw(n,t,e)}const Hn=()=>{const t=Q.useContext(Sp);if(t===null)throw new Error(qw);return Q.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},UL=t=>t.userSelectionActive?"none":"all";function Yw({position:t,children:e,className:n,style:r,...s}){const o=Zt(UL),u=`${t}`.split("-");return be.createElement("div",{className:cr(["react-flow__panel",n,...u]),style:{...r,pointerEvents:o},...s},e)}function HL({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:be.createElement(Yw,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},be.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const VL=({x:t,y:e,label:n,labelStyle:r={},labelShowBg:s=!0,labelBgStyle:o={},labelBgPadding:u=[2,4],labelBgBorderRadius:c=2,children:d,className:f,...m})=>{const y=Q.useRef(null),[b,T]=Q.useState({x:0,y:0,width:0,height:0}),w=cr(["react-flow__edge-textwrapper",f]);return Q.useEffect(()=>{if(y.current){const I=y.current.getBBox();T({x:I.x,y:I.y,width:I.width,height:I.height})}},[n]),typeof n>"u"||!n?null:be.createElement("g",{transform:`translate(${t-b.width/2} ${e-b.height/2})`,className:w,visibility:b.width?"visible":"hidden",...m},s&&be.createElement("rect",{width:b.width+2*u[0],x:-u[0],y:-u[1],height:b.height+2*u[1],className:"react-flow__edge-textbg",style:o,rx:c,ry:c}),be.createElement("text",{className:"react-flow__edge-text",y:b.height/2,dy:"0.3em",ref:y,style:r},n),d)};var zL=Q.memo(VL);const y1=t=>({width:t.offsetWidth,height:t.offsetHeight}),Nl=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),E1=(t={x:0,y:0},e)=>({x:Nl(t.x,e[0][0],e[1][0]),y:Nl(t.y,e[0][1],e[1][1])}),q2=(t,e,n)=>t<e?Nl(Math.abs(t-e),1,50)/50:t>n?-Nl(Math.abs(t-n),1,50)/50:0,Gw=(t,e)=>{const n=q2(t.x,35,e.width-35)*20,r=q2(t.y,35,e.height-35)*20;return[n,r]},$w=t=>t.getRootNode?.()||window?.document,FL=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),_1=({x:t,y:e,width:n,height:r})=>({x:t,y:e,x2:t+n,y2:e+r}),jL=({x:t,y:e,x2:n,y2:r})=>({x:t,y:e,width:n-t,height:r-e}),Y2=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),hE=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),r=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*r)},qL=t=>hi(t.width)&&hi(t.height)&&hi(t.x)&&hi(t.y),hi=t=>!isNaN(t)&&isFinite(t),an=Symbol.for("internals"),Kw=["Enter"," ","Escape"],YL=(t,e)=>{},GL=t=>"nativeEvent"in t;function dE(t){const n=(GL(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Xw=t=>"clientX"in t,Ba=(t,e)=>{const n=Xw(t),r=n?t.clientX:t.touches?.[0].clientX,s=n?t.clientY:t.touches?.[0].clientY;return{x:r-(e?.left??0),y:s-(e?.top??0)}},j0=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,hd=({id:t,path:e,labelX:n,labelY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:y,markerStart:b,interactionWidth:T=20})=>be.createElement(be.Fragment,null,be.createElement("path",{id:t,style:m,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:b}),T&&be.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:T,className:"react-flow__edge-interaction"}),s&&hi(n)&&hi(r)?be.createElement(zL,{x:n,y:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f}):null);hd.displayName="BaseEdge";function ih(t,e,n){return n===void 0?n:r=>{const s=e().edges.find(o=>o.id===t);s&&n(r,{...s})}}function Qw({sourceX:t,sourceY:e,targetX:n,targetY:r}){const s=Math.abs(n-t)/2,o=n<t?n+s:n-s,u=Math.abs(r-e)/2,c=r<e?r+u:r-u;return[o,c,s,u]}function Ww({sourceX:t,sourceY:e,targetX:n,targetY:r,sourceControlX:s,sourceControlY:o,targetControlX:u,targetControlY:c}){const d=t*.125+s*.375+u*.375+n*.125,f=e*.125+o*.375+c*.375+r*.125,m=Math.abs(d-t),y=Math.abs(f-e);return[d,f,m,y]}var ja;(function(t){t.Strict="strict",t.Loose="loose"})(ja||(ja={}));var Bo;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Bo||(Bo={}));var qh;(function(t){t.Partial="partial",t.Full="full"})(qh||(qh={}));var Ca;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ca||(Ca={}));var Yh;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Yh||(Yh={}));var He;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(He||(He={}));function G2({pos:t,x1:e,y1:n,x2:r,y2:s}){return t===He.Left||t===He.Right?[.5*(e+r),n]:[e,.5*(n+s)]}function Zw({sourceX:t,sourceY:e,sourcePosition:n=He.Bottom,targetX:r,targetY:s,targetPosition:o=He.Top}){const[u,c]=G2({pos:n,x1:t,y1:e,x2:r,y2:s}),[d,f]=G2({pos:o,x1:r,y1:s,x2:t,y2:e}),[m,y,b,T]=Ww({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:u,sourceControlY:c,targetControlX:d,targetControlY:f});return[`M${t},${e} C${u},${c} ${d},${f} ${r},${s}`,m,y,b,T]}const b1=Q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=He.Bottom,targetPosition:o=He.Top,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:b,markerEnd:T,markerStart:w,interactionWidth:I})=>{const[L,k,q]=Zw({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o});return be.createElement(hd,{path:L,labelX:k,labelY:q,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:b,markerEnd:T,markerStart:w,interactionWidth:I})});b1.displayName="SimpleBezierEdge";const $2={[He.Left]:{x:-1,y:0},[He.Right]:{x:1,y:0},[He.Top]:{x:0,y:-1},[He.Bottom]:{x:0,y:1}},$L=({source:t,sourcePosition:e=He.Bottom,target:n})=>e===He.Left||e===He.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},K2=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function KL({source:t,sourcePosition:e=He.Bottom,target:n,targetPosition:r=He.Top,center:s,offset:o}){const u=$2[e],c=$2[r],d={x:t.x+u.x*o,y:t.y+u.y*o},f={x:n.x+c.x*o,y:n.y+c.y*o},m=$L({source:d,sourcePosition:e,target:f}),y=m.x!==0?"x":"y",b=m[y];let T=[],w,I;const L={x:0,y:0},k={x:0,y:0},[q,$,j,te]=Qw({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(u[y]*c[y]===-1){w=s.x??q,I=s.y??$;const M=[{x:w,y:d.y},{x:w,y:f.y}],N=[{x:d.x,y:I},{x:f.x,y:I}];u[y]===b?T=y==="x"?M:N:T=y==="x"?N:M}else{const M=[{x:d.x,y:f.y}],N=[{x:f.x,y:d.y}];if(y==="x"?T=u.x===b?N:M:T=u.y===b?M:N,e===r){const C=Math.abs(t[y]-n[y]);if(C<=o){const O=Math.min(o-1,o-C);u[y]===b?L[y]=(d[y]>t[y]?-1:1)*O:k[y]=(f[y]>n[y]?-1:1)*O}}if(e!==r){const C=y==="x"?"y":"x",O=u[y]===c[C],K=d[C]>f[C],z=d[C]<f[C];(u[y]===1&&(!O&&K||O&&z)||u[y]!==1&&(!O&&z||O&&K))&&(T=y==="x"?M:N)}const D={x:d.x+L.x,y:d.y+L.y},U={x:f.x+k.x,y:f.y+k.y},B=Math.max(Math.abs(D.x-T[0].x),Math.abs(U.x-T[0].x)),V=Math.max(Math.abs(D.y-T[0].y),Math.abs(U.y-T[0].y));B>=V?(w=(D.x+U.x)/2,I=T[0].y):(w=T[0].x,I=(D.y+U.y)/2)}return[[t,{x:d.x+L.x,y:d.y+L.y},...T,{x:f.x+k.x,y:f.y+k.y},n],w,I,j,te]}function XL(t,e,n,r){const s=Math.min(K2(t,e)/2,K2(e,n)/2,r),{x:o,y:u}=e;if(t.x===o&&o===n.x||t.y===u&&u===n.y)return`L${o} ${u}`;if(t.y===u){const f=t.x<n.x?-1:1,m=t.y<n.y?1:-1;return`L ${o+s*f},${u}Q ${o},${u} ${o},${u+s*m}`}const c=t.x<n.x?1:-1,d=t.y<n.y?-1:1;return`L ${o},${u+s*d}Q ${o},${u} ${o+s*c},${u}`}function fE({sourceX:t,sourceY:e,sourcePosition:n=He.Bottom,targetX:r,targetY:s,targetPosition:o=He.Top,borderRadius:u=5,centerX:c,centerY:d,offset:f=20}){const[m,y,b,T,w]=KL({source:{x:t,y:e},sourcePosition:n,target:{x:r,y:s},targetPosition:o,center:{x:c,y:d},offset:f});return[m.reduce((L,k,q)=>{let $="";return q>0&&q<m.length-1?$=XL(m[q-1],k,m[q+1],u):$=`${q===0?"M":"L"}${k.x} ${k.y}`,L+=$,L},""),y,b,T,w]}const xp=Q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,sourcePosition:y=He.Bottom,targetPosition:b=He.Top,markerEnd:T,markerStart:w,pathOptions:I,interactionWidth:L})=>{const[k,q,$]=fE({sourceX:t,sourceY:e,sourcePosition:y,targetX:n,targetY:r,targetPosition:b,borderRadius:I?.borderRadius,offset:I?.offset});return be.createElement(hd,{path:k,labelX:q,labelY:$,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:T,markerStart:w,interactionWidth:L})});xp.displayName="SmoothStepEdge";const T1=Q.memo(t=>be.createElement(xp,{...t,pathOptions:Q.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));T1.displayName="StepEdge";function QL({sourceX:t,sourceY:e,targetX:n,targetY:r}){const[s,o,u,c]=Qw({sourceX:t,sourceY:e,targetX:n,targetY:r});return[`M ${t},${e}L ${n},${r}`,s,o,u,c]}const v1=Q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:y,markerStart:b,interactionWidth:T})=>{const[w,I,L]=QL({sourceX:t,sourceY:e,targetX:n,targetY:r});return be.createElement(hd,{path:w,labelX:I,labelY:L,label:s,labelStyle:o,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:m,markerEnd:y,markerStart:b,interactionWidth:T})});v1.displayName="StraightEdge";function Wf(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function X2({pos:t,x1:e,y1:n,x2:r,y2:s,c:o}){switch(t){case He.Left:return[e-Wf(e-r,o),n];case He.Right:return[e+Wf(r-e,o),n];case He.Top:return[e,n-Wf(n-s,o)];case He.Bottom:return[e,n+Wf(s-n,o)]}}function Jw({sourceX:t,sourceY:e,sourcePosition:n=He.Bottom,targetX:r,targetY:s,targetPosition:o=He.Top,curvature:u=.25}){const[c,d]=X2({pos:n,x1:t,y1:e,x2:r,y2:s,c:u}),[f,m]=X2({pos:o,x1:r,y1:s,x2:t,y2:e,c:u}),[y,b,T,w]=Ww({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:m});return[`M${t},${e} C${c},${d} ${f},${m} ${r},${s}`,y,b,T,w]}const q0=Q.memo(({sourceX:t,sourceY:e,targetX:n,targetY:r,sourcePosition:s=He.Bottom,targetPosition:o=He.Top,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:b,markerEnd:T,markerStart:w,pathOptions:I,interactionWidth:L})=>{const[k,q,$]=Jw({sourceX:t,sourceY:e,sourcePosition:s,targetX:n,targetY:r,targetPosition:o,curvature:I?.curvature});return be.createElement(hd,{path:k,labelX:q,labelY:$,label:u,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:m,labelBgBorderRadius:y,style:b,markerEnd:T,markerStart:w,interactionWidth:L})});q0.displayName="BezierEdge";const A1=Q.createContext(null),WL=A1.Provider;A1.Consumer;const ZL=()=>Q.useContext(A1),JL=t=>"id"in t&&"source"in t&&"target"in t,e5=({source:t,sourceHandle:e,target:n,targetHandle:r})=>`reactflow__edge-${t}${e||""}-${n}${r||""}`,pE=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(r=>`${r}=${t[r]}`).join("&")}`,t5=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),n5=(t,e)=>{if(!t.source||!t.target)return e;let n;return JL(t)?n={...t}:n={...t,id:e5(t)},t5(n,e)?e:e.concat(n)},mE=({x:t,y:e},[n,r,s],o,[u,c])=>{const d={x:(t-n)/s,y:(e-r)/s};return o?{x:u*Math.round(d.x/u),y:c*Math.round(d.y/c)}:d},eC=({x:t,y:e},[n,r,s])=>({x:t*s+n,y:e*s+r}),gl=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],r=(t.height??0)*e[1],s={x:t.position.x-n,y:t.position.y-r};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-r}:s}},S1=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((r,s)=>{const{x:o,y:u}=gl(s,e).positionAbsolute;return FL(r,_1({x:o,y:u,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return jL(n)},tC=(t,e,[n,r,s]=[0,0,1],o=!1,u=!1,c=[0,0])=>{const d={x:(e.x-n)/s,y:(e.y-r)/s,width:e.width/s,height:e.height/s},f=[];return t.forEach(m=>{const{width:y,height:b,selectable:T=!0,hidden:w=!1}=m;if(u&&!T||w)return!1;const{positionAbsolute:I}=gl(m,c),L={x:I.x,y:I.y,width:y||0,height:b||0},k=hE(d,L),q=typeof y>"u"||typeof b>"u"||y===null||b===null,$=o&&k>0,j=(y||0)*(b||0);(q||$||k>=j||m.dragging)&&f.push(m)}),f},nC=(t,e)=>{const n=t.map(r=>r.id);return e.filter(r=>n.includes(r.source)||n.includes(r.target))},rC=(t,e,n,r,s,o=.1)=>{const u=e/(t.width*(1+o)),c=n/(t.height*(1+o)),d=Math.min(u,c),f=Nl(d,r,s),m=t.x+t.width/2,y=t.y+t.height/2,b=e/2-m*f,T=n/2-y*f;return{x:b,y:T,zoom:f}},Lo=(t,e=0)=>t.transition().duration(e);function Q2(t,e,n,r){return(e[n]||[]).reduce((s,o)=>(`${t.id}-${o.id}-${n}`!==r&&s.push({id:o.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+o.x+o.width/2,y:(t.positionAbsolute?.y??0)+o.y+o.height/2}),s),[])}function r5(t,e,n,r,s,o){const{x:u,y:c}=Ba(t),f=e.elementsFromPoint(u,c).find(w=>w.classList.contains("react-flow__handle"));if(f){const w=f.getAttribute("data-nodeid");if(w){const I=x1(void 0,f),L=f.getAttribute("data-handleid"),k=o({nodeId:w,id:L,type:I});if(k){const q=s.find($=>$.nodeId===w&&$.type===I&&$.id===L);return{handle:{id:L,type:I,nodeId:w,x:q?.x||n.x,y:q?.y||n.y},validHandleResult:k}}}}let m=[],y=1/0;if(s.forEach(w=>{const I=Math.sqrt((w.x-n.x)**2+(w.y-n.y)**2);if(I<=r){const L=o(w);I<=y&&(I<y?m=[{handle:w,validHandleResult:L}]:I===y&&m.push({handle:w,validHandleResult:L}),y=I)}}),!m.length)return{handle:null,validHandleResult:iC()};if(m.length===1)return m[0];const b=m.some(({validHandleResult:w})=>w.isValid),T=m.some(({handle:w})=>w.type==="target");return m.find(({handle:w,validHandleResult:I})=>T?w.type==="target":b?I.isValid:!0)||m[0]}const i5={source:null,target:null,sourceHandle:null,targetHandle:null},iC=()=>({handleDomNode:null,isValid:!1,connection:i5,endHandle:null});function sC(t,e,n,r,s,o,u){const c=s==="target",d=u.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),f={...iC(),handleDomNode:d};if(d){const m=x1(void 0,d),y=d.getAttribute("data-nodeid"),b=d.getAttribute("data-handleid"),T=d.classList.contains("connectable"),w=d.classList.contains("connectableend"),I={source:c?y:n,sourceHandle:c?b:r,target:c?n:y,targetHandle:c?r:b};f.connection=I,T&&w&&(e===ja.Strict?c&&m==="source"||!c&&m==="target":y!==n||b!==r)&&(f.endHandle={nodeId:y,handleId:b,type:m},f.isValid=o(I))}return f}function s5({nodes:t,nodeId:e,handleId:n,handleType:r}){return t.reduce((s,o)=>{if(o[an]){const{handleBounds:u}=o[an];let c=[],d=[];u&&(c=Q2(o,u,"source",`${e}-${n}-${r}`),d=Q2(o,u,"target",`${e}-${n}-${r}`)),s.push(...c,...d)}return s},[])}function x1(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function Ey(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function a5(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function aC({event:t,handleId:e,nodeId:n,onConnect:r,isTarget:s,getState:o,setState:u,isValidConnection:c,edgeUpdaterType:d,onReconnectEnd:f}){const m=$w(t.target),{connectionMode:y,domNode:b,autoPanOnConnect:T,connectionRadius:w,onConnectStart:I,panBy:L,getNodes:k,cancelConnection:q}=o();let $=0,j;const{x:te,y:Y}=Ba(t),M=m?.elementFromPoint(te,Y),N=x1(d,M),D=b?.getBoundingClientRect();if(!D||!N)return;let U,B=Ba(t,D),V=!1,C=null,O=!1,K=null;const z=s5({nodes:k(),nodeId:n,handleId:e,handleType:N}),J=()=>{if(!T)return;const[A,ee]=Gw(B,D);L({x:A,y:ee}),$=requestAnimationFrame(J)};u({connectionPosition:B,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:N,connectionStartHandle:{nodeId:n,handleId:e,type:N},connectionEndHandle:null}),I?.(t,{nodeId:n,handleId:e,handleType:N});function se(A){const{transform:ee}=o();B=Ba(A,D);const{handle:ae,validHandleResult:R}=r5(A,m,mE(B,ee,!1,[1,1]),w,z,oe=>sC(oe,y,n,e,s?"target":"source",c,m));if(j=ae,V||(J(),V=!0),K=R.handleDomNode,C=R.connection,O=R.isValid,u({connectionPosition:j&&O?eC({x:j.x,y:j.y},ee):B,connectionStatus:a5(!!j,O),connectionEndHandle:R.endHandle}),!j&&!O&&!K)return Ey(U);C.source!==C.target&&K&&(Ey(U),U=K,K.classList.add("connecting","react-flow__handle-connecting"),K.classList.toggle("valid",O),K.classList.toggle("react-flow__handle-valid",O))}function re(A){(j||K)&&C&&O&&r?.(C),o().onConnectEnd?.(A),d&&f?.(A),Ey(U),q(),cancelAnimationFrame($),V=!1,O=!1,C=null,K=null,m.removeEventListener("mousemove",se),m.removeEventListener("mouseup",re),m.removeEventListener("touchmove",se),m.removeEventListener("touchend",re)}m.addEventListener("mousemove",se),m.addEventListener("mouseup",re),m.addEventListener("touchmove",se),m.addEventListener("touchend",re)}const W2=()=>!0,o5=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),u5=(t,e,n)=>r=>{const{connectionStartHandle:s,connectionEndHandle:o,connectionClickStartHandle:u}=r;return{connecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n||o?.nodeId===t&&o?.handleId===e&&o?.type===n,clickConnecting:u?.nodeId===t&&u?.handleId===e&&u?.type===n}},oC=Q.forwardRef(({type:t="source",position:e=He.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:s=!0,isConnectableEnd:o=!0,id:u,onConnect:c,children:d,className:f,onMouseDown:m,onTouchStart:y,...b},T)=>{const w=u||null,I=t==="target",L=Hn(),k=ZL(),{connectOnClick:q,noPanClassName:$}=Zt(o5,tr),{connecting:j,clickConnecting:te}=Zt(u5(k,w,t),tr);k||L.getState().onError?.("010",js.error010());const Y=D=>{const{defaultEdgeOptions:U,onConnect:B,hasDefaultEdges:V}=L.getState(),C={...U,...D};if(V){const{edges:O,setEdges:K}=L.getState();K(n5(C,O))}B?.(C),c?.(C)},M=D=>{if(!k)return;const U=Xw(D);s&&(U&&D.button===0||!U)&&aC({event:D,handleId:w,nodeId:k,onConnect:Y,isTarget:I,getState:L.getState,setState:L.setState,isValidConnection:n||L.getState().isValidConnection||W2}),U?m?.(D):y?.(D)},N=D=>{const{onClickConnectStart:U,onClickConnectEnd:B,connectionClickStartHandle:V,connectionMode:C,isValidConnection:O}=L.getState();if(!k||!V&&!s)return;if(!V){U?.(D,{nodeId:k,handleId:w,handleType:t}),L.setState({connectionClickStartHandle:{nodeId:k,type:t,handleId:w}});return}const K=$w(D.target),z=n||O||W2,{connection:J,isValid:se}=sC({nodeId:k,id:w,type:t},C,V.nodeId,V.handleId||null,V.type,z,K);se&&Y(J),B?.(D),L.setState({connectionClickStartHandle:null})};return be.createElement("div",{"data-handleid":w,"data-nodeid":k,"data-handlepos":e,"data-id":`${k}-${w}-${t}`,className:cr(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",$,f,{source:!I,target:I,connectable:r,connectablestart:s,connectableend:o,connecting:te,connectionindicator:r&&(s&&!j||o&&j)}]),onMouseDown:M,onTouchStart:M,onClick:q?N:void 0,ref:T,...b},d)});oC.displayName="Handle";var Er=Q.memo(oC);const uC=({data:t,isConnectable:e,targetPosition:n=He.Top,sourcePosition:r=He.Bottom})=>be.createElement(be.Fragment,null,be.createElement(Er,{type:"target",position:n,isConnectable:e}),t?.label,be.createElement(Er,{type:"source",position:r,isConnectable:e}));uC.displayName="DefaultNode";var gE=Q.memo(uC);const lC=({data:t,isConnectable:e,sourcePosition:n=He.Bottom})=>be.createElement(be.Fragment,null,t?.label,be.createElement(Er,{type:"source",position:n,isConnectable:e}));lC.displayName="InputNode";var cC=Q.memo(lC);const hC=({data:t,isConnectable:e,targetPosition:n=He.Top})=>be.createElement(be.Fragment,null,be.createElement(Er,{type:"target",position:n,isConnectable:e}),t?.label);hC.displayName="OutputNode";var dC=Q.memo(hC);const w1=()=>null;w1.displayName="GroupNode";const l5=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Zf=t=>t.id;function c5(t,e){return tr(t.selectedNodes.map(Zf),e.selectedNodes.map(Zf))&&tr(t.selectedEdges.map(Zf),e.selectedEdges.map(Zf))}const fC=Q.memo(({onSelectionChange:t})=>{const e=Hn(),{selectedNodes:n,selectedEdges:r}=Zt(l5,c5);return Q.useEffect(()=>{const s={nodes:n,edges:r};t?.(s),e.getState().onSelectionChange.forEach(o=>o(s))},[n,r,t]),null});fC.displayName="SelectionListener";const h5=t=>!!t.onSelectionChange;function d5({onSelectionChange:t}){const e=Zt(h5);return t||e?be.createElement(fC,{onSelectionChange:t}):null}const f5=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Qu(t,e){Q.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function ut(t,e,n){Q.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const p5=({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:s,onConnectStart:o,onConnectEnd:u,onClickConnectStart:c,onClickConnectEnd:d,nodesDraggable:f,nodesConnectable:m,nodesFocusable:y,edgesFocusable:b,edgesUpdatable:T,elevateNodesOnSelect:w,minZoom:I,maxZoom:L,nodeExtent:k,onNodesChange:q,onEdgesChange:$,elementsSelectable:j,connectionMode:te,snapGrid:Y,snapToGrid:M,translateExtent:N,connectOnClick:D,defaultEdgeOptions:U,fitView:B,fitViewOptions:V,onNodesDelete:C,onEdgesDelete:O,onNodeDrag:K,onNodeDragStart:z,onNodeDragStop:J,onSelectionDrag:se,onSelectionDragStart:re,onSelectionDragStop:A,noPanClassName:ee,nodeOrigin:ae,rfId:R,autoPanOnConnect:oe,autoPanOnNodeDrag:Ee,onError:me,connectionRadius:we,isValidConnection:Ce,nodeDragThreshold:Le})=>{const{setNodes:Ve,setEdges:ct,setDefaultNodesAndEdges:Tt,setMinZoom:Ze,setMaxZoom:mt,setTranslateExtent:gt,setNodeExtent:Xt,reset:Qe}=Zt(f5,tr),Oe=Hn();return Q.useEffect(()=>{const Ft=r?.map(An=>({...An,...U}));return Tt(n,Ft),()=>{Qe()}},[]),ut("defaultEdgeOptions",U,Oe.setState),ut("connectionMode",te,Oe.setState),ut("onConnect",s,Oe.setState),ut("onConnectStart",o,Oe.setState),ut("onConnectEnd",u,Oe.setState),ut("onClickConnectStart",c,Oe.setState),ut("onClickConnectEnd",d,Oe.setState),ut("nodesDraggable",f,Oe.setState),ut("nodesConnectable",m,Oe.setState),ut("nodesFocusable",y,Oe.setState),ut("edgesFocusable",b,Oe.setState),ut("edgesUpdatable",T,Oe.setState),ut("elementsSelectable",j,Oe.setState),ut("elevateNodesOnSelect",w,Oe.setState),ut("snapToGrid",M,Oe.setState),ut("snapGrid",Y,Oe.setState),ut("onNodesChange",q,Oe.setState),ut("onEdgesChange",$,Oe.setState),ut("connectOnClick",D,Oe.setState),ut("fitViewOnInit",B,Oe.setState),ut("fitViewOnInitOptions",V,Oe.setState),ut("onNodesDelete",C,Oe.setState),ut("onEdgesDelete",O,Oe.setState),ut("onNodeDrag",K,Oe.setState),ut("onNodeDragStart",z,Oe.setState),ut("onNodeDragStop",J,Oe.setState),ut("onSelectionDrag",se,Oe.setState),ut("onSelectionDragStart",re,Oe.setState),ut("onSelectionDragStop",A,Oe.setState),ut("noPanClassName",ee,Oe.setState),ut("nodeOrigin",ae,Oe.setState),ut("rfId",R,Oe.setState),ut("autoPanOnConnect",oe,Oe.setState),ut("autoPanOnNodeDrag",Ee,Oe.setState),ut("onError",me,Oe.setState),ut("connectionRadius",we,Oe.setState),ut("isValidConnection",Ce,Oe.setState),ut("nodeDragThreshold",Le,Oe.setState),Qu(t,Ve),Qu(e,ct),Qu(I,Ze),Qu(L,mt),Qu(N,gt),Qu(k,Xt),null},Z2={display:"none"},m5={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},pC="react-flow__node-desc",mC="react-flow__edge-desc",g5="react-flow__aria-live",y5=t=>t.ariaLiveMessage;function E5({rfId:t}){const e=Zt(y5);return be.createElement("div",{id:`${g5}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:m5},e)}function _5({rfId:t,disableKeyboardA11y:e}){return be.createElement(be.Fragment,null,be.createElement("div",{id:`${pC}-${t}`,style:Z2},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),be.createElement("div",{id:`${mC}-${t}`,style:Z2},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&be.createElement(E5,{rfId:t}))}var Gh=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,r]=Q.useState(!1),s=Q.useRef(!1),o=Q.useRef(new Set([])),[u,c]=Q.useMemo(()=>{if(t!==null){const f=(Array.isArray(t)?t:[t]).filter(y=>typeof y=="string").map(y=>y.split("+")),m=f.reduce((y,b)=>y.concat(...b),[]);return[f,m]}return[[],[]]},[t]);return Q.useEffect(()=>{const d=typeof document<"u"?document:null,f=e?.target||d;if(t!==null){const m=T=>{if(s.current=T.ctrlKey||T.metaKey||T.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&dE(T))return!1;const I=eA(T.code,c);o.current.add(T[I]),J2(u,o.current,!1)&&(T.preventDefault(),r(!0))},y=T=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&dE(T))return!1;const I=eA(T.code,c);J2(u,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(T[I]),T.key==="Meta"&&o.current.clear(),s.current=!1},b=()=>{o.current.clear(),r(!1)};return f?.addEventListener("keydown",m),f?.addEventListener("keyup",y),window.addEventListener("blur",b),()=>{f?.removeEventListener("keydown",m),f?.removeEventListener("keyup",y),window.removeEventListener("blur",b)}}},[t,r]),n};function J2(t,e,n){return t.filter(r=>n||r.length===e.size).some(r=>r.every(s=>e.has(s)))}function eA(t,e){return e.includes(t)?"code":"key"}function gC(t,e,n,r){const s=t.parentNode||t.parentId;if(!s)return n;const o=e.get(s),u=gl(o,r);return gC(o,e,{x:(n.x??0)+u.x,y:(n.y??0)+u.y,z:(o[an]?.z??0)>(n.z??0)?o[an]?.z??0:n.z??0},r)}function yC(t,e,n){t.forEach(r=>{const s=r.parentNode||r.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||n?.[r.id]){const{x:o,y:u,z:c}=gC(r,t,{...r.position,z:r[an]?.z??0},e);r.positionAbsolute={x:o,y:u},r[an].z=c,n?.[r.id]&&(r[an].isParent=!0)}})}function _y(t,e,n,r){const s=new Map,o={},u=r?1e3:0;return t.forEach(c=>{const d=(hi(c.zIndex)?c.zIndex:0)+(c.selected?u:0),f=e.get(c.id),m={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},y=c.parentNode||c.parentId;y&&(o[y]=!0);const b=f?.type&&f?.type!==c.type;Object.defineProperty(m,an,{enumerable:!1,value:{handleBounds:b?void 0:f?.[an]?.handleBounds,z:d}}),s.set(c.id,m)}),yC(s,n,o),s}function EC(t,e={}){const{getNodes:n,width:r,height:s,minZoom:o,maxZoom:u,d3Zoom:c,d3Selection:d,fitViewOnInitDone:f,fitViewOnInit:m,nodeOrigin:y}=t(),b=e.initial&&!f&&m;if(c&&d&&(b||!e.initial)){const w=n().filter(L=>{const k=e.includeHiddenNodes?L.width&&L.height:!L.hidden;return e.nodes?.length?k&&e.nodes.some(q=>q.id===L.id):k}),I=w.every(L=>L.width&&L.height);if(w.length>0&&I){const L=S1(w,y),{x:k,y:q,zoom:$}=rC(L,r,s,e.minZoom??o,e.maxZoom??u,e.padding??.1),j=Ma.translate(k,q).scale($);return typeof e.duration=="number"&&e.duration>0?c.transform(Lo(d,e.duration),j):c.transform(d,j),!0}}return!1}function b5(t,e){return t.forEach(n=>{const r=e.get(n.id);r&&e.set(r.id,{...r,[an]:r[an],selected:n.selected})}),new Map(e)}function T5(t,e){return e.map(n=>{const r=t.find(s=>s.id===n.id);return r&&(n.selected=r.selected),n})}function Jf({changedNodes:t,changedEdges:e,get:n,set:r}){const{nodeInternals:s,edges:o,onNodesChange:u,onEdgesChange:c,hasDefaultNodes:d,hasDefaultEdges:f}=n();t?.length&&(d&&r({nodeInternals:b5(t,s)}),u?.(t)),e?.length&&(f&&r({edges:T5(e,o)}),c?.(e))}const Wu=()=>{},v5={zoomIn:Wu,zoomOut:Wu,zoomTo:Wu,getZoom:()=>1,setViewport:Wu,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Wu,fitBounds:Wu,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},A5=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),S5=()=>{const t=Hn(),{d3Zoom:e,d3Selection:n}=Zt(A5,tr);return Q.useMemo(()=>n&&e?{zoomIn:s=>e.scaleBy(Lo(n,s?.duration),1.2),zoomOut:s=>e.scaleBy(Lo(n,s?.duration),1/1.2),zoomTo:(s,o)=>e.scaleTo(Lo(n,o?.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,o)=>{const[u,c,d]=t.getState().transform,f=Ma.translate(s.x??u,s.y??c).scale(s.zoom??d);e.transform(Lo(n,o?.duration),f)},getViewport:()=>{const[s,o,u]=t.getState().transform;return{x:s,y:o,zoom:u}},fitView:s=>EC(t.getState,s),setCenter:(s,o,u)=>{const{width:c,height:d,maxZoom:f}=t.getState(),m=typeof u?.zoom<"u"?u.zoom:f,y=c/2-s*m,b=d/2-o*m,T=Ma.translate(y,b).scale(m);e.transform(Lo(n,u?.duration),T)},fitBounds:(s,o)=>{const{width:u,height:c,minZoom:d,maxZoom:f}=t.getState(),{x:m,y,zoom:b}=rC(s,u,c,d,f,o?.padding??.1),T=Ma.translate(m,y).scale(b);e.transform(Lo(n,o?.duration),T)},project:s=>{const{transform:o,snapToGrid:u,snapGrid:c}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),mE(s,o,u,c)},screenToFlowPosition:s=>{const{transform:o,snapToGrid:u,snapGrid:c,domNode:d}=t.getState();if(!d)return s;const{x:f,y:m}=d.getBoundingClientRect(),y={x:s.x-f,y:s.y-m};return mE(y,o,u,c)},flowToScreenPosition:s=>{const{transform:o,domNode:u}=t.getState();if(!u)return s;const{x:c,y:d}=u.getBoundingClientRect(),f=eC(s,o);return{x:f.x+c,y:f.y+d}},viewportInitialized:!0}:v5,[e,n])};function dd(){const t=S5(),e=Hn(),n=Q.useCallback(()=>e.getState().getNodes().map(I=>({...I})),[]),r=Q.useCallback(I=>e.getState().nodeInternals.get(I),[]),s=Q.useCallback(()=>{const{edges:I=[]}=e.getState();return I.map(L=>({...L}))},[]),o=Q.useCallback(I=>{const{edges:L=[]}=e.getState();return L.find(k=>k.id===I)},[]),u=Q.useCallback(I=>{const{getNodes:L,setNodes:k,hasDefaultNodes:q,onNodesChange:$}=e.getState(),j=L(),te=typeof I=="function"?I(j):I;if(q)k(te);else if($){const Y=te.length===0?j.map(M=>({type:"remove",id:M.id})):te.map(M=>({item:M,type:"reset"}));$(Y)}},[]),c=Q.useCallback(I=>{const{edges:L=[],setEdges:k,hasDefaultEdges:q,onEdgesChange:$}=e.getState(),j=typeof I=="function"?I(L):I;if(q)k(j);else if($){const te=j.length===0?L.map(Y=>({type:"remove",id:Y.id})):j.map(Y=>({item:Y,type:"reset"}));$(te)}},[]),d=Q.useCallback(I=>{const L=Array.isArray(I)?I:[I],{getNodes:k,setNodes:q,hasDefaultNodes:$,onNodesChange:j}=e.getState();if($){const Y=[...k(),...L];q(Y)}else if(j){const te=L.map(Y=>({item:Y,type:"add"}));j(te)}},[]),f=Q.useCallback(I=>{const L=Array.isArray(I)?I:[I],{edges:k=[],setEdges:q,hasDefaultEdges:$,onEdgesChange:j}=e.getState();if($)q([...k,...L]);else if(j){const te=L.map(Y=>({item:Y,type:"add"}));j(te)}},[]),m=Q.useCallback(()=>{const{getNodes:I,edges:L=[],transform:k}=e.getState(),[q,$,j]=k;return{nodes:I().map(te=>({...te})),edges:L.map(te=>({...te})),viewport:{x:q,y:$,zoom:j}}},[]),y=Q.useCallback(({nodes:I,edges:L})=>{const{nodeInternals:k,getNodes:q,edges:$,hasDefaultNodes:j,hasDefaultEdges:te,onNodesDelete:Y,onEdgesDelete:M,onNodesChange:N,onEdgesChange:D}=e.getState(),U=(I||[]).map(K=>K.id),B=(L||[]).map(K=>K.id),V=q().reduce((K,z)=>{const J=z.parentNode||z.parentId,se=!U.includes(z.id)&&J&&K.find(A=>A.id===J);return(typeof z.deletable=="boolean"?z.deletable:!0)&&(U.includes(z.id)||se)&&K.push(z),K},[]),C=$.filter(K=>typeof K.deletable=="boolean"?K.deletable:!0),O=C.filter(K=>B.includes(K.id));if(V||O){const K=nC(V,C),z=[...O,...K],J=z.reduce((se,re)=>(se.includes(re.id)||se.push(re.id),se),[]);if((te||j)&&(te&&e.setState({edges:$.filter(se=>!J.includes(se.id))}),j&&(V.forEach(se=>{k.delete(se.id)}),e.setState({nodeInternals:new Map(k)}))),J.length>0&&(M?.(z),D&&D(J.map(se=>({id:se,type:"remove"})))),V.length>0&&(Y?.(V),N)){const se=V.map(re=>({id:re.id,type:"remove"}));N(se)}}},[]),b=Q.useCallback(I=>{const L=qL(I),k=L?null:e.getState().nodeInternals.get(I.id);return!L&&!k?[null,null,L]:[L?I:Y2(k),k,L]},[]),T=Q.useCallback((I,L=!0,k)=>{const[q,$,j]=b(I);return q?(k||e.getState().getNodes()).filter(te=>{if(!j&&(te.id===$.id||!te.positionAbsolute))return!1;const Y=Y2(te),M=hE(Y,q);return L&&M>0||M>=q.width*q.height}):[]},[]),w=Q.useCallback((I,L,k=!0)=>{const[q]=b(I);if(!q)return!1;const $=hE(q,L);return k&&$>0||$>=q.width*q.height},[]);return Q.useMemo(()=>({...t,getNodes:n,getNode:r,getEdges:s,getEdge:o,setNodes:u,setEdges:c,addNodes:d,addEdges:f,toObject:m,deleteElements:y,getIntersectingNodes:T,isNodeIntersecting:w}),[t,n,r,s,o,u,c,d,f,m,y,T,w])}const x5={actInsideInputWithModifier:!1};var w5=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=Hn(),{deleteElements:r}=dd(),s=Gh(t,x5),o=Gh(e);Q.useEffect(()=>{if(s){const{edges:u,getNodes:c}=n.getState(),d=c().filter(m=>m.selected),f=u.filter(m=>m.selected);r({nodes:d,edges:f}),n.setState({nodesSelectionActive:!1})}},[s]),Q.useEffect(()=>{n.setState({multiSelectionActive:o})},[o])};function C5(t){const e=Hn();Q.useEffect(()=>{let n;const r=()=>{if(!t.current)return;const s=y1(t.current);(s.height===0||s.width===0)&&e.getState().onError?.("004",js.error004()),e.setState({width:s.width||500,height:s.height||500})};return r(),window.addEventListener("resize",r),t.current&&(n=new ResizeObserver(()=>r()),n.observe(t.current)),()=>{window.removeEventListener("resize",r),n&&t.current&&n.unobserve(t.current)}},[])}const C1={position:"absolute",width:"100%",height:"100%",top:0,left:0},I5=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,e0=t=>({x:t.x,y:t.y,zoom:t.k}),Zu=(t,e)=>t.target.closest(`.${e}`),tA=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),nA=t=>{const e=t.ctrlKey&&j0()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},N5=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),R5=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:s=!0,zoomOnPinch:o=!0,panOnScroll:u=!1,panOnScrollSpeed:c=.5,panOnScrollMode:d=Bo.Free,zoomOnDoubleClick:f=!0,elementsSelectable:m,panOnDrag:y=!0,defaultViewport:b,translateExtent:T,minZoom:w,maxZoom:I,zoomActivationKeyCode:L,preventScrolling:k=!0,children:q,noWheelClassName:$,noPanClassName:j})=>{const te=Q.useRef(),Y=Hn(),M=Q.useRef(!1),N=Q.useRef(!1),D=Q.useRef(null),U=Q.useRef({x:0,y:0,zoom:0}),{d3Zoom:B,d3Selection:V,d3ZoomHandler:C,userSelectionActive:O}=Zt(N5,tr),K=Gh(L),z=Q.useRef(0),J=Q.useRef(!1),se=Q.useRef();return C5(D),Q.useEffect(()=>{if(D.current){const re=D.current.getBoundingClientRect(),A=PL().scaleExtent([w,I]).translateExtent(T),ee=Ti(D.current).call(A),ae=Ma.translate(b.x,b.y).scale(Nl(b.zoom,w,I)),R=[[0,0],[re.width,re.height]],oe=A.constrain()(ae,R,T);A.transform(ee,oe),A.wheelDelta(nA),Y.setState({d3Zoom:A,d3Selection:ee,d3ZoomHandler:ee.on("wheel.zoom"),transform:[oe.x,oe.y,oe.k],domNode:D.current.closest(".react-flow")})}},[]),Q.useEffect(()=>{V&&B&&(u&&!K&&!O?V.on("wheel.zoom",re=>{if(Zu(re,$))return!1;re.preventDefault(),re.stopImmediatePropagation();const A=V.property("__zoom").k||1;if(re.ctrlKey&&o){const Ce=Wi(re),Le=nA(re),Ve=A*Math.pow(2,Le);B.scaleTo(V,Ve,Ce,re);return}const ee=re.deltaMode===1?20:1;let ae=d===Bo.Vertical?0:re.deltaX*ee,R=d===Bo.Horizontal?0:re.deltaY*ee;!j0()&&re.shiftKey&&d!==Bo.Vertical&&(ae=re.deltaY*ee,R=0),B.translateBy(V,-(ae/A)*c,-(R/A)*c,{internal:!0});const oe=e0(V.property("__zoom")),{onViewportChangeStart:Ee,onViewportChange:me,onViewportChangeEnd:we}=Y.getState();clearTimeout(se.current),J.current||(J.current=!0,e?.(re,oe),Ee?.(oe)),J.current&&(t?.(re,oe),me?.(oe),se.current=setTimeout(()=>{n?.(re,oe),we?.(oe),J.current=!1},150))},{passive:!1}):typeof C<"u"&&V.on("wheel.zoom",function(re,A){if(!k&&re.type==="wheel"&&!re.ctrlKey||Zu(re,$))return null;re.preventDefault(),C.call(this,re,A)},{passive:!1}))},[O,u,d,V,B,C,K,o,k,$,e,t,n]),Q.useEffect(()=>{B&&B.on("start",re=>{if(!re.sourceEvent||re.sourceEvent.internal)return null;z.current=re.sourceEvent?.button;const{onViewportChangeStart:A}=Y.getState(),ee=e0(re.transform);M.current=!0,U.current=ee,re.sourceEvent?.type==="mousedown"&&Y.setState({paneDragging:!0}),A?.(ee),e?.(re.sourceEvent,ee)})},[B,e]),Q.useEffect(()=>{B&&(O&&!M.current?B.on("zoom",null):O||B.on("zoom",re=>{const{onViewportChange:A}=Y.getState();if(Y.setState({transform:[re.transform.x,re.transform.y,re.transform.k]}),N.current=!!(r&&tA(y,z.current??0)),(t||A)&&!re.sourceEvent?.internal){const ee=e0(re.transform);A?.(ee),t?.(re.sourceEvent,ee)}}))},[O,B,t,y,r]),Q.useEffect(()=>{B&&B.on("end",re=>{if(!re.sourceEvent||re.sourceEvent.internal)return null;const{onViewportChangeEnd:A}=Y.getState();if(M.current=!1,Y.setState({paneDragging:!1}),r&&tA(y,z.current??0)&&!N.current&&r(re.sourceEvent),N.current=!1,(n||A)&&I5(U.current,re.transform)){const ee=e0(re.transform);U.current=ee,clearTimeout(te.current),te.current=setTimeout(()=>{A?.(ee),n?.(re.sourceEvent,ee)},u?150:0)}})},[B,u,y,n,r]),Q.useEffect(()=>{B&&B.filter(re=>{const A=K||s,ee=o&&re.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&re.button===1&&re.type==="mousedown"&&(Zu(re,"react-flow__node")||Zu(re,"react-flow__edge")))return!0;if(!y&&!A&&!u&&!f&&!o||O||!f&&re.type==="dblclick"||Zu(re,$)&&re.type==="wheel"||Zu(re,j)&&(re.type!=="wheel"||u&&re.type==="wheel"&&!K)||!o&&re.ctrlKey&&re.type==="wheel"||!A&&!u&&!ee&&re.type==="wheel"||!y&&(re.type==="mousedown"||re.type==="touchstart")||Array.isArray(y)&&!y.includes(re.button)&&re.type==="mousedown")return!1;const ae=Array.isArray(y)&&y.includes(re.button)||!re.button||re.button<=1;return(!re.ctrlKey||re.type==="wheel")&&ae})},[O,B,s,o,u,f,y,m,K]),be.createElement("div",{className:"react-flow__renderer",ref:D,style:C1},q)},k5=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function D5(){const{userSelectionActive:t,userSelectionRect:e}=Zt(k5,tr);return t&&e?be.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function rA(t,e){const n=e.parentNode||e.parentId,r=t.find(s=>s.id===n);if(r){const s=e.position.x+e.width-r.width,o=e.position.y+e.height-r.height;if(s>0||o>0||e.position.x<0||e.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,s>0&&(r.style.width+=s),o>0&&(r.style.height+=o),e.position.x<0){const u=Math.abs(e.position.x);r.position.x=r.position.x-u,r.style.width+=u,e.position.x=0}if(e.position.y<0){const u=Math.abs(e.position.y);r.position.y=r.position.y-u,r.style.height+=u,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function _C(t,e){if(t.some(r=>r.type==="reset"))return t.filter(r=>r.type==="reset").map(r=>r.item);const n=t.filter(r=>r.type==="add").map(r=>r.item);return e.reduce((r,s)=>{const o=t.filter(c=>c.id===s.id);if(o.length===0)return r.push(s),r;const u={...s};for(const c of o)if(c)switch(c.type){case"select":{u.selected=c.selected;break}case"position":{typeof c.position<"u"&&(u.position=c.position),typeof c.positionAbsolute<"u"&&(u.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(u.dragging=c.dragging),u.expandParent&&rA(r,u);break}case"dimensions":{typeof c.dimensions<"u"&&(u.width=c.dimensions.width,u.height=c.dimensions.height),typeof c.updateStyle<"u"&&(u.style={...u.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(u.resizing=c.resizing),u.expandParent&&rA(r,u);break}case"remove":return r}return r.push(u),r},n)}function bC(t,e){return _C(t,e)}function O5(t,e){return _C(t,e)}const wa=(t,e)=>({id:t,type:"select",selected:e});function cl(t,e){return t.reduce((n,r)=>{const s=e.includes(r.id);return!r.selected&&s?(r.selected=!0,n.push(wa(r.id,!0))):r.selected&&!s&&(r.selected=!1,n.push(wa(r.id,!1))),n},[])}const by=(t,e)=>n=>{n.target===e.current&&t?.(n)},L5=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),TC=Q.memo(({isSelecting:t,selectionMode:e=qh.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:s,onPaneClick:o,onPaneContextMenu:u,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:m,children:y})=>{const b=Q.useRef(null),T=Hn(),w=Q.useRef(0),I=Q.useRef(0),L=Q.useRef(),{userSelectionActive:k,elementsSelectable:q,dragging:$}=Zt(L5,tr),j=()=>{T.setState({userSelectionActive:!1,userSelectionRect:null}),w.current=0,I.current=0},te=C=>{o?.(C),T.getState().resetSelectedElements(),T.setState({nodesSelectionActive:!1})},Y=C=>{if(Array.isArray(n)&&n?.includes(2)){C.preventDefault();return}u?.(C)},M=c?C=>c(C):void 0,N=C=>{const{resetSelectedElements:O,domNode:K}=T.getState();if(L.current=K?.getBoundingClientRect(),!q||!t||C.button!==0||C.target!==b.current||!L.current)return;const{x:z,y:J}=Ba(C,L.current);O(),T.setState({userSelectionRect:{width:0,height:0,startX:z,startY:J,x:z,y:J}}),r?.(C)},D=C=>{const{userSelectionRect:O,nodeInternals:K,edges:z,transform:J,onNodesChange:se,onEdgesChange:re,nodeOrigin:A,getNodes:ee}=T.getState();if(!t||!L.current||!O)return;T.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ae=Ba(C,L.current),R=O.startX??0,oe=O.startY??0,Ee={...O,x:ae.x<R?ae.x:R,y:ae.y<oe?ae.y:oe,width:Math.abs(ae.x-R),height:Math.abs(ae.y-oe)},me=ee(),we=tC(K,Ee,J,e===qh.Partial,!0,A),Ce=nC(we,z).map(Ve=>Ve.id),Le=we.map(Ve=>Ve.id);if(w.current!==Le.length){w.current=Le.length;const Ve=cl(me,Le);Ve.length&&se?.(Ve)}if(I.current!==Ce.length){I.current=Ce.length;const Ve=cl(z,Ce);Ve.length&&re?.(Ve)}T.setState({userSelectionRect:Ee})},U=C=>{if(C.button!==0)return;const{userSelectionRect:O}=T.getState();!k&&O&&C.target===b.current&&te?.(C),T.setState({nodesSelectionActive:w.current>0}),j(),s?.(C)},B=C=>{k&&(T.setState({nodesSelectionActive:w.current>0}),s?.(C)),j()},V=q&&(t||k);return be.createElement("div",{className:cr(["react-flow__pane",{dragging:$,selection:t}]),onClick:V?void 0:by(te,b),onContextMenu:by(Y,b),onWheel:by(M,b),onMouseEnter:V?void 0:d,onMouseDown:V?N:void 0,onMouseMove:V?D:f,onMouseUp:V?U:void 0,onMouseLeave:V?B:m,ref:b,style:C1},y,be.createElement(D5,null))});TC.displayName="Pane";function vC(t,e){const n=t.parentNode||t.parentId;if(!n)return!1;const r=e.get(n);return r?r.selected?!0:vC(r,e):!1}function iA(t,e,n){let r=t;do{if(r?.matches(e))return!0;if(r===n.current)return!1;r=r.parentElement}while(r);return!1}function P5(t,e,n,r){return Array.from(t.values()).filter(s=>(s.selected||s.id===r)&&(!s.parentNode||s.parentId||!vC(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:n.x-(s.positionAbsolute?.x??0),y:n.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function M5(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function AC(t,e,n,r,s=[0,0],o){const u=M5(t,t.extent||r);let c=u;const d=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(d&&t.width&&t.height){const y=n.get(d),{x:b,y:T}=gl(y,s).positionAbsolute;c=y&&hi(b)&&hi(T)&&hi(y.width)&&hi(y.height)?[[b+t.width*s[0],T+t.height*s[1]],[b+y.width-t.width+t.width*s[0],T+y.height-t.height+t.height*s[1]]]:c}else o?.("005",js.error005()),c=u;else if(t.extent&&d&&t.extent!=="parent"){const y=n.get(d),{x:b,y:T}=gl(y,s).positionAbsolute;c=[[t.extent[0][0]+b,t.extent[0][1]+T],[t.extent[1][0]+b,t.extent[1][1]+T]]}let f={x:0,y:0};if(d){const y=n.get(d);f=gl(y,s).positionAbsolute}const m=c&&c!=="parent"?E1(e,c):e;return{position:{x:m.x-f.x,y:m.y-f.y},positionAbsolute:m}}function Ty({nodeId:t,dragItems:e,nodeInternals:n}){const r=e.map(s=>({...n.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?r.find(s=>s.id===t):r[0],r]}const sA=(t,e,n,r)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const o=Array.from(s),u=e.getBoundingClientRect(),c={x:u.width*r[0],y:u.height*r[1]};return o.map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(f.left-u.left-c.x)/n,y:(f.top-u.top-c.y)/n,...y1(d)}})};function sh(t,e,n){return n===void 0?n:r=>{const s=e().nodeInternals.get(t);s&&n(r,{...s})}}function yE({id:t,store:e,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:s,unselectNodesAndEdges:o,multiSelectionActive:u,nodeInternals:c,onError:d}=e.getState(),f=c.get(t);if(!f){d?.("012",js.error012(t));return}e.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&u)&&(o({nodes:[f],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):s([t])}function B5(){const t=Hn();return Q.useCallback(({sourceEvent:n})=>{const{transform:r,snapGrid:s,snapToGrid:o}=t.getState(),u=n.touches?n.touches[0].clientX:n.clientX,c=n.touches?n.touches[0].clientY:n.clientY,d={x:(u-r[0])/r[2],y:(c-r[1])/r[2]};return{xSnapped:o?s[0]*Math.round(d.x/s[0]):d.x,ySnapped:o?s[1]*Math.round(d.y/s[1]):d.y,...d}},[])}function vy(t){return(e,n,r)=>t?.(e,r)}function SC({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:r,nodeId:s,isSelectable:o,selectNodesOnDrag:u}){const c=Hn(),[d,f]=Q.useState(!1),m=Q.useRef([]),y=Q.useRef({x:null,y:null}),b=Q.useRef(0),T=Q.useRef(null),w=Q.useRef({x:0,y:0}),I=Q.useRef(null),L=Q.useRef(!1),k=Q.useRef(!1),q=Q.useRef(!1),$=B5();return Q.useEffect(()=>{if(t?.current){const j=Ti(t.current),te=({x:N,y:D})=>{const{nodeInternals:U,onNodeDrag:B,onSelectionDrag:V,updateNodePositions:C,nodeExtent:O,snapGrid:K,snapToGrid:z,nodeOrigin:J,onError:se}=c.getState();y.current={x:N,y:D};let re=!1,A={x:0,y:0,x2:0,y2:0};if(m.current.length>1&&O){const ae=S1(m.current,J);A=_1(ae)}if(m.current=m.current.map(ae=>{const R={x:N-ae.distance.x,y:D-ae.distance.y};z&&(R.x=K[0]*Math.round(R.x/K[0]),R.y=K[1]*Math.round(R.y/K[1]));const oe=[[O[0][0],O[0][1]],[O[1][0],O[1][1]]];m.current.length>1&&O&&!ae.extent&&(oe[0][0]=ae.positionAbsolute.x-A.x+O[0][0],oe[1][0]=ae.positionAbsolute.x+(ae.width??0)-A.x2+O[1][0],oe[0][1]=ae.positionAbsolute.y-A.y+O[0][1],oe[1][1]=ae.positionAbsolute.y+(ae.height??0)-A.y2+O[1][1]);const Ee=AC(ae,R,U,oe,J,se);return re=re||ae.position.x!==Ee.position.x||ae.position.y!==Ee.position.y,ae.position=Ee.position,ae.positionAbsolute=Ee.positionAbsolute,ae}),!re)return;C(m.current,!0,!0),f(!0);const ee=s?B:vy(V);if(ee&&I.current){const[ae,R]=Ty({nodeId:s,dragItems:m.current,nodeInternals:U});ee(I.current,ae,R)}},Y=()=>{if(!T.current)return;const[N,D]=Gw(w.current,T.current);if(N!==0||D!==0){const{transform:U,panBy:B}=c.getState();y.current.x=(y.current.x??0)-N/U[2],y.current.y=(y.current.y??0)-D/U[2],B({x:N,y:D})&&te(y.current)}b.current=requestAnimationFrame(Y)},M=N=>{const{nodeInternals:D,multiSelectionActive:U,nodesDraggable:B,unselectNodesAndEdges:V,onNodeDragStart:C,onSelectionDragStart:O}=c.getState();k.current=!0;const K=s?C:vy(O);(!u||!o)&&!U&&s&&(D.get(s)?.selected||V()),s&&o&&u&&yE({id:s,store:c,nodeRef:t});const z=$(N);if(y.current=z,m.current=P5(D,B,z,s),K&&m.current){const[J,se]=Ty({nodeId:s,dragItems:m.current,nodeInternals:D});K(N.sourceEvent,J,se)}};if(e)j.on(".drag",null);else{const N=YD().on("start",D=>{const{domNode:U,nodeDragThreshold:B}=c.getState();B===0&&M(D),q.current=!1;const V=$(D);y.current=V,T.current=U?.getBoundingClientRect()||null,w.current=Ba(D.sourceEvent,T.current)}).on("drag",D=>{const U=$(D),{autoPanOnNodeDrag:B,nodeDragThreshold:V}=c.getState();if(D.sourceEvent.type==="touchmove"&&D.sourceEvent.touches.length>1&&(q.current=!0),!q.current){if(!L.current&&k.current&&B&&(L.current=!0,Y()),!k.current){const C=U.xSnapped-(y?.current?.x??0),O=U.ySnapped-(y?.current?.y??0);Math.sqrt(C*C+O*O)>V&&M(D)}(y.current.x!==U.xSnapped||y.current.y!==U.ySnapped)&&m.current&&k.current&&(I.current=D.sourceEvent,w.current=Ba(D.sourceEvent,T.current),te(U))}}).on("end",D=>{if(!(!k.current||q.current)&&(f(!1),L.current=!1,k.current=!1,cancelAnimationFrame(b.current),m.current)){const{updateNodePositions:U,nodeInternals:B,onNodeDragStop:V,onSelectionDragStop:C}=c.getState(),O=s?V:vy(C);if(U(m.current,!1,!1),O){const[K,z]=Ty({nodeId:s,dragItems:m.current,nodeInternals:B});O(D.sourceEvent,K,z)}}}).filter(D=>{const U=D.target;return!D.button&&(!n||!iA(U,`.${n}`,t))&&(!r||iA(U,r,t))});return j.call(N),()=>{j.on(".drag",null)}}}},[t,e,n,r,o,c,s,u,$]),d}function xC(){const t=Hn();return Q.useCallback(n=>{const{nodeInternals:r,nodeExtent:s,updateNodePositions:o,getNodes:u,snapToGrid:c,snapGrid:d,onError:f,nodesDraggable:m}=t.getState(),y=u().filter(q=>q.selected&&(q.draggable||m&&typeof q.draggable>"u")),b=c?d[0]:5,T=c?d[1]:5,w=n.isShiftPressed?4:1,I=n.x*b*w,L=n.y*T*w,k=y.map(q=>{if(q.positionAbsolute){const $={x:q.positionAbsolute.x+I,y:q.positionAbsolute.y+L};c&&($.x=d[0]*Math.round($.x/d[0]),$.y=d[1]*Math.round($.y/d[1]));const{positionAbsolute:j,position:te}=AC(q,$,r,s,void 0,f);q.position=te,q.positionAbsolute=j}return q});o(k,!0,!1)},[])}const yl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ah=t=>{const e=({id:n,type:r,data:s,xPos:o,yPos:u,xPosOrigin:c,yPosOrigin:d,selected:f,onClick:m,onMouseEnter:y,onMouseMove:b,onMouseLeave:T,onContextMenu:w,onDoubleClick:I,style:L,className:k,isDraggable:q,isSelectable:$,isConnectable:j,isFocusable:te,selectNodesOnDrag:Y,sourcePosition:M,targetPosition:N,hidden:D,resizeObserver:U,dragHandle:B,zIndex:V,isParent:C,noDragClassName:O,noPanClassName:K,initialized:z,disableKeyboardA11y:J,ariaLabel:se,rfId:re,hasHandleBounds:A})=>{const ee=Hn(),ae=Q.useRef(null),R=Q.useRef(null),oe=Q.useRef(M),Ee=Q.useRef(N),me=Q.useRef(r),we=$||q||m||y||b||T,Ce=xC(),Le=sh(n,ee.getState,y),Ve=sh(n,ee.getState,b),ct=sh(n,ee.getState,T),Tt=sh(n,ee.getState,w),Ze=sh(n,ee.getState,I),mt=Qe=>{const{nodeDragThreshold:Oe}=ee.getState();if($&&(!Y||!q||Oe>0)&&yE({id:n,store:ee,nodeRef:ae}),m){const Ft=ee.getState().nodeInternals.get(n);Ft&&m(Qe,{...Ft})}},gt=Qe=>{if(!dE(Qe)&&!J)if(Kw.includes(Qe.key)&&$){const Oe=Qe.key==="Escape";yE({id:n,store:ee,unselect:Oe,nodeRef:ae})}else q&&f&&Object.prototype.hasOwnProperty.call(yl,Qe.key)&&(ee.setState({ariaLiveMessage:`Moved selected node ${Qe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~o}, y: ${~~u}`}),Ce({x:yl[Qe.key].x,y:yl[Qe.key].y,isShiftPressed:Qe.shiftKey}))};Q.useEffect(()=>()=>{R.current&&(U?.unobserve(R.current),R.current=null)},[]),Q.useEffect(()=>{if(ae.current&&!D){const Qe=ae.current;(!z||!A||R.current!==Qe)&&(R.current&&U?.unobserve(R.current),U?.observe(Qe),R.current=Qe)}},[D,z,A]),Q.useEffect(()=>{const Qe=me.current!==r,Oe=oe.current!==M,Ft=Ee.current!==N;ae.current&&(Qe||Oe||Ft)&&(Qe&&(me.current=r),Oe&&(oe.current=M),Ft&&(Ee.current=N),ee.getState().updateNodeDimensions([{id:n,nodeElement:ae.current,forceUpdate:!0}]))},[n,r,M,N]);const Xt=SC({nodeRef:ae,disabled:D||!q,noDragClassName:O,handleSelector:B,nodeId:n,isSelectable:$,selectNodesOnDrag:Y});return D?null:be.createElement("div",{className:cr(["react-flow__node",`react-flow__node-${r}`,{[K]:q},k,{selected:f,selectable:$,parent:C,dragging:Xt}]),ref:ae,style:{zIndex:V,transform:`translate(${c}px,${d}px)`,pointerEvents:we?"all":"none",visibility:z?"visible":"hidden",...L},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Le,onMouseMove:Ve,onMouseLeave:ct,onContextMenu:Tt,onClick:mt,onDoubleClick:Ze,onKeyDown:te?gt:void 0,tabIndex:te?0:void 0,role:te?"button":void 0,"aria-describedby":J?void 0:`${pC}-${re}`,"aria-label":se},be.createElement(WL,{value:n},be.createElement(t,{id:n,data:s,type:r,xPos:o,yPos:u,selected:f,isConnectable:j,sourcePosition:M,targetPosition:N,dragging:Xt,dragHandle:B,zIndex:V})))};return e.displayName="NodeWrapper",Q.memo(e)};const U5=t=>{const e=t.getNodes().filter(n=>n.selected);return{...S1(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function H5({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const r=Hn(),{width:s,height:o,x:u,y:c,transformString:d,userSelectionActive:f}=Zt(U5,tr),m=xC(),y=Q.useRef(null);if(Q.useEffect(()=>{n||y.current?.focus({preventScroll:!0})},[n]),SC({nodeRef:y}),f||!s||!o)return null;const b=t?w=>{const I=r.getState().getNodes().filter(L=>L.selected);t(w,I)}:void 0,T=w=>{Object.prototype.hasOwnProperty.call(yl,w.key)&&m({x:yl[w.key].x,y:yl[w.key].y,isShiftPressed:w.shiftKey})};return be.createElement("div",{className:cr(["react-flow__nodesselection","react-flow__container",e]),style:{transform:d}},be.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:n?void 0:-1,onKeyDown:n?void 0:T,style:{width:s,height:o,top:c,left:u}}))}var V5=Q.memo(H5);const z5=t=>t.nodesSelectionActive,wC=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:u,deleteKeyCode:c,onMove:d,onMoveStart:f,onMoveEnd:m,selectionKeyCode:y,selectionOnDrag:b,selectionMode:T,onSelectionStart:w,onSelectionEnd:I,multiSelectionKeyCode:L,panActivationKeyCode:k,zoomActivationKeyCode:q,elementsSelectable:$,zoomOnScroll:j,zoomOnPinch:te,panOnScroll:Y,panOnScrollSpeed:M,panOnScrollMode:N,zoomOnDoubleClick:D,panOnDrag:U,defaultViewport:B,translateExtent:V,minZoom:C,maxZoom:O,preventScrolling:K,onSelectionContextMenu:z,noWheelClassName:J,noPanClassName:se,disableKeyboardA11y:re})=>{const A=Zt(z5),ee=Gh(y),ae=Gh(k),R=ae||U,oe=ae||Y,Ee=ee||b&&R!==!0;return w5({deleteKeyCode:c,multiSelectionKeyCode:L}),be.createElement(R5,{onMove:d,onMoveStart:f,onMoveEnd:m,onPaneContextMenu:o,elementsSelectable:$,zoomOnScroll:j,zoomOnPinch:te,panOnScroll:oe,panOnScrollSpeed:M,panOnScrollMode:N,zoomOnDoubleClick:D,panOnDrag:!ee&&R,defaultViewport:B,translateExtent:V,minZoom:C,maxZoom:O,zoomActivationKeyCode:q,preventScrolling:K,noWheelClassName:J,noPanClassName:se},be.createElement(TC,{onSelectionStart:w,onSelectionEnd:I,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:s,onPaneContextMenu:o,onPaneScroll:u,panOnDrag:R,isSelecting:!!Ee,selectionMode:T},t,A&&be.createElement(V5,{onSelectionContextMenu:z,noPanClassName:se,disableKeyboardA11y:re})))};wC.displayName="FlowRenderer";var F5=Q.memo(wC);function j5(t){return Zt(Q.useCallback(n=>t?tC(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function q5(t){const e={input:ah(t.input||cC),default:ah(t.default||gE),output:ah(t.output||dC),group:ah(t.group||w1)},n={},r=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,o)=>(s[o]=ah(t[o]||gE),s),n);return{...e,...r}}const Y5=({x:t,y:e,width:n,height:r,origin:s})=>!n||!r?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-n*s[0],y:e-r*s[1]},G5=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),CC=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:r,elementsSelectable:s,updateNodeDimensions:o,onError:u}=Zt(G5,tr),c=j5(t.onlyRenderVisibleElements),d=Q.useRef(),f=Q.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const m=new ResizeObserver(y=>{const b=y.map(T=>({id:T.target.getAttribute("data-id"),nodeElement:T.target,forceUpdate:!0}));o(b)});return d.current=m,m},[]);return Q.useEffect(()=>()=>{d?.current?.disconnect()},[]),be.createElement("div",{className:"react-flow__nodes",style:C1},c.map(m=>{let y=m.type||"default";t.nodeTypes[y]||(u?.("003",js.error003(y)),y="default");const b=t.nodeTypes[y]||t.nodeTypes.default,T=!!(m.draggable||e&&typeof m.draggable>"u"),w=!!(m.selectable||s&&typeof m.selectable>"u"),I=!!(m.connectable||n&&typeof m.connectable>"u"),L=!!(m.focusable||r&&typeof m.focusable>"u"),k=t.nodeExtent?E1(m.positionAbsolute,t.nodeExtent):m.positionAbsolute,q=k?.x??0,$=k?.y??0,j=Y5({x:q,y:$,width:m.width??0,height:m.height??0,origin:t.nodeOrigin});return be.createElement(b,{key:m.id,id:m.id,className:m.className,style:m.style,type:y,data:m.data,sourcePosition:m.sourcePosition||He.Bottom,targetPosition:m.targetPosition||He.Top,hidden:m.hidden,xPos:q,yPos:$,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!m.selected,isDraggable:T,isSelectable:w,isConnectable:I,isFocusable:L,resizeObserver:f,dragHandle:m.dragHandle,zIndex:m[an]?.z??0,isParent:!!m[an]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!m.width&&!!m.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:m.ariaLabel,hasHandleBounds:!!m[an]?.handleBounds})}))};CC.displayName="NodeRenderer";var $5=Q.memo(CC);const K5=(t,e,n)=>n===He.Left?t-e:n===He.Right?t+e:t,X5=(t,e,n)=>n===He.Top?t-e:n===He.Bottom?t+e:t,aA="react-flow__edgeupdater",oA=({position:t,centerX:e,centerY:n,radius:r=10,onMouseDown:s,onMouseEnter:o,onMouseOut:u,type:c})=>be.createElement("circle",{onMouseDown:s,onMouseEnter:o,onMouseOut:u,className:cr([aA,`${aA}-${c}`]),cx:K5(e,r,t),cy:X5(n,r,t),r,stroke:"transparent",fill:"transparent"}),Q5=()=>!0;var Ju=t=>{const e=({id:n,className:r,type:s,data:o,onClick:u,onEdgeDoubleClick:c,selected:d,animated:f,label:m,labelStyle:y,labelShowBg:b,labelBgStyle:T,labelBgPadding:w,labelBgBorderRadius:I,style:L,source:k,target:q,sourceX:$,sourceY:j,targetX:te,targetY:Y,sourcePosition:M,targetPosition:N,elementsSelectable:D,hidden:U,sourceHandleId:B,targetHandleId:V,onContextMenu:C,onMouseEnter:O,onMouseMove:K,onMouseLeave:z,reconnectRadius:J,onReconnect:se,onReconnectStart:re,onReconnectEnd:A,markerEnd:ee,markerStart:ae,rfId:R,ariaLabel:oe,isFocusable:Ee,isReconnectable:me,pathOptions:we,interactionWidth:Ce,disableKeyboardA11y:Le})=>{const Ve=Q.useRef(null),[ct,Tt]=Q.useState(!1),[Ze,mt]=Q.useState(!1),gt=Hn(),Xt=Q.useMemo(()=>`url('#${pE(ae,R)}')`,[ae,R]),Qe=Q.useMemo(()=>`url('#${pE(ee,R)}')`,[ee,R]);if(U)return null;const Oe=vt=>{const{edges:Mt,addSelectedEdges:jt,unselectNodesAndEdges:ln,multiSelectionActive:Gt}=gt.getState(),St=Mt.find(en=>en.id===n);St&&(D&&(gt.setState({nodesSelectionActive:!1}),St.selected&&Gt?(ln({nodes:[],edges:[St]}),Ve.current?.blur()):jt([n])),u&&u(vt,St))},Ft=ih(n,gt.getState,c),An=ih(n,gt.getState,C),un=ih(n,gt.getState,O),sr=ih(n,gt.getState,K),Vn=ih(n,gt.getState,z),zn=(vt,Mt)=>{if(vt.button!==0)return;const{edges:jt,isValidConnection:ln}=gt.getState(),Gt=Mt?q:k,St=(Mt?V:B)||null,en=Mt?"target":"source",Sn=ln||Q5,ds=Mt,pi=jt.find(wr=>wr.id===n);mt(!0),re?.(vt,pi,en);const xr=wr=>{mt(!1),A?.(wr,pi,en)};aC({event:vt,handleId:St,nodeId:Gt,onConnect:wr=>se?.(pi,wr),isTarget:ds,getState:gt.getState,setState:gt.setState,isValidConnection:Sn,edgeUpdaterType:en,onReconnectEnd:xr})},Sr=vt=>zn(vt,!0),fe=vt=>zn(vt,!1),Te=()=>Tt(!0),Be=()=>Tt(!1),ze=!D&&!u,at=vt=>{if(!Le&&Kw.includes(vt.key)&&D){const{unselectNodesAndEdges:Mt,addSelectedEdges:jt,edges:ln}=gt.getState();vt.key==="Escape"?(Ve.current?.blur(),Mt({edges:[ln.find(St=>St.id===n)]})):jt([n])}};return be.createElement("g",{className:cr(["react-flow__edge",`react-flow__edge-${s}`,r,{selected:d,animated:f,inactive:ze,updating:ct}]),onClick:Oe,onDoubleClick:Ft,onContextMenu:An,onMouseEnter:un,onMouseMove:sr,onMouseLeave:Vn,onKeyDown:Ee?at:void 0,tabIndex:Ee?0:void 0,role:Ee?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":oe===null?void 0:oe||`Edge from ${k} to ${q}`,"aria-describedby":Ee?`${mC}-${R}`:void 0,ref:Ve},!Ze&&be.createElement(t,{id:n,source:k,target:q,selected:d,animated:f,label:m,labelStyle:y,labelShowBg:b,labelBgStyle:T,labelBgPadding:w,labelBgBorderRadius:I,data:o,style:L,sourceX:$,sourceY:j,targetX:te,targetY:Y,sourcePosition:M,targetPosition:N,sourceHandleId:B,targetHandleId:V,markerStart:Xt,markerEnd:Qe,pathOptions:we,interactionWidth:Ce}),me&&be.createElement(be.Fragment,null,(me==="source"||me===!0)&&be.createElement(oA,{position:M,centerX:$,centerY:j,radius:J,onMouseDown:Sr,onMouseEnter:Te,onMouseOut:Be,type:"source"}),(me==="target"||me===!0)&&be.createElement(oA,{position:N,centerX:te,centerY:Y,radius:J,onMouseDown:fe,onMouseEnter:Te,onMouseOut:Be,type:"target"})))};return e.displayName="EdgeWrapper",Q.memo(e)};function W5(t){const e={default:Ju(t.default||q0),straight:Ju(t.bezier||v1),step:Ju(t.step||T1),smoothstep:Ju(t.step||xp),simplebezier:Ju(t.simplebezier||b1)},n={},r=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,o)=>(s[o]=Ju(t[o]||q0),s),n);return{...e,...r}}function uA(t,e,n=null){const r=(n?.x||0)+e.x,s=(n?.y||0)+e.y,o=n?.width||e.width,u=n?.height||e.height;switch(t){case He.Top:return{x:r+o/2,y:s};case He.Right:return{x:r+o,y:s+u/2};case He.Bottom:return{x:r+o/2,y:s+u};case He.Left:return{x:r,y:s+u/2}}}function lA(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const Z5=(t,e,n,r,s,o)=>{const u=uA(n,t,e),c=uA(o,r,s);return{sourceX:u.x,sourceY:u.y,targetX:c.x,targetY:c.y}};function J5({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:r,targetWidth:s,targetHeight:o,width:u,height:c,transform:d}){const f={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+s),y2:Math.max(t.y+r,e.y+o)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const m=_1({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:u/d[2],height:c/d[2]}),y=Math.max(0,Math.min(m.x2,f.x2)-Math.max(m.x,f.x)),b=Math.max(0,Math.min(m.y2,f.y2)-Math.max(m.y,f.y));return Math.ceil(y*b)>0}function cA(t){const e=t?.[an]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const eP=[{level:0,isMaxLevel:!0,edges:[]}];function tP(t,e,n=!1){let r=-1;const s=t.reduce((u,c)=>{const d=hi(c.zIndex);let f=d?c.zIndex:0;if(n){const m=e.get(c.target),y=e.get(c.source),b=c.selected||m?.selected||y?.selected,T=Math.max(y?.[an]?.z||0,m?.[an]?.z||0,1e3);f=(d?c.zIndex:0)+(b?T:0)}return u[f]?u[f].push(c):u[f]=[c],r=f>r?f:r,u},{}),o=Object.entries(s).map(([u,c])=>{const d=+u;return{edges:c,level:d,isMaxLevel:d===r}});return o.length===0?eP:o}function nP(t,e,n){const r=Zt(Q.useCallback(s=>t?s.edges.filter(o=>{const u=e.get(o.source),c=e.get(o.target);return u?.width&&u?.height&&c?.width&&c?.height&&J5({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:c.width,targetHeight:c.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return tP(r,e,n)}const rP=({color:t="none",strokeWidth:e=1})=>be.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),iP=({color:t="none",strokeWidth:e=1})=>be.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),hA={[Yh.Arrow]:rP,[Yh.ArrowClosed]:iP};function sP(t){const e=Hn();return Q.useMemo(()=>Object.prototype.hasOwnProperty.call(hA,t)?hA[t]:(e.getState().onError?.("009",js.error009(t)),null),[t])}const aP=({id:t,type:e,color:n,width:r=12.5,height:s=12.5,markerUnits:o="strokeWidth",strokeWidth:u,orient:c="auto-start-reverse"})=>{const d=sP(e);return d?be.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${r}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:c,refX:"0",refY:"0"},be.createElement(d,{color:n,strokeWidth:u})):null},oP=({defaultColor:t,rfId:e})=>n=>{const r=[];return n.edges.reduce((s,o)=>([o.markerStart,o.markerEnd].forEach(u=>{if(u&&typeof u=="object"){const c=pE(u,e);r.includes(c)||(s.push({id:c,color:u.color||t,...u}),r.push(c))}}),s),[]).sort((s,o)=>s.id.localeCompare(o.id))},IC=({defaultColor:t,rfId:e})=>{const n=Zt(Q.useCallback(oP({defaultColor:t,rfId:e}),[t,e]),(r,s)=>!(r.length!==s.length||r.some((o,u)=>o.id!==s[u].id)));return be.createElement("defs",null,n.map(r=>be.createElement(aP,{id:r.id,key:r.id,type:r.type,color:r.color,width:r.width,height:r.height,markerUnits:r.markerUnits,strokeWidth:r.strokeWidth,orient:r.orient})))};IC.displayName="MarkerDefinitions";var uP=Q.memo(IC);const lP=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),NC=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:r,edgeTypes:s,noPanClassName:o,onEdgeContextMenu:u,onEdgeMouseEnter:c,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:m,onEdgeDoubleClick:y,onReconnect:b,onReconnectStart:T,onReconnectEnd:w,reconnectRadius:I,children:L,disableKeyboardA11y:k})=>{const{edgesFocusable:q,edgesUpdatable:$,elementsSelectable:j,width:te,height:Y,connectionMode:M,nodeInternals:N,onError:D}=Zt(lP,tr),U=nP(e,N,n);return te?be.createElement(be.Fragment,null,U.map(({level:B,edges:V,isMaxLevel:C})=>be.createElement("svg",{key:B,style:{zIndex:B},width:te,height:Y,className:"react-flow__edges react-flow__container"},C&&be.createElement(uP,{defaultColor:t,rfId:r}),be.createElement("g",null,V.map(O=>{const[K,z,J]=cA(N.get(O.source)),[se,re,A]=cA(N.get(O.target));if(!J||!A)return null;let ee=O.type||"default";s[ee]||(D?.("011",js.error011(ee)),ee="default");const ae=s[ee]||s.default,R=M===ja.Strict?re.target:(re.target??[]).concat(re.source??[]),oe=lA(z.source,O.sourceHandle),Ee=lA(R,O.targetHandle),me=oe?.position||He.Bottom,we=Ee?.position||He.Top,Ce=!!(O.focusable||q&&typeof O.focusable>"u"),Le=O.reconnectable||O.updatable,Ve=typeof b<"u"&&(Le||$&&typeof Le>"u");if(!oe||!Ee)return D?.("008",js.error008(oe,O)),null;const{sourceX:ct,sourceY:Tt,targetX:Ze,targetY:mt}=Z5(K,oe,me,se,Ee,we);return be.createElement(ae,{key:O.id,id:O.id,className:cr([O.className,o]),type:ee,data:O.data,selected:!!O.selected,animated:!!O.animated,hidden:!!O.hidden,label:O.label,labelStyle:O.labelStyle,labelShowBg:O.labelShowBg,labelBgStyle:O.labelBgStyle,labelBgPadding:O.labelBgPadding,labelBgBorderRadius:O.labelBgBorderRadius,style:O.style,source:O.source,target:O.target,sourceHandleId:O.sourceHandle,targetHandleId:O.targetHandle,markerEnd:O.markerEnd,markerStart:O.markerStart,sourceX:ct,sourceY:Tt,targetX:Ze,targetY:mt,sourcePosition:me,targetPosition:we,elementsSelectable:j,onContextMenu:u,onMouseEnter:c,onMouseMove:d,onMouseLeave:f,onClick:m,onEdgeDoubleClick:y,onReconnect:b,onReconnectStart:T,onReconnectEnd:w,reconnectRadius:I,rfId:r,ariaLabel:O.ariaLabel,isFocusable:Ce,isReconnectable:Ve,pathOptions:"pathOptions"in O?O.pathOptions:void 0,interactionWidth:O.interactionWidth,disableKeyboardA11y:k})})))),L):null};NC.displayName="EdgeRenderer";var cP=Q.memo(NC);const hP=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function dP({children:t}){const e=Zt(hP);return be.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function fP(t){const e=dd(),n=Q.useRef(!1);Q.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const pP={[He.Left]:He.Right,[He.Right]:He.Left,[He.Top]:He.Bottom,[He.Bottom]:He.Top},RC=({nodeId:t,handleType:e,style:n,type:r=Ca.Bezier,CustomComponent:s,connectionStatus:o})=>{const{fromNode:u,handleId:c,toX:d,toY:f,connectionMode:m}=Zt(Q.useCallback(Y=>({fromNode:Y.nodeInternals.get(t),handleId:Y.connectionHandleId,toX:(Y.connectionPosition.x-Y.transform[0])/Y.transform[2],toY:(Y.connectionPosition.y-Y.transform[1])/Y.transform[2],connectionMode:Y.connectionMode}),[t]),tr),y=u?.[an]?.handleBounds;let b=y?.[e];if(m===ja.Loose&&(b=b||y?.[e==="source"?"target":"source"]),!u||!b)return null;const T=c?b.find(Y=>Y.id===c):b[0],w=T?T.x+T.width/2:(u.width??0)/2,I=T?T.y+T.height/2:u.height??0,L=(u.positionAbsolute?.x??0)+w,k=(u.positionAbsolute?.y??0)+I,q=T?.position,$=q?pP[q]:null;if(!q||!$)return null;if(s)return be.createElement(s,{connectionLineType:r,connectionLineStyle:n,fromNode:u,fromHandle:T,fromX:L,fromY:k,toX:d,toY:f,fromPosition:q,toPosition:$,connectionStatus:o});let j="";const te={sourceX:L,sourceY:k,sourcePosition:q,targetX:d,targetY:f,targetPosition:$};return r===Ca.Bezier?[j]=Jw(te):r===Ca.Step?[j]=fE({...te,borderRadius:0}):r===Ca.SmoothStep?[j]=fE(te):r===Ca.SimpleBezier?[j]=Zw(te):j=`M${L},${k} ${d},${f}`,be.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};RC.displayName="ConnectionLine";const mP=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function gP({containerStyle:t,style:e,type:n,component:r}){const{nodeId:s,handleType:o,nodesConnectable:u,width:c,height:d,connectionStatus:f}=Zt(mP,tr);return!(s&&o&&c&&u)?null:be.createElement("svg",{style:t,width:c,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},be.createElement("g",{className:cr(["react-flow__connection",f])},be.createElement(RC,{nodeId:s,handleType:o,style:e,type:n,CustomComponent:r,connectionStatus:f})))}function dA(t,e){return Q.useRef(null),Hn(),Q.useMemo(()=>e(t),[t])}const kC=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:r,onMoveEnd:s,onInit:o,onNodeClick:u,onEdgeClick:c,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:m,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:T,onSelectionContextMenu:w,onSelectionStart:I,onSelectionEnd:L,connectionLineType:k,connectionLineStyle:q,connectionLineComponent:$,connectionLineContainerStyle:j,selectionKeyCode:te,selectionOnDrag:Y,selectionMode:M,multiSelectionKeyCode:N,panActivationKeyCode:D,zoomActivationKeyCode:U,deleteKeyCode:B,onlyRenderVisibleElements:V,elementsSelectable:C,selectNodesOnDrag:O,defaultViewport:K,translateExtent:z,minZoom:J,maxZoom:se,preventScrolling:re,defaultMarkerColor:A,zoomOnScroll:ee,zoomOnPinch:ae,panOnScroll:R,panOnScrollSpeed:oe,panOnScrollMode:Ee,zoomOnDoubleClick:me,panOnDrag:we,onPaneClick:Ce,onPaneMouseEnter:Le,onPaneMouseMove:Ve,onPaneMouseLeave:ct,onPaneScroll:Tt,onPaneContextMenu:Ze,onEdgeContextMenu:mt,onEdgeMouseEnter:gt,onEdgeMouseMove:Xt,onEdgeMouseLeave:Qe,onReconnect:Oe,onReconnectStart:Ft,onReconnectEnd:An,reconnectRadius:un,noDragClassName:sr,noWheelClassName:Vn,noPanClassName:zn,elevateEdgesOnSelect:Sr,disableKeyboardA11y:fe,nodeOrigin:Te,nodeExtent:Be,rfId:ze})=>{const at=dA(t,q5),vt=dA(e,W5);return fP(o),be.createElement(F5,{onPaneClick:Ce,onPaneMouseEnter:Le,onPaneMouseMove:Ve,onPaneMouseLeave:ct,onPaneContextMenu:Ze,onPaneScroll:Tt,deleteKeyCode:B,selectionKeyCode:te,selectionOnDrag:Y,selectionMode:M,onSelectionStart:I,onSelectionEnd:L,multiSelectionKeyCode:N,panActivationKeyCode:D,zoomActivationKeyCode:U,elementsSelectable:C,onMove:n,onMoveStart:r,onMoveEnd:s,zoomOnScroll:ee,zoomOnPinch:ae,zoomOnDoubleClick:me,panOnScroll:R,panOnScrollSpeed:oe,panOnScrollMode:Ee,panOnDrag:we,defaultViewport:K,translateExtent:z,minZoom:J,maxZoom:se,onSelectionContextMenu:w,preventScrolling:re,noDragClassName:sr,noWheelClassName:Vn,noPanClassName:zn,disableKeyboardA11y:fe},be.createElement(dP,null,be.createElement(cP,{edgeTypes:vt,onEdgeClick:c,onEdgeDoubleClick:f,onlyRenderVisibleElements:V,onEdgeContextMenu:mt,onEdgeMouseEnter:gt,onEdgeMouseMove:Xt,onEdgeMouseLeave:Qe,onReconnect:Oe,onReconnectStart:Ft,onReconnectEnd:An,reconnectRadius:un,defaultMarkerColor:A,noPanClassName:zn,elevateEdgesOnSelect:!!Sr,disableKeyboardA11y:fe,rfId:ze},be.createElement(gP,{style:q,type:k,component:$,containerStyle:j})),be.createElement("div",{className:"react-flow__edgelabel-renderer"}),be.createElement($5,{nodeTypes:at,onNodeClick:u,onNodeDoubleClick:d,onNodeMouseEnter:m,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:T,selectNodesOnDrag:O,onlyRenderVisibleElements:V,noPanClassName:zn,noDragClassName:sr,disableKeyboardA11y:fe,nodeOrigin:Te,nodeExtent:Be,rfId:ze})))};kC.displayName="GraphView";var yP=Q.memo(kC);const EE=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ba={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:EE,nodeExtent:EE,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ja.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:YL,isValidConnection:void 0},EP=()=>rk((t,e)=>({...ba,setNodes:n=>{const{nodeInternals:r,nodeOrigin:s,elevateNodesOnSelect:o}=e();t({nodeInternals:_y(n,r,s,o)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:r={}}=e();t({edges:n.map(s=>({...r,...s}))})},setDefaultNodesAndEdges:(n,r)=>{const s=typeof n<"u",o=typeof r<"u",u=s?_y(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:u,edges:o?r:[],hasDefaultNodes:s,hasDefaultEdges:o})},updateNodeDimensions:n=>{const{onNodesChange:r,nodeInternals:s,fitViewOnInit:o,fitViewOnInitDone:u,fitViewOnInitOptions:c,domNode:d,nodeOrigin:f}=e(),m=d?.querySelector(".react-flow__viewport");if(!m)return;const y=window.getComputedStyle(m),{m22:b}=new window.DOMMatrixReadOnly(y.transform),T=n.reduce((I,L)=>{const k=s.get(L.id);if(k?.hidden)s.set(k.id,{...k,[an]:{...k[an],handleBounds:void 0}});else if(k){const q=y1(L.nodeElement);!!(q.width&&q.height&&(k.width!==q.width||k.height!==q.height||L.forceUpdate))&&(s.set(k.id,{...k,[an]:{...k[an],handleBounds:{source:sA(".source",L.nodeElement,b,f),target:sA(".target",L.nodeElement,b,f)}},...q}),I.push({id:k.id,type:"dimensions",dimensions:q}))}return I},[]);yC(s,f);const w=u||o&&!u&&EC(e,{initial:!0,...c});t({nodeInternals:new Map(s),fitViewOnInitDone:w}),T?.length>0&&r?.(T)},updateNodePositions:(n,r=!0,s=!1)=>{const{triggerNodeChanges:o}=e(),u=n.map(c=>{const d={id:c.id,type:"position",dragging:s};return r&&(d.positionAbsolute=c.positionAbsolute,d.position=c.position),d});o(u)},triggerNodeChanges:n=>{const{onNodesChange:r,nodeInternals:s,hasDefaultNodes:o,nodeOrigin:u,getNodes:c,elevateNodesOnSelect:d}=e();if(n?.length){if(o){const f=bC(n,c()),m=_y(f,s,u,d);t({nodeInternals:m})}r?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let u,c=null;r?u=n.map(d=>wa(d,!0)):(u=cl(o(),n),c=cl(s,[])),Jf({changedNodes:u,changedEdges:c,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:r,edges:s,getNodes:o}=e();let u,c=null;r?u=n.map(d=>wa(d,!0)):(u=cl(s,n),c=cl(o(),[])),Jf({changedNodes:c,changedEdges:u,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{const{edges:s,getNodes:o}=e(),u=n||o(),c=r||s,d=u.map(m=>(m.selected=!1,wa(m.id,!1))),f=c.map(m=>wa(m.id,!1));Jf({changedNodes:d,changedEdges:f,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:r,maxZoom:s}=e();r?.scaleExtent([n,s]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:r,minZoom:s}=e();r?.scaleExtent([s,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:r}=e(),o=r().filter(c=>c.selected).map(c=>wa(c.id,!1)),u=n.filter(c=>c.selected).map(c=>wa(c.id,!1));Jf({changedNodes:o,changedEdges:u,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:r}=e();r.forEach(s=>{s.positionAbsolute=E1(s.position,n)}),t({nodeExtent:n,nodeInternals:new Map(r)})},panBy:n=>{const{transform:r,width:s,height:o,d3Zoom:u,d3Selection:c,translateExtent:d}=e();if(!u||!c||!n.x&&!n.y)return!1;const f=Ma.translate(r[0]+n.x,r[1]+n.y).scale(r[2]),m=[[0,0],[s,o]],y=u?.constrain()(f,m,d);return u.transform(c,y),r[0]!==y.x||r[1]!==y.y||r[2]!==y.k},cancelConnection:()=>t({connectionNodeId:ba.connectionNodeId,connectionHandleId:ba.connectionHandleId,connectionHandleType:ba.connectionHandleType,connectionStatus:ba.connectionStatus,connectionStartHandle:ba.connectionStartHandle,connectionEndHandle:ba.connectionEndHandle}),reset:()=>t({...ba})}),Object.is),DC=({children:t})=>{const e=Q.useRef(null);return e.current||(e.current=EP()),be.createElement(BL,{value:e.current},t)};DC.displayName="ReactFlowProvider";const OC=({children:t})=>Q.useContext(Sp)?be.createElement(be.Fragment,null,t):be.createElement(DC,null,t);OC.displayName="ReactFlowWrapper";const _P={input:cC,default:gE,output:dC,group:w1},bP={default:q0,straight:v1,step:T1,smoothstep:xp,simplebezier:b1},TP=[0,0],vP=[15,15],AP={x:0,y:0,zoom:1},SP={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},LC=Q.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:r,className:s,nodeTypes:o=_P,edgeTypes:u=bP,onNodeClick:c,onEdgeClick:d,onInit:f,onMove:m,onMoveStart:y,onMoveEnd:b,onConnect:T,onConnectStart:w,onConnectEnd:I,onClickConnectStart:L,onClickConnectEnd:k,onNodeMouseEnter:q,onNodeMouseMove:$,onNodeMouseLeave:j,onNodeContextMenu:te,onNodeDoubleClick:Y,onNodeDragStart:M,onNodeDrag:N,onNodeDragStop:D,onNodesDelete:U,onEdgesDelete:B,onSelectionChange:V,onSelectionDragStart:C,onSelectionDrag:O,onSelectionDragStop:K,onSelectionContextMenu:z,onSelectionStart:J,onSelectionEnd:se,connectionMode:re=ja.Strict,connectionLineType:A=Ca.Bezier,connectionLineStyle:ee,connectionLineComponent:ae,connectionLineContainerStyle:R,deleteKeyCode:oe="Backspace",selectionKeyCode:Ee="Shift",selectionOnDrag:me=!1,selectionMode:we=qh.Full,panActivationKeyCode:Ce="Space",multiSelectionKeyCode:Le=j0()?"Meta":"Control",zoomActivationKeyCode:Ve=j0()?"Meta":"Control",snapToGrid:ct=!1,snapGrid:Tt=vP,onlyRenderVisibleElements:Ze=!1,selectNodesOnDrag:mt=!0,nodesDraggable:gt,nodesConnectable:Xt,nodesFocusable:Qe,nodeOrigin:Oe=TP,edgesFocusable:Ft,edgesUpdatable:An,elementsSelectable:un,defaultViewport:sr=AP,minZoom:Vn=.5,maxZoom:zn=2,translateExtent:Sr=EE,preventScrolling:fe=!0,nodeExtent:Te,defaultMarkerColor:Be="#b1b1b7",zoomOnScroll:ze=!0,zoomOnPinch:at=!0,panOnScroll:vt=!1,panOnScrollSpeed:Mt=.5,panOnScrollMode:jt=Bo.Free,zoomOnDoubleClick:ln=!0,panOnDrag:Gt=!0,onPaneClick:St,onPaneMouseEnter:en,onPaneMouseMove:Sn,onPaneMouseLeave:ds,onPaneScroll:pi,onPaneContextMenu:xr,children:Gr,onEdgeContextMenu:wr,onEdgeDoubleClick:$r,onEdgeMouseEnter:no,onEdgeMouseMove:Ri,onEdgeMouseLeave:Ks,onEdgeUpdate:ki,onEdgeUpdateStart:au,onEdgeUpdateEnd:Bt,onReconnect:cn,onReconnectStart:tn,onReconnectEnd:hr,reconnectRadius:ro=10,edgeUpdaterRadius:tc=10,onNodesChange:Di,onEdgesChange:ou,noDragClassName:fs="nodrag",noWheelClassName:Oi="nowheel",noPanClassName:Kr="nopan",fitView:Xr=!1,fitViewOptions:Qr,connectOnClick:Fn=!0,attributionPosition:Qt,proOptions:io,defaultEdgeOptions:Xs,elevateNodesOnSelect:Cr=!0,elevateEdgesOnSelect:mi=!1,disableKeyboardA11y:so=!1,autoPanOnConnect:uu=!0,autoPanOnNodeDrag:ps=!0,connectionRadius:lu=20,isValidConnection:Li,onError:Wr,style:xn,id:Pi,nodeDragThreshold:cu,...gi},Qs)=>{const Mi=Pi||"1";return be.createElement("div",{...gi,style:{...xn,...SP},ref:Qs,className:cr(["react-flow",s]),"data-testid":"rf__wrapper",id:Pi},be.createElement(OC,null,be.createElement(yP,{onInit:f,onMove:m,onMoveStart:y,onMoveEnd:b,onNodeClick:c,onEdgeClick:d,onNodeMouseEnter:q,onNodeMouseMove:$,onNodeMouseLeave:j,onNodeContextMenu:te,onNodeDoubleClick:Y,nodeTypes:o,edgeTypes:u,connectionLineType:A,connectionLineStyle:ee,connectionLineComponent:ae,connectionLineContainerStyle:R,selectionKeyCode:Ee,selectionOnDrag:me,selectionMode:we,deleteKeyCode:oe,multiSelectionKeyCode:Le,panActivationKeyCode:Ce,zoomActivationKeyCode:Ve,onlyRenderVisibleElements:Ze,selectNodesOnDrag:mt,defaultViewport:sr,translateExtent:Sr,minZoom:Vn,maxZoom:zn,preventScrolling:fe,zoomOnScroll:ze,zoomOnPinch:at,zoomOnDoubleClick:ln,panOnScroll:vt,panOnScrollSpeed:Mt,panOnScrollMode:jt,panOnDrag:Gt,onPaneClick:St,onPaneMouseEnter:en,onPaneMouseMove:Sn,onPaneMouseLeave:ds,onPaneScroll:pi,onPaneContextMenu:xr,onSelectionContextMenu:z,onSelectionStart:J,onSelectionEnd:se,onEdgeContextMenu:wr,onEdgeDoubleClick:$r,onEdgeMouseEnter:no,onEdgeMouseMove:Ri,onEdgeMouseLeave:Ks,onReconnect:cn??ki,onReconnectStart:tn??au,onReconnectEnd:hr??Bt,reconnectRadius:ro??tc,defaultMarkerColor:Be,noDragClassName:fs,noWheelClassName:Oi,noPanClassName:Kr,elevateEdgesOnSelect:mi,rfId:Mi,disableKeyboardA11y:so,nodeOrigin:Oe,nodeExtent:Te}),be.createElement(p5,{nodes:t,edges:e,defaultNodes:n,defaultEdges:r,onConnect:T,onConnectStart:w,onConnectEnd:I,onClickConnectStart:L,onClickConnectEnd:k,nodesDraggable:gt,nodesConnectable:Xt,nodesFocusable:Qe,edgesFocusable:Ft,edgesUpdatable:An,elementsSelectable:un,elevateNodesOnSelect:Cr,minZoom:Vn,maxZoom:zn,nodeExtent:Te,onNodesChange:Di,onEdgesChange:ou,snapToGrid:ct,snapGrid:Tt,connectionMode:re,translateExtent:Sr,connectOnClick:Fn,defaultEdgeOptions:Xs,fitView:Xr,fitViewOptions:Qr,onNodesDelete:U,onEdgesDelete:B,onNodeDragStart:M,onNodeDrag:N,onNodeDragStop:D,onSelectionDrag:O,onSelectionDragStart:C,onSelectionDragStop:K,noPanClassName:Kr,nodeOrigin:Oe,rfId:Mi,autoPanOnConnect:uu,autoPanOnNodeDrag:ps,onError:Wr,connectionRadius:lu,isValidConnection:Li,nodeDragThreshold:cu}),be.createElement(d5,{onSelectionChange:V}),Gr,be.createElement(HL,{proOptions:io,position:Qt}),be.createElement(_5,{rfId:Mi,disableKeyboardA11y:so})))});LC.displayName="ReactFlow";function PC(t){return e=>{const[n,r]=Q.useState(e),s=Q.useCallback(o=>r(u=>t(o,u)),[]);return[n,r,s]}}const xP=PC(bC),wP=PC(O5);function CP(){return be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},be.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function IP(){return be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},be.createElement("path",{d:"M0 0h32v4.2H0z"}))}function NP(){return be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},be.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function RP(){return be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},be.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function kP(){return be.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},be.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const mh=({children:t,className:e,...n})=>be.createElement("button",{type:"button",className:cr(["react-flow__controls-button",e]),...n},t);mh.displayName="ControlButton";const DP=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),MC=({style:t,showZoom:e=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:s,onZoomIn:o,onZoomOut:u,onFitView:c,onInteractiveChange:d,className:f,children:m,position:y="bottom-left"})=>{const b=Hn(),[T,w]=Q.useState(!1),{isInteractive:I,minZoomReached:L,maxZoomReached:k}=Zt(DP,tr),{zoomIn:q,zoomOut:$,fitView:j}=dd();if(Q.useEffect(()=>{w(!0)},[]),!T)return null;const te=()=>{q(),o?.()},Y=()=>{$(),u?.()},M=()=>{j(s),c?.()},N=()=>{b.setState({nodesDraggable:!I,nodesConnectable:!I,elementsSelectable:!I}),d?.(!I)};return be.createElement(Yw,{className:cr(["react-flow__controls",f]),position:y,style:t,"data-testid":"rf__controls"},e&&be.createElement(be.Fragment,null,be.createElement(mh,{onClick:te,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:k},be.createElement(CP,null)),be.createElement(mh,{onClick:Y,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:L},be.createElement(IP,null))),n&&be.createElement(mh,{className:"react-flow__controls-fitview",onClick:M,title:"fit view","aria-label":"fit view"},be.createElement(NP,null)),r&&be.createElement(mh,{className:"react-flow__controls-interactive",onClick:N,title:"toggle interactivity","aria-label":"toggle interactivity"},I?be.createElement(kP,null):be.createElement(RP,null)),m)};MC.displayName="Controls";var OP=Q.memo(MC),di;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(di||(di={}));function LP({color:t,dimensions:e,lineWidth:n}){return be.createElement("path",{stroke:t,strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function PP({color:t,radius:e}){return be.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const MP={[di.Dots]:"#91919a",[di.Lines]:"#eee",[di.Cross]:"#e2e2e2"},BP={[di.Dots]:1,[di.Lines]:1,[di.Cross]:6},UP=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function BC({id:t,variant:e=di.Dots,gap:n=20,size:r,lineWidth:s=1,offset:o=2,color:u,style:c,className:d}){const f=Q.useRef(null),{transform:m,patternId:y}=Zt(UP,tr),b=u||MP[e],T=r||BP[e],w=e===di.Dots,I=e===di.Cross,L=Array.isArray(n)?n:[n,n],k=[L[0]*m[2]||1,L[1]*m[2]||1],q=T*m[2],$=I?[q,q]:k,j=w?[q/o,q/o]:[$[0]/o,$[1]/o];return be.createElement("svg",{className:cr(["react-flow__background",d]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},be.createElement("pattern",{id:y+t,x:m[0]%k[0],y:m[1]%k[1],width:k[0],height:k[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},w?be.createElement(PP,{color:b,radius:q/o}):be.createElement(LP,{dimensions:$,color:b,lineWidth:s})),be.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${y+t})`}))}BC.displayName="Background";var HP=Q.memo(BC),_n=function(){return _n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},_n.apply(this,arguments)},fA={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},pA={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},t0={width:"20px",height:"20px",position:"absolute",zIndex:1},VP={top:_n(_n({},fA),{top:"-5px"}),right:_n(_n({},pA),{left:void 0,right:"-5px"}),bottom:_n(_n({},fA),{top:void 0,bottom:"-5px"}),left:_n(_n({},pA),{left:"-5px"}),topRight:_n(_n({},t0),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:_n(_n({},t0),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:_n(_n({},t0),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:_n(_n({},t0),{left:"-10px",top:"-10px",cursor:"nw-resize"})},zP=Q.memo(function(t){var e=t.onResizeStart,n=t.direction,r=t.children,s=t.replaceStyles,o=t.className,u=Q.useCallback(function(f){e(f,n)},[e,n]),c=Q.useCallback(function(f){e(f,n)},[e,n]),d=Q.useMemo(function(){return _n(_n({position:"absolute",userSelect:"none"},VP[n]),s??{})},[s,n]);return P.jsx("div",{className:o||void 0,style:d,onMouseDown:u,onTouchStart:c,children:r})}),FP=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(r[o]=s[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xi=function(){return Xi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Xi.apply(this,arguments)},jP={width:"auto",height:"auto"},n0=function(t,e,n){return Math.max(Math.min(t,n),e)},mA=function(t,e,n){var r=Math.round(t/e);return r*e+n*(r-1)},el=function(t,e){return new RegExp(t,"i").test(e)},r0=function(t){return!!(t.touches&&t.touches.length)},qP=function(t){return!!((t.clientX||t.clientX===0)&&(t.clientY||t.clientY===0))},gA=function(t,e,n){n===void 0&&(n=0);var r=e.reduce(function(o,u,c){return Math.abs(u-t)<Math.abs(e[o]-t)?c:o},0),s=Math.abs(e[r]-t);return n===0||s<n?e[r]:t},Ay=function(t){return t=t.toString(),t==="auto"||t.endsWith("px")||t.endsWith("%")||t.endsWith("vh")||t.endsWith("vw")||t.endsWith("vmax")||t.endsWith("vmin")?t:"".concat(t,"px")},i0=function(t,e,n,r){if(t&&typeof t=="string"){if(t.endsWith("px"))return Number(t.replace("px",""));if(t.endsWith("%")){var s=Number(t.replace("%",""))/100;return e*s}if(t.endsWith("vw")){var s=Number(t.replace("vw",""))/100;return n*s}if(t.endsWith("vh")){var s=Number(t.replace("vh",""))/100;return r*s}}return t},YP=function(t,e,n,r,s,o,u){return r=i0(r,t.width,e,n),s=i0(s,t.height,e,n),o=i0(o,t.width,e,n),u=i0(u,t.height,e,n),{maxWidth:typeof r>"u"?void 0:Number(r),maxHeight:typeof s>"u"?void 0:Number(s),minWidth:typeof o>"u"?void 0:Number(o),minHeight:typeof u>"u"?void 0:Number(u)}},GP=function(t){return Array.isArray(t)?t:[t,t]},$P=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],yA="__resizable_base__",KP=function(t){FP(e,t);function e(n){var r,s,o,u,c=t.call(this,n)||this;return c.ratio=1,c.resizable=null,c.parentLeft=0,c.parentTop=0,c.resizableLeft=0,c.resizableRight=0,c.resizableTop=0,c.resizableBottom=0,c.targetLeft=0,c.targetTop=0,c.delta={width:0,height:0},c.appendBase=function(){if(!c.resizable||!c.window)return null;var d=c.parentNode;if(!d)return null;var f=c.window.document.createElement("div");return f.style.width="100%",f.style.height="100%",f.style.position="absolute",f.style.transform="scale(0, 0)",f.style.left="0",f.style.flex="0 0 100%",f.classList?f.classList.add(yA):f.className+=yA,d.appendChild(f),f},c.removeBase=function(d){var f=c.parentNode;f&&f.removeChild(d)},c.state={isResizing:!1,width:(s=(r=c.propsSize)===null||r===void 0?void 0:r.width)!==null&&s!==void 0?s:"auto",height:(u=(o=c.propsSize)===null||o===void 0?void 0:o.height)!==null&&u!==void 0?u:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},c.onResizeStart=c.onResizeStart.bind(c),c.onMouseMove=c.onMouseMove.bind(c),c.onMouseUp=c.onMouseUp.bind(c),c}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||jP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){var n=0,r=0;if(this.resizable&&this.window){var s=this.resizable.offsetWidth,o=this.resizable.offsetHeight,u=this.resizable.style.position;u!=="relative"&&(this.resizable.style.position="relative"),n=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:s,r=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:o,this.resizable.style.position=u}return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sizeStyle",{get:function(){var n=this,r=this.props.size,s=function(c){var d;if(typeof n.state[c]>"u"||n.state[c]==="auto")return"auto";if(n.propsSize&&n.propsSize[c]&&(!((d=n.propsSize[c])===null||d===void 0)&&d.toString().endsWith("%"))){if(n.state[c].toString().endsWith("%"))return n.state[c].toString();var f=n.getParentSize(),m=Number(n.state[c].toString().replace("px","")),y=m/f[c]*100;return"".concat(y,"%")}return Ay(n.state[c])},o=r&&typeof r.width<"u"&&!this.state.isResizing?Ay(r.width):s("width"),u=r&&typeof r.height<"u"&&!this.state.isResizing?Ay(r.height):s("height");return{width:o,height:u}},enumerable:!1,configurable:!0}),e.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var n=this.appendBase();if(!n)return{width:0,height:0};var r=!1,s=this.parentNode.style.flexWrap;s!=="wrap"&&(r=!0,this.parentNode.style.flexWrap="wrap"),n.style.position="relative",n.style.minWidth="100%",n.style.minHeight="100%";var o={width:n.offsetWidth,height:n.offsetHeight};return r&&(this.parentNode.style.flexWrap=s),this.removeBase(n),o},e.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},e.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},e.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var n=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:n.flexBasis!=="auto"?n.flexBasis:void 0})}},e.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},e.prototype.createSizeForCssProperty=function(n,r){var s=this.propsSize&&this.propsSize[r];return this.state[r]==="auto"&&this.state.original[r]===n&&(typeof s>"u"||s==="auto")?"auto":n},e.prototype.calculateNewMaxFromBoundary=function(n,r){var s=this.props.boundsByDirection,o=this.state.direction,u=s&&el("left",o),c=s&&el("top",o),d,f;if(this.props.bounds==="parent"){var m=this.parentNode;m&&(d=u?this.resizableRight-this.parentLeft:m.offsetWidth+(this.parentLeft-this.resizableLeft),f=c?this.resizableBottom-this.parentTop:m.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(d=u?this.resizableRight:this.window.innerWidth-this.resizableLeft,f=c?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(d=u?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),f=c?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return d&&Number.isFinite(d)&&(n=n&&n<d?n:d),f&&Number.isFinite(f)&&(r=r&&r<f?r:f),{maxWidth:n,maxHeight:r}},e.prototype.calculateNewSizeFromDirection=function(n,r){var s=this.props.scale||1,o=GP(this.props.resizeRatio||1),u=o[0],c=o[1],d=this.state,f=d.direction,m=d.original,y=this.props,b=y.lockAspectRatio,T=y.lockAspectRatioExtraHeight,w=y.lockAspectRatioExtraWidth,I=m.width,L=m.height,k=T||0,q=w||0;return el("right",f)&&(I=m.width+(n-m.x)*u/s,b&&(L=(I-q)/this.ratio+k)),el("left",f)&&(I=m.width-(n-m.x)*u/s,b&&(L=(I-q)/this.ratio+k)),el("bottom",f)&&(L=m.height+(r-m.y)*c/s,b&&(I=(L-k)*this.ratio+q)),el("top",f)&&(L=m.height-(r-m.y)*c/s,b&&(I=(L-k)*this.ratio+q)),{newWidth:I,newHeight:L}},e.prototype.calculateNewSizeFromAspectRatio=function(n,r,s,o){var u=this.props,c=u.lockAspectRatio,d=u.lockAspectRatioExtraHeight,f=u.lockAspectRatioExtraWidth,m=typeof o.width>"u"?10:o.width,y=typeof s.width>"u"||s.width<0?n:s.width,b=typeof o.height>"u"?10:o.height,T=typeof s.height>"u"||s.height<0?r:s.height,w=d||0,I=f||0;if(c){var L=(b-w)*this.ratio+I,k=(T-w)*this.ratio+I,q=(m-I)/this.ratio+w,$=(y-I)/this.ratio+w,j=Math.max(m,L),te=Math.min(y,k),Y=Math.max(b,q),M=Math.min(T,$);n=n0(n,j,te),r=n0(r,Y,M)}else n=n0(n,m,y),r=n0(r,b,T);return{newWidth:n,newHeight:r}},e.prototype.setBoundingClientRect=function(){var n=1/(this.props.scale||1);if(this.props.bounds==="parent"){var r=this.parentNode;if(r){var s=r.getBoundingClientRect();this.parentLeft=s.left*n,this.parentTop=s.top*n}}if(this.props.bounds&&typeof this.props.bounds!="string"){var o=this.props.bounds.getBoundingClientRect();this.targetLeft=o.left*n,this.targetTop=o.top*n}if(this.resizable){var u=this.resizable.getBoundingClientRect(),c=u.left,d=u.top,f=u.right,m=u.bottom;this.resizableLeft=c*n,this.resizableRight=f*n,this.resizableTop=d*n,this.resizableBottom=m*n}},e.prototype.onResizeStart=function(n,r){if(!(!this.resizable||!this.window)){var s=0,o=0;if(n.nativeEvent&&qP(n.nativeEvent)?(s=n.nativeEvent.clientX,o=n.nativeEvent.clientY):n.nativeEvent&&r0(n.nativeEvent)&&(s=n.nativeEvent.touches[0].clientX,o=n.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var u=this.props.onResizeStart(n,r,this.resizable);if(u===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var c,d=this.window.getComputedStyle(this.resizable);if(d.flexBasis!=="auto"){var f=this.parentNode;if(f){var m=this.window.getComputedStyle(f).flexDirection;this.flexDir=m.startsWith("row")?"row":"column",c=d.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var y={original:{x:s,y:o,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Xi(Xi({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(n.target).cursor||"auto"}),direction:r,flexBasis:c};this.setState(y)}},e.prototype.onMouseMove=function(n){var r=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&r0(n))try{n.preventDefault(),n.stopPropagation()}catch{}var s=this.props,o=s.maxWidth,u=s.maxHeight,c=s.minWidth,d=s.minHeight,f=r0(n)?n.touches[0].clientX:n.clientX,m=r0(n)?n.touches[0].clientY:n.clientY,y=this.state,b=y.direction,T=y.original,w=y.width,I=y.height,L=this.getParentSize(),k=YP(L,this.window.innerWidth,this.window.innerHeight,o,u,c,d);o=k.maxWidth,u=k.maxHeight,c=k.minWidth,d=k.minHeight;var q=this.calculateNewSizeFromDirection(f,m),$=q.newHeight,j=q.newWidth,te=this.calculateNewMaxFromBoundary(o,u);this.props.snap&&this.props.snap.x&&(j=gA(j,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&($=gA($,this.props.snap.y,this.props.snapGap));var Y=this.calculateNewSizeFromAspectRatio(j,$,{width:te.maxWidth,height:te.maxHeight},{width:c,height:d});if(j=Y.newWidth,$=Y.newHeight,this.props.grid){var M=mA(j,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),N=mA($,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),D=this.props.snapGap||0,U=D===0||Math.abs(M-j)<=D?M:j,B=D===0||Math.abs(N-$)<=D?N:$;j=U,$=B}var V={width:j-T.width,height:$-T.height};if(this.delta=V,w&&typeof w=="string"){if(w.endsWith("%")){var C=j/L.width*100;j="".concat(C,"%")}else if(w.endsWith("vw")){var O=j/this.window.innerWidth*100;j="".concat(O,"vw")}else if(w.endsWith("vh")){var K=j/this.window.innerHeight*100;j="".concat(K,"vh")}}if(I&&typeof I=="string"){if(I.endsWith("%")){var C=$/L.height*100;$="".concat(C,"%")}else if(I.endsWith("vw")){var O=$/this.window.innerWidth*100;$="".concat(O,"vw")}else if(I.endsWith("vh")){var K=$/this.window.innerHeight*100;$="".concat(K,"vh")}}var z={width:this.createSizeForCssProperty(j,"width"),height:this.createSizeForCssProperty($,"height")};this.flexDir==="row"?z.flexBasis=z.width:this.flexDir==="column"&&(z.flexBasis=z.height);var J=this.state.width!==z.width,se=this.state.height!==z.height,re=this.state.flexBasis!==z.flexBasis,A=J||se||re;A&&ML.flushSync(function(){r.setState(z)}),this.props.onResize&&A&&this.props.onResize(n,b,this.resizable,V)}},e.prototype.onMouseUp=function(n){var r,s,o=this.state,u=o.isResizing,c=o.direction;o.original,!(!u||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(n,c,this.resizable,this.delta),this.props.size&&this.setState({width:(r=this.props.size.width)!==null&&r!==void 0?r:"auto",height:(s=this.props.size.height)!==null&&s!==void 0?s:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Xi(Xi({},this.state.backgroundStyle),{cursor:"auto"})}))},e.prototype.updateSize=function(n){var r,s;this.setState({width:(r=n.width)!==null&&r!==void 0?r:"auto",height:(s=n.height)!==null&&s!==void 0?s:"auto"})},e.prototype.renderResizer=function(){var n=this,r=this.props,s=r.enable,o=r.handleStyles,u=r.handleClasses,c=r.handleWrapperStyle,d=r.handleWrapperClass,f=r.handleComponent;if(!s)return null;var m=Object.keys(s).map(function(y){return s[y]!==!1?P.jsx(zP,{direction:y,onResizeStart:n.onResizeStart,replaceStyles:o&&o[y],className:u&&u[y],children:f&&f[y]?f[y]:null},y):null});return P.jsx("div",{className:d,style:c,children:m})},e.prototype.render=function(){var n=this,r=Object.keys(this.props).reduce(function(u,c){return $P.indexOf(c)!==-1||(u[c]=n.props[c]),u},{}),s=Xi(Xi(Xi({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(s.flexBasis=this.state.flexBasis);var o=this.props.as||"div";return P.jsxs(o,Xi({style:s,className:this.props.className},r,{ref:function(u){u&&(n.resizable=u)},children:[this.state.isResizing&&P.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},e.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},e}(Q.PureComponent);const wp=Q.createContext(null);wp.displayName="PanelGroupContext";const sn={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},I1=10,zo=Q.useLayoutEffect,EA=H6.useId,XP=typeof EA=="function"?EA:()=>null;let QP=0;function N1(t=null){const e=XP(),n=Q.useRef(t||e||null);return n.current===null&&(n.current=""+QP++),t??n.current}function UC({children:t,className:e="",collapsedSize:n,collapsible:r,defaultSize:s,forwardedRef:o,id:u,maxSize:c,minSize:d,onCollapse:f,onExpand:m,onResize:y,order:b,style:T,tagName:w="div",...I}){const L=Q.useContext(wp);if(L===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:k,expandPanel:q,getPanelSize:$,getPanelStyle:j,groupId:te,isPanelCollapsed:Y,reevaluatePanelConstraints:M,registerPanel:N,resizePanel:D,unregisterPanel:U}=L,B=N1(u),V=Q.useRef({callbacks:{onCollapse:f,onExpand:m,onResize:y},constraints:{collapsedSize:n,collapsible:r,defaultSize:s,maxSize:c,minSize:d},id:B,idIsFromProps:u!==void 0,order:b});Q.useRef({didLogMissingDefaultSizeWarning:!1}),zo(()=>{const{callbacks:O,constraints:K}=V.current,z={...K};V.current.id=B,V.current.idIsFromProps=u!==void 0,V.current.order=b,O.onCollapse=f,O.onExpand=m,O.onResize=y,K.collapsedSize=n,K.collapsible=r,K.defaultSize=s,K.maxSize=c,K.minSize=d,(z.collapsedSize!==K.collapsedSize||z.collapsible!==K.collapsible||z.maxSize!==K.maxSize||z.minSize!==K.minSize)&&M(V.current,z)}),zo(()=>{const O=V.current;return N(O),()=>{U(O)}},[b,B,N,U]),Q.useImperativeHandle(o,()=>({collapse:()=>{k(V.current)},expand:O=>{q(V.current,O)},getId(){return B},getSize(){return $(V.current)},isCollapsed(){return Y(V.current)},isExpanded(){return!Y(V.current)},resize:O=>{D(V.current,O)}}),[k,q,$,Y,B,D]);const C=j(V.current,s);return Q.createElement(w,{...I,children:t,className:e,id:B,style:{...C,...T},[sn.groupId]:te,[sn.panel]:"",[sn.panelCollapsible]:r||void 0,[sn.panelId]:B,[sn.panelSize]:parseFloat(""+C.flexGrow).toFixed(1)})}const _E=Q.forwardRef((t,e)=>Q.createElement(UC,{...t,forwardedRef:e}));UC.displayName="Panel";_E.displayName="forwardRef(Panel)";let bE=null,T0=-1,Ia=null;function WP(t,e){if(e){const n=(e&jC)!==0,r=(e&qC)!==0,s=(e&YC)!==0,o=(e&GC)!==0;if(n)return s?"se-resize":o?"ne-resize":"e-resize";if(r)return s?"sw-resize":o?"nw-resize":"w-resize";if(s)return"s-resize";if(o)return"n-resize"}switch(t){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function ZP(){Ia!==null&&(document.head.removeChild(Ia),bE=null,Ia=null,T0=-1)}function Sy(t,e){var n,r;const s=WP(t,e);if(bE!==s){if(bE=s,Ia===null&&(Ia=document.createElement("style"),document.head.appendChild(Ia)),T0>=0){var o;(o=Ia.sheet)===null||o===void 0||o.removeRule(T0)}T0=(n=(r=Ia.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function HC(t){return t.type==="keydown"}function VC(t){return t.type.startsWith("pointer")}function zC(t){return t.type.startsWith("mouse")}function Cp(t){if(VC(t)){if(t.isPrimary)return{x:t.clientX,y:t.clientY}}else if(zC(t))return{x:t.clientX,y:t.clientY};return{x:1/0,y:1/0}}function JP(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function eM(t,e,n){return t.x<e.x+e.width&&t.x+t.width>e.x&&t.y<e.y+e.height&&t.y+t.height>e.y}function tM(t,e){if(t===e)throw new Error("Cannot compare node with itself");const n={a:TA(t),b:TA(e)};let r;for(;n.a.at(-1)===n.b.at(-1);)t=n.a.pop(),e=n.b.pop(),r=t;rt(r,"Stacking order can only be calculated for elements with a common ancestor");const s={a:bA(_A(n.a)),b:bA(_A(n.b))};if(s.a===s.b){const o=r.childNodes,u={a:n.a.at(-1),b:n.b.at(-1)};let c=o.length;for(;c--;){const d=o[c];if(d===u.a)return 1;if(d===u.b)return-1}}return Math.sign(s.a-s.b)}const nM=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function rM(t){var e;const n=getComputedStyle((e=FC(t))!==null&&e!==void 0?e:t).display;return n==="flex"||n==="inline-flex"}function iM(t){const e=getComputedStyle(t);return!!(e.position==="fixed"||e.zIndex!=="auto"&&(e.position!=="static"||rM(t))||+e.opacity<1||"transform"in e&&e.transform!=="none"||"webkitTransform"in e&&e.webkitTransform!=="none"||"mixBlendMode"in e&&e.mixBlendMode!=="normal"||"filter"in e&&e.filter!=="none"||"webkitFilter"in e&&e.webkitFilter!=="none"||"isolation"in e&&e.isolation==="isolate"||nM.test(e.willChange)||e.webkitOverflowScrolling==="touch")}function _A(t){let e=t.length;for(;e--;){const n=t[e];if(rt(n,"Missing node"),iM(n))return n}return null}function bA(t){return t&&Number(getComputedStyle(t).zIndex)||0}function TA(t){const e=[];for(;t;)e.push(t),t=FC(t);return e}function FC(t){const{parentNode:e}=t;return e&&e instanceof ShadowRoot?e.host:e}const jC=1,qC=2,YC=4,GC=8,sM=JP()==="coarse";let Si=[],El=!1,Na=new Map,Ip=new Map;const $h=new Set;function aM(t,e,n,r,s){var o;const{ownerDocument:u}=e,c={direction:n,element:e,hitAreaMargins:r,setResizeHandlerState:s},d=(o=Na.get(u))!==null&&o!==void 0?o:0;return Na.set(u,d+1),$h.add(c),Y0(),function(){var m;Ip.delete(t),$h.delete(c);const y=(m=Na.get(u))!==null&&m!==void 0?m:1;if(Na.set(u,y-1),Y0(),y===1&&Na.delete(u),Si.includes(c)){const b=Si.indexOf(c);b>=0&&Si.splice(b,1),k1(),s("up",!0,null)}}}function oM(t){const{target:e}=t,{x:n,y:r}=Cp(t);El=!0,R1({target:e,x:n,y:r}),Y0(),Si.length>0&&(G0("down",t),t.preventDefault(),$C(e)||t.stopImmediatePropagation())}function xy(t){const{x:e,y:n}=Cp(t);if(El&&t.buttons===0&&(El=!1,G0("up",t)),!El){const{target:r}=t;R1({target:r,x:e,y:n})}G0("move",t),k1(),Si.length>0&&t.preventDefault()}function wy(t){const{target:e}=t,{x:n,y:r}=Cp(t);Ip.clear(),El=!1,Si.length>0&&(t.preventDefault(),$C(e)||t.stopImmediatePropagation()),G0("up",t),R1({target:e,x:n,y:r}),k1(),Y0()}function $C(t){let e=t;for(;e;){if(e.hasAttribute(sn.resizeHandle))return!0;e=e.parentElement}return!1}function R1({target:t,x:e,y:n}){Si.splice(0);let r=null;(t instanceof HTMLElement||t instanceof SVGElement)&&(r=t),$h.forEach(s=>{const{element:o,hitAreaMargins:u}=s,c=o.getBoundingClientRect(),{bottom:d,left:f,right:m,top:y}=c,b=sM?u.coarse:u.fine;if(e>=f-b&&e<=m+b&&n>=y-b&&n<=d+b){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&tM(r,o)>0){let w=r,I=!1;for(;w&&!w.contains(o);){if(eM(w.getBoundingClientRect(),c)){I=!0;break}w=w.parentElement}if(I)return}Si.push(s)}})}function Cy(t,e){Ip.set(t,e)}function k1(){let t=!1,e=!1;Si.forEach(r=>{const{direction:s}=r;s==="horizontal"?t=!0:e=!0});let n=0;Ip.forEach(r=>{n|=r}),t&&e?Sy("intersection",n):t?Sy("horizontal",n):e?Sy("vertical",n):ZP()}let Iy;function Y0(){var t;(t=Iy)===null||t===void 0||t.abort(),Iy=new AbortController;const e={capture:!0,signal:Iy.signal};$h.size&&(El?(Si.length>0&&Na.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("contextmenu",wy,e),s.addEventListener("pointerleave",xy,e),s.addEventListener("pointermove",xy,e))}),Na.forEach((n,r)=>{const{body:s}=r;s.addEventListener("pointerup",wy,e),s.addEventListener("pointercancel",wy,e)})):Na.forEach((n,r)=>{const{body:s}=r;n>0&&(s.addEventListener("pointerdown",oM,e),s.addEventListener("pointermove",xy,e))}))}function G0(t,e){$h.forEach(n=>{const{setResizeHandlerState:r}=n,s=Si.includes(n);r(t,s,e)})}function uM(){const[t,e]=Q.useState(0);return Q.useCallback(()=>e(n=>n+1),[])}function rt(t,e){if(!t)throw console.error(e),Error(e)}function qo(t,e,n=I1){return t.toFixed(n)===e.toFixed(n)?0:t>e?1:-1}function Ms(t,e,n=I1){return qo(t,e,n)===0}function Ur(t,e,n){return qo(t,e,n)===0}function lM(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){const s=t[r],o=e[r];if(!Ur(s,o,n))return!1}return!0}function hl({panelConstraints:t,panelIndex:e,size:n}){const r=t[e];rt(r!=null,`Panel constraints not found for index ${e}`);let{collapsedSize:s=0,collapsible:o,maxSize:u=100,minSize:c=0}=r;if(qo(n,c)<0)if(o){const d=(s+c)/2;qo(n,d)<0?n=s:n=c}else n=c;return n=Math.min(u,n),n=parseFloat(n.toFixed(I1)),n}function gh({delta:t,initialLayout:e,panelConstraints:n,pivotIndices:r,prevLayout:s,trigger:o}){if(Ur(t,0))return e;const u=[...e],[c,d]=r;rt(c!=null,"Invalid first pivot index"),rt(d!=null,"Invalid second pivot index");let f=0;if(o==="keyboard"){{const y=t<0?d:c,b=n[y];rt(b,`Panel constraints not found for index ${y}`);const{collapsedSize:T=0,collapsible:w,minSize:I=0}=b;if(w){const L=e[y];if(rt(L!=null,`Previous layout not found for panel index ${y}`),Ur(L,T)){const k=I-L;qo(k,Math.abs(t))>0&&(t=t<0?0-k:k)}}}{const y=t<0?c:d,b=n[y];rt(b,`No panel constraints found for index ${y}`);const{collapsedSize:T=0,collapsible:w,minSize:I=0}=b;if(w){const L=e[y];if(rt(L!=null,`Previous layout not found for panel index ${y}`),Ur(L,I)){const k=L-T;qo(k,Math.abs(t))>0&&(t=t<0?0-k:k)}}}}{const y=t<0?1:-1;let b=t<0?d:c,T=0;for(;;){const I=e[b];rt(I!=null,`Previous layout not found for panel index ${b}`);const k=hl({panelConstraints:n,panelIndex:b,size:100})-I;if(T+=k,b+=y,b<0||b>=n.length)break}const w=Math.min(Math.abs(t),Math.abs(T));t=t<0?0-w:w}{let b=t<0?c:d;for(;b>=0&&b<n.length;){const T=Math.abs(t)-Math.abs(f),w=e[b];rt(w!=null,`Previous layout not found for panel index ${b}`);const I=w-T,L=hl({panelConstraints:n,panelIndex:b,size:I});if(!Ur(w,L)&&(f+=w-L,u[b]=L,f.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?b--:b++}}if(lM(s,u))return s;{const y=t<0?d:c,b=e[y];rt(b!=null,`Previous layout not found for panel index ${y}`);const T=b+f,w=hl({panelConstraints:n,panelIndex:y,size:T});if(u[y]=w,!Ur(w,T)){let I=T-w,k=t<0?d:c;for(;k>=0&&k<n.length;){const q=u[k];rt(q!=null,`Previous layout not found for panel index ${k}`);const $=q+I,j=hl({panelConstraints:n,panelIndex:k,size:$});if(Ur(q,j)||(I-=j-q,u[k]=j),Ur(I,0))break;t>0?k--:k++}}}const m=u.reduce((y,b)=>b+y,0);return Ur(m,100)?u:s}function cM({layout:t,panelsArray:e,pivotIndices:n}){let r=0,s=100,o=0,u=0;const c=n[0];rt(c!=null,"No pivot index found"),e.forEach((y,b)=>{const{constraints:T}=y,{maxSize:w=100,minSize:I=0}=T;b===c?(r=I,s=w):(o+=I,u+=w)});const d=Math.min(s,100-o),f=Math.max(r,100-u),m=t[c];return{valueMax:d,valueMin:f,valueNow:m}}function Kh(t,e=document){return Array.from(e.querySelectorAll(`[${sn.resizeHandleId}][data-panel-group-id="${t}"]`))}function KC(t,e,n=document){const s=Kh(t,n).findIndex(o=>o.getAttribute(sn.resizeHandleId)===e);return s??null}function XC(t,e,n){const r=KC(t,e,n);return r!=null?[r,r+1]:[-1,-1]}function hM(t){return t instanceof HTMLElement?!0:typeof t=="object"&&t!==null&&"tagName"in t&&"getAttribute"in t}function QC(t,e=document){if(hM(e)&&e.dataset.panelGroupId==t)return e;const n=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return n||null}function Np(t,e=document){const n=e.querySelector(`[${sn.resizeHandleId}="${t}"]`);return n||null}function dM(t,e,n,r=document){var s,o,u,c;const d=Np(e,r),f=Kh(t,r),m=d?f.indexOf(d):-1,y=(s=(o=n[m])===null||o===void 0?void 0:o.id)!==null&&s!==void 0?s:null,b=(u=(c=n[m+1])===null||c===void 0?void 0:c.id)!==null&&u!==void 0?u:null;return[y,b]}function fM({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:r,panelDataArray:s,panelGroupElement:o,setLayout:u}){Q.useRef({didWarnAboutMissingResizeHandle:!1}),zo(()=>{if(!o)return;const c=Kh(n,o);for(let d=0;d<s.length-1;d++){const{valueMax:f,valueMin:m,valueNow:y}=cM({layout:r,panelsArray:s,pivotIndices:[d,d+1]}),b=c[d];if(b!=null){const T=s[d];rt(T,`No panel data found for index "${d}"`),b.setAttribute("aria-controls",T.id),b.setAttribute("aria-valuemax",""+Math.round(f)),b.setAttribute("aria-valuemin",""+Math.round(m)),b.setAttribute("aria-valuenow",y!=null?""+Math.round(y):"")}}return()=>{c.forEach((d,f)=>{d.removeAttribute("aria-controls"),d.removeAttribute("aria-valuemax"),d.removeAttribute("aria-valuemin"),d.removeAttribute("aria-valuenow")})}},[n,r,s,o]),Q.useEffect(()=>{if(!o)return;const c=e.current;rt(c,"Eager values not found");const{panelDataArray:d}=c,f=QC(n,o);rt(f!=null,`No group found for id "${n}"`);const m=Kh(n,o);rt(m,`No resize handles found for group id "${n}"`);const y=m.map(b=>{const T=b.getAttribute(sn.resizeHandleId);rt(T,"Resize handle element has no handle id attribute");const[w,I]=dM(n,T,d,o);if(w==null||I==null)return()=>{};const L=k=>{if(!k.defaultPrevented)switch(k.key){case"Enter":{k.preventDefault();const q=d.findIndex($=>$.id===w);if(q>=0){const $=d[q];rt($,`No panel data found for index ${q}`);const j=r[q],{collapsedSize:te=0,collapsible:Y,minSize:M=0}=$.constraints;if(j!=null&&Y){const N=gh({delta:Ur(j,te)?M-te:te-j,initialLayout:r,panelConstraints:d.map(D=>D.constraints),pivotIndices:XC(n,T,o),prevLayout:r,trigger:"keyboard"});r!==N&&u(N)}}break}}};return b.addEventListener("keydown",L),()=>{b.removeEventListener("keydown",L)}});return()=>{y.forEach(b=>b())}},[o,t,e,n,r,s,u])}function vA(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function WC(t,e){const n=t==="horizontal",{x:r,y:s}=Cp(e);return n?r:s}function pM(t,e,n,r,s){const o=n==="horizontal",u=Np(e,s);rt(u,`No resize handle element found for id "${e}"`);const c=u.getAttribute(sn.groupId);rt(c,"Resize handle element has no group id attribute");let{initialCursorPosition:d}=r;const f=WC(n,t),m=QC(c,s);rt(m,`No group element found for id "${c}"`);const y=m.getBoundingClientRect(),b=o?y.width:y.height;return(f-d)/b*100}function mM(t,e,n,r,s,o){if(HC(t)){const u=n==="horizontal";let c=0;t.shiftKey?c=100:s!=null?c=s:c=10;let d=0;switch(t.key){case"ArrowDown":d=u?0:c;break;case"ArrowLeft":d=u?-c:0;break;case"ArrowRight":d=u?c:0;break;case"ArrowUp":d=u?0:-c;break;case"End":d=100;break;case"Home":d=-100;break}return d}else return r==null?0:pM(t,e,n,r,o)}function gM({panelDataArray:t}){const e=Array(t.length),n=t.map(o=>o.constraints);let r=0,s=100;for(let o=0;o<t.length;o++){const u=n[o];rt(u,`Panel constraints not found for index ${o}`);const{defaultSize:c}=u;c!=null&&(r++,e[o]=c,s-=c)}for(let o=0;o<t.length;o++){const u=n[o];rt(u,`Panel constraints not found for index ${o}`);const{defaultSize:c}=u;if(c!=null)continue;const d=t.length-r,f=s/d;r++,e[o]=f,s-=f}return e}function tl(t,e,n){e.forEach((r,s)=>{const o=t[s];rt(o,`Panel data not found for index ${s}`);const{callbacks:u,constraints:c,id:d}=o,{collapsedSize:f=0,collapsible:m}=c,y=n[d];if(y==null||r!==y){n[d]=r;const{onCollapse:b,onExpand:T,onResize:w}=u;w&&w(r,y),m&&(b||T)&&(T&&(y==null||Ms(y,f))&&!Ms(r,f)&&T(),b&&(y==null||!Ms(y,f))&&Ms(r,f)&&b())}})}function s0(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function yM({defaultSize:t,dragState:e,layout:n,panelData:r,panelIndex:s,precision:o=3}){const u=n[s];let c;return u==null?c=t!=null?t.toPrecision(o):"1":r.length===1?c="1":c=u.toPrecision(o),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}function EM(t,e=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...s)},e)}}function AA(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function ZC(t){return`react-resizable-panels:${t}`}function JC(t){return t.map(e=>{const{constraints:n,id:r,idIsFromProps:s,order:o}=e;return s?r:o?`${o}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function eI(t,e){try{const n=ZC(t),r=e.getItem(n);if(r){const s=JSON.parse(r);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function _M(t,e,n){var r,s;const o=(r=eI(t,n))!==null&&r!==void 0?r:{},u=JC(e);return(s=o[u])!==null&&s!==void 0?s:null}function bM(t,e,n,r,s){var o;const u=ZC(t),c=JC(e),d=(o=eI(t,s))!==null&&o!==void 0?o:{};d[c]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{s.setItem(u,JSON.stringify(d))}catch(f){console.error(f)}}function SA({layout:t,panelConstraints:e}){const n=[...t],r=n.reduce((o,u)=>o+u,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(o=>`${o}%`).join(", ")}`);if(!Ur(r,100)&&n.length>0)for(let o=0;o<e.length;o++){const u=n[o];rt(u!=null,`No layout data found for index ${o}`);const c=100/r*u;n[o]=c}let s=0;for(let o=0;o<e.length;o++){const u=n[o];rt(u!=null,`No layout data found for index ${o}`);const c=hl({panelConstraints:e,panelIndex:o,size:u});u!=c&&(s+=u-c,n[o]=c)}if(!Ur(s,0))for(let o=0;o<e.length;o++){const u=n[o];rt(u!=null,`No layout data found for index ${o}`);const c=u+s,d=hl({panelConstraints:e,panelIndex:o,size:c});if(u!==d&&(s-=d-u,n[o]=d,Ur(s,0)))break}return n}const TM=100,yh={getItem:t=>(AA(yh),yh.getItem(t)),setItem:(t,e)=>{AA(yh),yh.setItem(t,e)}},xA={};function tI({autoSaveId:t=null,children:e,className:n="",direction:r,forwardedRef:s,id:o=null,onLayout:u=null,keyboardResizeBy:c=null,storage:d=yh,style:f,tagName:m="div",...y}){const b=N1(o),T=Q.useRef(null),[w,I]=Q.useState(null),[L,k]=Q.useState([]),q=uM(),$=Q.useRef({}),j=Q.useRef(new Map),te=Q.useRef(0),Y=Q.useRef({autoSaveId:t,direction:r,dragState:w,id:b,keyboardResizeBy:c,onLayout:u,storage:d}),M=Q.useRef({layout:L,panelDataArray:[],panelDataArrayChanged:!1});Q.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),Q.useImperativeHandle(s,()=>({getId:()=>Y.current.id,getLayout:()=>{const{layout:R}=M.current;return R},setLayout:R=>{const{onLayout:oe}=Y.current,{layout:Ee,panelDataArray:me}=M.current,we=SA({layout:R,panelConstraints:me.map(Ce=>Ce.constraints)});vA(Ee,we)||(k(we),M.current.layout=we,oe&&oe(we),tl(me,we,$.current))}}),[]),zo(()=>{Y.current.autoSaveId=t,Y.current.direction=r,Y.current.dragState=w,Y.current.id=b,Y.current.onLayout=u,Y.current.storage=d}),fM({committedValuesRef:Y,eagerValuesRef:M,groupId:b,layout:L,panelDataArray:M.current.panelDataArray,setLayout:k,panelGroupElement:T.current}),Q.useEffect(()=>{const{panelDataArray:R}=M.current;if(t){if(L.length===0||L.length!==R.length)return;let oe=xA[t];oe==null&&(oe=EM(bM,TM),xA[t]=oe);const Ee=[...R],me=new Map(j.current);oe(t,Ee,me,L,d)}},[t,L,d]),Q.useEffect(()=>{});const N=Q.useCallback(R=>{const{onLayout:oe}=Y.current,{layout:Ee,panelDataArray:me}=M.current;if(R.constraints.collapsible){const we=me.map(ct=>ct.constraints),{collapsedSize:Ce=0,panelSize:Le,pivotIndices:Ve}=Oo(me,R,Ee);if(rt(Le!=null,`Panel size not found for panel "${R.id}"`),!Ms(Le,Ce)){j.current.set(R.id,Le);const Tt=sl(me,R)===me.length-1?Le-Ce:Ce-Le,Ze=gh({delta:Tt,initialLayout:Ee,panelConstraints:we,pivotIndices:Ve,prevLayout:Ee,trigger:"imperative-api"});s0(Ee,Ze)||(k(Ze),M.current.layout=Ze,oe&&oe(Ze),tl(me,Ze,$.current))}}},[]),D=Q.useCallback((R,oe)=>{const{onLayout:Ee}=Y.current,{layout:me,panelDataArray:we}=M.current;if(R.constraints.collapsible){const Ce=we.map(mt=>mt.constraints),{collapsedSize:Le=0,panelSize:Ve=0,minSize:ct=0,pivotIndices:Tt}=Oo(we,R,me),Ze=oe??ct;if(Ms(Ve,Le)){const mt=j.current.get(R.id),gt=mt!=null&&mt>=Ze?mt:Ze,Qe=sl(we,R)===we.length-1?Ve-gt:gt-Ve,Oe=gh({delta:Qe,initialLayout:me,panelConstraints:Ce,pivotIndices:Tt,prevLayout:me,trigger:"imperative-api"});s0(me,Oe)||(k(Oe),M.current.layout=Oe,Ee&&Ee(Oe),tl(we,Oe,$.current))}}},[]),U=Q.useCallback(R=>{const{layout:oe,panelDataArray:Ee}=M.current,{panelSize:me}=Oo(Ee,R,oe);return rt(me!=null,`Panel size not found for panel "${R.id}"`),me},[]),B=Q.useCallback((R,oe)=>{const{panelDataArray:Ee}=M.current,me=sl(Ee,R);return yM({defaultSize:oe,dragState:w,layout:L,panelData:Ee,panelIndex:me})},[w,L]),V=Q.useCallback(R=>{const{layout:oe,panelDataArray:Ee}=M.current,{collapsedSize:me=0,collapsible:we,panelSize:Ce}=Oo(Ee,R,oe);return rt(Ce!=null,`Panel size not found for panel "${R.id}"`),we===!0&&Ms(Ce,me)},[]),C=Q.useCallback(R=>{const{layout:oe,panelDataArray:Ee}=M.current,{collapsedSize:me=0,collapsible:we,panelSize:Ce}=Oo(Ee,R,oe);return rt(Ce!=null,`Panel size not found for panel "${R.id}"`),!we||qo(Ce,me)>0},[]),O=Q.useCallback(R=>{const{panelDataArray:oe}=M.current;oe.push(R),oe.sort((Ee,me)=>{const we=Ee.order,Ce=me.order;return we==null&&Ce==null?0:we==null?-1:Ce==null?1:we-Ce}),M.current.panelDataArrayChanged=!0,q()},[q]);zo(()=>{if(M.current.panelDataArrayChanged){M.current.panelDataArrayChanged=!1;const{autoSaveId:R,onLayout:oe,storage:Ee}=Y.current,{layout:me,panelDataArray:we}=M.current;let Ce=null;if(R){const Ve=_M(R,we,Ee);Ve&&(j.current=new Map(Object.entries(Ve.expandToSizes)),Ce=Ve.layout)}Ce==null&&(Ce=gM({panelDataArray:we}));const Le=SA({layout:Ce,panelConstraints:we.map(Ve=>Ve.constraints)});vA(me,Le)||(k(Le),M.current.layout=Le,oe&&oe(Le),tl(we,Le,$.current))}}),zo(()=>{const R=M.current;return()=>{R.layout=[]}},[]);const K=Q.useCallback(R=>{let oe=!1;const Ee=T.current;return Ee&&window.getComputedStyle(Ee,null).getPropertyValue("direction")==="rtl"&&(oe=!0),function(we){we.preventDefault();const Ce=T.current;if(!Ce)return()=>null;const{direction:Le,dragState:Ve,id:ct,keyboardResizeBy:Tt,onLayout:Ze}=Y.current,{layout:mt,panelDataArray:gt}=M.current,{initialLayout:Xt}=Ve??{},Qe=XC(ct,R,Ce);let Oe=mM(we,R,Le,Ve,Tt,Ce);const Ft=Le==="horizontal";Ft&&oe&&(Oe=-Oe);const An=gt.map(Vn=>Vn.constraints),un=gh({delta:Oe,initialLayout:Xt??mt,panelConstraints:An,pivotIndices:Qe,prevLayout:mt,trigger:HC(we)?"keyboard":"mouse-or-touch"}),sr=!s0(mt,un);(VC(we)||zC(we))&&te.current!=Oe&&(te.current=Oe,!sr&&Oe!==0?Ft?Cy(R,Oe<0?jC:qC):Cy(R,Oe<0?YC:GC):Cy(R,0)),sr&&(k(un),M.current.layout=un,Ze&&Ze(un),tl(gt,un,$.current))}},[]),z=Q.useCallback((R,oe)=>{const{onLayout:Ee}=Y.current,{layout:me,panelDataArray:we}=M.current,Ce=we.map(mt=>mt.constraints),{panelSize:Le,pivotIndices:Ve}=Oo(we,R,me);rt(Le!=null,`Panel size not found for panel "${R.id}"`);const Tt=sl(we,R)===we.length-1?Le-oe:oe-Le,Ze=gh({delta:Tt,initialLayout:me,panelConstraints:Ce,pivotIndices:Ve,prevLayout:me,trigger:"imperative-api"});s0(me,Ze)||(k(Ze),M.current.layout=Ze,Ee&&Ee(Ze),tl(we,Ze,$.current))},[]),J=Q.useCallback((R,oe)=>{const{layout:Ee,panelDataArray:me}=M.current,{collapsedSize:we=0,collapsible:Ce}=oe,{collapsedSize:Le=0,collapsible:Ve,maxSize:ct=100,minSize:Tt=0}=R.constraints,{panelSize:Ze}=Oo(me,R,Ee);Ze!=null&&(Ce&&Ve&&Ms(Ze,we)?Ms(we,Le)||z(R,Le):Ze<Tt?z(R,Tt):Ze>ct&&z(R,ct))},[z]),se=Q.useCallback((R,oe)=>{const{direction:Ee}=Y.current,{layout:me}=M.current;if(!T.current)return;const we=Np(R,T.current);rt(we,`Drag handle element not found for id "${R}"`);const Ce=WC(Ee,oe);I({dragHandleId:R,dragHandleRect:we.getBoundingClientRect(),initialCursorPosition:Ce,initialLayout:me})},[]),re=Q.useCallback(()=>{I(null)},[]),A=Q.useCallback(R=>{const{panelDataArray:oe}=M.current,Ee=sl(oe,R);Ee>=0&&(oe.splice(Ee,1),delete $.current[R.id],M.current.panelDataArrayChanged=!0,q())},[q]),ee=Q.useMemo(()=>({collapsePanel:N,direction:r,dragState:w,expandPanel:D,getPanelSize:U,getPanelStyle:B,groupId:b,isPanelCollapsed:V,isPanelExpanded:C,reevaluatePanelConstraints:J,registerPanel:O,registerResizeHandle:K,resizePanel:z,startDragging:se,stopDragging:re,unregisterPanel:A,panelGroupElement:T.current}),[N,w,r,D,U,B,b,V,C,J,O,K,z,se,re,A]),ae={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return Q.createElement(wp.Provider,{value:ee},Q.createElement(m,{...y,children:e,className:n,id:o,ref:T,style:{...ae,...f},[sn.group]:"",[sn.groupDirection]:r,[sn.groupId]:b}))}const nI=Q.forwardRef((t,e)=>Q.createElement(tI,{...t,forwardedRef:e}));tI.displayName="PanelGroup";nI.displayName="forwardRef(PanelGroup)";function sl(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Oo(t,e,n){const r=sl(t,e),o=r===t.length-1?[r-1,r]:[r,r+1],u=n[r];return{...e.constraints,panelSize:u,pivotIndices:o}}function vM({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:r}){Q.useEffect(()=>{if(t||n==null||r==null)return;const s=Np(e,r);if(s==null)return;const o=u=>{if(!u.defaultPrevented)switch(u.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{u.preventDefault(),n(u);break}case"F6":{u.preventDefault();const c=s.getAttribute(sn.groupId);rt(c,`No group element found for id "${c}"`);const d=Kh(c,r),f=KC(c,e,r);rt(f!==null,`No resize element found for id "${e}"`);const m=u.shiftKey?f>0?f-1:d.length-1:f+1<d.length?f+1:0;d[m].focus();break}}};return s.addEventListener("keydown",o),()=>{s.removeEventListener("keydown",o)}},[r,t,e,n])}function rI({children:t=null,className:e="",disabled:n=!1,hitAreaMargins:r,id:s,onBlur:o,onClick:u,onDragging:c,onFocus:d,onPointerDown:f,onPointerUp:m,style:y={},tabIndex:b=0,tagName:T="div",...w}){var I,L;const k=Q.useRef(null),q=Q.useRef({onClick:u,onDragging:c,onPointerDown:f,onPointerUp:m});Q.useEffect(()=>{q.current.onClick=u,q.current.onDragging=c,q.current.onPointerDown=f,q.current.onPointerUp=m});const $=Q.useContext(wp);if($===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:j,groupId:te,registerResizeHandle:Y,startDragging:M,stopDragging:N,panelGroupElement:D}=$,U=N1(s),[B,V]=Q.useState("inactive"),[C,O]=Q.useState(!1),[K,z]=Q.useState(null),J=Q.useRef({state:B});zo(()=>{J.current.state=B}),Q.useEffect(()=>{if(n)z(null);else{const ee=Y(U);z(()=>ee)}},[n,U,Y]);const se=(I=r?.coarse)!==null&&I!==void 0?I:15,re=(L=r?.fine)!==null&&L!==void 0?L:5;Q.useEffect(()=>{if(n||K==null)return;const ee=k.current;rt(ee,"Element ref not attached");let ae=!1;return aM(U,ee,j,{coarse:se,fine:re},(oe,Ee,me)=>{if(!Ee){V("inactive");return}switch(oe){case"down":{V("drag"),ae=!1,rt(me,'Expected event to be defined for "down" action'),M(U,me);const{onDragging:we,onPointerDown:Ce}=q.current;we?.(!0),Ce?.();break}case"move":{const{state:we}=J.current;ae=!0,we!=="drag"&&V("hover"),rt(me,'Expected event to be defined for "move" action'),K(me);break}case"up":{V("hover"),N();const{onClick:we,onDragging:Ce,onPointerUp:Le}=q.current;Ce?.(!1),Le?.(),ae||we?.();break}}})},[se,j,n,re,Y,U,K,M,N]),vM({disabled:n,handleId:U,resizeHandler:K,panelGroupElement:D});const A={touchAction:"none",userSelect:"none"};return Q.createElement(T,{...w,children:t,className:e,id:s,onBlur:()=>{O(!1),o?.()},onFocus:()=>{O(!0),d?.()},ref:k,role:"separator",style:{...A,...y},tabIndex:b,[sn.groupDirection]:j,[sn.groupId]:te,[sn.resizeHandle]:"",[sn.resizeHandleActive]:B==="drag"?"pointer":C?"keyboard":void 0,[sn.resizeHandleEnabled]:!n,[sn.resizeHandleId]:U,[sn.resizeHandleState]:B})}rI.displayName="PanelResizeHandle";const AM=()=>{};var wA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},SM=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],u=t[n++],c=t[n++],d=((s&7)<<18|(o&63)<<12|(u&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],u=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|u&63)}}return e.join("")},sI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],u=s+1<t.length,c=u?t[s+1]:0,d=s+2<t.length,f=d?t[s+2]:0,m=o>>2,y=(o&3)<<4|c>>4;let b=(c&15)<<2|f>>6,T=f&63;d||(T=64,u||(b=64)),r.push(n[m],n[y],n[b],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(iI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const y=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||f==null||y==null)throw new xM;const b=o<<2|c>>4;if(r.push(b),f!==64){const T=c<<4&240|f>>2;if(r.push(T),y!==64){const w=f<<6&192|y;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wM=function(t){const e=iI(t);return sI.encodeByteArray(e,!0)},$0=function(t){return wM(t).replace(/\./g,"")},aI=function(t){try{return sI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM=()=>CM().__FIREBASE_DEFAULTS__,NM=()=>{if(typeof process>"u"||typeof wA>"u")return;const t=wA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&aI(t[1]);return e&&JSON.parse(e)},Rp=()=>{try{return AM()||IM()||NM()||RM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},oI=t=>{var e,n;return(n=(e=Rp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},uI=t=>{const e=oI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lI=()=>{var t;return(t=Rp())===null||t===void 0?void 0:t.config},cI=t=>{var e;return(e=Rp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t){return t.endsWith(".cloudworkstations.dev")}async function D1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[$0(JSON.stringify(n)),$0(JSON.stringify(u)),""].join(".")}const Sh={};function OM(){const t={prod:[],emulator:[]};for(const e of Object.keys(Sh))Sh[e]?t.emulator.push(e):t.prod.push(e);return t}function LM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let CA=!1;function O1(t,e){if(typeof window>"u"||typeof document>"u"||!Zo(window.location.host)||Sh[t]===e||Sh[t]||CA)return;Sh[t]=e;function n(b){return`__firebase__banner__${b}`}const r="__firebase__banner",o=OM().prod.length>0;function u(){const b=document.getElementById(r);b&&b.remove()}function c(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function d(b,T){b.setAttribute("width","24"),b.setAttribute("id",T),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function f(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{CA=!0,u()},b}function m(b,T){b.setAttribute("id",T),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function y(){const b=LM(r),T=n("text"),w=document.getElementById(T)||document.createElement("span"),I=n("learnmore"),L=document.getElementById(I)||document.createElement("a"),k=n("preprendIcon"),q=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const $=b.element;c($),m(L,I);const j=f();d(q,k),$.append(q,w,L,j),document.body.appendChild($)}o?(w.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nr())}function MM(){var t;const e=(t=Rp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function UM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function VM(){const t=nr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zM(){return!MM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FM(){try{return typeof indexedDB=="object"}catch{return!1}}function jM(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM="FirebaseError";class cs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=qM,Object.setPrototypeOf(this,cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fd.prototype.create)}}class fd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],u=o?YM(o,r):"Error",c=`${this.serviceName}: ${u} (${s}).`;return new cs(s,c,r)}}function YM(t,e){return t.replace(GM,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const GM=/\{\$([^}]+)}/g;function $M(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],u=e[s];if(IA(o)&&IA(u)){if(!Yo(o,u))return!1}else if(o!==u)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function IA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Eh(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function _h(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function KM(t,e){const n=new XM(t,e);return n.subscribe.bind(n)}class XM{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");QM(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ny),s.error===void 0&&(s.error=Ny),s.complete===void 0&&(s.complete=Ny);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ny(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t){return t&&t._delegate?t._delegate:t}class qa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kM;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JM(e))try{this.getOrInitializeService({instanceIdentifier:Po})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Po){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Po){return this.instances.has(e)}getOptions(e=Po){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,u]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&u.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Po){return this.component?this.component.multipleInstances?e:Po:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZM(t){return t===Po?void 0:t}function JM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ft||(ft={}));const t8={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},n8=ft.INFO,r8={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},i8=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=r8[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class L1{constructor(e){this.name=e,this._logLevel=n8,this._logHandler=i8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?t8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}const s8=(t,e)=>e.some(n=>t instanceof n);let NA,RA;function a8(){return NA||(NA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function o8(){return RA||(RA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hI=new WeakMap,TE=new WeakMap,dI=new WeakMap,Ry=new WeakMap,P1=new WeakMap;function u8(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",u)},o=()=>{n(Ua(t.result)),s()},u=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&hI.set(n,t)}).catch(()=>{}),P1.set(e,t),e}function l8(t){if(TE.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",u),t.removeEventListener("abort",u)},o=()=>{n(),s()},u=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",u),t.addEventListener("abort",u)});TE.set(t,e)}let vE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return TE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ua(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function c8(t){vE=t(vE)}function h8(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ky(this),e,...n);return dI.set(r,e.sort?e.sort():[e]),Ua(r)}:o8().includes(t)?function(...e){return t.apply(ky(this),e),Ua(hI.get(this))}:function(...e){return Ua(t.apply(ky(this),e))}}function d8(t){return typeof t=="function"?h8(t):(t instanceof IDBTransaction&&l8(t),s8(t,a8())?new Proxy(t,vE):t)}function Ua(t){if(t instanceof IDBRequest)return u8(t);if(Ry.has(t))return Ry.get(t);const e=d8(t);return e!==t&&(Ry.set(t,e),P1.set(e,t)),e}const ky=t=>P1.get(t);function f8(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const u=indexedDB.open(t,e),c=Ua(u);return r&&u.addEventListener("upgradeneeded",d=>{r(Ua(u.result),d.oldVersion,d.newVersion,Ua(u.transaction),d)}),n&&u.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),c.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const p8=["get","getKey","getAll","getAllKeys","count"],m8=["put","add","delete","clear"],Dy=new Map;function kA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dy.get(e))return Dy.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=m8.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||p8.includes(n)))return;const o=async function(u,...c){const d=this.transaction(u,s?"readwrite":"readonly");let f=d.store;return r&&(f=f.index(c.shift())),(await Promise.all([f[n](...c),s&&d.done]))[0]};return Dy.set(e,o),o}c8(t=>({...t,get:(e,n,r)=>kA(e,n)||t.get(e,n,r),has:(e,n)=>!!kA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(y8(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function y8(t){const e=t.getComponent();return e?.type==="VERSION"}const AE="@firebase/app",DA="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new L1("@firebase/app"),E8="@firebase/app-compat",_8="@firebase/analytics-compat",b8="@firebase/analytics",T8="@firebase/app-check-compat",v8="@firebase/app-check",A8="@firebase/auth",S8="@firebase/auth-compat",x8="@firebase/database",w8="@firebase/data-connect",C8="@firebase/database-compat",I8="@firebase/functions",N8="@firebase/functions-compat",R8="@firebase/installations",k8="@firebase/installations-compat",D8="@firebase/messaging",O8="@firebase/messaging-compat",L8="@firebase/performance",P8="@firebase/performance-compat",M8="@firebase/remote-config",B8="@firebase/remote-config-compat",U8="@firebase/storage",H8="@firebase/storage-compat",V8="@firebase/firestore",z8="@firebase/ai",F8="@firebase/firestore-compat",j8="firebase",q8="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="[DEFAULT]",Y8={[AE]:"fire-core",[E8]:"fire-core-compat",[b8]:"fire-analytics",[_8]:"fire-analytics-compat",[v8]:"fire-app-check",[T8]:"fire-app-check-compat",[A8]:"fire-auth",[S8]:"fire-auth-compat",[x8]:"fire-rtdb",[w8]:"fire-data-connect",[C8]:"fire-rtdb-compat",[I8]:"fire-fn",[N8]:"fire-fn-compat",[R8]:"fire-iid",[k8]:"fire-iid-compat",[D8]:"fire-fcm",[O8]:"fire-fcm-compat",[L8]:"fire-perf",[P8]:"fire-perf-compat",[M8]:"fire-rc",[B8]:"fire-rc-compat",[U8]:"fire-gcs",[H8]:"fire-gcs-compat",[V8]:"fire-fst",[F8]:"fire-fst-compat",[z8]:"fire-vertex","fire-js":"fire-js",[j8]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=new Map,G8=new Map,xE=new Map;function OA(t,e){try{t.container.addComponent(e)}catch(n){qs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Go(t){const e=t.name;if(xE.has(e))return qs.debug(`There were multiple attempts to register component ${e}.`),!1;xE.set(e,t);for(const n of K0.values())OA(n,t);for(const n of G8.values())OA(n,t);return!0}function kp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Hr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ha=new fd("app","Firebase",$8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K8{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ha.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=q8;function fI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:SE,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Ha.create("bad-app-name",{appName:String(s)});if(n||(n=lI()),!n)throw Ha.create("no-options");const o=K0.get(s);if(o){if(Yo(n,o.options)&&Yo(r,o.config))return o;throw Ha.create("duplicate-app",{appName:s})}const u=new e8(s);for(const d of xE.values())u.addComponent(d);const c=new K8(n,r,u);return K0.set(s,c),c}function M1(t=SE){const e=K0.get(t);if(!e&&t===SE&&lI())return fI();if(!e)throw Ha.create("no-app",{appName:t});return e}function ns(t,e,n){var r;let s=(r=Y8[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&c.push("and"),u&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qs.warn(c.join(" "));return}Go(new qa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8="firebase-heartbeat-database",Q8=1,Xh="firebase-heartbeat-store";let Oy=null;function pI(){return Oy||(Oy=f8(X8,Q8,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Xh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ha.create("idb-open",{originalErrorMessage:t.message})})),Oy}async function W8(t){try{const n=(await pI()).transaction(Xh),r=await n.objectStore(Xh).get(mI(t));return await n.done,r}catch(e){if(e instanceof cs)qs.warn(e.message);else{const n=Ha.create("idb-get",{originalErrorMessage:e?.message});qs.warn(n.message)}}}async function LA(t,e){try{const r=(await pI()).transaction(Xh,"readwrite");await r.objectStore(Xh).put(e,mI(t)),await r.done}catch(n){if(n instanceof cs)qs.warn(n.message);else{const r=Ha.create("idb-set",{originalErrorMessage:n?.message});qs.warn(r.message)}}}function mI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8=1024,J8=30;class e9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new n9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=PA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>J8){const u=r9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=PA(),{heartbeatsToSend:r,unsentEntries:s}=t9(this._heartbeatsCache.heartbeats),o=$0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return qs.warn(n),""}}}function PA(){return new Date().toISOString().substring(0,10)}function t9(t,e=Z8){const n=[];let r=t.slice();for(const s of t){const o=n.find(u=>u.agent===s.agent);if(o){if(o.dates.push(s.date),MA(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),MA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class n9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FM()?jM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await W8(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return LA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return LA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function MA(t){return $0(JSON.stringify({version:2,heartbeats:t})).length}function r9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(t){Go(new qa("platform-logger",e=>new g8(e),"PRIVATE")),Go(new qa("heartbeat",e=>new e9(e),"PRIVATE")),ns(AE,DA,t),ns(AE,DA,"esm2017"),ns("fire-js","")}i9("");var s9="firebase",a9="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns(s9,a9,"app");var BA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Va,gI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,N){function D(){}D.prototype=N.prototype,M.D=N.prototype,M.prototype=new D,M.prototype.constructor=M,M.C=function(U,B,V){for(var C=Array(arguments.length-2),O=2;O<arguments.length;O++)C[O-2]=arguments[O];return N.prototype[B].apply(U,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(M,N,D){D||(D=0);var U=Array(16);if(typeof N=="string")for(var B=0;16>B;++B)U[B]=N.charCodeAt(D++)|N.charCodeAt(D++)<<8|N.charCodeAt(D++)<<16|N.charCodeAt(D++)<<24;else for(B=0;16>B;++B)U[B]=N[D++]|N[D++]<<8|N[D++]<<16|N[D++]<<24;N=M.g[0],D=M.g[1],B=M.g[2];var V=M.g[3],C=N+(V^D&(B^V))+U[0]+3614090360&4294967295;N=D+(C<<7&4294967295|C>>>25),C=V+(B^N&(D^B))+U[1]+3905402710&4294967295,V=N+(C<<12&4294967295|C>>>20),C=B+(D^V&(N^D))+U[2]+606105819&4294967295,B=V+(C<<17&4294967295|C>>>15),C=D+(N^B&(V^N))+U[3]+3250441966&4294967295,D=B+(C<<22&4294967295|C>>>10),C=N+(V^D&(B^V))+U[4]+4118548399&4294967295,N=D+(C<<7&4294967295|C>>>25),C=V+(B^N&(D^B))+U[5]+1200080426&4294967295,V=N+(C<<12&4294967295|C>>>20),C=B+(D^V&(N^D))+U[6]+2821735955&4294967295,B=V+(C<<17&4294967295|C>>>15),C=D+(N^B&(V^N))+U[7]+4249261313&4294967295,D=B+(C<<22&4294967295|C>>>10),C=N+(V^D&(B^V))+U[8]+1770035416&4294967295,N=D+(C<<7&4294967295|C>>>25),C=V+(B^N&(D^B))+U[9]+2336552879&4294967295,V=N+(C<<12&4294967295|C>>>20),C=B+(D^V&(N^D))+U[10]+4294925233&4294967295,B=V+(C<<17&4294967295|C>>>15),C=D+(N^B&(V^N))+U[11]+2304563134&4294967295,D=B+(C<<22&4294967295|C>>>10),C=N+(V^D&(B^V))+U[12]+1804603682&4294967295,N=D+(C<<7&4294967295|C>>>25),C=V+(B^N&(D^B))+U[13]+4254626195&4294967295,V=N+(C<<12&4294967295|C>>>20),C=B+(D^V&(N^D))+U[14]+2792965006&4294967295,B=V+(C<<17&4294967295|C>>>15),C=D+(N^B&(V^N))+U[15]+1236535329&4294967295,D=B+(C<<22&4294967295|C>>>10),C=N+(B^V&(D^B))+U[1]+4129170786&4294967295,N=D+(C<<5&4294967295|C>>>27),C=V+(D^B&(N^D))+U[6]+3225465664&4294967295,V=N+(C<<9&4294967295|C>>>23),C=B+(N^D&(V^N))+U[11]+643717713&4294967295,B=V+(C<<14&4294967295|C>>>18),C=D+(V^N&(B^V))+U[0]+3921069994&4294967295,D=B+(C<<20&4294967295|C>>>12),C=N+(B^V&(D^B))+U[5]+3593408605&4294967295,N=D+(C<<5&4294967295|C>>>27),C=V+(D^B&(N^D))+U[10]+38016083&4294967295,V=N+(C<<9&4294967295|C>>>23),C=B+(N^D&(V^N))+U[15]+3634488961&4294967295,B=V+(C<<14&4294967295|C>>>18),C=D+(V^N&(B^V))+U[4]+3889429448&4294967295,D=B+(C<<20&4294967295|C>>>12),C=N+(B^V&(D^B))+U[9]+568446438&4294967295,N=D+(C<<5&4294967295|C>>>27),C=V+(D^B&(N^D))+U[14]+3275163606&4294967295,V=N+(C<<9&4294967295|C>>>23),C=B+(N^D&(V^N))+U[3]+4107603335&4294967295,B=V+(C<<14&4294967295|C>>>18),C=D+(V^N&(B^V))+U[8]+1163531501&4294967295,D=B+(C<<20&4294967295|C>>>12),C=N+(B^V&(D^B))+U[13]+2850285829&4294967295,N=D+(C<<5&4294967295|C>>>27),C=V+(D^B&(N^D))+U[2]+4243563512&4294967295,V=N+(C<<9&4294967295|C>>>23),C=B+(N^D&(V^N))+U[7]+1735328473&4294967295,B=V+(C<<14&4294967295|C>>>18),C=D+(V^N&(B^V))+U[12]+2368359562&4294967295,D=B+(C<<20&4294967295|C>>>12),C=N+(D^B^V)+U[5]+4294588738&4294967295,N=D+(C<<4&4294967295|C>>>28),C=V+(N^D^B)+U[8]+2272392833&4294967295,V=N+(C<<11&4294967295|C>>>21),C=B+(V^N^D)+U[11]+1839030562&4294967295,B=V+(C<<16&4294967295|C>>>16),C=D+(B^V^N)+U[14]+4259657740&4294967295,D=B+(C<<23&4294967295|C>>>9),C=N+(D^B^V)+U[1]+2763975236&4294967295,N=D+(C<<4&4294967295|C>>>28),C=V+(N^D^B)+U[4]+1272893353&4294967295,V=N+(C<<11&4294967295|C>>>21),C=B+(V^N^D)+U[7]+4139469664&4294967295,B=V+(C<<16&4294967295|C>>>16),C=D+(B^V^N)+U[10]+3200236656&4294967295,D=B+(C<<23&4294967295|C>>>9),C=N+(D^B^V)+U[13]+681279174&4294967295,N=D+(C<<4&4294967295|C>>>28),C=V+(N^D^B)+U[0]+3936430074&4294967295,V=N+(C<<11&4294967295|C>>>21),C=B+(V^N^D)+U[3]+3572445317&4294967295,B=V+(C<<16&4294967295|C>>>16),C=D+(B^V^N)+U[6]+76029189&4294967295,D=B+(C<<23&4294967295|C>>>9),C=N+(D^B^V)+U[9]+3654602809&4294967295,N=D+(C<<4&4294967295|C>>>28),C=V+(N^D^B)+U[12]+3873151461&4294967295,V=N+(C<<11&4294967295|C>>>21),C=B+(V^N^D)+U[15]+530742520&4294967295,B=V+(C<<16&4294967295|C>>>16),C=D+(B^V^N)+U[2]+3299628645&4294967295,D=B+(C<<23&4294967295|C>>>9),C=N+(B^(D|~V))+U[0]+4096336452&4294967295,N=D+(C<<6&4294967295|C>>>26),C=V+(D^(N|~B))+U[7]+1126891415&4294967295,V=N+(C<<10&4294967295|C>>>22),C=B+(N^(V|~D))+U[14]+2878612391&4294967295,B=V+(C<<15&4294967295|C>>>17),C=D+(V^(B|~N))+U[5]+4237533241&4294967295,D=B+(C<<21&4294967295|C>>>11),C=N+(B^(D|~V))+U[12]+1700485571&4294967295,N=D+(C<<6&4294967295|C>>>26),C=V+(D^(N|~B))+U[3]+2399980690&4294967295,V=N+(C<<10&4294967295|C>>>22),C=B+(N^(V|~D))+U[10]+4293915773&4294967295,B=V+(C<<15&4294967295|C>>>17),C=D+(V^(B|~N))+U[1]+2240044497&4294967295,D=B+(C<<21&4294967295|C>>>11),C=N+(B^(D|~V))+U[8]+1873313359&4294967295,N=D+(C<<6&4294967295|C>>>26),C=V+(D^(N|~B))+U[15]+4264355552&4294967295,V=N+(C<<10&4294967295|C>>>22),C=B+(N^(V|~D))+U[6]+2734768916&4294967295,B=V+(C<<15&4294967295|C>>>17),C=D+(V^(B|~N))+U[13]+1309151649&4294967295,D=B+(C<<21&4294967295|C>>>11),C=N+(B^(D|~V))+U[4]+4149444226&4294967295,N=D+(C<<6&4294967295|C>>>26),C=V+(D^(N|~B))+U[11]+3174756917&4294967295,V=N+(C<<10&4294967295|C>>>22),C=B+(N^(V|~D))+U[2]+718787259&4294967295,B=V+(C<<15&4294967295|C>>>17),C=D+(V^(B|~N))+U[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(B+(C<<21&4294967295|C>>>11))&4294967295,M.g[2]=M.g[2]+B&4294967295,M.g[3]=M.g[3]+V&4294967295}r.prototype.u=function(M,N){N===void 0&&(N=M.length);for(var D=N-this.blockSize,U=this.B,B=this.h,V=0;V<N;){if(B==0)for(;V<=D;)s(this,M,V),V+=this.blockSize;if(typeof M=="string"){for(;V<N;)if(U[B++]=M.charCodeAt(V++),B==this.blockSize){s(this,U),B=0;break}}else for(;V<N;)if(U[B++]=M[V++],B==this.blockSize){s(this,U),B=0;break}}this.h=B,this.o+=N},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;var D=8*this.o;for(N=M.length-8;N<M.length;++N)M[N]=D&255,D/=256;for(this.u(M),M=Array(16),N=D=0;4>N;++N)for(var U=0;32>U;U+=8)M[D++]=this.g[N]>>>U&255;return M};function o(M,N){var D=c;return Object.prototype.hasOwnProperty.call(D,M)?D[M]:D[M]=N(M)}function u(M,N){this.h=N;for(var D=[],U=!0,B=M.length-1;0<=B;B--){var V=M[B]|0;U&&V==N||(D[B]=V,U=!1)}this.g=D}var c={};function d(M){return-128<=M&&128>M?o(M,function(N){return new u([N|0],0>N?-1:0)}):new u([M|0],0>M?-1:0)}function f(M){if(isNaN(M)||!isFinite(M))return y;if(0>M)return L(f(-M));for(var N=[],D=1,U=0;M>=D;U++)N[U]=M/D|0,D*=4294967296;return new u(N,0)}function m(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return L(m(M.substring(1),N));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(N,8)),U=y,B=0;B<M.length;B+=8){var V=Math.min(8,M.length-B),C=parseInt(M.substring(B,B+V),N);8>V?(V=f(Math.pow(N,V)),U=U.j(V).add(f(C))):(U=U.j(D),U=U.add(f(C)))}return U}var y=d(0),b=d(1),T=d(16777216);t=u.prototype,t.m=function(){if(I(this))return-L(this).m();for(var M=0,N=1,D=0;D<this.g.length;D++){var U=this.i(D);M+=(0<=U?U:4294967296+U)*N,N*=4294967296}return M},t.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(w(this))return"0";if(I(this))return"-"+L(this).toString(M);for(var N=f(Math.pow(M,6)),D=this,U="";;){var B=j(D,N).g;D=k(D,B.j(N));var V=((0<D.g.length?D.g[0]:D.h)>>>0).toString(M);if(D=B,w(D))return V+U;for(;6>V.length;)V="0"+V;U=V+U}},t.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function w(M){if(M.h!=0)return!1;for(var N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function I(M){return M.h==-1}t.l=function(M){return M=k(this,M),I(M)?-1:w(M)?0:1};function L(M){for(var N=M.g.length,D=[],U=0;U<N;U++)D[U]=~M.g[U];return new u(D,~M.h).add(b)}t.abs=function(){return I(this)?L(this):this},t.add=function(M){for(var N=Math.max(this.g.length,M.g.length),D=[],U=0,B=0;B<=N;B++){var V=U+(this.i(B)&65535)+(M.i(B)&65535),C=(V>>>16)+(this.i(B)>>>16)+(M.i(B)>>>16);U=C>>>16,V&=65535,C&=65535,D[B]=C<<16|V}return new u(D,D[D.length-1]&-2147483648?-1:0)};function k(M,N){return M.add(L(N))}t.j=function(M){if(w(this)||w(M))return y;if(I(this))return I(M)?L(this).j(L(M)):L(L(this).j(M));if(I(M))return L(this.j(L(M)));if(0>this.l(T)&&0>M.l(T))return f(this.m()*M.m());for(var N=this.g.length+M.g.length,D=[],U=0;U<2*N;U++)D[U]=0;for(U=0;U<this.g.length;U++)for(var B=0;B<M.g.length;B++){var V=this.i(U)>>>16,C=this.i(U)&65535,O=M.i(B)>>>16,K=M.i(B)&65535;D[2*U+2*B]+=C*K,q(D,2*U+2*B),D[2*U+2*B+1]+=V*K,q(D,2*U+2*B+1),D[2*U+2*B+1]+=C*O,q(D,2*U+2*B+1),D[2*U+2*B+2]+=V*O,q(D,2*U+2*B+2)}for(U=0;U<N;U++)D[U]=D[2*U+1]<<16|D[2*U];for(U=N;U<2*N;U++)D[U]=0;return new u(D,0)};function q(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function $(M,N){this.g=M,this.h=N}function j(M,N){if(w(N))throw Error("division by zero");if(w(M))return new $(y,y);if(I(M))return N=j(L(M),N),new $(L(N.g),L(N.h));if(I(N))return N=j(M,L(N)),new $(L(N.g),N.h);if(30<M.g.length){if(I(M)||I(N))throw Error("slowDivide_ only works with positive integers.");for(var D=b,U=N;0>=U.l(M);)D=te(D),U=te(U);var B=Y(D,1),V=Y(U,1);for(U=Y(U,2),D=Y(D,2);!w(U);){var C=V.add(U);0>=C.l(M)&&(B=B.add(D),V=C),U=Y(U,1),D=Y(D,1)}return N=k(M,B.j(N)),new $(B,N)}for(B=y;0<=M.l(N);){for(D=Math.max(1,Math.floor(M.m()/N.m())),U=Math.ceil(Math.log(D)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),V=f(D),C=V.j(N);I(C)||0<C.l(M);)D-=U,V=f(D),C=V.j(N);w(V)&&(V=b),B=B.add(V),M=k(M,C)}return new $(B,M)}t.A=function(M){return j(this,M).h},t.and=function(M){for(var N=Math.max(this.g.length,M.g.length),D=[],U=0;U<N;U++)D[U]=this.i(U)&M.i(U);return new u(D,this.h&M.h)},t.or=function(M){for(var N=Math.max(this.g.length,M.g.length),D=[],U=0;U<N;U++)D[U]=this.i(U)|M.i(U);return new u(D,this.h|M.h)},t.xor=function(M){for(var N=Math.max(this.g.length,M.g.length),D=[],U=0;U<N;U++)D[U]=this.i(U)^M.i(U);return new u(D,this.h^M.h)};function te(M){for(var N=M.g.length+1,D=[],U=0;U<N;U++)D[U]=M.i(U)<<1|M.i(U-1)>>>31;return new u(D,M.h)}function Y(M,N){var D=N>>5;N%=32;for(var U=M.g.length-D,B=[],V=0;V<U;V++)B[V]=0<N?M.i(V+D)>>>N|M.i(V+D+1)<<32-N:M.i(V+D);return new u(B,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gI=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=f,u.fromString=m,Va=u}).apply(typeof BA<"u"?BA:typeof self<"u"?self:typeof window<"u"?window:{});var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yI,bh,EI,v0,wE,_I,bI,TI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,v,S){return p==Array.prototype||p==Object.prototype||(p[v]=S.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof a0=="object"&&a0];for(var v=0;v<p.length;++v){var S=p[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function s(p,v){if(v)e:{var S=r;p=p.split(".");for(var F=0;F<p.length-1;F++){var ue=p[F];if(!(ue in S))break e;S=S[ue]}p=p[p.length-1],F=S[p],v=v(F),v!=F&&v!=null&&e(S,p,{configurable:!0,writable:!0,value:v})}}function o(p,v){p instanceof String&&(p+="");var S=0,F=!1,ue={next:function(){if(!F&&S<p.length){var ge=S++;return{value:v(ge,p[ge]),done:!1}}return F=!0,{done:!0,value:void 0}}};return ue[Symbol.iterator]=function(){return ue},ue}s("Array.prototype.values",function(p){return p||function(){return o(this,function(v,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},c=this||self;function d(p){var v=typeof p;return v=v!="object"?v:p?Array.isArray(p)?"array":v:"null",v=="array"||v=="object"&&typeof p.length=="number"}function f(p){var v=typeof p;return v=="object"&&p!=null||v=="function"}function m(p,v,S){return p.call.apply(p.bind,arguments)}function y(p,v,S){if(!p)throw Error();if(2<arguments.length){var F=Array.prototype.slice.call(arguments,2);return function(){var ue=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ue,F),p.apply(v,ue)}}return function(){return p.apply(v,arguments)}}function b(p,v,S){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:y,b.apply(null,arguments)}function T(p,v){var S=Array.prototype.slice.call(arguments,1);return function(){var F=S.slice();return F.push.apply(F,arguments),p.apply(this,F)}}function w(p,v){function S(){}S.prototype=v.prototype,p.aa=v.prototype,p.prototype=new S,p.prototype.constructor=p,p.Qb=function(F,ue,ge){for(var De=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)De[yt-2]=arguments[yt];return v.prototype[ue].apply(F,De)}}function I(p){const v=p.length;if(0<v){const S=Array(v);for(let F=0;F<v;F++)S[F]=p[F];return S}return[]}function L(p,v){for(let S=1;S<arguments.length;S++){const F=arguments[S];if(d(F)){const ue=p.length||0,ge=F.length||0;p.length=ue+ge;for(let De=0;De<ge;De++)p[ue+De]=F[De]}else p.push(F)}}class k{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function q(p){return/^[\s\xa0]*$/.test(p)}function $(){var p=c.navigator;return p&&(p=p.userAgent)?p:""}function j(p){return j[" "](p),p}j[" "]=function(){};var te=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function Y(p,v,S){for(const F in p)v.call(S,p[F],F,p)}function M(p,v){for(const S in p)v.call(void 0,p[S],S,p)}function N(p){const v={};for(const S in p)v[S]=p[S];return v}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(p,v){let S,F;for(let ue=1;ue<arguments.length;ue++){F=arguments[ue];for(S in F)p[S]=F[S];for(let ge=0;ge<D.length;ge++)S=D[ge],Object.prototype.hasOwnProperty.call(F,S)&&(p[S]=F[S])}}function B(p){var v=1;p=p.split(":");const S=[];for(;0<v&&p.length;)S.push(p.shift()),v--;return p.length&&S.push(p.join(":")),S}function V(p){c.setTimeout(()=>{throw p},0)}function C(){var p=re;let v=null;return p.g&&(v=p.g,p.g=p.g.next,p.g||(p.h=null),v.next=null),v}class O{constructor(){this.h=this.g=null}add(v,S){const F=K.get();F.set(v,S),this.h?this.h.next=F:this.g=F,this.h=F}}var K=new k(()=>new z,p=>p.reset());class z{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let J,se=!1,re=new O,A=()=>{const p=c.Promise.resolve(void 0);J=()=>{p.then(ee)}};var ee=()=>{for(var p;p=C();){try{p.h.call(p.g)}catch(S){V(S)}var v=K;v.j(p),100>v.h&&(v.h++,p.next=v.g,v.g=p)}se=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(p,v){this.type=p,this.g=this.target=v,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,v=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const S=()=>{};c.addEventListener("test",S,v),c.removeEventListener("test",S,v)}catch{}return p}();function Ee(p,v){if(R.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var S=this.type=p.type,F=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=v,v=p.relatedTarget){if(te){e:{try{j(v.nodeName);var ue=!0;break e}catch{}ue=!1}ue||(v=null)}}else S=="mouseover"?v=p.fromElement:S=="mouseout"&&(v=p.toElement);this.relatedTarget=v,F?(this.clientX=F.clientX!==void 0?F.clientX:F.pageX,this.clientY=F.clientY!==void 0?F.clientY:F.pageY,this.screenX=F.screenX||0,this.screenY=F.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:me[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Ee.aa.h.call(this)}}w(Ee,R);var me={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function Le(p,v,S,F,ue){this.listener=p,this.proxy=null,this.src=v,this.type=S,this.capture=!!F,this.ha=ue,this.key=++Ce,this.da=this.fa=!1}function Ve(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ct(p){this.src=p,this.g={},this.h=0}ct.prototype.add=function(p,v,S,F,ue){var ge=p.toString();p=this.g[ge],p||(p=this.g[ge]=[],this.h++);var De=Ze(p,v,F,ue);return-1<De?(v=p[De],S||(v.fa=!1)):(v=new Le(v,this.src,ge,!!F,ue),v.fa=S,p.push(v)),v};function Tt(p,v){var S=v.type;if(S in p.g){var F=p.g[S],ue=Array.prototype.indexOf.call(F,v,void 0),ge;(ge=0<=ue)&&Array.prototype.splice.call(F,ue,1),ge&&(Ve(v),p.g[S].length==0&&(delete p.g[S],p.h--))}}function Ze(p,v,S,F){for(var ue=0;ue<p.length;++ue){var ge=p[ue];if(!ge.da&&ge.listener==v&&ge.capture==!!S&&ge.ha==F)return ue}return-1}var mt="closure_lm_"+(1e6*Math.random()|0),gt={};function Xt(p,v,S,F,ue){if(Array.isArray(v)){for(var ge=0;ge<v.length;ge++)Xt(p,v[ge],S,F,ue);return null}return S=Sr(S),p&&p[we]?p.K(v,S,f(F)?!!F.capture:!1,ue):Qe(p,v,S,!1,F,ue)}function Qe(p,v,S,F,ue,ge){if(!v)throw Error("Invalid event type");var De=f(ue)?!!ue.capture:!!ue,yt=Vn(p);if(yt||(p[mt]=yt=new ct(p)),S=yt.add(v,S,F,De,ge),S.proxy)return S;if(F=Oe(),S.proxy=F,F.src=p,F.listener=S,p.addEventListener)oe||(ue=De),ue===void 0&&(ue=!1),p.addEventListener(v.toString(),F,ue);else if(p.attachEvent)p.attachEvent(un(v.toString()),F);else if(p.addListener&&p.removeListener)p.addListener(F);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Oe(){function p(S){return v.call(p.src,p.listener,S)}const v=sr;return p}function Ft(p,v,S,F,ue){if(Array.isArray(v))for(var ge=0;ge<v.length;ge++)Ft(p,v[ge],S,F,ue);else F=f(F)?!!F.capture:!!F,S=Sr(S),p&&p[we]?(p=p.i,v=String(v).toString(),v in p.g&&(ge=p.g[v],S=Ze(ge,S,F,ue),-1<S&&(Ve(ge[S]),Array.prototype.splice.call(ge,S,1),ge.length==0&&(delete p.g[v],p.h--)))):p&&(p=Vn(p))&&(v=p.g[v.toString()],p=-1,v&&(p=Ze(v,S,F,ue)),(S=-1<p?v[p]:null)&&An(S))}function An(p){if(typeof p!="number"&&p&&!p.da){var v=p.src;if(v&&v[we])Tt(v.i,p);else{var S=p.type,F=p.proxy;v.removeEventListener?v.removeEventListener(S,F,p.capture):v.detachEvent?v.detachEvent(un(S),F):v.addListener&&v.removeListener&&v.removeListener(F),(S=Vn(v))?(Tt(S,p),S.h==0&&(S.src=null,v[mt]=null)):Ve(p)}}}function un(p){return p in gt?gt[p]:gt[p]="on"+p}function sr(p,v){if(p.da)p=!0;else{v=new Ee(v,this);var S=p.listener,F=p.ha||p.src;p.fa&&An(p),p=S.call(F,v)}return p}function Vn(p){return p=p[mt],p instanceof ct?p:null}var zn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Sr(p){return typeof p=="function"?p:(p[zn]||(p[zn]=function(v){return p.handleEvent(v)}),p[zn])}function fe(){ae.call(this),this.i=new ct(this),this.M=this,this.F=null}w(fe,ae),fe.prototype[we]=!0,fe.prototype.removeEventListener=function(p,v,S,F){Ft(this,p,v,S,F)};function Te(p,v){var S,F=p.F;if(F)for(S=[];F;F=F.F)S.push(F);if(p=p.M,F=v.type||v,typeof v=="string")v=new R(v,p);else if(v instanceof R)v.target=v.target||p;else{var ue=v;v=new R(F,p),U(v,ue)}if(ue=!0,S)for(var ge=S.length-1;0<=ge;ge--){var De=v.g=S[ge];ue=Be(De,F,!0,v)&&ue}if(De=v.g=p,ue=Be(De,F,!0,v)&&ue,ue=Be(De,F,!1,v)&&ue,S)for(ge=0;ge<S.length;ge++)De=v.g=S[ge],ue=Be(De,F,!1,v)&&ue}fe.prototype.N=function(){if(fe.aa.N.call(this),this.i){var p=this.i,v;for(v in p.g){for(var S=p.g[v],F=0;F<S.length;F++)Ve(S[F]);delete p.g[v],p.h--}}this.F=null},fe.prototype.K=function(p,v,S,F){return this.i.add(String(p),v,!1,S,F)},fe.prototype.L=function(p,v,S,F){return this.i.add(String(p),v,!0,S,F)};function Be(p,v,S,F){if(v=p.i.g[String(v)],!v)return!0;v=v.concat();for(var ue=!0,ge=0;ge<v.length;++ge){var De=v[ge];if(De&&!De.da&&De.capture==S){var yt=De.listener,wn=De.ha||De.src;De.fa&&Tt(p.i,De),ue=yt.call(wn,F)!==!1&&ue}}return ue&&!F.defaultPrevented}function ze(p,v,S){if(typeof p=="function")S&&(p=b(p,S));else if(p&&typeof p.handleEvent=="function")p=b(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:c.setTimeout(p,v||0)}function at(p){p.g=ze(()=>{p.g=null,p.i&&(p.i=!1,at(p))},p.l);const v=p.h;p.h=null,p.m.apply(null,v)}class vt extends ae{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:at(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mt(p){ae.call(this),this.h=p,this.g={}}w(Mt,ae);var jt=[];function ln(p){Y(p.g,function(v,S){this.g.hasOwnProperty(S)&&An(v)},p),p.g={}}Mt.prototype.N=function(){Mt.aa.N.call(this),ln(this)},Mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gt=c.JSON.stringify,St=c.JSON.parse,en=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function Sn(){}Sn.prototype.h=null;function ds(p){return p.h||(p.h=p.i())}function pi(){}var xr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gr(){R.call(this,"d")}w(Gr,R);function wr(){R.call(this,"c")}w(wr,R);var $r={},no=null;function Ri(){return no=no||new fe}$r.La="serverreachability";function Ks(p){R.call(this,$r.La,p)}w(Ks,R);function ki(p){const v=Ri();Te(v,new Ks(v))}$r.STAT_EVENT="statevent";function au(p,v){R.call(this,$r.STAT_EVENT,p),this.stat=v}w(au,R);function Bt(p){const v=Ri();Te(v,new au(v,p))}$r.Ma="timingevent";function cn(p,v){R.call(this,$r.Ma,p),this.size=v}w(cn,R);function tn(p,v){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},v)}function hr(){this.g=!0}hr.prototype.xa=function(){this.g=!1};function ro(p,v,S,F,ue,ge){p.info(function(){if(p.g)if(ge)for(var De="",yt=ge.split("&"),wn=0;wn<yt.length;wn++){var Et=yt[wn].split("=");if(1<Et.length){var Dn=Et[0];Et=Et[1];var Cn=Dn.split("_");De=2<=Cn.length&&Cn[1]=="type"?De+(Dn+"="+Et+"&"):De+(Dn+"=redacted&")}}else De=null;else De=ge;return"XMLHTTP REQ ("+F+") [attempt "+ue+"]: "+v+`
`+S+`
`+De})}function tc(p,v,S,F,ue,ge,De){p.info(function(){return"XMLHTTP RESP ("+F+") [ attempt "+ue+"]: "+v+`
`+S+`
`+ge+" "+De})}function Di(p,v,S,F){p.info(function(){return"XMLHTTP TEXT ("+v+"): "+fs(p,S)+(F?" "+F:"")})}function ou(p,v){p.info(function(){return"TIMEOUT: "+v})}hr.prototype.info=function(){};function fs(p,v){if(!p.g)return v;if(!v)return null;try{var S=JSON.parse(v);if(S){for(p=0;p<S.length;p++)if(Array.isArray(S[p])){var F=S[p];if(!(2>F.length)){var ue=F[1];if(Array.isArray(ue)&&!(1>ue.length)){var ge=ue[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(var De=1;De<ue.length;De++)ue[De]=""}}}}return Gt(S)}catch{return v}}var Oi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Kr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xr;function Qr(){}w(Qr,Sn),Qr.prototype.g=function(){return new XMLHttpRequest},Qr.prototype.i=function(){return{}},Xr=new Qr;function Fn(p,v,S,F){this.j=p,this.i=v,this.l=S,this.R=F||1,this.U=new Mt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qt}function Qt(){this.i=null,this.g="",this.h=!1}var io={},Xs={};function Cr(p,v,S){p.L=1,p.v=uo(Ir(v)),p.m=S,p.P=!0,mi(p,null)}function mi(p,v){p.F=Date.now(),ps(p),p.A=Ir(p.v);var S=p.A,F=p.R;Array.isArray(F)||(F=[String(F)]),oc(S.i,"t",F),p.C=0,S=p.j.J,p.h=new Qt,p.g=zd(p.j,S?v:null,!p.m),0<p.O&&(p.M=new vt(b(p.Y,p,p.g),p.O)),v=p.U,S=p.g,F=p.ca;var ue="readystatechange";Array.isArray(ue)||(ue&&(jt[0]=ue.toString()),ue=jt);for(var ge=0;ge<ue.length;ge++){var De=Xt(S,ue[ge],F||v.handleEvent,!1,v.h||v);if(!De)break;v.g[De.key]=De}v=p.H?N(p.H):{},p.m?(p.u||(p.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,v)):(p.u="GET",p.g.ea(p.A,p.u,null,v)),ki(),ro(p.i,p.u,p.A,p.l,p.R,p.m)}Fn.prototype.ca=function(p){p=p.target;const v=this.M;v&&ti(p)==3?v.j():this.Y(p)},Fn.prototype.Y=function(p){try{if(p==this.g)e:{const Cn=ti(this.g);var v=this.g.Ba();const Ts=this.g.Z();if(!(3>Cn)&&(Cn!=3||this.g&&(this.h.h||this.g.oa()||Od(this.g)))){this.J||Cn!=4||v==7||(v==8||0>=Ts?ki(3):ki(2)),Li(this);var S=this.g.Z();this.X=S;t:if(so(this)){var F=Od(this.g);p="";var ue=F.length,ge=ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xn(this),Wr(this);var De="";break t}this.h.i=new c.TextDecoder}for(v=0;v<ue;v++)this.h.h=!0,p+=this.h.i.decode(F[v],{stream:!(ge&&v==ue-1)});F.length=0,this.h.g+=p,this.C=0,De=this.h.g}else De=this.g.oa();if(this.o=S==200,tc(this.i,this.u,this.A,this.l,this.R,Cn,S),this.o){if(this.T&&!this.K){t:{if(this.g){var yt,wn=this.g;if((yt=wn.g?wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(yt)){var Et=yt;break t}}Et=null}if(S=Et)Di(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pi(this,S);else{this.o=!1,this.s=3,Bt(12),xn(this),Wr(this);break e}}if(this.P){S=!0;let jn;for(;!this.J&&this.C<De.length;)if(jn=uu(this,De),jn==Xs){Cn==4&&(this.s=4,Bt(14),S=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(jn==io){this.s=4,Bt(15),Di(this.i,this.l,De,"[Invalid Chunk]"),S=!1;break}else Di(this.i,this.l,jn,null),Pi(this,jn);if(so(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Cn!=4||De.length!=0||this.h.h||(this.s=1,Bt(16),S=!1),this.o=this.o&&S,!S)Di(this.i,this.l,De,"[Invalid Chunked Response]"),xn(this),Wr(this);else if(0<De.length&&!this.W){this.W=!0;var Dn=this.j;Dn.g==this&&Dn.ba&&!Dn.M&&(Dn.j.info("Great, no buffering proxy detected. Bytes received: "+De.length),yo(Dn),Dn.M=!0,Bt(11))}}else Di(this.i,this.l,De,null),Pi(this,De);Cn==4&&xn(this),this.o&&!this.J&&(Cn==4?Ud(this.j,this):(this.o=!1,ps(this)))}else dm(this.g),S==400&&0<De.indexOf("Unknown SID")?(this.s=3,Bt(12)):(this.s=0,Bt(13)),xn(this),Wr(this)}}}catch{}finally{}};function so(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function uu(p,v){var S=p.C,F=v.indexOf(`
`,S);return F==-1?Xs:(S=Number(v.substring(S,F)),isNaN(S)?io:(F+=1,F+S>v.length?Xs:(v=v.slice(F,F+S),p.C=F+S,v)))}Fn.prototype.cancel=function(){this.J=!0,xn(this)};function ps(p){p.S=Date.now()+p.I,lu(p,p.I)}function lu(p,v){if(p.B!=null)throw Error("WatchDog timer not null");p.B=tn(b(p.ba,p),v)}function Li(p){p.B&&(c.clearTimeout(p.B),p.B=null)}Fn.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(ou(this.i,this.A),this.L!=2&&(ki(),Bt(17)),xn(this),this.s=2,Wr(this)):lu(this,this.S-p)};function Wr(p){p.j.G==0||p.J||Ud(p.j,p)}function xn(p){Li(p);var v=p.M;v&&typeof v.ma=="function"&&v.ma(),p.M=null,ln(p.U),p.g&&(v=p.g,p.g=null,v.abort(),v.ma())}function Pi(p,v){try{var S=p.j;if(S.G!=0&&(S.g==p||nc(S.h,p))){if(!p.K&&nc(S.h,p)&&S.G==3){try{var F=S.Da.g.parse(v)}catch{F=null}if(Array.isArray(F)&&F.length==3){var ue=F;if(ue[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<p.F)bu(S),Eu(S);else break e;dc(S),Bt(18)}}else S.za=ue[1],0<S.za-S.T&&37500>ue[2]&&S.F&&S.v==0&&!S.C&&(S.C=tn(b(S.Za,S),6e3));if(1>=Mi(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else bs(S,11)}else if((p.K||S.g==p)&&bu(S),!q(v))for(ue=S.Da.g.parse(v),v=0;v<ue.length;v++){let Et=ue[v];if(S.T=Et[0],Et=Et[1],S.G==2)if(Et[0]=="c"){S.K=Et[1],S.ia=Et[2];const Dn=Et[3];Dn!=null&&(S.la=Dn,S.j.info("VER="+S.la));const Cn=Et[4];Cn!=null&&(S.Aa=Cn,S.j.info("SVER="+S.Aa));const Ts=Et[5];Ts!=null&&typeof Ts=="number"&&0<Ts&&(F=1.5*Ts,S.L=F,S.j.info("backChannelRequestTimeoutMs_="+F)),F=S;const jn=p.g;if(jn){const ji=jn.g?jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ji){var ge=F.h;ge.g||ji.indexOf("spdy")==-1&&ji.indexOf("quic")==-1&&ji.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(hu(ge,ge.h),ge.h=null))}if(F.D){const pc=jn.g?jn.g.getResponseHeader("X-HTTP-Session-Id"):null;pc&&(F.ya=pc,kt(F.I,F.D,pc))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-p.F,S.j.info("Handshake RTT: "+S.R+"ms")),F=S;var De=p;if(F.qa=Vd(F,F.J?F.ia:null,F.W),De.K){ar(F.h,De);var yt=De,wn=F.L;wn&&(yt.I=wn),yt.B&&(Li(yt),ps(yt)),F.g=De}else Md(F);0<S.i.length&&_u(S)}else Et[0]!="stop"&&Et[0]!="close"||bs(S,7);else S.G==3&&(Et[0]=="stop"||Et[0]=="close"?Et[0]=="stop"?bs(S,7):cc(S):Et[0]!="noop"&&S.l&&S.l.ta(Et),S.v=0)}}ki(4)}catch{}}var cu=class{constructor(p,v){this.g=p,this.map=v}};function gi(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qs(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function Mi(p){return p.h?1:p.g?p.g.size:0}function nc(p,v){return p.h?p.h==v:p.g?p.g.has(v):!1}function hu(p,v){p.g?p.g.add(v):p.h=v}function ar(p,v){p.h&&p.h==v?p.h=null:p.g&&p.g.has(v)&&p.g.delete(v)}gi.prototype.cancel=function(){if(this.i=rc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function rc(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let v=p.i;for(const S of p.g.values())v=v.concat(S.D);return v}return I(p.i)}function um(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(d(p)){for(var v=[],S=p.length,F=0;F<S;F++)v.push(p[F]);return v}v=[],S=0;for(F in p)v[S++]=p[F];return v}function du(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(d(p)||typeof p=="string"){var v=[];p=p.length;for(var S=0;S<p;S++)v.push(S);return v}v=[],S=0;for(const F in p)v[S++]=F;return v}}}function ic(p,v){if(p.forEach&&typeof p.forEach=="function")p.forEach(v,void 0);else if(d(p)||typeof p=="string")Array.prototype.forEach.call(p,v,void 0);else for(var S=du(p),F=um(p),ue=F.length,ge=0;ge<ue;ge++)v.call(void 0,F[ge],S&&S[ge],p)}var ao=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lm(p,v){if(p){p=p.split("&");for(var S=0;S<p.length;S++){var F=p[S].indexOf("="),ue=null;if(0<=F){var ge=p[S].substring(0,F);ue=p[S].substring(F+1)}else ge=p[S];v(ge,ue?decodeURIComponent(ue.replace(/\+/g," ")):"")}}}function mn(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof mn){this.h=p.h,oo(this,p.j),this.o=p.o,this.g=p.g,Ws(this,p.s),this.l=p.l;var v=p.i,S=new gs;S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),ms(this,S),this.m=p.m}else p&&(v=String(p).match(ao))?(this.h=!1,oo(this,v[1]||"",!0),this.o=Zr(v[2]||""),this.g=Zr(v[3]||"",!0),Ws(this,v[4]),this.l=Zr(v[5]||"",!0),ms(this,v[6]||"",!0),this.m=Zr(v[7]||"")):(this.h=!1,this.i=new gs(null,this.h))}mn.prototype.toString=function(){var p=[],v=this.j;v&&p.push(lo(v,sc,!0),":");var S=this.g;return(S||v=="file")&&(p.push("//"),(v=this.o)&&p.push(lo(v,sc,!0),"@"),p.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&p.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&p.push("/"),p.push(lo(S,S.charAt(0)=="/"?cm:ac,!0))),(S=this.i.toString())&&p.push("?",S),(S=this.m)&&p.push("#",lo(S,fu)),p.join("")};function Ir(p){return new mn(p)}function oo(p,v,S){p.j=S?Zr(v,!0):v,p.j&&(p.j=p.j.replace(/:$/,""))}function Ws(p,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);p.s=v}else p.s=null}function ms(p,v,S){v instanceof gs?(p.i=v,kd(p.i,p.h)):(S||(v=lo(v,hm)),p.i=new gs(v,p.h))}function kt(p,v,S){p.i.set(v,S)}function uo(p){return kt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Zr(p,v){return p?v?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function lo(p,v,S){return typeof p=="string"?(p=encodeURI(p).replace(v,Rd),S&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Rd(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var sc=/[#\/\?@]/g,ac=/[#\?:]/g,cm=/[#\?]/g,hm=/[#\?@]/g,fu=/#/g;function gs(p,v){this.h=this.g=null,this.i=p||null,this.j=!!v}function Jr(p){p.g||(p.g=new Map,p.h=0,p.i&&lm(p.i,function(v,S){p.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}t=gs.prototype,t.add=function(p,v){Jr(this),this.i=null,p=Bi(this,p);var S=this.g.get(p);return S||this.g.set(p,S=[]),S.push(v),this.h+=1,this};function ys(p,v){Jr(p),v=Bi(p,v),p.g.has(v)&&(p.i=null,p.h-=p.g.get(v).length,p.g.delete(v))}function Es(p,v){return Jr(p),v=Bi(p,v),p.g.has(v)}t.forEach=function(p,v){Jr(this),this.g.forEach(function(S,F){S.forEach(function(ue){p.call(v,ue,F,this)},this)},this)},t.na=function(){Jr(this);const p=Array.from(this.g.values()),v=Array.from(this.g.keys()),S=[];for(let F=0;F<v.length;F++){const ue=p[F];for(let ge=0;ge<ue.length;ge++)S.push(v[F])}return S},t.V=function(p){Jr(this);let v=[];if(typeof p=="string")Es(this,p)&&(v=v.concat(this.g.get(Bi(this,p))));else{p=Array.from(this.g.values());for(let S=0;S<p.length;S++)v=v.concat(p[S])}return v},t.set=function(p,v){return Jr(this),this.i=null,p=Bi(this,p),Es(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[v]),this.h+=1,this},t.get=function(p,v){return p?(p=this.V(p),0<p.length?String(p[0]):v):v};function oc(p,v,S){ys(p,v),0<S.length&&(p.i=null,p.g.set(Bi(p,v),I(S)),p.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],v=Array.from(this.g.keys());for(var S=0;S<v.length;S++){var F=v[S];const ge=encodeURIComponent(String(F)),De=this.V(F);for(F=0;F<De.length;F++){var ue=ge;De[F]!==""&&(ue+="="+encodeURIComponent(String(De[F]))),p.push(ue)}}return this.i=p.join("&")};function Bi(p,v){return v=String(v),p.j&&(v=v.toLowerCase()),v}function kd(p,v){v&&!p.j&&(Jr(p),p.i=null,p.g.forEach(function(S,F){var ue=F.toLowerCase();F!=ue&&(ys(this,F),oc(this,ue,S))},p)),p.j=v}function co(p,v){const S=new hr;if(c.Image){const F=new Image;F.onload=T(ei,S,"TestLoadImage: loaded",!0,v,F),F.onerror=T(ei,S,"TestLoadImage: error",!1,v,F),F.onabort=T(ei,S,"TestLoadImage: abort",!1,v,F),F.ontimeout=T(ei,S,"TestLoadImage: timeout",!1,v,F),c.setTimeout(function(){F.ontimeout&&F.ontimeout()},1e4),F.src=p}else v(!1)}function yi(p,v){const S=new hr,F=new AbortController,ue=setTimeout(()=>{F.abort(),ei(S,"TestPingServer: timeout",!1,v)},1e4);fetch(p,{signal:F.signal}).then(ge=>{clearTimeout(ue),ge.ok?ei(S,"TestPingServer: ok",!0,v):ei(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(ue),ei(S,"TestPingServer: error",!1,v)})}function ei(p,v,S,F,ue){try{ue&&(ue.onload=null,ue.onerror=null,ue.onabort=null,ue.ontimeout=null),F(S)}catch{}}function ho(){this.g=new en}function Ui(p,v,S){const F=S||"";try{ic(p,function(ue,ge){let De=ue;f(ue)&&(De=Gt(ue)),v.push(F+ge+"="+encodeURIComponent(De))})}catch(ue){throw v.push(F+"type="+encodeURIComponent("_badmap")),ue}}function Zs(p){this.l=p.Ub||null,this.j=p.eb||!1}w(Zs,Sn),Zs.prototype.g=function(){return new _s(this.l,this.j)},Zs.prototype.i=function(p){return function(){return p}}({});function _s(p,v){fe.call(this),this.D=p,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(_s,fe),t=_s.prototype,t.open=function(p,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=v,this.readyState=1,Vi(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(v.body=p),(this.D||c).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hi(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Vi(this)),this.g&&(this.readyState=3,Vi(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uc(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function uc(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var v=p.value?p.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!p.done}))&&(this.response=this.responseText+=v)}p.done?Hi(this):Vi(this),this.readyState==3&&uc(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,Hi(this))},t.Qa=function(p){this.g&&(this.response=p,Hi(this))},t.ga=function(){this.g&&Hi(this)};function Hi(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Vi(p)}t.setRequestHeader=function(p,v){this.u.append(p,v)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,p.push(S[0]+": "+S[1]),S=v.next();return p.join(`\r
`)};function Vi(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(_s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function lc(p){let v="";return Y(p,function(S,F){v+=F,v+=":",v+=S,v+=`\r
`}),v}function kn(p,v,S){e:{for(F in S){var F=!1;break e}F=!0}F||(S=lc(S),typeof p=="string"?S!=null&&encodeURIComponent(String(S)):kt(p,v,S))}function Ct(p){fe.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ct,fe);var pu=/^https?$/i,fo=["POST","PUT"];t=Ct.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,v,S,F){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);v=v?v.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xr.g(),this.v=this.o?ds(this.o):ds(Xr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(v,String(p),!0),this.B=!1}catch(ge){Dd(this,ge);return}if(p=S||"",S=new Map(this.headers),F)if(Object.getPrototypeOf(F)===Object.prototype)for(var ue in F)S.set(ue,F[ue]);else if(typeof F.keys=="function"&&typeof F.get=="function")for(const ge of F.keys())S.set(ge,F.get(ge));else throw Error("Unknown input type for opt_headers: "+String(F));F=Array.from(S.keys()).find(ge=>ge.toLowerCase()=="content-type"),ue=c.FormData&&p instanceof c.FormData,!(0<=Array.prototype.indexOf.call(fo,v,void 0))||F||ue||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,De]of S)this.g.setRequestHeader(ge,De);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{po(this),this.u=!0,this.g.send(p),this.u=!1}catch(ge){Dd(this,ge)}};function Dd(p,v){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=v,p.m=5,mu(p),zi(p)}function mu(p){p.A||(p.A=!0,Te(p,"complete"),Te(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Te(this,"complete"),Te(this,"abort"),zi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zi(this,!0)),Ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gu(this):this.bb())},t.bb=function(){gu(this)};function gu(p){if(p.h&&typeof u<"u"&&(!p.v[1]||ti(p)!=4||p.Z()!=2)){if(p.u&&ti(p)==4)ze(p.Ea,0,p);else if(Te(p,"readystatechange"),ti(p)==4){p.h=!1;try{const De=p.Z();e:switch(De){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var F;if(F=De===0){var ue=String(p.D).match(ao)[1]||null;!ue&&c.self&&c.self.location&&(ue=c.self.location.protocol.slice(0,-1)),F=!pu.test(ue?ue.toLowerCase():"")}S=F}if(S)Te(p,"complete"),Te(p,"success");else{p.m=6;try{var ge=2<ti(p)?p.g.statusText:""}catch{ge=""}p.l=ge+" ["+p.Z()+"]",mu(p)}}finally{zi(p)}}}}function zi(p,v){if(p.g){po(p);const S=p.g,F=p.v[0]?()=>{}:null;p.g=null,p.v=null,v||Te(p,"ready");try{S.onreadystatechange=F}catch{}}}function po(p){p.I&&(c.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function ti(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<ti(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var v=this.g.responseText;return p&&v.indexOf(p)==0&&(v=v.substring(p.length)),St(v)}};function Od(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function dm(p){const v={};p=(p.g&&2<=ti(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let F=0;F<p.length;F++){if(q(p[F]))continue;var S=B(p[F]);const ue=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const ge=v[ue]||[];v[ue]=ge,ge.push(S)}M(v,function(F){return F.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mo(p,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[p]||v}function yu(p){this.Aa=0,this.i=[],this.j=new hr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mo("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mo("baseRetryDelayMs",5e3,p),this.cb=mo("retryDelaySeedMs",1e4,p),this.Wa=mo("forwardChannelMaxRetries",2,p),this.wa=mo("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new gi(p&&p.concurrentRequestLimit),this.Da=new ho,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=yu.prototype,t.la=8,t.G=1,t.connect=function(p,v,S,F){Bt(0),this.W=p,this.H=v||{},S&&F!==void 0&&(this.H.OSID=S,this.H.OAID=F),this.F=this.X,this.I=Vd(this,null,this.W),_u(this)};function cc(p){if(Ld(p),p.G==3){var v=p.U++,S=Ir(p.I);if(kt(S,"SID",p.K),kt(S,"RID",v),kt(S,"TYPE","terminate"),go(p,S),v=new Fn(p,p.j,v),v.L=2,v.v=uo(Ir(S)),S=!1,c.navigator&&c.navigator.sendBeacon)try{S=c.navigator.sendBeacon(v.v.toString(),"")}catch{}!S&&c.Image&&(new Image().src=v.v,S=!0),S||(v.g=zd(v.j,null),v.g.ea(v.v)),v.F=Date.now(),ps(v)}Hd(p)}function Eu(p){p.g&&(yo(p),p.g.cancel(),p.g=null)}function Ld(p){Eu(p),p.u&&(c.clearTimeout(p.u),p.u=null),bu(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&c.clearTimeout(p.s),p.s=null)}function _u(p){if(!Qs(p.h)&&!p.s){p.s=!0;var v=p.Ga;J||A(),se||(J(),se=!0),re.add(v,p),p.B=0}}function fm(p,v){return Mi(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=v.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=tn(b(p.Ga,p,v),fc(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const ue=new Fn(this,this.j,p);let ge=this.o;if(this.S&&(ge?(ge=N(ge),U(ge,this.S)):ge=this.S),this.m!==null||this.O||(ue.H=ge,ge=null),this.P)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var F=this.i[S];if("__data__"in F.map&&(F=F.map.__data__,typeof F=="string")){F=F.length;break t}F=void 0}if(F===void 0)break;if(v+=F,4096<v){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=Pd(this,ue,v),S=Ir(this.I),kt(S,"RID",p),kt(S,"CVER",22),this.D&&kt(S,"X-HTTP-Session-Id",this.D),go(this,S),ge&&(this.O?v="headers="+encodeURIComponent(String(lc(ge)))+"&"+v:this.m&&kn(S,this.m,ge)),hu(this.h,ue),this.Ua&&kt(S,"TYPE","init"),this.P?(kt(S,"$req",v),kt(S,"SID","null"),ue.T=!0,Cr(ue,S,null)):Cr(ue,S,v),this.G=2}}else this.G==3&&(p?hc(this,p):this.i.length==0||Qs(this.h)||hc(this))};function hc(p,v){var S;v?S=v.l:S=p.U++;const F=Ir(p.I);kt(F,"SID",p.K),kt(F,"RID",S),kt(F,"AID",p.T),go(p,F),p.m&&p.o&&kn(F,p.m,p.o),S=new Fn(p,p.j,S,p.B+1),p.m===null&&(S.H=p.o),v&&(p.i=v.D.concat(p.i)),v=Pd(p,S,1e3),S.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),hu(p.h,S),Cr(S,F,v)}function go(p,v){p.H&&Y(p.H,function(S,F){kt(v,F,S)}),p.l&&ic({},function(S,F){kt(v,F,S)})}function Pd(p,v,S){S=Math.min(p.i.length,S);var F=p.l?b(p.l.Na,p.l,p):null;e:{var ue=p.i;let ge=-1;for(;;){const De=["count="+S];ge==-1?0<S?(ge=ue[0].g,De.push("ofs="+ge)):ge=0:De.push("ofs="+ge);let yt=!0;for(let wn=0;wn<S;wn++){let Et=ue[wn].g;const Dn=ue[wn].map;if(Et-=ge,0>Et)ge=Math.max(0,ue[wn].g-100),yt=!1;else try{Ui(Dn,De,"req"+Et+"_")}catch{F&&F(Dn)}}if(yt){F=De.join("&");break e}}}return p=p.i.splice(0,S),v.D=p,F}function Md(p){if(!p.g&&!p.u){p.Y=1;var v=p.Fa;J||A(),se||(J(),se=!0),re.add(v,p),p.v=0}}function dc(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=tn(b(p.Fa,p),fc(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,Bd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=tn(b(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Bt(10),Eu(this),Bd(this))};function yo(p){p.A!=null&&(c.clearTimeout(p.A),p.A=null)}function Bd(p){p.g=new Fn(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var v=Ir(p.qa);kt(v,"RID","rpc"),kt(v,"SID",p.K),kt(v,"AID",p.T),kt(v,"CI",p.F?"0":"1"),!p.F&&p.ja&&kt(v,"TO",p.ja),kt(v,"TYPE","xmlhttp"),go(p,v),p.m&&p.o&&kn(v,p.m,p.o),p.L&&(p.g.I=p.L);var S=p.g;p=p.ia,S.L=1,S.v=uo(Ir(v)),S.m=null,S.P=!0,mi(S,p)}t.Za=function(){this.C!=null&&(this.C=null,Eu(this),dc(this),Bt(19))};function bu(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function Ud(p,v){var S=null;if(p.g==v){bu(p),yo(p),p.g=null;var F=2}else if(nc(p.h,v))S=v.D,ar(p.h,v),F=1;else return;if(p.G!=0){if(v.o)if(F==1){S=v.m?v.m.length:0,v=Date.now()-v.F;var ue=p.B;F=Ri(),Te(F,new cn(F,S)),_u(p)}else Md(p);else if(ue=v.s,ue==3||ue==0&&0<v.X||!(F==1&&fm(p,v)||F==2&&dc(p)))switch(S&&0<S.length&&(v=p.h,v.i=v.i.concat(S)),ue){case 1:bs(p,5);break;case 4:bs(p,10);break;case 3:bs(p,6);break;default:bs(p,2)}}}function fc(p,v){let S=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(S*=2),S*v}function bs(p,v){if(p.j.info("Error code "+v),v==2){var S=b(p.fb,p),F=p.Xa;const ue=!F;F=new mn(F||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||oo(F,"https"),uo(F),ue?co(F.toString(),S):yi(F.toString(),S)}else Bt(2);p.G=0,p.l&&p.l.sa(v),Hd(p),Ld(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function Hd(p){if(p.G=0,p.ka=[],p.l){const v=rc(p.h);(v.length!=0||p.i.length!=0)&&(L(p.ka,v),L(p.ka,p.i),p.h.i.length=0,I(p.i),p.i.length=0),p.l.ra()}}function Vd(p,v,S){var F=S instanceof mn?Ir(S):new mn(S);if(F.g!="")v&&(F.g=v+"."+F.g),Ws(F,F.s);else{var ue=c.location;F=ue.protocol,v=v?v+"."+ue.hostname:ue.hostname,ue=+ue.port;var ge=new mn(null);F&&oo(ge,F),v&&(ge.g=v),ue&&Ws(ge,ue),S&&(ge.l=S),F=ge}return S=p.D,v=p.ya,S&&v&&kt(F,S,v),kt(F,"VER",p.la),go(p,F),F}function zd(p,v,S){if(v&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=p.Ca&&!p.pa?new Ct(new Zs({eb:S})):new Ct(p.pa),v.Ha(p.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fd(){}t=Fd.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tu(){}Tu.prototype.g=function(p,v){return new or(p,v)};function or(p,v){fe.call(this),this.g=new yu(v),this.l=p,this.h=v&&v.messageUrlParams||null,p=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(p?p["X-WebChannel-Content-Type"]=v.messageContentType:p={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(p?p["X-WebChannel-Client-Profile"]=v.va:p={"X-WebChannel-Client-Profile":v.va}),this.g.S=p,(p=v&&v.Sb)&&!q(p)&&(this.g.m=p),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!q(v)&&(this.g.D=v,p=this.h,p!==null&&v in p&&(p=this.h,v in p&&delete p[v])),this.j=new Fi(this)}w(or,fe),or.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},or.prototype.close=function(){cc(this.g)},or.prototype.o=function(p){var v=this.g;if(typeof p=="string"){var S={};S.__data__=p,p=S}else this.u&&(S={},S.__data__=Gt(p),p=S);v.i.push(new cu(v.Ya++,p)),v.G==3&&_u(v)},or.prototype.N=function(){this.g.l=null,delete this.j,cc(this.g),delete this.g,or.aa.N.call(this)};function jd(p){Gr.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var v=p.__sm__;if(v){e:{for(const S in v){p=S;break e}p=void 0}(this.i=p)&&(p=this.i,v=v!==null&&p in v?v[p]:void 0),this.data=v}else this.data=p}w(jd,Gr);function qd(){wr.call(this),this.status=1}w(qd,wr);function Fi(p){this.g=p}w(Fi,Fd),Fi.prototype.ua=function(){Te(this.g,"a")},Fi.prototype.ta=function(p){Te(this.g,new jd(p))},Fi.prototype.sa=function(p){Te(this.g,new qd)},Fi.prototype.ra=function(){Te(this.g,"b")},Tu.prototype.createWebChannel=Tu.prototype.g,or.prototype.send=or.prototype.o,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,TI=function(){return new Tu},bI=function(){return Ri()},_I=$r,wE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oi.NO_ERROR=0,Oi.TIMEOUT=8,Oi.HTTP_ERROR=6,v0=Oi,Kr.COMPLETE="complete",EI=Kr,pi.EventType=xr,xr.OPEN="a",xr.CLOSE="b",xr.ERROR="c",xr.MESSAGE="d",fe.prototype.listen=fe.prototype.K,bh=pi,Ct.prototype.listenOnce=Ct.prototype.L,Ct.prototype.getLastError=Ct.prototype.Ka,Ct.prototype.getLastErrorCode=Ct.prototype.Ba,Ct.prototype.getStatus=Ct.prototype.Z,Ct.prototype.getResponseJson=Ct.prototype.Oa,Ct.prototype.getResponseText=Ct.prototype.oa,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Ha,yI=Ct}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});const UA="@firebase/firestore",HA="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jn.UNAUTHENTICATED=new Jn(null),Jn.GOOGLE_CREDENTIALS=new Jn("google-credentials-uid"),Jn.FIRST_PARTY=new Jn("first-party-uid"),Jn.MOCK_USER=new Jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=new L1("@firebase/firestore");function al(){return $o.logLevel}function Pe(t,...e){if($o.logLevel<=ft.DEBUG){const n=e.map(B1);$o.debug(`Firestore (${zl}): ${t}`,...n)}}function Ys(t,...e){if($o.logLevel<=ft.ERROR){const n=e.map(B1);$o.error(`Firestore (${zl}): ${t}`,...n)}}function Rl(t,...e){if($o.logLevel<=ft.WARN){const n=e.map(B1);$o.warn(`Firestore (${zl}): ${t}`,...n)}}function B1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $e(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,vI(t,r,n)}function vI(t,e,n){let r=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ys(r),new Error(r)}function It(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||vI(e,s,r)}function Je(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends cs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jn.UNAUTHENTICATED))}shutdown(){}}class u9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class l9{constructor(e){this.t=e,this.currentUser=Jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){It(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,n(d)):Promise.resolve();let o=new za;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new za,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},c=d=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>c(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?c(d):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new za)}},0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It(typeof r.accessToken=="string",31837,{l:r}),new AI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return It(e===null||typeof e=="string",2055,{h:e}),new Jn(e)}}class c9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class h9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new c9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){It(this.o===void 0,3512);const r=o=>{o.error!=null&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,Pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new VA(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(It(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new VA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=f9(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function st(t,e){return t<e?-1:t>e?1:0}function CE(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return st(r,s);{const o=SI(),u=p9(o.encode(zA(t,n)),o.encode(zA(e,n)));return u!==0?u:st(r,s)}}n+=r>65535?2:1}return st(t.length,e.length)}function zA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function p9(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return st(t[n],e[n]);return st(t.length,e.length)}function kl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA=-62135596800,jA=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(e){return Yt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*jA);return new Yt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Me(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Me(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<FA)throw new Me(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jA}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-FA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{static fromTimestamp(e){return new We(e)}static min(){return new We(new Yt(0,0))}static max(){return new We(new Yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="__name__";class Zi{constructor(e,n,r){n===void 0?n=0:n>e.length&&$e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&$e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Zi.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return st(e.length,n.length)}static compareSegments(e,n){const r=Zi.isNumericId(e),s=Zi.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Zi.extractNumericId(e).compare(Zi.extractNumericId(n)):CE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Va.fromString(e.substring(4,e.length-2))}}class qt extends Zi{construct(e,n,r){return new qt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(Se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new qt(n)}static emptyPath(){return new qt([])}}const m9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kn extends Zi{construct(e,n,r){return new Kn(e,n,r)}static isValidIdentifier(e){return m9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qA}static keyField(){return new Kn([qA])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Me(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let u=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Me(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Me(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else c==="`"?(u=!u,s++):c!=="."||u?(r+=c,s++):(o(),s++)}if(o(),u)throw new Me(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kn(n)}static emptyPath(){return new Kn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(qt.fromString(e))}static fromName(e){return new je(qt.fromString(e).popFirst(5))}static empty(){return new je(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new qt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=-1;function g9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=We.fromTimestamp(r===1e9?new Yt(n+1,0):new Yt(n,r));return new Ya(s,je.empty(),e)}function y9(t){return new Ya(t.readTime,t.key,Qh)}class Ya{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ya(We.min(),je.empty(),Qh)}static max(){return new Ya(We.max(),je.empty(),Qh)}}function E9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=je.comparator(t.documentKey,e.documentKey),n!==0?n:st(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(t){if(t.code!==Se.FAILED_PRECONDITION||t.message!==_9)throw t;Pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&$e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new xe((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof xe?n:xe.resolve(n)}catch(n){return xe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):xe.reject(n)}static resolve(e){return new xe((n,r)=>{n(e)})}static reject(e){return new xe((n,r)=>{r(e)})}static waitFor(e){return new xe((n,r)=>{let s=0,o=0,u=!1;e.forEach(c=>{++s,c.next(()=>{++o,u&&o===s&&n()},d=>r(d))}),u=!0,o===s&&n()})}static or(e){let n=xe.resolve(!1);for(const r of e)n=n.next(s=>s?xe.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new xe((r,s)=>{const o=e.length,u=new Array(o);let c=0;for(let d=0;d<o;d++){const f=d;n(e[f]).next(m=>{u[f]=m,++c,c===o&&r(u)},m=>s(m))}})}static doWhile(e,n){return new xe((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function T9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Dp.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=-1;function Op(t){return t==null}function X0(t){return t===0&&1/t==-1/0}function v9(t){return typeof t=="number"&&Number.isInteger(t)&&!X0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="";function A9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=YA(e)),e=S9(t.get(n),e);return YA(e)}function S9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case wI:n+="";break;default:n+=o}}return n}function YA(t){return t+wI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n){this.comparator=e,this.root=n||$n.EMPTY}insert(e,n){return new Jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new Jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new o0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new o0(this.root,e,this.comparator,!1)}getReverseIterator(){return new o0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new o0(this.root,e,this.comparator,!0)}}class o0{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??$n.RED,this.left=s??$n.EMPTY,this.right=o??$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new $n(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return $n.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw $e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw $e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw $e(27949);return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw $e(57766)}get value(){throw $e(16141)}get color(){throw $e(16727)}get left(){throw $e(29726)}get right(){throw $e(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new $n(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.comparator=e,this.data=new Jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $A(this.data.getIterator())}getIteratorFrom(e){return new $A(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Rn(this.comparator);return n.data=e,n}}class $A{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.fields=e,e.sort(Kn.comparator)}static empty(){return new Vr([])}unionWith(e){let n=new Rn(Kn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return kl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new II("Invalid base64 string: "+o):o}}(e);return new Xn(n)}static fromUint8Array(e){const n=function(s){let o="";for(let u=0;u<s.length;++u)o+=String.fromCharCode(s[u]);return o}(e);return new Xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xn.EMPTY_BYTE_STRING=new Xn("");const x9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ga(t){if(It(!!t,39018),typeof t=="string"){let e=0;const n=x9.exec(t);if(It(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fn(t.seconds),nanos:fn(t.nanos)}}function fn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $a(t){return typeof t=="string"?Xn.fromBase64String(t):Xn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="server_timestamp",RI="__type__",kI="__previous_value__",DI="__local_write_time__";function H1(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[RI])===null||n===void 0?void 0:n.stringValue)===NI}function Lp(t){const e=t.mapValue.fields[kI];return H1(e)?Lp(e):e}function Wh(t){const e=Ga(t.mapValue.fields[DI].timestampValue);return new Yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w9{constructor(e,n,r,s,o,u,c,d,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.longPollingOptions=d,this.useFetchStreams=f,this.isUsingEmulator=m}}const Q0="(default)";class Zh{constructor(e,n){this.projectId=e,this.database=n||Q0}static empty(){return new Zh("","")}get isDefaultDatabase(){return this.database===Q0}isEqual(e){return e instanceof Zh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="__type__",C9="__max__",u0={mapValue:{}},LI="__vector__",W0="value";function Ka(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?H1(t)?4:N9(t)?9007199254740991:I9(t)?10:11:$e(28295,{value:t})}function os(t,e){if(t===e)return!0;const n=Ka(t);if(n!==Ka(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wh(t).isEqual(Wh(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const u=Ga(s.timestampValue),c=Ga(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return $a(s.bytesValue).isEqual($a(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return fn(s.geoPointValue.latitude)===fn(o.geoPointValue.latitude)&&fn(s.geoPointValue.longitude)===fn(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return fn(s.integerValue)===fn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const u=fn(s.doubleValue),c=fn(o.doubleValue);return u===c?X0(u)===X0(c):isNaN(u)&&isNaN(c)}return!1}(t,e);case 9:return kl(t.arrayValue.values||[],e.arrayValue.values||[],os);case 10:case 11:return function(s,o){const u=s.mapValue.fields||{},c=o.mapValue.fields||{};if(GA(u)!==GA(c))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(c[d]===void 0||!os(u[d],c[d])))return!1;return!0}(t,e);default:return $e(52216,{left:t})}}function Jh(t,e){return(t.values||[]).find(n=>os(n,e))!==void 0}function Dl(t,e){if(t===e)return 0;const n=Ka(t),r=Ka(e);if(n!==r)return st(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return function(o,u){const c=fn(o.integerValue||o.doubleValue),d=fn(u.integerValue||u.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(t,e);case 3:return KA(t.timestampValue,e.timestampValue);case 4:return KA(Wh(t),Wh(e));case 5:return CE(t.stringValue,e.stringValue);case 6:return function(o,u){const c=$a(o),d=$a(u);return c.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),d=u.split("/");for(let f=0;f<c.length&&f<d.length;f++){const m=st(c[f],d[f]);if(m!==0)return m}return st(c.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,u){const c=st(fn(o.latitude),fn(u.latitude));return c!==0?c:st(fn(o.longitude),fn(u.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return XA(t.arrayValue,e.arrayValue);case 10:return function(o,u){var c,d,f,m;const y=o.fields||{},b=u.fields||{},T=(c=y[W0])===null||c===void 0?void 0:c.arrayValue,w=(d=b[W0])===null||d===void 0?void 0:d.arrayValue,I=st(((f=T?.values)===null||f===void 0?void 0:f.length)||0,((m=w?.values)===null||m===void 0?void 0:m.length)||0);return I!==0?I:XA(T,w)}(t.mapValue,e.mapValue);case 11:return function(o,u){if(o===u0.mapValue&&u===u0.mapValue)return 0;if(o===u0.mapValue)return 1;if(u===u0.mapValue)return-1;const c=o.fields||{},d=Object.keys(c),f=u.fields||{},m=Object.keys(f);d.sort(),m.sort();for(let y=0;y<d.length&&y<m.length;++y){const b=CE(d[y],m[y]);if(b!==0)return b;const T=Dl(c[d[y]],f[m[y]]);if(T!==0)return T}return st(d.length,m.length)}(t.mapValue,e.mapValue);default:throw $e(23264,{Pe:n})}}function KA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return st(t,e);const n=Ga(t),r=Ga(e),s=st(n.seconds,r.seconds);return s!==0?s:st(n.nanos,r.nanos)}function XA(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Dl(n[s],r[s]);if(o)return o}return st(n.length,r.length)}function Ol(t){return IE(t)}function IE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ga(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return $a(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return je.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=IE(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const u of r)o?o=!1:s+=",",s+=`${u}:${IE(n.fields[u])}`;return s+"}"}(t.mapValue):$e(61005,{value:t})}function A0(t){switch(Ka(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lp(t);return e?16+A0(e):16;case 5:return 2*t.stringValue.length;case 6:return $a(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+A0(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Wa(r.fields,(o,u)=>{s+=o.length+A0(u)}),s}(t.mapValue);default:throw $e(13486,{value:t})}}function QA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function NE(t){return!!t&&"integerValue"in t}function V1(t){return!!t&&"arrayValue"in t}function WA(t){return!!t&&"nullValue"in t}function ZA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function S0(t){return!!t&&"mapValue"in t}function I9(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[OI])===null||n===void 0?void 0:n.stringValue)===LI}function xh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=xh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function N9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===C9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.value=e}static empty(){return new _r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!S0(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xh(n)}setAll(e){let n=Kn.emptyPath(),r={},s=[];e.forEach((u,c)=>{if(!n.isImmediateParentOf(c)){const d=this.getFieldsMap(n);this.applyChanges(d,r,s),r={},s=[],n=c.popLast()}u?r[c.lastSegment()]=xh(u):s.push(c.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());S0(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return os(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];S0(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Wa(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new _r(xh(this.value))}}function PI(t){const e=[];return Wa(t.fields,(n,r)=>{const s=new Kn([n]);if(S0(r)){const o=PI(r.mapValue).fields;if(o.length===0)e.push(s);else for(const u of o)e.push(s.child(u))}else e.push(s)}),new Vr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n,r,s,o,u,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new er(e,0,We.min(),We.min(),We.min(),_r.empty(),0)}static newFoundDocument(e,n,r,s){return new er(e,1,n,We.min(),r,s,0)}static newNoDocument(e,n){return new er(e,2,n,We.min(),We.min(),_r.empty(),0)}static newUnknownDocument(e,n){return new er(e,3,n,We.min(),We.min(),_r.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(We.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=We.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new er(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n){this.position=e,this.inclusive=n}}function JA(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],u=t.position[s];if(o.field.isKeyField()?r=je.comparator(je.fromName(u.referenceValue),n.key):r=Dl(u,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function eS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!os(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,n="asc"){this.field=e,this.dir=n}}function R9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{}class vn extends MI{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new D9(e,n,r):n==="array-contains"?new P9(e,r):n==="in"?new M9(e,r):n==="not-in"?new B9(e,r):n==="array-contains-any"?new U9(e,r):new vn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new O9(e,r):new L9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Dl(n,this.value)):n!==null&&Ka(this.value)===Ka(n)&&this.matchesComparison(Dl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xi extends MI{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new xi(e,n)}matches(e){return BI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function BI(t){return t.op==="and"}function UI(t){return k9(t)&&BI(t)}function k9(t){for(const e of t.filters)if(e instanceof xi)return!1;return!0}function RE(t){if(t instanceof vn)return t.field.canonicalString()+t.op.toString()+Ol(t.value);if(UI(t))return t.filters.map(e=>RE(e)).join(",");{const e=t.filters.map(n=>RE(n)).join(",");return`${t.op}(${e})`}}function HI(t,e){return t instanceof vn?function(r,s){return s instanceof vn&&r.op===s.op&&r.field.isEqual(s.field)&&os(r.value,s.value)}(t,e):t instanceof xi?function(r,s){return s instanceof xi&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,u,c)=>o&&HI(u,s.filters[c]),!0):!1}(t,e):void $e(19439)}function VI(t){return t instanceof vn?function(n){return`${n.field.canonicalString()} ${n.op} ${Ol(n.value)}`}(t):t instanceof xi?function(n){return n.op.toString()+" {"+n.getFilters().map(VI).join(" ,")+"}"}(t):"Filter"}class D9 extends vn{constructor(e,n,r){super(e,n,r),this.key=je.fromName(r.referenceValue)}matches(e){const n=je.comparator(e.key,this.key);return this.matchesComparison(n)}}class O9 extends vn{constructor(e,n){super(e,"in",n),this.keys=zI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class L9 extends vn{constructor(e,n){super(e,"not-in",n),this.keys=zI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function zI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>je.fromName(r.referenceValue))}class P9 extends vn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return V1(n)&&Jh(n.arrayValue,this.value)}}class M9 extends vn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jh(this.value.arrayValue,n)}}class B9 extends vn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jh(this.value.arrayValue,n)}}class U9 extends vn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!V1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e,n=null,r=[],s=[],o=null,u=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=u,this.endAt=c,this.Ie=null}}function tS(t,e=null,n=[],r=[],s=null,o=null,u=null){return new H9(t,e,n,r,s,o,u)}function z1(t){const e=Je(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>RE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Op(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ol(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ol(r)).join(",")),e.Ie=n}return e.Ie}function F1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eS(t.startAt,e.startAt)&&eS(t.endAt,e.endAt)}function kE(t){return je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n=null,r=[],s=[],o=null,u="F",c=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=u,this.startAt=c,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function V9(t,e,n,r,s,o,u,c){return new ql(t,e,n,r,s,o,u,c)}function FI(t){return new ql(t)}function nS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jI(t){return t.collectionGroup!==null}function wh(t){const e=Je(t);if(e.Ee===null){e.Ee=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let c=new Rn(Kn.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new ed(o,r))}),n.has(Kn.keyField().canonicalString())||e.Ee.push(new ed(Kn.keyField(),r))}return e.Ee}function rs(t){const e=Je(t);return e.de||(e.de=z9(e,wh(t))),e.de}function z9(t,e){if(t.limitType==="F")return tS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new ed(s.field,o)});const n=t.endAt?new Z0(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Z0(t.startAt.position,t.startAt.inclusive):null;return tS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function DE(t,e){const n=t.filters.concat([e]);return new ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function OE(t,e,n){return new ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pp(t,e){return F1(rs(t),rs(e))&&t.limitType===e.limitType}function qI(t){return`${z1(rs(t))}|lt:${t.limitType}`}function ol(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>VI(s)).join(", ")}]`),Op(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ol(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ol(s)).join(",")),`Target(${r})`}(rs(t))}; limitType=${t.limitType})`}function Mp(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):je.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of wh(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(u,c,d){const f=JA(u,c,d);return u.inclusive?f<=0:f<0}(r.startAt,wh(r),s)||r.endAt&&!function(u,c,d){const f=JA(u,c,d);return u.inclusive?f>=0:f>0}(r.endAt,wh(r),s))}(t,e)}function F9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function YI(t){return(e,n)=>{let r=!1;for(const s of wh(t)){const o=j9(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function j9(t,e,n){const r=t.field.isKeyField()?je.comparator(e.key,n.key):function(o,u,c){const d=u.data.field(o),f=c.data.field(o);return d!==null&&f!==null?Dl(d,f):$e(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return $e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return CI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9=new Jt(je.comparator);function Gs(){return q9}const GI=new Jt(je.comparator);function Th(...t){let e=GI;for(const n of t)e=e.insert(n.key,n);return e}function $I(t){let e=GI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Uo(){return Ch()}function KI(){return Ch()}function Ch(){return new Jo(t=>t.toString(),(t,e)=>t.isEqual(e))}const Y9=new Jt(je.comparator),G9=new Rn(je.comparator);function pt(...t){let e=G9;for(const n of t)e=e.add(n);return e}const $9=new Rn(st);function K9(){return $9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:X0(e)?"-0":e}}function XI(t){return{integerValue:""+t}}function X9(t,e){return v9(e)?XI(e):j1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(){this._=void 0}}function Q9(t,e,n){return t instanceof J0?function(s,o){const u={fields:{[RI]:{stringValue:NI},[DI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&H1(o)&&(o=Lp(o)),o&&(u.fields[kI]=o),{mapValue:u}}(n,e):t instanceof td?WI(t,e):t instanceof nd?ZI(t,e):function(s,o){const u=QI(s,o),c=rS(u)+rS(s.Re);return NE(u)&&NE(s.Re)?XI(c):j1(s.serializer,c)}(t,e)}function W9(t,e,n){return t instanceof td?WI(t,e):t instanceof nd?ZI(t,e):n}function QI(t,e){return t instanceof ep?function(r){return NE(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class J0 extends Bp{}class td extends Bp{constructor(e){super(),this.elements=e}}function WI(t,e){const n=JI(e);for(const r of t.elements)n.some(s=>os(s,r))||n.push(r);return{arrayValue:{values:n}}}class nd extends Bp{constructor(e){super(),this.elements=e}}function ZI(t,e){let n=JI(e);for(const r of t.elements)n=n.filter(s=>!os(s,r));return{arrayValue:{values:n}}}class ep extends Bp{constructor(e,n){super(),this.serializer=e,this.Re=n}}function rS(t){return fn(t.integerValue||t.doubleValue)}function JI(t){return V1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Z9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof td&&s instanceof td||r instanceof nd&&s instanceof nd?kl(r.elements,s.elements,os):r instanceof ep&&s instanceof ep?os(r.Re,s.Re):r instanceof J0&&s instanceof J0}(t.transform,e.transform)}class J9{constructor(e,n){this.version=e,this.transformResults=n}}class Fr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fr}static exists(e){return new Fr(void 0,e)}static updateTime(e){return new Fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function x0(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Up{}function eN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hp(t.key,Fr.none()):new md(t.key,t.data,Fr.none());{const n=t.data,r=_r.empty();let s=new Rn(Kn.comparator);for(let o of e.fields)if(!s.has(o)){let u=n.field(o);u===null&&o.length>1&&(o=o.popLast(),u=n.field(o)),u===null?r.delete(o):r.set(o,u),s=s.add(o)}return new Za(t.key,r,new Vr(s.toArray()),Fr.none())}}function e7(t,e,n){t instanceof md?function(s,o,u){const c=s.value.clone(),d=sS(s.fieldTransforms,o,u.transformResults);c.setAll(d),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Za?function(s,o,u){if(!x0(s.precondition,o))return void o.convertToUnknownDocument(u.version);const c=sS(s.fieldTransforms,o,u.transformResults),d=o.data;d.setAll(tN(s)),d.setAll(c),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,n)}function Ih(t,e,n,r){return t instanceof md?function(o,u,c,d){if(!x0(o.precondition,u))return c;const f=o.value.clone(),m=aS(o.fieldTransforms,d,u);return f.setAll(m),u.convertToFoundDocument(u.version,f).setHasLocalMutations(),null}(t,e,n,r):t instanceof Za?function(o,u,c,d){if(!x0(o.precondition,u))return c;const f=aS(o.fieldTransforms,d,u),m=u.data;return m.setAll(tN(o)),m.setAll(f),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(y=>y.field))}(t,e,n,r):function(o,u,c){return x0(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c}(t,e,n)}function t7(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=QI(r.transform,s||null);o!=null&&(n===null&&(n=_r.empty()),n.set(r.field,o))}return n||null}function iS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&kl(r,s,(o,u)=>Z9(o,u))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class md extends Up{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Za extends Up{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function tN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function sS(t,e,n){const r=new Map;It(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let s=0;s<n.length;s++){const o=t[s],u=o.transform,c=e.data.field(o.field);r.set(o.field,W9(u,c,n[s]))}return r}function aS(t,e,n){const r=new Map;for(const s of t){const o=s.transform,u=n.data.field(s.field);r.set(s.field,Q9(o,u,e))}return r}class Hp extends Up{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class n7 extends Up{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&e7(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ih(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ih(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=KI();return this.mutations.forEach(s=>{const o=e.get(s.key),u=o.overlayedDocument;let c=this.applyToLocalView(u,o.mutatedFields);c=n.has(s.key)?null:c;const d=eN(u,c);d!==null&&r.set(s.key,d),u.isValidDocument()||u.convertToNoDocument(We.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),pt())}isEqual(e){return this.batchId===e.batchId&&kl(this.mutations,e.mutations,(n,r)=>iS(n,r))&&kl(this.baseMutations,e.baseMutations,(n,r)=>iS(n,r))}}class q1{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){It(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return Y9}();const o=e.mutations;for(let u=0;u<o.length;u++)s=s.insert(o[u].key,r[u].version);return new q1(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i7{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var En,bt;function a7(t){switch(t){case Se.OK:return $e(64938);case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return $e(15467,{code:t})}}function nN(t){if(t===void 0)return Ys("GRPC error has no .code"),Se.UNKNOWN;switch(t){case En.OK:return Se.OK;case En.CANCELLED:return Se.CANCELLED;case En.UNKNOWN:return Se.UNKNOWN;case En.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case En.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case En.INTERNAL:return Se.INTERNAL;case En.UNAVAILABLE:return Se.UNAVAILABLE;case En.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case En.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case En.NOT_FOUND:return Se.NOT_FOUND;case En.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case En.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case En.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case En.ABORTED:return Se.ABORTED;case En.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case En.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case En.DATA_LOSS:return Se.DATA_LOSS;default:return $e(39323,{code:t})}}(bt=En||(En={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7=new Va([4294967295,4294967295],0);function oS(t){const e=SI().encode(t),n=new gI;return n.update(e),new Uint8Array(n.digest())}function uS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Va([n,r],0),new Va([s,o],0)]}class Y1{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new vh(`Invalid padding: ${n}`);if(r<0)throw new vh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new vh(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=Va.fromNumber(this.pe)}we(e,n,r){let s=e.add(n.multiply(Va.fromNumber(r)));return s.compare(o7)===1&&(s=new Va([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=oS(e),[r,s]=uS(n);for(let o=0;o<this.hashCount;o++){const u=this.we(r,s,o);if(!this.be(u))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new Y1(o,s,n);return r.forEach(c=>u.insert(c)),u}insert(e){if(this.pe===0)return;const n=oS(e),[r,s]=uS(n);for(let o=0;o<this.hashCount;o++){const u=this.we(r,s,o);this.Se(u)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class vh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,gd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vp(We.min(),s,new Jt(st),Gs(),pt())}}class gd{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new gd(r,n,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,n,r,s){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=s}}class rN{constructor(e,n){this.targetId=e,this.Ce=n}}class iN{constructor(e,n,r=Xn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class lS{constructor(){this.Fe=0,this.Me=cS(),this.xe=Xn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=pt(),n=pt(),r=pt();return this.Me.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:$e(38017,{changeType:o})}}),new gd(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=cS()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,It(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class u7{constructor(e){this.ze=e,this.je=new Map,this.He=Gs(),this.Je=l0(),this.Ye=l0(),this.Ze=new Jt(st)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:$e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(e){const n=e.targetId,r=e.Ce.count,s=this._t(n);if(s){const o=s.target;if(kE(o))if(r===0){const u=new je(o.path);this.tt(n,u,er.newNoDocument(u,We.min()))}else It(r===1,20013,{expectedCount:r});else{const u=this.ut(n);if(u!==r){const c=this.ct(e),d=c?this.lt(c,e,u):1;if(d!==0){this.st(n);const f=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let u,c;try{u=$a(r).toUint8Array()}catch(d){if(d instanceof II)return Rl("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{c=new Y1(u,s,o)}catch(d){return Rl(d instanceof vh?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return c.pe===0?null:c}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const u=this.ze.Pt(),c=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.tt(n,o,null),s++)}),s}It(e){const n=new Map;this.je.forEach((o,u)=>{const c=this._t(u);if(c){if(o.current&&kE(c.target)){const d=new je(c.target.path);this.Et(d).has(u)||this.dt(u,d)||this.tt(u,d,er.newNoDocument(d,e))}o.Le&&(n.set(u,o.qe()),o.Qe())}});let r=pt();this.Ye.forEach((o,u)=>{let c=!0;u.forEachWhile(d=>{const f=this._t(d);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.He.forEach((o,u)=>u.setReadTime(e));const s=new Vp(e,n,this.Ze,this.He,r);return this.He=Gs(),this.Je=l0(),this.Ye=l0(),this.Ze=new Jt(st),s}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new lS,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Rn(st),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Rn(st),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||Pe("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new lS),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function l0(){return new Jt(je.comparator)}function cS(){return new Jt(je.comparator)}const l7={asc:"ASCENDING",desc:"DESCENDING"},c7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},h7={and:"AND",or:"OR"};class d7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function LE(t,e){return t.useProto3Json||Op(e)?e:{value:e}}function tp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function f7(t,e){return tp(t,e.toTimestamp())}function is(t){return It(!!t,49232),We.fromTimestamp(function(n){const r=Ga(n);return new Yt(r.seconds,r.nanos)}(t))}function G1(t,e){return PE(t,e).canonicalString()}function PE(t,e){const n=function(s){return new qt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aN(t){const e=qt.fromString(t);return It(hN(e),10190,{key:e.toString()}),e}function ME(t,e){return G1(t.databaseId,e.path)}function Ly(t,e){const n=aN(e);if(n.get(1)!==t.databaseId.projectId)throw new Me(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Me(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new je(uN(n))}function oN(t,e){return G1(t.databaseId,e)}function p7(t){const e=aN(t);return e.length===4?qt.emptyPath():uN(e)}function BE(t){return new qt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uN(t){return It(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function hS(t,e,n){return{name:ME(t,e),fields:n.value.mapValue.fields}}function m7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:$e(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(It(m===void 0||typeof m=="string",58123),Xn.fromBase64String(m||"")):(It(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Xn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),u=e.targetChange.cause,c=u&&function(f){const m=f.code===void 0?Se.UNKNOWN:nN(f.code);return new Me(m,f.message||"")}(u);n=new iN(r,s,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ly(t,r.document.name),o=is(r.document.updateTime),u=r.document.createTime?is(r.document.createTime):We.min(),c=new _r({mapValue:{fields:r.document.fields}}),d=er.newFoundDocument(s,o,u,c),f=r.targetIds||[],m=r.removedTargetIds||[];n=new w0(f,m,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ly(t,r.document),o=r.readTime?is(r.readTime):We.min(),u=er.newNoDocument(s,o),c=r.removedTargetIds||[];n=new w0([],c,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ly(t,r.document),o=r.removedTargetIds||[];n=new w0([],o,s,null)}else{if(!("filter"in e))return $e(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,u=new s7(s,o),c=r.targetId;n=new rN(c,u)}}return n}function g7(t,e){let n;if(e instanceof md)n={update:hS(t,e.key,e.value)};else if(e instanceof Hp)n={delete:ME(t,e.key)};else if(e instanceof Za)n={update:hS(t,e.key,e.data),updateMask:x7(e.fieldMask)};else{if(!(e instanceof n7))return $e(16599,{ft:e.type});n={verify:ME(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof J0)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof td)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof nd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ep)return{fieldPath:u.field.canonicalString(),increment:c.Re};throw $e(20930,{transform:u.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:f7(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:$e(27497)}(t,e.precondition)),n}function y7(t,e){return t&&t.length>0?(It(e!==void 0,14353),t.map(n=>function(s,o){let u=s.updateTime?is(s.updateTime):is(o);return u.isEqual(We.min())&&(u=is(o)),new J9(u,s.transformResults||[])}(n,e))):[]}function E7(t,e){return{documents:[oN(t,e.path)]}}function _7(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oN(t,s);const o=function(f){if(f.length!==0)return cN(xi.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const u=function(f){if(f.length!==0)return f.map(m=>function(b){return{field:ul(b.field),direction:v7(b.dir)}}(m))}(e.orderBy);u&&(n.structuredQuery.orderBy=u);const c=LE(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{gt:n,parent:s}}function b7(t){let e=p7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){It(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(y){const b=lN(y);return b instanceof xi&&UI(b)?b.getFilters():[b]}(n.where));let u=[];n.orderBy&&(u=function(y){return y.map(b=>function(w){return new ed(ll(w.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(b))}(n.orderBy));let c=null;n.limit&&(c=function(y){let b;return b=typeof y=="object"?y.value:y,Op(b)?null:b}(n.limit));let d=null;n.startAt&&(d=function(y){const b=!!y.before,T=y.values||[];return new Z0(T,b)}(n.startAt));let f=null;return n.endAt&&(f=function(y){const b=!y.before,T=y.values||[];return new Z0(T,b)}(n.endAt)),V9(e,s,u,o,c,"F",d,f)}function T7(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $e(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function lN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ll(n.unaryFilter.field);return vn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ll(n.unaryFilter.field);return vn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ll(n.unaryFilter.field);return vn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ll(n.unaryFilter.field);return vn.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return $e(61313);default:return $e(60726)}}(t):t.fieldFilter!==void 0?function(n){return vn.create(ll(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return $e(58110);default:return $e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xi.create(n.compositeFilter.filters.map(r=>lN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return $e(1026)}}(n.compositeFilter.op))}(t):$e(30097,{filter:t})}function v7(t){return l7[t]}function A7(t){return c7[t]}function S7(t){return h7[t]}function ul(t){return{fieldPath:t.canonicalString()}}function ll(t){return Kn.fromServerFormat(t.fieldPath)}function cN(t){return t instanceof vn?function(n){if(n.op==="=="){if(ZA(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NAN"}};if(WA(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ZA(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NAN"}};if(WA(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(n.field),op:A7(n.op),value:n.value}}}(t):t instanceof xi?function(n){const r=n.getFilters().map(s=>cN(s));return r.length===1?r[0]:{compositeFilter:{op:S7(n.op),filters:r}}}(t):$e(54877,{filter:t})}function x7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,n,r,s,o=We.min(),u=We.min(),c=Xn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c,this.expectedCount=d}withSequenceNumber(e){return new La(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new La(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e){this.wt=e}}function C7(t){const e=b7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?OE(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I7{constructor(){this.Cn=new N7}addToCollectionParentIndex(e,n){return this.Cn.add(n),xe.resolve()}getCollectionParents(e,n){return xe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return xe.resolve()}deleteFieldIndex(e,n){return xe.resolve()}deleteAllFieldIndexes(e){return xe.resolve()}createTargetIndexes(e,n){return xe.resolve()}getDocumentsMatchingTarget(e,n){return xe.resolve(null)}getIndexType(e,n){return xe.resolve(0)}getFieldIndexes(e,n){return xe.resolve([])}getNextCollectionGroupToUpdate(e){return xe.resolve(null)}getMinOffset(e,n){return xe.resolve(Ya.min())}getMinOffsetFromCollectionGroup(e,n){return xe.resolve(Ya.min())}updateCollectionGroup(e,n,r){return xe.resolve()}updateIndexEntries(e,n){return xe.resolve()}}class N7{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Rn(qt.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Rn(qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dN=41943040;class yr{static withCacheSize(e){return new yr(e,yr.DEFAULT_COLLECTION_PERCENTILE,yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr.DEFAULT_COLLECTION_PERCENTILE=10,yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yr.DEFAULT=new yr(dN,yr.DEFAULT_COLLECTION_PERCENTILE,yr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yr.DISABLED=new yr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ll(0)}static lr(){return new Ll(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="LruGarbageCollector",R7=1048576;function pS([t,e],[n,r]){const s=st(t,n);return s===0?st(e,r):s}class k7{constructor(e){this.Er=e,this.buffer=new Rn(pS),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();pS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class D7{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){Pe(fS,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){jl(n)?Pe(fS,"Ignoring IndexedDB error during garbage collection: ",n):await Fl(n)}await this.mr(3e5)})}}class O7{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return xe.resolve(Dp.le);const r=new k7(n);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(dS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dS):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,s,o,u,c,d,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(y=>(y>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,u=Date.now(),this.nthSequenceNumber(e,s))).next(y=>(r=y,c=Date.now(),this.removeTargets(e,r,n))).next(y=>(o=y,d=Date.now(),this.removeOrphanedDocuments(e,r))).next(y=>(f=Date.now(),al()<=ft.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-m}ms
	Determined least recently used ${s} in `+(c-u)+`ms
	Removed ${o} targets in `+(d-c)+`ms
	Removed ${y} documents in `+(f-d)+`ms
Total Duration: ${f-m}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:y})))}}function L7(t,e){return new O7(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(){this.changes=new Jo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,er.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?xe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ih(r.mutation,s,Vr.empty(),Yt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,pt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=pt()){const s=Uo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let u=Th();return o.forEach((c,d)=>{u=u.insert(c,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,n){const r=Uo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,pt()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((u,c)=>{n.set(u,c)})})}computeViews(e,n,r,s){let o=Gs();const u=Ch(),c=function(){return Ch()}();return n.forEach((d,f)=>{const m=r.get(f.key);s.has(f.key)&&(m===void 0||m.mutation instanceof Za)?o=o.insert(f.key,f):m!==void 0?(u.set(f.key,m.mutation.getFieldMask()),Ih(m.mutation,f,m.mutation.getFieldMask(),Yt.now())):u.set(f.key,Vr.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((f,m)=>u.set(f,m)),n.forEach((f,m)=>{var y;return c.set(f,new M7(m,(y=u.get(f))!==null&&y!==void 0?y:null))}),c))}recalculateAndSaveOverlays(e,n){const r=Ch();let s=new Jt((u,c)=>u-c),o=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(u=>{for(const c of u)c.keys().forEach(d=>{const f=n.get(d);if(f===null)return;let m=r.get(d)||Vr.empty();m=c.applyToLocalView(f,m),r.set(d,m);const y=(s.get(c.batchId)||pt()).add(d);s=s.insert(c.batchId,y)})}).next(()=>{const u=[],c=s.getReverseIterator();for(;c.hasNext();){const d=c.getNext(),f=d.key,m=d.value,y=KI();m.forEach(b=>{if(!o.has(b)){const T=eN(n.get(b),r.get(b));T!==null&&y.set(b,T),o=o.add(b)}}),u.push(this.documentOverlayCache.saveOverlays(e,f,y))}return xe.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(u){return je.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):jI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const u=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):xe.resolve(Uo());let c=Qh,d=o;return u.next(f=>xe.forEach(f,(m,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(m)?xe.resolve():this.remoteDocumentCache.getEntry(e,m).next(b=>{d=d.insert(m,b)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,d,f,pt())).next(m=>({batchId:c,changes:$I(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new je(n)).next(r=>{let s=Th();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let u=Th();return this.indexManager.getCollectionParents(e,o).next(c=>xe.forEach(c,d=>{const f=function(y,b){return new ql(b,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next(m=>{m.forEach((y,b)=>{u=u.insert(y,b)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(u=>{o.forEach((d,f)=>{const m=f.getKey();u.get(m)===null&&(u=u.insert(m,er.newInvalidDocument(m)))});let c=Th();return u.forEach((d,f)=>{const m=o.get(d);m!==void 0&&Ih(m.mutation,f,Vr.empty(),Yt.now()),Mp(n,f)&&(c=c.insert(d,f))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return xe.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:is(s.createTime)}}(n)),xe.resolve()}getNamedQuery(e,n){return xe.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(s){return{name:s.name,query:C7(s.bundledQuery),readTime:is(s.readTime)}}(n)),xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(){this.overlays=new Jt(je.comparator),this.Qr=new Map}getOverlay(e,n){return xe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Uo();return xe.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),xe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),xe.resolve()}getOverlaysForCollection(e,n,r){const s=Uo(),o=n.length+1,u=new je(n.child("")),c=this.overlays.getIteratorFrom(u);for(;c.hasNext();){const d=c.getNext().value,f=d.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&d.largestBatchId>r&&s.set(d.getKey(),d)}return xe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new Jt((f,m)=>f-m);const u=this.overlays.getIterator();for(;u.hasNext();){const f=u.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let m=o.get(f.largestBatchId);m===null&&(m=Uo(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const c=Uo(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=s)););return xe.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new i7(n,r));let o=this.Qr.get(n);o===void 0&&(o=pt(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(){this.sessionToken=Xn.EMPTY_BYTE_STRING}getSessionToken(e){return xe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,xe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(){this.$r=new Rn(Bn.Ur),this.Kr=new Rn(Bn.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new Bn(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new Bn(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new je(new qt([])),r=new Bn(n,e),s=new Bn(n,e+1),o=[];return this.Kr.forEachInRange([r,s],u=>{this.zr(u),o.push(u.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new je(new qt([])),r=new Bn(n,e),s=new Bn(n,e+1);let o=pt();return this.Kr.forEachInRange([r,s],u=>{o=o.add(u.key)}),o}containsKey(e){const n=new Bn(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Bn{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return je.comparator(e.key,n.key)||st(e.Zr,n.Zr)}static Wr(e,n){return st(e.Zr,n.Zr)||je.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Rn(Bn.Ur)}checkEmpty(e){return xe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new r7(o,n,r,s);this.mutationQueue.push(u);for(const c of s)this.Xr=this.Xr.add(new Bn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return xe.resolve(u)}lookupMutationBatch(e,n){return xe.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ti(r),o=s<0?0:s;return xe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(this.mutationQueue.length===0?U1:this.nr-1)}getAllMutationBatches(e){return xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Bn(n,0),s=new Bn(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,s],u=>{const c=this.ei(u.Zr);o.push(c)}),xe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Rn(st);return n.forEach(s=>{const o=new Bn(s,0),u=new Bn(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,u],c=>{r=r.add(c.Zr)})}),xe.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;je.isDocumentKey(o)||(o=o.child(""));const u=new Bn(new je(o),0);let c=new Rn(st);return this.Xr.forEachWhile(d=>{const f=d.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(c=c.add(d.Zr)),!0)},u),xe.resolve(this.ni(c))}ni(e){const n=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){It(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return xe.forEach(n.mutations,s=>{const o=new Bn(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new Bn(n,0),s=this.Xr.firstAfterOrEqual(r);return xe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,xe.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e){this.ii=e,this.docs=function(){return new Jt(je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,u=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return xe.resolve(r?r.document.mutableCopy():er.newInvalidDocument(n))}getEntries(e,n){let r=Gs();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():er.newInvalidDocument(s))}),xe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Gs();const u=n.path,c=new je(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(c);for(;d.hasNext();){const{key:f,value:{document:m}}=d.getNext();if(!u.isPrefixOf(f.path))break;f.path.length>u.length+1||E9(y9(m),r)<=0||(s.has(m.key)||Mp(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return xe.resolve(o)}getAllFromCollectionGroup(e,n,r,s){$e(9500)}si(e,n){return xe.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new j7(this)}getSize(e){return xe.resolve(this.size)}}class j7 extends P7{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),xe.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e){this.persistence=e,this.oi=new Jo(n=>z1(n),F1),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this._i=0,this.ai=new $1,this.targetCount=0,this.ui=Ll.cr()}forEachTarget(e,n){return this.oi.forEach((r,s)=>n(s)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),xe.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Ll(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,xe.resolve()}updateTargetData(e,n){return this.Tr(n),xe.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.oi.forEach((u,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.oi.delete(u),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),xe.waitFor(o).next(()=>s)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return xe.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),xe.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(u=>{o.push(s.markPotentiallyOrphaned(e,u))}),xe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),xe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return xe.resolve(r)}containsKey(e,n){return xe.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n){this.ci={},this.overlays={},this.li=new Dp(0),this.hi=!1,this.hi=!0,this.Pi=new V7,this.referenceDelegate=e(this),this.Ti=new q7(this),this.indexManager=new I7,this.remoteDocumentCache=function(s){return new F7(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new w7(n),this.Ei=new U7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new H7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new z7(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){Pe("MemoryPersistence","Starting transaction:",e);const s=new Y7(this.li.next());return this.referenceDelegate.di(),r(s).next(o=>this.referenceDelegate.Ai(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ri(e,n){return xe.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class Y7 extends b9{constructor(e){super(),this.currentSequenceNumber=e}}class K1{constructor(e){this.persistence=e,this.Vi=new $1,this.mi=null}static fi(e){return new K1(e)}get gi(){if(this.mi)return this.mi;throw $e(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),xe.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),xe.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.gi,r=>{const s=je.fromPath(r);return this.pi(e,s).next(o=>{o||n.removeEntry(s,We.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return xe.or([()=>xe.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class np{constructor(e,n){this.persistence=e,this.yi=new Jo(r=>A9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=L7(this,n)}static fi(e,n){return new np(e,n)}di(){}Ai(e){return xe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return xe.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(o=>o?xe.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.si(e,u=>this.Dr(e,u,n).next(c=>{c||(r++,o.removeEntry(u,We.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),xe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),xe.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),xe.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),xe.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=A0(e.data.value)),n}Dr(e,n,r){return xe.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.yi.get(n);return xe.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.ds=r,this.As=s}static Rs(e,n){let r=pt(),s=pt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new X1(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return zM()?8:T9(nr())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ws(e,n).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.bs(e,n,s,r).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new G7;return this.Ss(e,n,u).next(c=>{if(o.result=c,this.fs)return this.Ds(e,n,u,c.size)})}).next(()=>o.result)}Ds(e,n,r,s){return r.documentReadCount<this.gs?(al()<=ft.DEBUG&&Pe("QueryEngine","SDK will not create cache indexes for query:",ol(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),xe.resolve()):(al()<=ft.DEBUG&&Pe("QueryEngine","Query:",ol(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(al()<=ft.DEBUG&&Pe("QueryEngine","The SDK decides to create cache indexes for query:",ol(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rs(n))):xe.resolve())}ws(e,n){if(nS(n))return xe.resolve(null);let r=rs(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=OE(n,null,"F"),r=rs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const u=pt(...o);return this.ys.getDocuments(e,u).next(c=>this.indexManager.getMinOffset(e,r).next(d=>{const f=this.vs(n,c);return this.Cs(n,f,u,d.readTime)?this.ws(e,OE(n,null,"F")):this.Fs(e,f,n,d)}))})))}bs(e,n,r,s){return nS(n)||s.isEqual(We.min())?xe.resolve(null):this.ys.getDocuments(e,r).next(o=>{const u=this.vs(n,o);return this.Cs(n,u,r,s)?xe.resolve(null):(al()<=ft.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ol(n)),this.Fs(e,u,n,g9(s,Qh)).next(c=>c))})}vs(e,n){let r=new Rn(YI(e));return n.forEach((s,o)=>{Mp(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return al()<=ft.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",ol(n)),this.ys.getDocumentsMatchingQuery(e,n,Ya.min(),r)}Fs(e,n,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="LocalStore",K7=3e8;class X7{constructor(e,n,r,s){this.persistence=e,this.Ms=n,this.serializer=s,this.xs=new Jt(st),this.Os=new Jo(o=>z1(o),F1),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B7(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function Q7(t,e,n,r){return new X7(t,e,n,r)}async function pN(t,e){const n=Je(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const u=[],c=[];let d=pt();for(const f of s){u.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}for(const f of o){c.push(f.batchId);for(const m of f.mutations)d=d.add(m.key)}return n.localDocuments.getDocuments(r,d).next(f=>({ks:f,removedBatchIds:u,addedBatchIds:c}))})})}function W7(t,e){const n=Je(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(c,d,f,m){const y=f.batch,b=y.keys();let T=xe.resolve();return b.forEach(w=>{T=T.next(()=>m.getEntry(d,w)).next(I=>{const L=f.docVersions.get(w);It(L!==null,48541),I.version.compareTo(L)<0&&(y.applyToRemoteDocument(I,f),I.isValidDocument()&&(I.setReadTime(f.commitVersion),m.addEntry(I)))})}),T.next(()=>c.mutationQueue.removeMutationBatch(d,y))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=pt();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function mN(t){const e=Je(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function Z7(t,e){const n=Je(t),r=e.snapshotVersion;let s=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=n.Bs.newChangeBuffer({trackRemovals:!0});s=n.xs;const c=[];e.targetChanges.forEach((m,y)=>{const b=s.get(y);if(!b)return;c.push(n.Ti.removeMatchingKeys(o,m.removedDocuments,y).next(()=>n.Ti.addMatchingKeys(o,m.addedDocuments,y)));let T=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?T=T.withResumeToken(Xn.EMPTY_BYTE_STRING,We.min()).withLastLimboFreeSnapshotVersion(We.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,r)),s=s.insert(y,T),function(I,L,k){return I.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=K7?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(b,T,m)&&c.push(n.Ti.updateTargetData(o,T))});let d=Gs(),f=pt();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(J7(o,u,e.documentUpdates).next(m=>{d=m.qs,f=m.Qs})),!r.isEqual(We.min())){const m=n.Ti.getLastRemoteSnapshotVersion(o).next(y=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(m)}return xe.waitFor(c).next(()=>u.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,f)).next(()=>d)}).then(o=>(n.xs=s,o))}function J7(t,e,n){let r=pt(),s=pt();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let u=Gs();return n.forEach((c,d)=>{const f=o.get(c);d.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(c)),d.isNoDocument()&&d.version.isEqual(We.min())?(e.removeEntry(c,d.readTime),u=u.insert(c,d)):!f.isValidDocument()||d.version.compareTo(f.version)>0||d.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(d),u=u.insert(c,d)):Pe(Q1,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",d.version)}),{qs:u,Qs:s}})}function eB(t,e){const n=Je(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=U1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function tB(t,e){const n=Je(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ti.getTargetData(r,e).next(o=>o?(s=o,xe.resolve(s)):n.Ti.allocateTargetId(r).next(u=>(s=new La(e,u,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function UE(t,e,n){const r=Je(t),s=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!jl(u))throw u;Pe(Q1,`Failed to update sequence numbers for target ${e}: ${u}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function mS(t,e,n){const r=Je(t);let s=We.min(),o=pt();return r.persistence.runTransaction("Execute query","readwrite",u=>function(d,f,m){const y=Je(d),b=y.Os.get(m);return b!==void 0?xe.resolve(y.xs.get(b)):y.Ti.getTargetData(f,m)}(r,u,rs(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(u,c.targetId).next(d=>{o=d})}).next(()=>r.Ms.getDocumentsMatchingQuery(u,e,n?s:We.min(),n?o:pt())).next(c=>(nB(r,F9(e),c),{documents:c,$s:o})))}function nB(t,e,n){let r=t.Ns.get(e)||We.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}class gS{constructor(){this.activeTargetIds=K9()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rB{constructor(){this.xo=new gS,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new gS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="ConnectivityMonitor";class ES{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Pe(yS,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Pe(yS,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c0=null;function HE(){return c0===null?c0=function(){return 268435456+Math.round(2147483648*Math.random())}():c0++,"0x"+c0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="RestConnection",sB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aB{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===Q0?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,n,r,s,o){const u=HE(),c=this.jo(e,n.toUriEncodedString());Pe(Py,`Sending RPC '${e}' ${u}:`,c,r);const d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,s,o);const{host:f}=new URL(c),m=Zo(f);return this.Jo(e,c,d,r,m).then(y=>(Pe(Py,`Received RPC '${e}' ${u}: `,y),y),y=>{throw Rl(Py,`RPC '${e}' ${u} failed with error: `,y,"url: ",c,"request:",r),y})}Yo(e,n,r,s,o,u){return this.zo(e,n,r,s,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}jo(e,n){const r=sB[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oB{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="WebChannelConnection";class uB extends aB{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const u=HE();return new Promise((c,d)=>{const f=new yI;f.setWithCredentials(!0),f.listenOnce(EI.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case v0.NO_ERROR:const y=f.getResponseJson();Pe(Zn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(y)),c(y);break;case v0.TIMEOUT:Pe(Zn,`RPC '${e}' ${u} timed out`),d(new Me(Se.DEADLINE_EXCEEDED,"Request time out"));break;case v0.HTTP_ERROR:const b=f.getStatus();if(Pe(Zn,`RPC '${e}' ${u} failed with status:`,b,"response text:",f.getResponseText()),b>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const w=T?.error;if(w&&w.status&&w.message){const I=function(k){const q=k.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(q)>=0?q:Se.UNKNOWN}(w.status);d(new Me(I,w.message))}else d(new Me(Se.UNKNOWN,"Server responded with status "+f.getStatus()))}else d(new Me(Se.UNAVAILABLE,"Connection failed."));break;default:$e(9055,{h_:e,streamId:u,P_:f.getLastErrorCode(),T_:f.getLastError()})}}finally{Pe(Zn,`RPC '${e}' ${u} completed.`)}});const m=JSON.stringify(s);Pe(Zn,`RPC '${e}' ${u} sending request:`,s),f.send(n,"POST",m,r,15)})}I_(e,n,r){const s=HE(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=TI(),c=bI(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(d.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,n,r),d.encodeInitMessageHeaders=!0;const m=o.join("");Pe(Zn,`Creating RPC '${e}' stream ${s}: ${m}`,d);const y=u.createWebChannel(m,d);this.E_(y);let b=!1,T=!1;const w=new oB({Zo:L=>{T?Pe(Zn,`Not sending because RPC '${e}' stream ${s} is closed:`,L):(b||(Pe(Zn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),b=!0),Pe(Zn,`RPC '${e}' stream ${s} sending:`,L),y.send(L))},Xo:()=>y.close()}),I=(L,k,q)=>{L.listen(k,$=>{try{q($)}catch(j){setTimeout(()=>{throw j},0)}})};return I(y,bh.EventType.OPEN,()=>{T||(Pe(Zn,`RPC '${e}' stream ${s} transport opened.`),w.__())}),I(y,bh.EventType.CLOSE,()=>{T||(T=!0,Pe(Zn,`RPC '${e}' stream ${s} transport closed`),w.u_(),this.d_(y))}),I(y,bh.EventType.ERROR,L=>{T||(T=!0,Rl(Zn,`RPC '${e}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),w.u_(new Me(Se.UNAVAILABLE,"The operation could not be completed")))}),I(y,bh.EventType.MESSAGE,L=>{var k;if(!T){const q=L.data[0];It(!!q,16349);const $=q,j=$?.error||((k=$[0])===null||k===void 0?void 0:k.error);if(j){Pe(Zn,`RPC '${e}' stream ${s} received error:`,j);const te=j.status;let Y=function(D){const U=En[D];if(U!==void 0)return nN(U)}(te),M=j.message;Y===void 0&&(Y=Se.INTERNAL,M="Unknown error status: "+te+" with message "+j.message),T=!0,w.u_(new Me(Y,M)),y.close()}else Pe(Zn,`RPC '${e}' stream ${s} received:`,q),w.c_(q)}}),I(c,_I.STAT_EVENT,L=>{L.stat===wE.PROXY?Pe(Zn,`RPC '${e}' stream ${s} detected buffering proxy`):L.stat===wE.NOPROXY&&Pe(Zn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.a_()},0),w}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function My(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(t){return new d7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n,r=1e3,s=1.5,o=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=s,this.V_=o,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,n-r);s>0&&Pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="PersistentStream";class yN{constructor(e,n,r,s,o,u,c,d){this.xi=e,this.S_=r,this.D_=s,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new gN(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===Se.RESOURCE_EXHAUSTED?(Ys(n.toString()),Ys("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===n&&this.z_(r,s)},r=>{e(()=>{const s=new Me(Se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return Pe(_S,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(Pe(_S,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lB extends yN{constructor(e,n,r,s,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=m7(this.serializer,e),r=function(o){if(!("targetChange"in o))return We.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?We.min():u.readTime?is(u.readTime):We.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=BE(this.serializer),n.addTarget=function(o,u){let c;const d=u.target;if(c=kE(d)?{documents:E7(o,d)}:{query:_7(o,d).gt},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=sN(o,u.resumeToken);const f=LE(o,u.expectedCount);f!==null&&(c.expectedCount=f)}else if(u.snapshotVersion.compareTo(We.min())>0){c.readTime=tp(o,u.snapshotVersion.toTimestamp());const f=LE(o,u.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);const r=T7(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=BE(this.serializer),n.removeTarget=e,this.Q_(n)}}class cB extends yN{constructor(e,n,r,s,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,u),this.serializer=o}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return It(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,It(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){It(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=y7(e.writeResults,e.commitTime),r=is(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=BE(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>g7(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{}class dB extends hB{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new Me(Se.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.zo(e,PE(n,r),s,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Me(Se.UNKNOWN,o.toString())})}Yo(e,n,r,s,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.Yo(e,PE(n,r),s,u,c,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Me(Se.UNKNOWN,u.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class fB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Ys(n),this.ua=!1):Pe("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="RemoteStore";class pB{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=o,this.Ra.No(u=>{r.enqueueAndForget(async()=>{eu(this)&&(Pe(Ko,"Restarting streams for network reachability change."),await async function(d){const f=Je(d);f.da.add(4),await yd(f),f.Va.set("Unknown"),f.da.delete(4),await Fp(f)}(this))})}),this.Va=new fB(r,s)}}async function Fp(t){if(eu(t))for(const e of t.Aa)await e(!0)}async function yd(t){for(const e of t.Aa)await e(!1)}function EN(t,e){const n=Je(t);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),e_(n)?J1(n):Yl(n).N_()&&Z1(n,e))}function W1(t,e){const n=Je(t),r=Yl(n);n.Ea.delete(e),r.N_()&&_N(n,e),n.Ea.size===0&&(r.N_()?r.k_():eu(n)&&n.Va.set("Unknown"))}function Z1(t,e){if(t.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(We.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yl(t).Z_(e)}function _N(t,e){t.ma.Ke(e),Yl(t).X_(e)}function J1(t){t.ma=new u7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Ea.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),Yl(t).start(),t.Va.ca()}function e_(t){return eu(t)&&!Yl(t).O_()&&t.Ea.size>0}function eu(t){return Je(t).da.size===0}function bN(t){t.ma=void 0}async function mB(t){t.Va.set("Online")}async function gB(t){t.Ea.forEach((e,n)=>{Z1(t,e)})}async function yB(t,e){bN(t),e_(t)?(t.Va.Pa(e),J1(t)):t.Va.set("Unknown")}async function EB(t,e,n){if(t.Va.set("Online"),e instanceof iN&&e.state===2&&e.cause)try{await async function(s,o){const u=o.cause;for(const c of o.targetIds)s.Ea.has(c)&&(await s.remoteSyncer.rejectListen(c,u),s.Ea.delete(c),s.ma.removeTarget(c))}(t,e)}catch(r){Pe(Ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rp(t,r)}else if(e instanceof w0?t.ma.Xe(e):e instanceof rN?t.ma.ot(e):t.ma.nt(e),!n.isEqual(We.min()))try{const r=await mN(t.localStore);n.compareTo(r)>=0&&await function(o,u){const c=o.ma.It(u);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const m=o.Ea.get(f);m&&o.Ea.set(f,m.withResumeToken(d.resumeToken,u))}}),c.targetMismatches.forEach((d,f)=>{const m=o.Ea.get(d);if(!m)return;o.Ea.set(d,m.withResumeToken(Xn.EMPTY_BYTE_STRING,m.snapshotVersion)),_N(o,d);const y=new La(m.target,d,f,m.sequenceNumber);Z1(o,y)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Pe(Ko,"Failed to raise snapshot:",r),await rp(t,r)}}async function rp(t,e,n){if(!jl(e))throw e;t.da.add(1),await yd(t),t.Va.set("Offline"),n||(n=()=>mN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Pe(Ko,"Retrying IndexedDB access"),await n(),t.da.delete(1),await Fp(t)})}function TN(t,e){return e().catch(n=>rp(t,n,e))}async function jp(t){const e=Je(t),n=Xa(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:U1;for(;_B(e);)try{const s=await eB(e.localStore,r);if(s===null){e.Ia.length===0&&n.k_();break}r=s.batchId,bB(e,s)}catch(s){await rp(e,s)}vN(e)&&AN(e)}function _B(t){return eu(t)&&t.Ia.length<10}function bB(t,e){t.Ia.push(e);const n=Xa(t);n.N_()&&n.ea&&n.ta(e.mutations)}function vN(t){return eu(t)&&!Xa(t).O_()&&t.Ia.length>0}function AN(t){Xa(t).start()}async function TB(t){Xa(t).ia()}async function vB(t){const e=Xa(t);for(const n of t.Ia)e.ta(n.mutations)}async function AB(t,e,n){const r=t.Ia.shift(),s=q1.from(r,e,n);await TN(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await jp(t)}async function SB(t,e){e&&Xa(t).ea&&await async function(r,s){if(function(u){return a7(u)&&u!==Se.ABORTED}(s.code)){const o=r.Ia.shift();Xa(r).L_(),await TN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await jp(r)}}(t,e),vN(t)&&AN(t)}async function bS(t,e){const n=Je(t);n.asyncQueue.verifyOperationInProgress(),Pe(Ko,"RemoteStore received new credentials");const r=eu(n);n.da.add(3),await yd(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Fp(n)}async function xB(t,e){const n=Je(t);e?(n.da.delete(2),await Fp(n)):e||(n.da.add(2),await yd(n),n.Va.set("Unknown"))}function Yl(t){return t.fa||(t.fa=function(n,r,s){const o=Je(n);return o.oa(),new lB(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:mB.bind(null,t),n_:gB.bind(null,t),i_:yB.bind(null,t),Y_:EB.bind(null,t)}),t.Aa.push(async e=>{e?(t.fa.L_(),e_(t)?J1(t):t.Va.set("Unknown")):(await t.fa.stop(),bN(t))})),t.fa}function Xa(t){return t.ga||(t.ga=function(n,r,s){const o=Je(n);return o.oa(),new cB(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:TB.bind(null,t),i_:SB.bind(null,t),na:vB.bind(null,t),ra:AB.bind(null,t)}),t.Aa.push(async e=>{e?(t.ga.L_(),await jp(t)):(await t.ga.stop(),t.Ia.length>0&&(Pe(Ko,`Stopping write stream with ${t.Ia.length} pending writes`),t.Ia=[]))})),t.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new za,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const u=Date.now()+r,c=new t_(e,n,u,s,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Me(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function n_(t,e){if(Ys("AsyncQueue",`${e}: ${t}`),jl(t))return new Me(Se.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{static emptySet(e){return new _l(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||je.comparator(n.key,r.key):(n,r)=>je.comparator(n.key,r.key),this.keyedMap=Th(),this.sortedSet=new Jt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _l)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _l;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(){this.pa=new Jt(je.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):$e(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Pl{constructor(e,n,r,s,o,u,c,d,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=d,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,o){const u=[];return n.forEach(c=>{u.push({type:0,doc:c})}),new Pl(e,n,_l.emptySet(n),u,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class CB{constructor(){this.queries=vS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Je(n),o=s.queries;s.queries=vS(),o.forEach((u,c)=>{for(const d of c.Sa)d.onError(r)})})(this,new Me(Se.ABORTED,"Firestore shutting down"))}}function vS(){return new Jo(t=>qI(t),Pp)}async function IB(t,e){const n=Je(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.Da()&&e.va()&&(r=2):(o=new wB,r=e.va()?0:1);try{switch(r){case 0:o.ba=await n.onListen(s,!0);break;case 1:o.ba=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(u){const c=n_(u,`Initialization of query '${ol(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,o),o.Sa.push(e),e.Fa(n.onlineState),o.ba&&e.Ma(o.ba)&&r_(n)}async function NB(t,e){const n=Je(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const u=o.Sa.indexOf(e);u>=0&&(o.Sa.splice(u,1),o.Sa.length===0?s=e.va()?0:1:!o.Da()&&e.va()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function RB(t,e){const n=Je(t);let r=!1;for(const s of e){const o=s.query,u=n.queries.get(o);if(u){for(const c of u.Sa)c.Ma(s)&&(r=!0);u.ba=s}}r&&r_(n)}function kB(t,e,n){const r=Je(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function r_(t){t.Ca.forEach(e=>{e.next()})}var VE,AS;(AS=VE||(VE={})).xa="default",AS.Cache="cache";class DB{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=Pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==VE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.key=e}}class xN{constructor(e){this.key=e}}class OB{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=pt(),this.mutatedKeys=pt(),this.Za=YI(e),this.Xa=new _l(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new TS,s=n?n.Xa:this.Xa;let o=n?n.mutatedKeys:this.mutatedKeys,u=s,c=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,y)=>{const b=s.get(m),T=Mp(this.query,y)?y:null,w=!!b&&this.mutatedKeys.has(b.key),I=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let L=!1;b&&T?b.data.isEqual(T.data)?w!==I&&(r.track({type:3,doc:T}),L=!0):this.ru(b,T)||(r.track({type:2,doc:T}),L=!0,(d&&this.Za(T,d)>0||f&&this.Za(T,f)<0)&&(c=!0)):!b&&T?(r.track({type:0,doc:T}),L=!0):b&&!T&&(r.track({type:1,doc:b}),L=!0,(d||f)&&(c=!0)),L&&(T?(u=u.add(T),o=I?o.add(m):o.delete(m)):(u=u.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const m=this.query.limitType==="F"?u.last():u.first();u=u.delete(m.key),o=o.delete(m.key),r.track({type:1,doc:m})}return{Xa:u,nu:r,Cs:c,mutatedKeys:o}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const u=e.nu.wa();u.sort((m,y)=>function(T,w){const I=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $e(20277,{Vt:L})}};return I(T)-I(w)}(m.type,y.type)||this.Za(m.doc,y.doc)),this.iu(r),s=s!=null&&s;const c=n&&!s?this.su():[],d=this.Ya.size===0&&this.current&&!s?1:0,f=d!==this.Ja;return this.Ja=d,u.length!==0||f?{snapshot:new Pl(this.query,e.Xa,o,u,e.mutatedKeys,d===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:c}:{ou:c}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new TS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=pt(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new xN(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new SN(r))}),n}au(e){this.Ha=e.$s,this.Ya=pt();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return Pl.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const i_="SyncEngine";class LB{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class PB{constructor(e){this.key=e,this.cu=!1}}class MB{constructor(e,n,r,s,o,u){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.lu={},this.hu=new Jo(c=>qI(c),Pp),this.Pu=new Map,this.Tu=new Set,this.Iu=new Jt(je.comparator),this.Eu=new Map,this.du=new $1,this.Au={},this.Ru=new Map,this.Vu=Ll.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function BB(t,e,n=!0){const r=kN(t);let s;const o=r.hu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.uu()):s=await wN(r,e,n,!0),s}async function UB(t,e){const n=kN(t);await wN(n,e,!0,!1)}async function wN(t,e,n,r){const s=await tB(t.localStore,rs(e)),o=s.targetId,u=t.sharedClientState.addLocalQueryTarget(o,n);let c;return r&&(c=await HB(t,e,o,u==="current",s.resumeToken)),t.isPrimaryClient&&n&&EN(t.remoteStore,s),c}async function HB(t,e,n,r,s){t.fu=(y,b,T)=>async function(I,L,k,q){let $=L.view.tu(k);$.Cs&&($=await mS(I.localStore,L.query,!1).then(({documents:M})=>L.view.tu(M,$)));const j=q&&q.targetChanges.get(L.targetId),te=q&&q.targetMismatches.get(L.targetId)!=null,Y=L.view.applyChanges($,I.isPrimaryClient,j,te);return xS(I,L.targetId,Y.ou),Y.snapshot}(t,y,b,T);const o=await mS(t.localStore,e,!0),u=new OB(e,o.$s),c=u.tu(o.documents),d=gd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=u.applyChanges(c,t.isPrimaryClient,d);xS(t,n,f.ou);const m=new LB(e,n,u);return t.hu.set(e,m),t.Pu.has(n)?t.Pu.get(n).push(e):t.Pu.set(n,[e]),f.snapshot}async function VB(t,e,n){const r=Je(t),s=r.hu.get(e),o=r.Pu.get(s.targetId);if(o.length>1)return r.Pu.set(s.targetId,o.filter(u=>!Pp(u,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await UE(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&W1(r.remoteStore,s.targetId),zE(r,s.targetId)}).catch(Fl)):(zE(r,s.targetId),await UE(r.localStore,s.targetId,!0))}async function zB(t,e){const n=Je(t),r=n.hu.get(e),s=n.Pu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),W1(n.remoteStore,r.targetId))}async function FB(t,e,n){const r=XB(t);try{const s=await function(u,c){const d=Je(u),f=Yt.now(),m=c.reduce((T,w)=>T.add(w.key),pt());let y,b;return d.persistence.runTransaction("Locally write mutations","readwrite",T=>{let w=Gs(),I=pt();return d.Bs.getEntries(T,m).next(L=>{w=L,w.forEach((k,q)=>{q.isValidDocument()||(I=I.add(k))})}).next(()=>d.localDocuments.getOverlayedDocuments(T,w)).next(L=>{y=L;const k=[];for(const q of c){const $=t7(q,y.get(q.key).overlayedDocument);$!=null&&k.push(new Za(q.key,$,PI($.value.mapValue),Fr.exists(!0)))}return d.mutationQueue.addMutationBatch(T,f,k,c)}).next(L=>{b=L;const k=L.applyToLocalDocumentSet(y,I);return d.documentOverlayCache.saveOverlays(T,L.batchId,k)})}).then(()=>({batchId:b.batchId,changes:$I(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,c,d){let f=u.Au[u.currentUser.toKey()];f||(f=new Jt(st)),f=f.insert(c,d),u.Au[u.currentUser.toKey()]=f}(r,s.batchId,n),await Ed(r,s.changes),await jp(r.remoteStore)}catch(s){const o=n_(s,"Failed to persist write");n.reject(o)}}async function CN(t,e){const n=Je(t);try{const r=await Z7(n.localStore,e);e.targetChanges.forEach((s,o)=>{const u=n.Eu.get(o);u&&(It(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.cu=!0:s.modifiedDocuments.size>0?It(u.cu,14607):s.removedDocuments.size>0&&(It(u.cu,42227),u.cu=!1))}),await Ed(n,r,e)}catch(r){await Fl(r)}}function SS(t,e,n){const r=Je(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.hu.forEach((o,u)=>{const c=u.view.Fa(e);c.snapshot&&s.push(c.snapshot)}),function(u,c){const d=Je(u);d.onlineState=c;let f=!1;d.queries.forEach((m,y)=>{for(const b of y.Sa)b.Fa(c)&&(f=!0)}),f&&r_(d)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jB(t,e,n){const r=Je(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),o=s&&s.key;if(o){let u=new Jt(je.comparator);u=u.insert(o,er.newNoDocument(o,We.min()));const c=pt().add(o),d=new Vp(We.min(),new Map,new Jt(st),u,c);await CN(r,d),r.Iu=r.Iu.remove(o),r.Eu.delete(e),s_(r)}else await UE(r.localStore,e,!1).then(()=>zE(r,e,n)).catch(Fl)}async function qB(t,e){const n=Je(t),r=e.batch.batchId;try{const s=await W7(n.localStore,e);NN(n,r,null),IN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ed(n,s)}catch(s){await Fl(s)}}async function YB(t,e,n){const r=Je(t);try{const s=await function(u,c){const d=Je(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return d.mutationQueue.lookupMutationBatch(f,c).next(y=>(It(y!==null,37113),m=y.keys(),d.mutationQueue.removeMutationBatch(f,y))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>d.localDocuments.getDocuments(f,m))})}(r.localStore,e);NN(r,e,n),IN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ed(r,s)}catch(s){await Fl(s)}}function IN(t,e){(t.Ru.get(e)||[]).forEach(n=>{n.resolve()}),t.Ru.delete(e)}function NN(t,e,n){const r=Je(t);let s=r.Au[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function zE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Pu.get(e))t.hu.delete(r),n&&t.lu.gu(r,n);t.Pu.delete(e),t.isPrimaryClient&&t.du.Hr(e).forEach(r=>{t.du.containsKey(r)||RN(t,r)})}function RN(t,e){t.Tu.delete(e.path.canonicalString());const n=t.Iu.get(e);n!==null&&(W1(t.remoteStore,n),t.Iu=t.Iu.remove(e),t.Eu.delete(n),s_(t))}function xS(t,e,n){for(const r of n)r instanceof SN?(t.du.addReference(r.key,e),GB(t,r)):r instanceof xN?(Pe(i_,"Document no longer in limbo: "+r.key),t.du.removeReference(r.key,e),t.du.containsKey(r.key)||RN(t,r.key)):$e(19791,{pu:r})}function GB(t,e){const n=e.key,r=n.path.canonicalString();t.Iu.get(n)||t.Tu.has(r)||(Pe(i_,"New document in limbo: "+n),t.Tu.add(r),s_(t))}function s_(t){for(;t.Tu.size>0&&t.Iu.size<t.maxConcurrentLimboResolutions;){const e=t.Tu.values().next().value;t.Tu.delete(e);const n=new je(qt.fromString(e)),r=t.Vu.next();t.Eu.set(r,new PB(n)),t.Iu=t.Iu.insert(n,r),EN(t.remoteStore,new La(rs(FI(n.path)),r,"TargetPurposeLimboResolution",Dp.le))}}async function Ed(t,e,n){const r=Je(t),s=[],o=[],u=[];r.hu.isEmpty()||(r.hu.forEach((c,d)=>{u.push(r.fu(d,e,n).then(f=>{var m;if((f||n)&&r.isPrimaryClient){const y=f?!f.fromCache:(m=n?.targetChanges.get(d.targetId))===null||m===void 0?void 0:m.current;r.sharedClientState.updateQueryState(d.targetId,y?"current":"not-current")}if(f){s.push(f);const y=X1.Rs(d.targetId,f);o.push(y)}}))}),await Promise.all(u),r.lu.Y_(s),await async function(d,f){const m=Je(d);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>xe.forEach(f,b=>xe.forEach(b.ds,T=>m.persistence.referenceDelegate.addReference(y,b.targetId,T)).next(()=>xe.forEach(b.As,T=>m.persistence.referenceDelegate.removeReference(y,b.targetId,T)))))}catch(y){if(!jl(y))throw y;Pe(Q1,"Failed to update sequence numbers: "+y)}for(const y of f){const b=y.targetId;if(!y.fromCache){const T=m.xs.get(b),w=T.snapshotVersion,I=T.withLastLimboFreeSnapshotVersion(w);m.xs=m.xs.insert(b,I)}}}(r.localStore,o))}async function $B(t,e){const n=Je(t);if(!n.currentUser.isEqual(e)){Pe(i_,"User change. New user:",e.toKey());const r=await pN(n.localStore,e);n.currentUser=e,function(o,u){o.Ru.forEach(c=>{c.forEach(d=>{d.reject(new Me(Se.CANCELLED,u))})}),o.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ed(n,r.ks)}}function KB(t,e){const n=Je(t),r=n.Eu.get(e);if(r&&r.cu)return pt().add(r.key);{let s=pt();const o=n.Pu.get(e);if(!o)return s;for(const u of o){const c=n.hu.get(u);s=s.unionWith(c.view.eu)}return s}}function kN(t){const e=Je(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=CN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jB.bind(null,e),e.lu.Y_=RB.bind(null,e.eventManager),e.lu.gu=kB.bind(null,e.eventManager),e}function XB(t){const e=Je(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YB.bind(null,e),e}class ip{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return Q7(this.persistence,new $7,e.initialUser,this.serializer)}Su(e){return new fN(K1.fi,this.serializer)}bu(e){return new rB}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ip.provider={build:()=>new ip};class QB extends ip{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){It(this.persistence.referenceDelegate instanceof np,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new D7(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?yr.withCacheSize(this.cacheSizeBytes):yr.DEFAULT;return new fN(r=>np.fi(r,n),this.serializer)}}class FE{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>SS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$B.bind(null,this.syncEngine),await xB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CB}()}createDatastore(e){const n=zp(e.databaseInfo.databaseId),r=function(o){return new uB(o)}(e.databaseInfo);return function(o,u,c,d){return new dB(o,u,c,d)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,u,c){return new pB(r,s,o,u,c)}(this.localStore,this.datastore,e.asyncQueue,n=>SS(this.syncEngine,n,0),function(){return ES.C()?new ES:new iB}())}createSyncEngine(e,n){return function(s,o,u,c,d,f,m){const y=new MB(s,o,u,c,d,f);return m&&(y.mu=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=Je(s);Pe(Ko,"RemoteStore shutting down."),o.da.add(5),await yd(o),o.Ra.shutdown(),o.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}FE.provider={build:()=>new FE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Ys("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa="FirestoreClient";class ZB{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Jn.UNAUTHENTICATED,this.clientId=xI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async u=>{Pe(Qa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(Pe(Qa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new za;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=n_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function By(t,e){t.asyncQueue.verifyOperationInProgress(),Pe(Qa,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await pN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function wS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await JB(t);Pe(Qa,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>bS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>bS(e.remoteStore,s)),t._onlineComponents=e}async function JB(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Pe(Qa,"Using user provided OfflineComponentProvider");try{await By(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===Se.FAILED_PRECONDITION||s.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Rl("Error using user provided cache. Falling back to memory cache: "+n),await By(t,new ip)}}else Pe(Qa,"Using default OfflineComponentProvider"),await By(t,new QB(void 0));return t._offlineComponents}async function DN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Pe(Qa,"Using user provided OnlineComponentProvider"),await wS(t,t._uninitializedComponentsProvider._online)):(Pe(Qa,"Using default OnlineComponentProvider"),await wS(t,new FE))),t._onlineComponents}function eU(t){return DN(t).then(e=>e.syncEngine)}async function tU(t){const e=await DN(t),n=e.eventManager;return n.onListen=BB.bind(null,e.syncEngine),n.onUnlisten=VB.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UB.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zB.bind(null,e.syncEngine),n}function nU(t,e,n={}){const r=new za;return t.asyncQueue.enqueueAndForget(async()=>function(o,u,c,d,f){const m=new WB({next:b=>{m.xu(),u.enqueueAndForget(()=>NB(o,y)),b.fromCache&&d.source==="server"?f.reject(new Me(Se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(b)},error:b=>f.reject(b)}),y=new DB(c,m,{includeMetadataChanges:!0,Qa:!0});return IB(o,y)}(await tU(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t,e,n){if(!n)throw new Me(Se.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rU(t,e,n,r){if(e===!0&&r===!0)throw new Me(Se.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function IS(t){if(!je.isDocumentKey(t))throw new Me(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function NS(t){if(je.isDocumentKey(t))throw new Me(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":$e(12329,{type:typeof t})}function Xo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Me(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qp(t);throw new Me(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="firestore.googleapis.com",RS=!0;class kS{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Me(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=PN,this.ssl=RS}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:RS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<R7)throw new Me(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ON((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Me(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Me(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Me(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Me(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Me(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o9;switch(r.type){case"firstParty":return new h9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Me(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=CS.get(n);r&&(Pe("ComponentProvider","Removing Datastore"),CS.delete(n),r.terminate())}(this),Promise.resolve()}}function iU(t,e,n,r={}){var s;t=Xo(t,Yp);const o=Zo(e),u=t._getSettings(),c=Object.assign(Object.assign({},u),{emulatorOptions:t._getEmulatorOptions()}),d=`${e}:${n}`;o&&(D1(`https://${d}`),O1("Firestore",!0)),u.host!==PN&&u.host!==d&&Rl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},u),{host:d,ssl:o,emulatorOptions:r});if(!Yo(f,c)&&(t._setSettings(f),r.mockUserToken)){let m,y;if(typeof r.mockUserToken=="string")m=r.mockUserToken,y=Jn.MOCK_USER;else{m=DM(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new Me(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Jn(b)}t._authCredentials=new u9(new AI(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new tu(this.firestore,e,this._query)}}class jr{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jr(this.firestore,e,this._key)}}class Fa extends tu{constructor(e,n,r){super(e,n,FI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jr(this.firestore,null,new je(e))}withConverter(e){return new Fa(this.firestore,e,this._path)}}function a_(t,e,...n){if(t=on(t),LN("collection","path",e),t instanceof Yp){const r=qt.fromString(e,...n);return NS(r),new Fa(t,null,r)}{if(!(t instanceof jr||t instanceof Fa))throw new Me(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qt.fromString(e,...n));return NS(r),new Fa(t.firestore,null,r)}}function Gl(t,e,...n){if(t=on(t),arguments.length===1&&(e=xI.newId()),LN("doc","path",e),t instanceof Yp){const r=qt.fromString(e,...n);return IS(r),new jr(t,null,new je(r))}{if(!(t instanceof jr||t instanceof Fa))throw new Me(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qt.fromString(e,...n));return IS(r),new jr(t.firestore,t instanceof Fa?t.converter:null,new je(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="AsyncQueue";class OS{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new gN(this,"async_queue_retry"),this.rc=()=>{const r=My();r&&Pe(DS,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=My();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=My();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new za;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!jl(e))throw e;Pe(DS,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Ys("INTERNAL UNHANDLED ERROR: ",LS(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const s=t_.createAndSchedule(this,e,n,r,o=>this.uc(o));return this.Zu.push(s),s}oc(){this.Xu&&$e(47125,{cc:LS(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function LS(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class _d extends Yp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new OS,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new OS(e),this._firestoreClient=void 0,await e}}}function sU(t,e){const n=typeof t=="object"?t:M1(),r=typeof t=="string"?t:Q0,s=kp(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=uI("firestore");o&&iU(s,...o)}return s}function o_(t){if(t._terminated)throw new Me(Se.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aU(t),t._firestoreClient}function aU(t){var e,n,r;const s=t._freezeSettings(),o=function(c,d,f,m){return new w9(c,d,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,ON(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new ZB(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(c){const d=c?._online.build();return{_offline:c?._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ml(Xn.fromBase64String(e))}catch(n){throw new Me(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ml(Xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Me(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Me(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Me(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=/^__.*__$/;class uU{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Za(e,this.data,this.fieldMask,n,this.fieldTransforms):new md(e,this.data,n,this.fieldTransforms)}}class MN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Za(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $e(40011,{Ic:t})}}class h_{constructor(e,n,r,s,o,u){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ec(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new h_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return sp(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(BN(this.Ic)&&oU.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class lU{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zp(e)}bc(e,n,r,s=!1){return new h_({Ic:e,methodName:n,wc:r,path:Kn.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function d_(t){const e=t._freezeSettings(),n=zp(t._databaseId);return new lU(t._databaseId,!!e.ignoreUndefinedProperties,n)}function UN(t,e,n,r,s,o={}){const u=t.bc(o.merge||o.mergeFields?2:0,e,n,s);f_("Data must be an object, but it was:",u,r);const c=HN(r,u);let d,f;if(o.merge)d=new Vr(u.fieldMask),f=u.fieldTransforms;else if(o.mergeFields){const m=[];for(const y of o.mergeFields){const b=jE(e,y,n);if(!u.contains(b))throw new Me(Se.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);zN(m,b)||m.push(b)}d=new Vr(m),f=u.fieldTransforms.filter(y=>d.covers(y.field))}else d=null,f=u.fieldTransforms;return new uU(new _r(c),d,f)}class $p extends u_{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $p}}function cU(t,e,n,r){const s=t.bc(1,e,n);f_("Data must be an object, but it was:",s,r);const o=[],u=_r.empty();Wa(r,(d,f)=>{const m=p_(e,d,n);f=on(f);const y=s.mc(m);if(f instanceof $p)o.push(m);else{const b=bd(f,y);b!=null&&(o.push(m),u.set(m,b))}});const c=new Vr(o);return new MN(u,c,s.fieldTransforms)}function hU(t,e,n,r,s,o){const u=t.bc(1,e,n),c=[jE(e,r,n)],d=[s];if(o.length%2!=0)throw new Me(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)c.push(jE(e,o[b])),d.push(o[b+1]);const f=[],m=_r.empty();for(let b=c.length-1;b>=0;--b)if(!zN(f,c[b])){const T=c[b];let w=d[b];w=on(w);const I=u.mc(T);if(w instanceof $p)f.push(T);else{const L=bd(w,I);L!=null&&(f.push(T),m.set(T,L))}}const y=new Vr(f);return new MN(m,y,u.fieldTransforms)}function dU(t,e,n,r=!1){return bd(n,t.bc(r?4:3,e))}function bd(t,e){if(VN(t=on(t)))return f_("Unsupported field value:",e,t),HN(t,e);if(t instanceof u_)return function(r,s){if(!BN(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const o=[];let u=0;for(const c of r){let d=bd(c,s.fc(u));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),u++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=on(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return X9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Yt.fromDate(r);return{timestampValue:tp(s.serializer,o)}}if(r instanceof Yt){const o=new Yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tp(s.serializer,o)}}if(r instanceof l_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ml)return{bytesValue:sN(s.serializer,r._byteString)};if(r instanceof jr){const o=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(o))throw s.gc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:G1(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof c_)return function(u,c){return{mapValue:{fields:{[OI]:{stringValue:LI},[W0]:{arrayValue:{values:u.toArray().map(f=>{if(typeof f!="number")throw c.gc("VectorValues must only contain numeric values.");return j1(c.serializer,f)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${qp(r)}`)}(t,e)}function HN(t,e){const n={};return CI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(t,(r,s)=>{const o=bd(s,e.Ac(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function VN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Yt||t instanceof l_||t instanceof Ml||t instanceof jr||t instanceof u_||t instanceof c_)}function f_(t,e,n){if(!VN(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=qp(n);throw r==="an object"?e.gc(t+" a custom object"):e.gc(t+" "+r)}}function jE(t,e,n){if((e=on(e))instanceof Gp)return e._internalPath;if(typeof e=="string")return p_(t,e);throw sp("Field path arguments must be of type string or ",t,!1,void 0,n)}const fU=new RegExp("[~\\*/\\[\\]]");function p_(t,e,n){if(e.search(fU)>=0)throw sp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gp(...e.split("."))._internalPath}catch{throw sp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sp(t,e,n,r,s){const o=r&&!r.isEmpty(),u=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let d="";return(o||u)&&(d+=" (found",o&&(d+=` in field ${r}`),u&&(d+=` in document ${s}`),d+=")"),new Me(Se.INVALID_ARGUMENT,c+t+d)}function zN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Kp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pU extends FN{data(){return super.data()}}function Kp(t,e){return typeof e=="string"?p_(t,e):e instanceof Gp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Me(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class m_{}class jN extends m_{}function gU(t,e,...n){let r=[];e instanceof m_&&r.push(e),r=r.concat(n),function(o){const u=o.filter(d=>d instanceof g_).length,c=o.filter(d=>d instanceof Xp).length;if(u>1||u>0&&c>0)throw new Me(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Xp extends jN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Xp(e,n,r)}_apply(e){const n=this._parse(e);return qN(e._query,n),new tu(e.firestore,e.converter,DE(e._query,n))}_parse(e){const n=d_(e.firestore);return function(o,u,c,d,f,m,y){let b;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new Me(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){MS(y,m);const w=[];for(const I of y)w.push(PS(d,o,I));b={arrayValue:{values:w}}}else b=PS(d,o,y)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||MS(y,m),b=dU(c,u,y,m==="in"||m==="not-in");return vn.create(f,m,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function yU(t,e,n){const r=e,s=Kp("where",t);return Xp._create(s,r,n)}class g_ extends m_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new g_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let u=s;const c=o.getFlattenedFilters();for(const d of c)qN(u,d),u=DE(u,d)}(e._query,n),new tu(e.firestore,e.converter,DE(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class y_ extends jN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new y_(e,n)}_apply(e){const n=function(s,o,u){if(s.startAt!==null)throw new Me(Se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Me(Se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ed(o,u)}(e._query,this._field,this._direction);return new tu(e.firestore,e.converter,function(s,o){const u=s.explicitOrderBy.concat([o]);return new ql(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function EU(t,e="asc"){const n=e,r=Kp("orderBy",t);return y_._create(r,n)}function PS(t,e,n){if(typeof(n=on(n))=="string"){if(n==="")throw new Me(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jI(e)&&n.indexOf("/")!==-1)throw new Me(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qt.fromString(n));if(!je.isDocumentKey(r))throw new Me(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return QA(t,new je(r))}if(n instanceof jr)return QA(t,n._key);throw new Me(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qp(n)}.`)}function MS(t,e){if(!Array.isArray(t)||t.length===0)throw new Me(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function qN(t,e){const n=function(s,o){for(const u of s)for(const c of u.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Me(Se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Me(Se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class _U{convertValue(e,n="none"){switch(Ka(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($a(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw $e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wa(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[W0].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>fn(u.doubleValue));return new c_(o)}convertGeoPoint(e){return new l_(fn(e.latitude),fn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Lp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wh(e));default:return null}}convertTimestamp(e){const n=Ga(e);return new Yt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qt.fromString(e);It(hN(r),9688,{name:e});const s=new Zh(r.get(1),r.get(3)),o=new je(r.popFirst(5));return s.isEqual(n)||Ys(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bU extends FN{constructor(e,n,r,s,o,u){super(e,n,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new C0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Kp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class C0 extends bU{data(e={}){return super.data(e)}}class TU{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new h0(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new C0(this._firestore,this._userDataWriter,r.key,r,new h0(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Me(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(c=>{const d=new C0(s._firestore,s._userDataWriter,c.doc.key,c.doc,new h0(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{const d=new C0(s._firestore,s._userDataWriter,c.doc.key,c.doc,new h0(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,m=-1;return c.type!==0&&(f=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),c.type!==1&&(u=u.add(c.doc),m=u.indexOf(c.doc.key)),{type:vU(c.type),doc:d,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function vU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $e(61501,{type:t})}}class AU extends _U{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jr(this.firestore,null,n)}}function E_(t){t=Xo(t,tu);const e=Xo(t.firestore,_d),n=o_(e),r=new AU(e);return mU(t._query),nU(n,t._query).then(s=>new TU(e,r,t,s))}function __(t,e,n){t=Xo(t,jr);const r=Xo(t.firestore,_d),s=YN(t.converter,e,n);return b_(r,[UN(d_(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Fr.none())])}function SU(t){return b_(Xo(t.firestore,_d),[new Hp(t._key,Fr.none())])}function b_(t,e){return function(r,s){const o=new za;return r.asyncQueue.enqueueAndForget(async()=>FB(await eU(r),s,o)),o.promise}(o_(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=d_(e)}set(e,n,r){this._verifyNotCommitted();const s=Uy(e,this._firestore),o=YN(s.converter,n,r),u=UN(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(u.toMutation(s._key,Fr.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=Uy(e,this._firestore);let u;return u=typeof(n=on(n))=="string"||n instanceof Gp?hU(this._dataReader,"WriteBatch.update",o._key,n,r,s):cU(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(u.toMutation(o._key,Fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Uy(e,this._firestore);return this._mutations=this._mutations.concat(new Hp(n._key,Fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(Se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Uy(t,e){if((t=on(t)).firestore!==e)throw new Me(Se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t){return o_(t=Xo(t,_d)),new xU(t,e=>b_(t,e))}(function(e,n=!0){(function(s){zl=s})(Vl),Go(new qa("firestore",(r,{instanceIdentifier:s,options:o})=>{const u=r.getProvider("app").getImmediate(),c=new _d(new l9(r.getProvider("auth-internal")),new d9(u,r.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Me(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zh(f.options.projectId,m)}(u,s),u);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),ns(UA,HA,e),ns(UA,HA,"esm2017")})();function T_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function $N(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wU=$N,KN=new fd("auth","Firebase",$N());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap=new L1("@firebase/auth");function CU(t,...e){ap.logLevel<=ft.WARN&&ap.warn(`Auth (${Vl}): ${t}`,...e)}function I0(t,...e){ap.logLevel<=ft.ERROR&&ap.error(`Auth (${Vl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t,...e){throw v_(t,...e)}function ss(t,...e){return v_(t,...e)}function XN(t,e,n){const r=Object.assign(Object.assign({},wU()),{[e]:n});return new fd("auth","Firebase",r).create(e,{appName:t.name})}function zs(t){return XN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function v_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return KN.create(t,...e)}function Ge(t,e,...n){if(!t)throw v_(e,...n)}function Hs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw I0(e),new Error(e)}function $s(t,e){t||Hs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function IU(){return BS()==="http:"||BS()==="https:"}function BS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(IU()||UM()||"connection"in navigator)?navigator.onLine:!0}function RU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){this.shortDelay=e,this.longDelay=n,$s(n>e,"Short delay should be less than long delay!"),this.isMobile=PM()||HM()}get(){return NU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t,e){$s(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Hs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Hs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Hs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],OU=new Td(3e4,6e4);function Ja(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function eo(t,e,n,r,s={}){return WN(t,s,async()=>{let o={},u={};r&&(e==="GET"?u=r:o={body:JSON.stringify(r)});const c=pd(Object.assign({key:t.config.apiKey},u)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:d},o);return BM()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Zo(t.emulatorConfig.host)&&(f.credentials="include"),QN.fetch()(await ZN(t,t.config.apiHost,n,c),f)})}async function WN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},kU),e);try{const s=new PU(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw d0(t,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const c=o.ok?u.errorMessage:u.error.message,[d,f]=c.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw d0(t,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw d0(t,"email-already-in-use",u);if(d==="USER_DISABLED")throw d0(t,"user-disabled",u);const m=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw XN(t,m,f);wi(t,m)}}catch(s){if(s instanceof cs)throw s;wi(t,"network-request-failed",{message:String(s)})}}async function vd(t,e,n,r,s={}){const o=await eo(t,e,n,r,s);return"mfaPendingCredential"in o&&wi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function ZN(t,e,n,r){const s=`${e}${n}?${r}`,o=t,u=o.config.emulator?A_(t.config,s):`${t.config.apiScheme}://${s}`;return DU.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function LU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PU{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ss(this.auth,"network-request-failed")),OU.get())})}}function d0(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ss(t,e,r);return s.customData._tokenResponse=n,s}function US(t){return t!==void 0&&t.enterprise!==void 0}class MU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BU(t,e){return eo(t,"GET","/v2/recaptchaConfig",Ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(t,e){return eo(t,"POST","/v1/accounts:delete",e)}async function op(t,e){return eo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HU(t,e=!1){const n=on(t),r=await n.getIdToken(e),s=S_(r);Ge(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,u=o?.sign_in_provider;return{claims:s,token:r,authTime:Nh(Hy(s.auth_time)),issuedAtTime:Nh(Hy(s.iat)),expirationTime:Nh(Hy(s.exp)),signInProvider:u||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Hy(t){return Number(t)*1e3}function S_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return I0("JWT malformed, contained fewer than 3 sections"),null;try{const s=aI(n);return s?JSON.parse(s):(I0("Failed to decode base64 JWT payload"),null)}catch(s){return I0("Caught error parsing JWT payload as JSON",s?.toString()),null}}function HS(t){const e=S_(t);return Ge(e,"internal-error"),Ge(typeof e.exp<"u","internal-error"),Ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cs&&VU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function VU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nh(this.lastLoginAt),this.creationTime=Nh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function up(t){var e;const n=t.auth,r=await t.getIdToken(),s=await rd(t,op(n,{idToken:r}));Ge(s?.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?JN(o.providerUserInfo):[],c=jU(t.providerData,u),d=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!c?.length,m=d?f:!1,y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new YE(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(t,y)}async function FU(t){const e=on(t);await up(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jU(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function JN(t){return t.map(e=>{var{providerId:n}=e,r=T_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qU(t,e){const n=await WN(t,{},async()=>{const r=pd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,u=await ZN(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:c,body:r};return t.emulatorConfig&&Zo(t.emulatorConfig.host)&&(d.credentials="include"),QN.fetch()(u,d)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YU(t,e){return eo(t,"POST","/v2/accounts:revokeToken",Ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ge(e.idToken,"internal-error"),Ge(typeof e.idToken<"u","internal-error"),Ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ge(e.length!==0,"internal-error");const n=HS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await qU(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,u=new bl;return r&&(Ge(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Ge(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),o&&(Ge(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bl,this.toJSON())}_performRefresh(){return Hs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t,e){Ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ai{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=T_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new YE(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await rd(this,this.stsTokenManager.getToken(this.auth,e));return Ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HU(this,e)}reload(){return FU(this)}_assign(e){this!==e&&(Ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await up(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hr(this.auth.app))return Promise.reject(zs(this.auth));const e=await this.getIdToken();return await rd(this,UU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,u,c,d,f,m;const y=(r=n.displayName)!==null&&r!==void 0?r:void 0,b=(s=n.email)!==null&&s!==void 0?s:void 0,T=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(u=n.photoURL)!==null&&u!==void 0?u:void 0,I=(c=n.tenantId)!==null&&c!==void 0?c:void 0,L=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,k=(f=n.createdAt)!==null&&f!==void 0?f:void 0,q=(m=n.lastLoginAt)!==null&&m!==void 0?m:void 0,{uid:$,emailVerified:j,isAnonymous:te,providerData:Y,stsTokenManager:M}=n;Ge($&&M,e,"internal-error");const N=bl.fromJSON(this.name,M);Ge(typeof $=="string",e,"internal-error"),Ta(y,e.name),Ta(b,e.name),Ge(typeof j=="boolean",e,"internal-error"),Ge(typeof te=="boolean",e,"internal-error"),Ta(T,e.name),Ta(w,e.name),Ta(I,e.name),Ta(L,e.name),Ta(k,e.name),Ta(q,e.name);const D=new Ai({uid:$,auth:e,email:b,emailVerified:j,displayName:y,isAnonymous:te,photoURL:w,phoneNumber:T,tenantId:I,stsTokenManager:N,createdAt:k,lastLoginAt:q});return Y&&Array.isArray(Y)&&(D.providerData=Y.map(U=>Object.assign({},U))),L&&(D._redirectEventId=L),D}static async _fromIdTokenResponse(e,n,r=!1){const s=new bl;s.updateFromServerResponse(n);const o=new Ai({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await up(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ge(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?JN(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!o?.length,c=new bl;c.updateFromIdToken(r);const d=new Ai({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:u}),f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new YE(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(d,f),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=new Map;function Vs(t){$s(t instanceof Function,"Expected a class definition");let e=VS.get(t);return e?($s(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,VS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}e3.type="NONE";const zS=e3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t,e,n){return`firebase:${t}:${e}:${n}`}class Tl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=N0(this.userKey,s.apiKey,o),this.fullPersistenceKey=N0("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await op(this.auth,{idToken:e}).catch(()=>{});return n?Ai._fromGetAccountInfoResponse(this.auth,n,e):null}return Ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Tl(Vs(zS),e,r);const s=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=s[0]||Vs(zS);const u=N0(r,e.config.apiKey,e.name);let c=null;for(const f of n)try{const m=await f._get(u);if(m){let y;if(typeof m=="string"){const b=await op(e,{idToken:m}).catch(()=>{});if(!b)break;y=await Ai._fromGetAccountInfoResponse(e,b,m)}else y=Ai._fromJSON(e,m);f!==o&&(c=y),o=f;break}}catch{}const d=s.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Tl(o,e,r):(o=d[0],c&&await o._set(u,c.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(u)}catch{}})),new Tl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(i3(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(t3(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(a3(e))return"Blackberry";if(o3(e))return"Webos";if(n3(e))return"Safari";if((e.includes("chrome/")||r3(e))&&!e.includes("edge/"))return"Chrome";if(s3(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function t3(t=nr()){return/firefox\//i.test(t)}function n3(t=nr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function r3(t=nr()){return/crios\//i.test(t)}function i3(t=nr()){return/iemobile/i.test(t)}function s3(t=nr()){return/android/i.test(t)}function a3(t=nr()){return/blackberry/i.test(t)}function o3(t=nr()){return/webos/i.test(t)}function x_(t=nr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function GU(t=nr()){var e;return x_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $U(){return VM()&&document.documentMode===10}function u3(t=nr()){return x_(t)||s3(t)||o3(t)||a3(t)||/windows phone/i.test(t)||i3(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t,e=[]){let n;switch(t){case"Browser":n=FS(nr());break;case"Worker":n=`${FS(nr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((u,c)=>{try{const d=e(o);u(d)}catch(d){c(d)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XU(t,e={}){return eo(t,"GET","/v2/passwordPolicy",Ja(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QU=6;class WU{constructor(e){var n,r,s,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=u.minPasswordLength)!==null&&n!==void 0?n:QU,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,u,c;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(c=d.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),d}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jS(this),this.idTokenSubscription=new jS(this),this.beforeStateQueue=new KU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vs(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await op(this,{idToken:e}),r=await Ai._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Hr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s?._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===c)&&d?.user&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await up(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hr(this.app))return Promise.reject(zs(this));const n=e?on(e):null;return n&&Ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hr(this.app)?Promise.reject(zs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hr(this.app)?Promise.reject(zs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XU(this),n=new WU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await YU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vs(e)||this._popupRedirectResolver;Ge(n,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[Vs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let u=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ge(c,this,"internal-error"),c.then(()=>{u||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,r,s);return()=>{u=!0,d()}}else{const d=e.addObserver(n);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=l3(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(Hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&CU(`Error while retrieving App Check token: ${n.error}`),n?.token}}function nu(t){return on(t)}class jS{constructor(e){this.auth=e,this.observer=null,this.addObserver=KM(n=>this.observer=n)}get next(){return Ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function JU(t){Qp=t}function c3(t){return Qp.loadJS(t)}function eH(){return Qp.recaptchaEnterpriseScript}function tH(){return Qp.gapiScript}function nH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class rH{constructor(){this.enterprise=new iH}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class iH{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const sH="recaptcha-enterprise",h3="NO_RECAPTCHA";class aH{constructor(e){this.type=sH,this.auth=nu(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,c)=>{BU(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new MU(d);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,u(f.siteKey)}}).catch(d=>{c(d)})})}function s(o,u,c){const d=window.grecaptcha;US(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(f=>{u(f)}).catch(()=>{u(h3)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new rH().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{r(this.auth).then(c=>{if(!n&&US(window.grecaptcha))s(c,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=eH();d.length!==0&&(d+=c),c3(d).then(()=>{s(c,o,u)}).catch(f=>{u(f)})}}).catch(c=>{u(c)})})}}async function qS(t,e,n,r=!1,s=!1){const o=new aH(t);let u;if(s)u=h3;else try{u=await o.verify(n)}catch{u=await o.verify(n,!0)}const c=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const d=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const d=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:u}):Object.assign(c,{captchaResponse:u}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function GE(t,e,n,r,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await qS(t,e,n,n==="getOobCode");return r(t,u)}else return r(t,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await qS(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oH(t,e){const n=kp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Yo(o,e??{}))return s;wi(s,"already-initialized")}return n.initialize({options:e})}function uH(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Vs);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function lH(t,e,n){const r=nu(t);Ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=d3(e),{host:u,port:c}=cH(e),d=c===null?"":`:${c}`,f={url:`${o}//${u}${d}/`},m=Object.freeze({host:u,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ge(Yo(f,r.config.emulator)&&Yo(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Zo(u)?(D1(`${o}//${u}${d}`),O1("Auth",!0)):hH()}function d3(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function cH(t){const e=d3(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:YS(r.substr(o.length+1))}}else{const[o,u]=r.split(":");return{host:o,port:YS(u)}}}function YS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function hH(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Hs("not implemented")}_getIdTokenResponse(e){return Hs("not implemented")}_linkToIdToken(e,n){return Hs("not implemented")}_getReauthenticationResolver(e){return Hs("not implemented")}}async function dH(t,e){return eo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fH(t,e){return vd(t,"POST","/v1/accounts:signInWithPassword",Ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pH(t,e){return vd(t,"POST","/v1/accounts:signInWithEmailLink",Ja(t,e))}async function mH(t,e){return vd(t,"POST","/v1/accounts:signInWithEmailLink",Ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends w_{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new id(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new id(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return GE(e,n,"signInWithPassword",fH);case"emailLink":return pH(e,{email:this._email,oobCode:this._password});default:wi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return GE(e,r,"signUpPassword",dH);case"emailLink":return mH(e,{idToken:n,email:this._email,oobCode:this._password});default:wi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(t,e){return vd(t,"POST","/v1/accounts:signInWithIdp",Ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gH="http://localhost";class Qo extends w_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):wi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=T_(n,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Qo(r,s);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return vl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,vl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vl(e,n)}buildRequest(){const e={requestUri:gH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=pd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yH(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function EH(t){const e=Eh(_h(t)).link,n=e?Eh(_h(e)).deep_link_id:null,r=Eh(_h(t)).deep_link_id;return(r?Eh(_h(r)).link:null)||r||n||e||t}class C_{constructor(e){var n,r,s,o,u,c;const d=Eh(_h(e)),f=(n=d.apiKey)!==null&&n!==void 0?n:null,m=(r=d.oobCode)!==null&&r!==void 0?r:null,y=yH((s=d.mode)!==null&&s!==void 0?s:null);Ge(f&&m&&y,"argument-error"),this.apiKey=f,this.operation=y,this.code=m,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=d.lang)!==null&&u!==void 0?u:null,this.tenantId=(c=d.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=EH(e);try{return new C_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.providerId=$l.PROVIDER_ID}static credential(e,n){return id._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=C_.parseLink(n);return Ge(r,"argument-error"),id._fromEmailAndCode(e,r.code,r.tenantId)}}$l.PROVIDER_ID="password";$l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends f3{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends Ad{constructor(){super("facebook.com")}static credential(e){return Qo._fromParams({providerId:Ra.PROVIDER_ID,signInMethod:Ra.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ra.credentialFromTaggedObject(e)}static credentialFromError(e){return Ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ra.credential(e.oauthAccessToken)}catch{return null}}}Ra.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ra.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka extends Ad{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Qo._fromParams({providerId:ka.PROVIDER_ID,signInMethod:ka.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ka.credentialFromTaggedObject(e)}static credentialFromError(e){return ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ka.credential(n,r)}catch{return null}}}ka.GOOGLE_SIGN_IN_METHOD="google.com";ka.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends Ad{constructor(){super("github.com")}static credential(e){return Qo._fromParams({providerId:Da.PROVIDER_ID,signInMethod:Da.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Da.credentialFromTaggedObject(e)}static credentialFromError(e){return Da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Da.credential(e.oauthAccessToken)}catch{return null}}}Da.GITHUB_SIGN_IN_METHOD="github.com";Da.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends Ad{constructor(){super("twitter.com")}static credential(e,n){return Qo._fromParams({providerId:Oa.PROVIDER_ID,signInMethod:Oa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Oa.credentialFromTaggedObject(e)}static credentialFromError(e){return Oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Oa.credential(n,r)}catch{return null}}}Oa.TWITTER_SIGN_IN_METHOD="twitter.com";Oa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _H(t,e){return vd(t,"POST","/v1/accounts:signUp",Ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await Ai._fromIdTokenResponse(e,r,s),u=GS(r);return new Wo({user:o,providerId:u,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=GS(r);return new Wo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function GS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends cs{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,lp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new lp(e,n,r,s)}}function p3(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?lp._fromErrorAndOperation(t,o,e,r):o})}async function bH(t,e,n=!1){const r=await rd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Wo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TH(t,e,n=!1){const{auth:r}=t;if(Hr(r.app))return Promise.reject(zs(r));const s="reauthenticate";try{const o=await rd(t,p3(r,s,e,t),n);Ge(o.idToken,r,"internal-error");const u=S_(o.idToken);Ge(u,r,"internal-error");const{sub:c}=u;return Ge(t.uid===c,r,"user-mismatch"),Wo._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&wi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m3(t,e,n=!1){if(Hr(t.app))return Promise.reject(zs(t));const r="signIn",s=await p3(t,r,e),o=await Wo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function vH(t,e){return m3(nu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3(t){const e=nu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function AH(t,e,n){if(Hr(t.app))return Promise.reject(zs(t));const r=nu(t),u=await GE(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_H).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&g3(t),d}),c=await Wo._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(c.user),c}function SH(t,e,n){return Hr(t.app)?Promise.reject(zs(t)):vH(on(t),$l.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&g3(t),r})}function xH(t,e,n,r){return on(t).onIdTokenChanged(e,n,r)}function wH(t,e,n){return on(t).beforeAuthStateChanged(e,n)}function CH(t,e,n,r){return on(t).onAuthStateChanged(e,n,r)}function IH(t){return on(t).signOut()}const cp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cp,"1"),this.storage.removeItem(cp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NH=1e3,RH=10;class E3 extends y3{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=u3(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,c,d)=>{this.notifyListeners(u,d)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!n&&this.localCache[r]===u||this.notifyListeners(r,u)},o=this.storage.getItem(r);$U()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,RH):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},NH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}E3.type="LOCAL";const kH=E3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3 extends y3{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_3.type="SESSION";const b3=_3;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DH(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Wp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,u=this.handlersMap[s];if(!u?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(u).map(async f=>f(n.origin,o)),d=await DH(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,u;return new Promise((c,d)=>{const f=I_("",20);s.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(y){const b=y;if(b.data.eventId===f)switch(b.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(b.data.response);break;default:clearTimeout(m),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(){return window}function LH(t){as().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(){return typeof as().WorkerGlobalScope<"u"&&typeof as().importScripts=="function"}async function PH(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MH(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function BH(){return T3()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3="firebaseLocalStorageDb",UH=1,hp="firebaseLocalStorage",A3="fbase_key";class Sd{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zp(t,e){return t.transaction([hp],e?"readwrite":"readonly").objectStore(hp)}function HH(){const t=indexedDB.deleteDatabase(v3);return new Sd(t).toPromise()}function $E(){const t=indexedDB.open(v3,UH);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hp,{keyPath:A3})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hp)?e(r):(r.close(),await HH(),e(await $E()))})})}async function $S(t,e,n){const r=Zp(t,!0).put({[A3]:e,value:n});return new Sd(r).toPromise()}async function VH(t,e){const n=Zp(t,!1).get(e),r=await new Sd(n).toPromise();return r===void 0?null:r.value}function KS(t,e){const n=Zp(t,!0).delete(e);return new Sd(n).toPromise()}const zH=800,FH=3;class S3{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $E(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>FH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return T3()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wp._getInstance(BH()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await PH(),!this.activeServiceWorker)return;this.sender=new OH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $E();return await $S(e,cp,"1"),await KS(e,cp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>$S(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>VH(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>KS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Zp(s,!1).getAll();return new Sd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}S3.type="LOCAL";const jH=S3;new Td(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qH(t,e){return e?Vs(e):(Ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_ extends w_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function YH(t){return m3(t.auth,new N_(t),t.bypassAuthState)}function GH(t){const{auth:e,user:n}=t;return Ge(n,e,"internal-error"),TH(n,new N_(t),t.bypassAuthState)}async function $H(t){const{auth:e,user:n}=t;return Ge(n,e,"internal-error"),bH(n,new N_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:u,type:c}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(d))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return YH;case"linkViaPopup":case"linkViaRedirect":return $H;case"reauthViaPopup":case"reauthViaRedirect":return GH;default:wi(this.auth,"internal-error")}}resolve(e){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$s(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KH=new Td(2e3,1e4);class dl extends x3{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,dl.currentPopupAction&&dl.currentPopupAction.cancel(),dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ge(e,this.auth,"internal-error"),e}async onExecution(){$s(this.filter.length===1,"Popup operations only handle one event");const e=I_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ss(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ss(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ss(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KH.get())};e()}}dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH="pendingRedirect",R0=new Map;class QH extends x3{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=R0.get(this.auth._key());if(!e){try{const r=await WH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}R0.set(this.auth._key(),e)}return this.bypassAuthState||R0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WH(t,e){const n=eV(e),r=JH(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function ZH(t,e){R0.set(t._key(),e)}function JH(t){return Vs(t._redirectPersistence)}function eV(t){return N0(XH,t.config.apiKey,t.name)}async function tV(t,e,n=!1){if(Hr(t.app))return Promise.reject(zs(t));const r=nu(t),s=qH(r,e),u=await new QH(r,s,n).execute();return u&&!n&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=10*60*1e3;class rV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!w3(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ss(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nV&&this.cachedEventUids.clear(),this.cachedEventUids.has(XS(e))}saveEventToCache(e){this.cachedEventUids.add(XS(e)),this.lastProcessedEventTime=Date.now()}}function XS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function w3({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function iV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return w3(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sV(t,e={}){return eo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oV=/^https?/;async function uV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sV(t);for(const n of e)try{if(lV(n))return}catch{}wi(t,"unauthorized-domain")}function lV(t){const e=qE(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const u=new URL(t);return u.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===r}if(!oV.test(n))return!1;if(aV.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=new Td(3e4,6e4);function QS(){const t=as().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hV(t){return new Promise((e,n)=>{var r,s,o;function u(){QS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QS(),n(ss(t,"network-request-failed"))},timeout:cV.get()})}if(!((s=(r=as().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=as().gapi)===null||o===void 0)&&o.load)u();else{const c=nH("iframefcb");return as()[c]=()=>{gapi.load?u():n(ss(t,"network-request-failed"))},c3(`${tH()}?onload=${c}`).catch(d=>n(d))}}).catch(e=>{throw k0=null,e})}let k0=null;function dV(t){return k0=k0||hV(t),k0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV=new Td(5e3,15e3),pV="__/auth/iframe",mV="emulator/auth/iframe",gV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function EV(t){const e=t.config;Ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?A_(e,mV):`https://${t.config.authDomain}/${pV}`,r={apiKey:e.apiKey,appName:t.name,v:Vl},s=yV.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${pd(r).slice(1)}`}async function _V(t){const e=await dV(t),n=as().gapi;return Ge(n,t,"internal-error"),e.open({where:document.body,url:EV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gV,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const u=ss(t,"network-request-failed"),c=as().setTimeout(()=>{o(u)},fV.get());function d(){as().clearTimeout(c),s(r)}r.ping(d).then(d,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TV=500,vV=600,AV="_blank",SV="http://localhost";class WS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xV(t,e,n,r=TV,s=vV){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const d=Object.assign(Object.assign({},bV),{width:r.toString(),height:s.toString(),top:o,left:u}),f=nr().toLowerCase();n&&(c=r3(f)?AV:n),t3(f)&&(e=e||SV,d.scrollbars="yes");const m=Object.entries(d).reduce((b,[T,w])=>`${b}${T}=${w},`,"");if(GU(f)&&c!=="_self")return wV(e||"",c),new WS(null);const y=window.open(e||"",c,m);Ge(y,t,"popup-blocked");try{y.focus()}catch{}return new WS(y)}function wV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV="__/auth/handler",IV="emulator/auth/handler",NV=encodeURIComponent("fac");async function ZS(t,e,n,r,s,o){Ge(t.config.authDomain,t,"auth-domain-config-required"),Ge(t.config.apiKey,t,"invalid-api-key");const u={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vl,eventId:s};if(e instanceof f3){e.setDefaultLanguage(t.languageCode),u.providerId=e.providerId||"",$M(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,y]of Object.entries({}))u[m]=y}if(e instanceof Ad){const m=e.getScopes().filter(y=>y!=="");m.length>0&&(u.scopes=m.join(","))}t.tenantId&&(u.tid=t.tenantId);const c=u;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const d=await t._getAppCheckToken(),f=d?`#${NV}=${encodeURIComponent(d)}`:"";return`${RV(t)}?${pd(c).slice(1)}${f}`}function RV({config:t}){return t.emulator?A_(t,IV):`https://${t.authDomain}/${CV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy="webStorageSupport";class kV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=b3,this._completeRedirectFn=tV,this._overrideRedirectResult=ZH}async _openPopup(e,n,r,s){var o;$s((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await ZS(e,n,r,qE(),s);return xV(e,u,I_())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await ZS(e,n,r,qE(),s);return LH(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):($s(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _V(e),r=new rV(e);return n.register("authEvent",s=>(Ge(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vy,{type:Vy},s=>{var o;const u=(o=s?.[0])===null||o===void 0?void 0:o[Vy];u!==void 0&&n(!!u),wi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return u3()||n3()||x_()}}const DV=kV;var JS="@firebase/auth",ex="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PV(t){Go(new qa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:c}=r.options;Ge(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:u,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:l3(t)},f=new ZU(r,s,o,d);return uH(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Go(new qa("auth-internal",e=>{const n=nu(e.getProvider("auth").getImmediate());return(r=>new OV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ns(JS,ex,LV(t)),ns(JS,ex,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=5*60,BV=cI("authIdTokenMaxAge")||MV;let tx=null;const UV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>BV)return;const s=n?.token;tx!==s&&(tx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function HV(t=M1()){const e=kp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=oH(t,{popupRedirectResolver:DV,persistence:[jH,kH,b3]}),r=cI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const u=UV(o.toString());wH(n,u,()=>u(n.currentUser)),xH(n,c=>u(c))}}const s=oI("auth");return s&&lH(n,`http://${s}`),n}function VV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}JU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=ss("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",VV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PV("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV="type.googleapis.com/google.protobuf.Int64Value",FV="type.googleapis.com/google.protobuf.UInt64Value";function C3(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function dp(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>dp(e));if(typeof t=="function"||typeof t=="object")return C3(t,e=>dp(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Bl(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case zV:case FV:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Bl(e)):typeof t=="function"||typeof t=="object"?C3(t,e=>Bl(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tr extends cs{constructor(e,n,r){super(`${R_}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Tr.prototype)}}function jV(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function fp(t,e){let n=jV(t),r=n,s;try{const o=e&&e.error;if(o){const u=o.status;if(typeof u=="string"){if(!nx[u])return new Tr("internal","internal");n=nx[u],r=u}const c=o.message;typeof c=="string"&&(r=c),s=o.details,s!==void 0&&(s=Bl(s))}}catch{}return n==="ok"?null:new Tr(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Hr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="us-central1",YV=/^data: (.*?)(?:\n|$)/;function GV(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Tr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class $V{constructor(e,n,r,s,o=KE,u=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new qV(e,n,r,s),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=KE}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function KV(t,e,n){const r=Zo(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(D1(t.emulatorOrigin),O1("Functions",!0))}function XV(t,e,n){const r=s=>WV(t,e,s,{});return r.stream=(s,o)=>JV(t,e,s,o),r}async function QV(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function I3(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function WV(t,e,n,r){const s=t._url(e);return ZV(t,s,n,r)}async function ZV(t,e,n,r){n=dp(n);const s={data:n},o=await I3(t,r),u=r.timeout||7e4,c=GV(u),d=await Promise.race([QV(e,s,o,t.fetchImpl),c.promise,t.cancelAllRequests]);if(c.cancel(),!d)throw new Tr("cancelled","Firebase Functions instance was deleted.");const f=fp(d.status,d.json);if(f)throw f;if(!d.json)throw new Tr("internal","Response is not valid JSON object.");let m=d.json.data;if(typeof m>"u"&&(m=d.json.result),typeof m>"u")throw new Tr("internal","Response is missing data field.");return{data:Bl(m)}}function JV(t,e,n,r){const s=t._url(e);return ez(t,s,n,r||{})}async function ez(t,e,n,r){var s;n=dp(n);const o={data:n},u=await I3(t,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let c;try{c=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:u,signal:r?.signal})}catch(T){if(T instanceof Error&&T.name==="AbortError"){const I=new Tr("cancelled","Request was cancelled.");return{data:Promise.reject(I),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(I)}}}}}}const w=fp(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let d,f;const m=new Promise((T,w)=>{d=T,f=w});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const T=new Tr("cancelled","Request was cancelled.");f(T)});const y=c.body.getReader(),b=tz(y,d,f,r?.signal);return{stream:{[Symbol.asyncIterator](){const T=b.getReader();return{async next(){const{value:w,done:I}=await T.read();return{value:w,done:I}},async return(){return await T.cancel(),{done:!0,value:void 0}}}}},data:m}}function tz(t,e,n,r){const s=(u,c)=>{const d=u.match(YV);if(!d)return;const f=d[1];try{const m=JSON.parse(f);if("result"in m){e(Bl(m.result));return}if("message"in m){c.enqueue(Bl(m.message));return}if("error"in m){const y=fp(0,m);c.error(y),n(y);return}}catch(m){if(m instanceof Tr){c.error(m),n(m);return}}},o=new TextDecoder;return new ReadableStream({start(u){let c="";return d();async function d(){if(r?.aborted){const f=new Tr("cancelled","Request was cancelled");return u.error(f),n(f),Promise.resolve()}try{const{value:f,done:m}=await t.read();if(m){c.trim()&&s(c.trim(),u),u.close();return}if(r?.aborted){const b=new Tr("cancelled","Request was cancelled");u.error(b),n(b),await t.cancel();return}c+=o.decode(f,{stream:!0});const y=c.split(`
`);c=y.pop()||"";for(const b of y)b.trim()&&s(b.trim(),u);return d()}catch(f){const m=f instanceof Tr?f:fp(0,null);u.error(m),n(m)}}},cancel(){return t.cancel()}})}const rx="@firebase/functions",ix="0.12.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz="auth-internal",rz="app-check-internal",iz="messaging-internal";function sz(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(nz),u=n.getProvider(iz),c=n.getProvider(rz);return new $V(s,o,u,c,r)};Go(new qa(R_,e,"PUBLIC").setMultipleInstances(!0)),ns(rx,ix,t),ns(rx,ix,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function az(t=M1(),e=KE){const r=kp(on(t),R_).getImmediate({identifier:e}),s=uI("functions");return s&&N3(r,...s),r}function N3(t,e,n){KV(on(t),e,n)}function R3(t,e,n){return XV(on(t),e)}sz();const oz={apiKey:"AIzaSyAO9TXM7A0SNeiEXzYo27fW0wdTXqXDEyc",authDomain:"tinkproject-78374a.firebaseapp.com",projectId:"tinkproject-78374a",storageBucket:"tinkproject-78374a.firebasestorage.app",messagingSenderId:"785731389668",appId:"1:785731389668:web:f57803cf98bdd9bf5d84f1"},k_=fI(oz),Ci=sU(k_),pp=HV(k_),D_=az(k_,"us-central1");N3(D_,"localhost",5001);const Yr={BOARDS:"boards",NODES:"nodes",EDGES:"edges"},lr={CANNOT_DELETE_LAST_BOARD:"Cannot delete the last board!",BOARD_NOT_FOUND:"Board not found",SAVE_FAILED:"Failed to save changes",LOAD_FAILED:"Failed to load data",AUTH_REQUIRED:"Authentication required",NETWORK_ERROR:"Network error. Please check your connection.",FIRESTORE_INDEX_MISSING:"Database index is missing. Please create the required index in Firebase Console.",INVALID_EMAIL:"Please enter a valid email address",WEAK_PASSWORD:"Password must be at least 6 characters long",EMAIL_IN_USE:"This email is already registered",USER_NOT_FOUND:"No account found with this email",WRONG_PASSWORD:"Incorrect password",TOO_MANY_REQUESTS:"Too many failed attempts. Please try again later."};function uz(){const[t,e]=Q.useState(""),[n,r]=Q.useState(""),[s,o]=Q.useState(!1),[u,c]=Q.useState(!1),[d,f]=Q.useState(""),m=async b=>{b.preventDefault(),c(!0),f("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(lr.INVALID_EMAIL);if(n.length<6)throw new Error(lr.WEAK_PASSWORD);const w=await AH(pp,t,n);console.log("User created successfully:",w.user.uid)}catch(T){console.error("Sign up error:",T);let w="Failed to create account";T.code==="auth/email-already-in-use"?w=lr.EMAIL_IN_USE:T.code==="auth/invalid-email"?w=lr.INVALID_EMAIL:T.code==="auth/weak-password"?w=lr.WEAK_PASSWORD:T.code==="auth/operation-not-allowed"?w="Email/password accounts are not enabled. Please contact support.":T.message&&(w=T.message),f(w)}finally{c(!1)}},y=async b=>{b.preventDefault(),c(!0),f("");try{if(!t||!n)throw new Error("Please fill in all fields");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error(lr.INVALID_EMAIL);const w=await SH(pp,t,n);console.log("User signed in successfully:",w.user.uid)}catch(T){console.error("Sign in error:",T);let w="Failed to sign in";T.code==="auth/user-not-found"?w=lr.USER_NOT_FOUND:T.code==="auth/wrong-password"?w=lr.WRONG_PASSWORD:T.code==="auth/invalid-email"?w=lr.INVALID_EMAIL:T.code==="auth/user-disabled"?w="This account has been disabled. Please contact support.":T.code==="auth/too-many-requests"?w=lr.TOO_MANY_REQUESTS:T.message&&(w=T.message),f(w)}finally{c(!1)}};return P.jsx("div",{className:"fixed inset-0 bg-[#1a1a1d]/90 dark:bg-[#1a1a1d]/90 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:P.jsxs("div",{className:`bg-[#222226] dark:bg-[#222226] rounded-2xl shadow-[0_24px_48px_rgba(0,0,0,0.7),0_10px_20px_rgba(0,0,0,0.5)] 
                          p-8 w-full max-w-md border border-white/12 dark:border-white/12`,children:[P.jsxs("div",{className:"text-center mb-8",children:[P.jsx("div",{className:"flex items-center justify-center mb-4",children:P.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:P.jsx("span",{className:"text-white font-bold text-lg",children:"T"})})}),P.jsx("h2",{className:"text-2xl font-bold text-[#f8faff] dark:text-[#f8faff] mb-2",children:s?"Join TinkFlow":"Welcome Back"}),P.jsx("p",{className:"text-[#b0b3b8] dark:text-[#b0b3b8] text-sm",children:s?"Start your AI-powered learning journey":"Continue exploring concepts with AI"})]}),P.jsxs("form",{onSubmit:s?m:y,className:"space-y-6",children:[P.jsx("div",{children:P.jsx("input",{type:"email",placeholder:"Email address",value:t,onChange:b=>e(b.target.value),required:!0,className:`w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-white/15 dark:border-white/15 
                                     rounded-lg text-[#f8faff] dark:text-[#f8faff] placeholder-[#8b949e] dark:placeholder-[#8b949e] 
                                     focus:outline-none focus:border-[#5a9cf8] dark:focus:border-[#5a9cf8] focus:shadow-[0_0_0_3px_rgba(90,156,248,0.25)]
                                     transition-all duration-200`})}),P.jsx("div",{children:P.jsx("input",{type:"password",placeholder:"Password",value:n,onChange:b=>r(b.target.value),required:!0,className:`w-full px-4 py-3 bg-[#2a2a2e] dark:bg-[#2a2a2e] border border-white/15 dark:border-white/15 
                                     rounded-lg text-[#f8faff] dark:text-[#f8faff] placeholder-[#8b949e] dark:placeholder-[#8b949e] 
                                     focus:outline-none focus:border-[#5a9cf8] dark:focus:border-[#5a9cf8] focus:shadow-[0_0_0_3px_rgba(90,156,248,0.25)]
                                     transition-all duration-200`})}),P.jsx("button",{type:"submit",disabled:u,className:`w-full py-3 px-4 rounded-lg font-semibold text-white transition-all duration-200 
                                   ${u?"bg-[#3a3a3e] dark:bg-[#3a3a3e] cursor-not-allowed opacity-60":"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 active:from-indigo-700 active:to-purple-800 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"}
                                   focus:outline-none focus:shadow-[0_0_0_3px_rgba(99,102,241,0.4)]`,children:u?P.jsx("div",{className:"inline-block w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s?"Create Account":"Sign In"}),d&&P.jsx("div",{className:`bg-red-900/20 dark:bg-red-900/30 border border-red-500/30 dark:border-red-500/40 
                                       rounded-lg p-3 text-red-400 dark:text-red-400 text-sm`,children:d})]}),P.jsxs("div",{className:"auth-switch text-center mt-6",children:[P.jsx("span",{className:"auth-switch-text text-gray-400 dark:text-gray-400 text-sm",children:s?"Already have an account?":"Don't have an account?"}),P.jsx("button",{type:"button",onClick:()=>o(!s),className:`auth-switch-btn ml-2 text-blue-400 dark:text-blue-400 hover:text-blue-300 dark:hover:text-blue-300 
                                 text-sm font-medium transition-colors duration-200 bg-transparent border-none cursor-pointer`,children:s?"Sign In":"Sign Up"})]})]})})}function lz({show:t,onHide:e,onConfirm:n,isCreating:r=!1}){const[s,o]=Q.useState(""),[u,c]=Q.useState(!0),d=b=>{const T=b.target.value;o(T),c(T.trim().length>0&&T.trim().length<=50)},f=b=>{b.preventDefault();const T=s.trim();T.length>0&&T.length<=50&&(n(T),o(""),c(!0))},m=()=>{o(""),c(!0),e()},y=b=>{b.key==="Enter"&&f(b)};return t?P.jsx("div",{className:"board-name-modal fixed inset-0 bg-black/60 dark:bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-[2001]",children:P.jsxs("div",{className:"bg-gray-800 dark:bg-gray-900 rounded-xl shadow-2xl p-6 w-full max-w-md border border-gray-700 dark:border-gray-600",children:[P.jsxs("div",{className:"flex justify-between items-center mb-6",children:[P.jsx("h3",{className:"text-lg font-semibold text-white dark:text-white",children:"Create New Board"}),P.jsx("button",{onClick:m,className:`text-gray-400 dark:text-gray-400 hover:text-gray-200 dark:hover:text-gray-200 
                                 bg-gray-700/50 dark:bg-gray-800/50 hover:bg-gray-600/50 dark:hover:bg-gray-700/50
                                 border border-gray-600 dark:border-gray-700 rounded-lg w-8 h-8 flex items-center justify-center
                                 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500/20`,"aria-label":"Close",children:""})]}),P.jsxs("form",{onSubmit:f,className:"space-y-4",children:[P.jsxs("div",{children:[P.jsx("label",{className:"block text-sm font-medium text-gray-300 dark:text-gray-300 mb-2",children:"Board Name"}),P.jsx("input",{type:"text",value:s,onChange:d,onKeyDown:y,placeholder:"Enter board name...",maxLength:50,autoFocus:!0,className:`w-full px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border rounded-lg 
                                       text-white dark:text-white placeholder-gray-400 dark:placeholder-gray-500 
                                       focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40 
                                       transition-all duration-200 font-medium
                                       ${u?"border-gray-600/50 dark:border-gray-700/50 focus:border-blue-500/60 dark:focus:border-blue-400/60":"border-red-500/60 dark:border-red-500/60 focus:border-red-500/60 dark:focus:border-red-500/60"}`}),!u&&P.jsx("p",{className:"text-red-400 dark:text-red-400 text-sm mt-2",children:"Board name must be between 1 and 50 characters long."}),P.jsxs("p",{className:`text-xs mt-1 ${s.length===50?"text-red-400 dark:text-red-400":"text-gray-500 dark:text-gray-500"}`,children:[s.length,"/50 characters"]})]}),P.jsxs("div",{className:"flex gap-3 pt-4",children:[P.jsx("button",{type:"button",onClick:m,disabled:r,className:`flex-1 px-4 py-3 bg-gray-700/50 dark:bg-gray-800/50 border border-gray-600/50 dark:border-gray-700/50
                                     text-gray-300 dark:text-gray-300 rounded-lg font-medium transition-all duration-200
                                     hover:bg-gray-600/60 dark:hover:bg-gray-700/60 hover:border-gray-500/60 dark:hover:border-gray-600/60
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20`,children:"Cancel"}),P.jsx("button",{type:"submit",disabled:!u||s.trim().length===0||r,className:`flex-1 px-4 py-3 bg-blue-600/80 dark:bg-blue-500/80 border border-blue-500/50 dark:border-blue-400/50
                                     text-white rounded-lg font-medium transition-all duration-200 
                                     disabled:opacity-50 disabled:cursor-not-allowed
                                     hover:bg-blue-500/90 dark:hover:bg-blue-400/90 hover:border-blue-400/60 dark:hover:border-blue-300/60
                                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 dark:focus:ring-blue-400/40`,children:r?"Creating...":"Create Board"})]})]})]})}):null}function cz({allBoards:t,currentBoard:e,onSwitchBoard:n,onCreateBoard:r,onDeleteBoard:s,onSignOut:o,isLoading:u}){const[c,d]=Q.useState(!1),[f,m]=Q.useState(!1),[y,b]=Q.useState(null),T=async k=>{try{d(!0),await r(k),m(!1)}catch(q){console.error("Error in sidebar create board:",q)}finally{d(!1)}},w=()=>{m(!0)},I=()=>{m(!1)},L=(k,q)=>{k.stopPropagation(),window.confirm("Are you sure you want to delete this board?")&&s(q)};return P.jsxs(P.Fragment,{children:[P.jsx("div",{className:"left-0 top-0 w-[100%] h-screen bg-[#222226] dark:bg-[#222226] border-r border-white/10 dark:border-white/10 flex flex-col z-[1001] transition-transform duration-[0.35s] ease-[cubic-bezier(0.4,0,0.2,1)]",children:P.jsxs("div",{className:"flex flex-col h-full",children:[P.jsxs("div",{className:"p-[22px] border-b border-white/[0.08] dark:border-white/[0.08] bg-white/[0.03] dark:bg-white/[0.03]",children:[P.jsx("h2",{className:"m-0 mb-[18px] text-[18px] font-semibold text-[#f8faff] dark:text-[#f8faff] tracking-[-0.012em]",children:"TinkFlow Boards"}),P.jsx("button",{onClick:w,disabled:u||c,className:`w-full bg-[#2f2f33] dark:bg-[#2f2f33] text-[#f8faff] dark:text-[#f8faff] border border-white/12 dark:border-white/12 
                                      px-4 py-[10px] rounded-md cursor-pointer text-[13px] font-semibold transition-all duration-200 
                                      tracking-[0.015em] uppercase
                                      ${u||c?"cursor-not-allowed opacity-60":"hover:bg-[#3a3a3e] dark:hover:bg-[#3a3a3e] hover:border-white/18 dark:hover:border-white/18 hover:-translate-y-0.5"}`,children:c?"Creating...":"+ New Board"})]}),P.jsx("div",{className:"flex-1 overflow-y-auto p-[14px] scrollbar-thin scrollbar-track-[#2a2a2e] scrollbar-thumb-[#4a4a4e] hover:scrollbar-thumb-[#5a5a5e]",children:t.map(k=>{const q=e?.id===k.id,$=y===k.id;return P.jsxs("div",{onClick:()=>!u&&n(k.id),onMouseEnter:()=>b(k.id),onMouseLeave:()=>b(null),className:`
                                        min-h-[54px] px-[18px] py-[14px] mb-[8px] rounded-[12px] flex justify-between items-center
                                        transition-all duration-200 cursor-pointer border font-medium text-[14px] leading-[1.4]
                                        ${u?"cursor-not-allowed opacity-60":"cursor-pointer"}
                                        ${q?"border-[#4a90e2] bg-[#2a3850] dark:bg-[#2a3850] text-[#f8faff] dark:text-[#f8faff] font-semibold shadow-[0_2px_8px_rgba(74,144,226,0.3)] transform translate-y-[-1px]":$?"border-white/20 dark:border-white/20 bg-[#2a2a2e] dark:bg-[#2a2a2e] text-[#e8eaed] dark:text-[#e8eaed] shadow-[0_2px_8px_rgba(0,0,0,0.3)] transform translate-y-[-1px]":"border-white/10 dark:border-white/10 bg-[#1e1e22] dark:bg-[#1e1e22] text-[#b0b3b8] dark:text-[#b0b3b8]"}
                                    `,role:"button",tabIndex:0,onKeyDown:j=>{(j.key==="Enter"||j.key===" ")&&!u&&n(k.id)},children:[P.jsx("span",{className:`
                                        ${q?"font-bold":"font-medium"} 
                                        text-lg flex-1 whitespace-nowrap overflow-hidden text-ellipsis 
                                        tracking-wide leading-5
                                    `,children:k.name}),P.jsxs("div",{className:"flex items-center gap-2",children:[k.isOpen&&P.jsx("span",{className:"text-blue-400 dark:text-blue-400 text-lg",children:""}),t.length>1&&P.jsx("button",{onClick:j=>{j.stopPropagation(),L(j,k.id)},title:"Delete board",className:`
                                                    bg-transparent border-none text-red-400 dark:text-red-400 
                                                    cursor-pointer text-xl leading-none px-1 transition-opacity duration-150
                                                    ${$?"opacity-100 visible":"opacity-0 invisible"}
                                                    hover:text-red-300 dark:hover:text-red-300
                                                `,children:""})]})]},k.id)})}),u&&P.jsx("div",{className:"p-4 text-center text-[#b0b3b8] dark:text-[#b0b3b8] text-[13px] font-medium",children:"Loading boards..."}),P.jsx("div",{className:"p-[22px] border-t border-white/[0.08] dark:border-white/[0.08]",children:P.jsx("button",{onClick:o,className:`w-full px-4 py-[10px] rounded-md border border-white/12 dark:border-white/12 
                                     bg-transparent text-[#b0b3b8] dark:text-[#b0b3b8] cursor-pointer text-[13px] font-semibold
                                     transition-all duration-200 tracking-[0.015em] uppercase
                                     hover:bg-[#2a2a2e] dark:hover:bg-[#2a2a2e] hover:border-white/18 dark:hover:border-white/18 
                                     hover:text-[#e8eaed] dark:hover:text-[#e8eaed] hover:-translate-y-0.5`,children:"Sign Out"})})]})}),P.jsx(lz,{show:f,onHide:I,onConfirm:T,isCreating:c})]})}function sx(t){const e=[],n=String(t||"");let r=n.indexOf(","),s=0,o=!1;for(;!o;){r===-1&&(r=n.length,o=!0);const u=n.slice(s,r).trim();(u||!o)&&e.push(u),s=r+1,r=n.indexOf(",",s)}return e}function k3(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const hz=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,dz=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,fz={};function ax(t,e){return(fz.jsx?dz:hz).test(t)}const pz=/[ \t\n\f\r]/g;function mz(t){return typeof t=="object"?t.type==="text"?ox(t.value):!1:ox(t)}function ox(t){return t.replace(pz,"")===""}let xd=class{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}};xd.prototype.normal={};xd.prototype.property={};xd.prototype.space=void 0;function D3(t,e){const n={},r={};for(const s of t)Object.assign(n,s.property),Object.assign(r,s.normal);return new xd(n,r,e)}function sd(t){return t.toLowerCase()}let Ar=class{constructor(e,n){this.attribute=n,this.property=e}};Ar.prototype.attribute="";Ar.prototype.booleanish=!1;Ar.prototype.boolean=!1;Ar.prototype.commaOrSpaceSeparated=!1;Ar.prototype.commaSeparated=!1;Ar.prototype.defined=!1;Ar.prototype.mustUseProperty=!1;Ar.prototype.number=!1;Ar.prototype.overloadedBoolean=!1;Ar.prototype.property="";Ar.prototype.spaceSeparated=!1;Ar.prototype.space=void 0;let gz=0;const nt=ru(),bn=ru(),XE=ru(),Re=ru(),Ht=ru(),Al=ru(),Mr=ru();function ru(){return 2**++gz}const QE=Object.freeze(Object.defineProperty({__proto__:null,boolean:nt,booleanish:bn,commaOrSpaceSeparated:Mr,commaSeparated:Al,number:Re,overloadedBoolean:XE,spaceSeparated:Ht},Symbol.toStringTag,{value:"Module"})),zy=Object.keys(QE);let O_=class extends Ar{constructor(e,n,r,s){let o=-1;if(super(e,n),ux(this,"space",s),typeof r=="number")for(;++o<zy.length;){const u=zy[o];ux(this,zy[o],(r&QE[u])===QE[u])}}};O_.prototype.defined=!0;function ux(t,e,n){n&&(t[e]=n)}function Kl(t){const e={},n={};for(const[r,s]of Object.entries(t.properties)){const o=new O_(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[sd(r)]=r,n[sd(o.attribute)]=r}return new xd(e,n,t.space)}const O3=Kl({properties:{ariaActiveDescendant:null,ariaAtomic:bn,ariaAutoComplete:null,ariaBusy:bn,ariaChecked:bn,ariaColCount:Re,ariaColIndex:Re,ariaColSpan:Re,ariaControls:Ht,ariaCurrent:null,ariaDescribedBy:Ht,ariaDetails:null,ariaDisabled:bn,ariaDropEffect:Ht,ariaErrorMessage:null,ariaExpanded:bn,ariaFlowTo:Ht,ariaGrabbed:bn,ariaHasPopup:null,ariaHidden:bn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ht,ariaLevel:Re,ariaLive:null,ariaModal:bn,ariaMultiLine:bn,ariaMultiSelectable:bn,ariaOrientation:null,ariaOwns:Ht,ariaPlaceholder:null,ariaPosInSet:Re,ariaPressed:bn,ariaReadOnly:bn,ariaRelevant:null,ariaRequired:bn,ariaRoleDescription:Ht,ariaRowCount:Re,ariaRowIndex:Re,ariaRowSpan:Re,ariaSelected:bn,ariaSetSize:Re,ariaSort:null,ariaValueMax:Re,ariaValueMin:Re,ariaValueNow:Re,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function L3(t,e){return e in t?t[e]:e}function P3(t,e){return L3(t,e.toLowerCase())}const yz=Kl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Al,acceptCharset:Ht,accessKey:Ht,action:null,allow:null,allowFullScreen:nt,allowPaymentRequest:nt,allowUserMedia:nt,alt:null,as:null,async:nt,autoCapitalize:null,autoComplete:Ht,autoFocus:nt,autoPlay:nt,blocking:Ht,capture:null,charSet:null,checked:nt,cite:null,className:Ht,cols:Re,colSpan:null,content:null,contentEditable:bn,controls:nt,controlsList:Ht,coords:Re|Al,crossOrigin:null,data:null,dateTime:null,decoding:null,default:nt,defer:nt,dir:null,dirName:null,disabled:nt,download:XE,draggable:bn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:nt,formTarget:null,headers:Ht,height:Re,hidden:XE,high:Re,href:null,hrefLang:null,htmlFor:Ht,httpEquiv:Ht,id:null,imageSizes:null,imageSrcSet:null,inert:nt,inputMode:null,integrity:null,is:null,isMap:nt,itemId:null,itemProp:Ht,itemRef:Ht,itemScope:nt,itemType:Ht,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:nt,low:Re,manifest:null,max:null,maxLength:Re,media:null,method:null,min:null,minLength:Re,multiple:nt,muted:nt,name:null,nonce:null,noModule:nt,noValidate:nt,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:nt,optimum:Re,pattern:null,ping:Ht,placeholder:null,playsInline:nt,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:nt,referrerPolicy:null,rel:Ht,required:nt,reversed:nt,rows:Re,rowSpan:Re,sandbox:Ht,scope:null,scoped:nt,seamless:nt,selected:nt,shadowRootClonable:nt,shadowRootDelegatesFocus:nt,shadowRootMode:null,shape:null,size:Re,sizes:null,slot:null,span:Re,spellCheck:bn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Re,step:null,style:null,tabIndex:Re,target:null,title:null,translate:null,type:null,typeMustMatch:nt,useMap:null,value:bn,width:Re,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ht,axis:null,background:null,bgColor:null,border:Re,borderColor:null,bottomMargin:Re,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:nt,declare:nt,event:null,face:null,frame:null,frameBorder:null,hSpace:Re,leftMargin:Re,link:null,longDesc:null,lowSrc:null,marginHeight:Re,marginWidth:Re,noResize:nt,noHref:nt,noShade:nt,noWrap:nt,object:null,profile:null,prompt:null,rev:null,rightMargin:Re,rules:null,scheme:null,scrolling:bn,standby:null,summary:null,text:null,topMargin:Re,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Re,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:nt,disableRemotePlayback:nt,prefix:null,property:null,results:Re,security:null,unselectable:null},space:"html",transform:P3}),Ez=Kl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Mr,accentHeight:Re,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Re,amplitude:Re,arabicForm:null,ascent:Re,attributeName:null,attributeType:null,azimuth:Re,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Re,by:null,calcMode:null,capHeight:Re,className:Ht,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Re,diffuseConstant:Re,direction:null,display:null,dur:null,divisor:Re,dominantBaseline:null,download:nt,dx:null,dy:null,edgeMode:null,editable:null,elevation:Re,enableBackground:null,end:null,event:null,exponent:Re,externalResourcesRequired:null,fill:null,fillOpacity:Re,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Al,g2:Al,glyphName:Al,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Re,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Re,horizOriginX:Re,horizOriginY:Re,id:null,ideographic:Re,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Re,k:Re,k1:Re,k2:Re,k3:Re,k4:Re,kernelMatrix:Mr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Re,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Re,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Re,overlineThickness:Re,paintOrder:null,panose1:null,path:null,pathLength:Re,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ht,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Re,pointsAtY:Re,pointsAtZ:Re,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Mr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Mr,rev:Mr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Mr,requiredFeatures:Mr,requiredFonts:Mr,requiredFormats:Mr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Re,specularExponent:Re,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Re,strikethroughThickness:Re,string:null,stroke:null,strokeDashArray:Mr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Re,strokeOpacity:Re,strokeWidth:null,style:null,surfaceScale:Re,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Mr,tabIndex:Re,tableValues:null,target:null,targetX:Re,targetY:Re,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Mr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Re,underlineThickness:Re,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Re,values:null,vAlphabetic:Re,vMathematical:Re,vectorEffect:null,vHanging:Re,vIdeographic:Re,version:null,vertAdvY:Re,vertOriginX:Re,vertOriginY:Re,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Re,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:L3}),M3=Kl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),B3=Kl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:P3}),U3=Kl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),_z={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},bz=/[A-Z]/g,lx=/-[a-z]/g,Tz=/^data[-\w.:]+$/i;function L_(t,e){const n=sd(e);let r=e,s=Ar;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Tz.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(lx,Az);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!lx.test(o)){let u=o.replace(bz,vz);u.charAt(0)!=="-"&&(u="-"+u),e="data"+u}}s=O_}return new s(r,e)}function vz(t){return"-"+t.toLowerCase()}function Az(t){return t.charAt(1).toUpperCase()}const Jp=D3([O3,yz,M3,B3,U3],"html"),Xl=D3([O3,Ez,M3,B3,U3],"svg");function cx(t){const e=String(t||"").trim();return e?e.split(/[ \t\n\r\f]+/g):[]}function H3(t){return t.join(" ").trim()}var nl={},Fy,hx;function Sz(){if(hx)return Fy;hx=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,u=/^[;\s]*/,c=/^\s+|\s+$/g,d=`
`,f="/",m="*",y="",b="comment",T="declaration";Fy=function(I,L){if(typeof I!="string")throw new TypeError("First argument must be a string");if(!I)return[];L=L||{};var k=1,q=1;function $(C){var O=C.match(e);O&&(k+=O.length);var K=C.lastIndexOf(d);q=~K?C.length-K:q+C.length}function j(){var C={line:k,column:q};return function(O){return O.position=new te(C),N(),O}}function te(C){this.start=C,this.end={line:k,column:q},this.source=L.source}te.prototype.content=I;function Y(C){var O=new Error(L.source+":"+k+":"+q+": "+C);if(O.reason=C,O.filename=L.source,O.line=k,O.column=q,O.source=I,!L.silent)throw O}function M(C){var O=C.exec(I);if(O){var K=O[0];return $(K),I=I.slice(K.length),O}}function N(){M(n)}function D(C){var O;for(C=C||[];O=U();)O!==!1&&C.push(O);return C}function U(){var C=j();if(!(f!=I.charAt(0)||m!=I.charAt(1))){for(var O=2;y!=I.charAt(O)&&(m!=I.charAt(O)||f!=I.charAt(O+1));)++O;if(O+=2,y===I.charAt(O-1))return Y("End of comment missing");var K=I.slice(2,O-2);return q+=2,$(K),I=I.slice(O),q+=2,C({type:b,comment:K})}}function B(){var C=j(),O=M(r);if(O){if(U(),!M(s))return Y("property missing ':'");var K=M(o),z=C({type:T,property:w(O[0].replace(t,y)),value:K?w(K[0].replace(t,y)):y});return M(u),z}}function V(){var C=[];D(C);for(var O;O=B();)O!==!1&&(C.push(O),D(C));return C}return N(),V()};function w(I){return I?I.replace(c,y):y}return Fy}var dx;function xz(){if(dx)return nl;dx=1;var t=nl&&nl.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(nl,"__esModule",{value:!0}),nl.default=n;var e=t(Sz());function n(r,s){var o=null;if(!r||typeof r!="string")return o;var u=(0,e.default)(r),c=typeof s=="function";return u.forEach(function(d){if(d.type==="declaration"){var f=d.property,m=d.value;c?s(f,m,d):m&&(o=o||{},o[f]=m)}}),o}return nl}var oh={},fx;function wz(){if(fx)return oh;fx=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,o=function(f){return!f||n.test(f)||t.test(f)},u=function(f,m){return m.toUpperCase()},c=function(f,m){return"".concat(m,"-")},d=function(f,m){return m===void 0&&(m={}),o(f)?f:(f=f.toLowerCase(),m.reactCompat?f=f.replace(s,c):f=f.replace(r,c),f.replace(e,u))};return oh.camelCase=d,oh}var uh,px;function Cz(){if(px)return uh;px=1;var t=uh&&uh.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},e=t(xz()),n=wz();function r(s,o){var u={};return!s||typeof s!="string"||(0,e.default)(s,function(c,d){c&&d&&(u[(0,n.camelCase)(c,o)]=d)}),u}return r.default=r,uh=r,uh}var Iz=Cz();const Nz=_p(Iz),em=V3("end"),hs=V3("start");function V3(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Rz(t){const e=hs(t),n=em(t);if(e&&n)return{start:e,end:n}}function Rh(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?mx(t.position):"start"in t||"end"in t?mx(t):"line"in t||"column"in t?WE(t):""}function WE(t){return gx(t&&t.line)+":"+gx(t&&t.column)}function mx(t){return WE(t&&t.start)+"-"+WE(t&&t.end)}function gx(t){return t&&typeof t=="number"?t:1}class rr extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",o={},u=!1;if(n&&("line"in n&&"column"in n?o={place:n}:"start"in n&&"end"in n?o={place:n}:"type"in n?o={ancestors:[n],place:n.position}:o={...n}),typeof e=="string"?s=e:!o.cause&&e&&(u=!0,s=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof r=="string"){const d=r.indexOf(":");d===-1?o.ruleId=r:(o.source=r.slice(0,d),o.ruleId=r.slice(d+1))}if(!o.place&&o.ancestors&&o.ancestors){const d=o.ancestors[o.ancestors.length-1];d&&(o.place=d.position)}const c=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=c?c.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=c?c.line:void 0,this.name=Rh(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=u&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}}rr.prototype.file="";rr.prototype.name="";rr.prototype.reason="";rr.prototype.message="";rr.prototype.stack="";rr.prototype.column=void 0;rr.prototype.line=void 0;rr.prototype.ancestors=void 0;rr.prototype.cause=void 0;rr.prototype.fatal=void 0;rr.prototype.place=void 0;rr.prototype.ruleId=void 0;rr.prototype.source=void 0;const P_={}.hasOwnProperty,kz=new Map,Dz=/[A-Z]/g,Oz=new Set(["table","tbody","thead","tfoot","tr"]),Lz=new Set(["td","th"]),z3="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Pz(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=jz(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Fz(n,e.jsx,e.jsxs)}const s={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Xl:Jp,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},o=F3(s,t,void 0);return o&&typeof o!="string"?o:s.create(t,s.Fragment,{children:o||void 0},void 0)}function F3(t,e,n){if(e.type==="element")return Mz(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return Bz(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return Hz(t,e,n);if(e.type==="mdxjsEsm")return Uz(t,e);if(e.type==="root")return Vz(t,e,n);if(e.type==="text")return zz(t,e)}function Mz(t,e,n){const r=t.schema;let s=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=Xl,t.schema=s),t.ancestors.push(e);const o=q3(t,e.tagName,!1),u=qz(t,e);let c=B_(t,e);return Oz.has(e.tagName)&&(c=c.filter(function(d){return typeof d=="string"?!mz(d):!0})),j3(t,u,o,e),M_(u,c),t.ancestors.pop(),t.schema=r,t.create(e,o,u,n)}function Bz(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}ad(t,e.position)}function Uz(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);ad(t,e.position)}function Hz(t,e,n){const r=t.schema;let s=r;e.name==="svg"&&r.space==="html"&&(s=Xl,t.schema=s),t.ancestors.push(e);const o=e.name===null?t.Fragment:q3(t,e.name,!0),u=Yz(t,e),c=B_(t,e);return j3(t,u,o,e),M_(u,c),t.ancestors.pop(),t.schema=r,t.create(e,o,u,n)}function Vz(t,e,n){const r={};return M_(r,B_(t,e)),t.create(e,t.Fragment,r,n)}function zz(t,e){return e.value}function j3(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function M_(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function Fz(t,e,n){return r;function r(s,o,u,c){const f=Array.isArray(u.children)?n:e;return c?f(o,u,c):f(o,u)}}function jz(t,e){return n;function n(r,s,o,u){const c=Array.isArray(o.children),d=hs(r);return e(s,o,u,c,{columnNumber:d?d.column-1:void 0,fileName:t,lineNumber:d?d.line:void 0},void 0)}}function qz(t,e){const n={};let r,s;for(s in e.properties)if(s!=="children"&&P_.call(e.properties,s)){const o=Gz(t,s,e.properties[s]);if(o){const[u,c]=o;t.tableCellAlignToStyle&&u==="align"&&typeof c=="string"&&Lz.has(e.tagName)?r=c:n[u]=c}}if(r){const o=n.style||(n.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Yz(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const o=r.data.estree.body[0];o.type;const u=o.expression;u.type;const c=u.properties[0];c.type,Object.assign(n,t.evaluater.evaluateExpression(c.argument))}else ad(t,e.position);else{const s=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const c=r.value.data.estree.body[0];c.type,o=t.evaluater.evaluateExpression(c.expression)}else ad(t,e.position);else o=r.value===null?!0:r.value;n[s]=o}return n}function B_(t,e){const n=[];let r=-1;const s=t.passKeys?new Map:kz;for(;++r<e.children.length;){const o=e.children[r];let u;if(t.passKeys){const d=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(d){const f=s.get(d)||0;u=d+"-"+f,s.set(d,f+1)}}const c=F3(t,o,u);c!==void 0&&n.push(c)}return n}function Gz(t,e,n){const r=L_(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?k3(n):H3(n)),r.property==="style"){let s=typeof n=="object"?n:$z(t,String(n));return t.stylePropertyNameCase==="css"&&(s=Kz(s)),["style",s]}return[t.elementAttributeNameCase==="react"&&r.space?_z[r.property]||r.property:r.attribute,n]}}function $z(t,e){try{return Nz(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,s=new rr("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=z3+"#cannot-parse-style-attribute",s}}function q3(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const s=e.split(".");let o=-1,u;for(;++o<s.length;){const c=ax(s[o])?{type:"Identifier",name:s[o]}:{type:"Literal",value:s[o]};u=u?{type:"MemberExpression",object:u,property:c,computed:!!(o&&c.type==="Literal"),optional:!1}:c}r=u}else r=ax(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const s=r.value;return P_.call(t.components,s)?t.components[s]:s}if(t.evaluater)return t.evaluater.evaluateExpression(r);ad(t)}function ad(t,e){const n=new rr("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=z3+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Kz(t){const e={};let n;for(n in t)P_.call(t,n)&&(e[Xz(n)]=t[n]);return e}function Xz(t){let e=t.replace(Dz,Qz);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function Qz(t){return"-"+t.toLowerCase()}const jy={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Wz={};function Zz(t,e){const n=Wz,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Y3(t,r,s)}function Y3(t,e,n){if(Jz(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return yx(t.children,e,n)}return Array.isArray(t)?yx(t,e,n):""}function yx(t,e,n){const r=[];let s=-1;for(;++s<t.length;)r[s]=Y3(t[s],e,n);return r.join("")}function Jz(t){return!!(t&&typeof t=="object")}const Ex=document.createElement("i");function U_(t){const e="&"+t+";";Ex.innerHTML=e;const n=Ex.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function us(t,e,n,r){const s=t.length;let o=0,u;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,n=n>0?n:0,r.length<1e4)u=Array.from(r),u.unshift(e,n),t.splice(...u);else for(n&&t.splice(e,n);o<r.length;)u=r.slice(o,o+1e4),u.unshift(e,0),t.splice(...u),o+=1e4,e+=1e4}function li(t,e){return t.length>0?(us(t,t.length,0,e),t):e}const _x={}.hasOwnProperty;function eF(t){const e={};let n=-1;for(;++n<t.length;)tF(e,t[n]);return e}function tF(t,e){let n;for(n in e){const s=(_x.call(t,n)?t[n]:void 0)||(t[n]={}),o=e[n];let u;if(o)for(u in o){_x.call(s,u)||(s[u]=[]);const c=o[u];nF(s[u],Array.isArray(c)?c:c?[c]:[])}}}function nF(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);us(t,0,0,r)}function G3(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Sl(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const es=to(/[A-Za-z]/),zr=to(/[\dA-Za-z]/),rF=to(/[#-'*+\--9=?A-Z^-~]/);function ZE(t){return t!==null&&(t<32||t===127)}const JE=to(/\d/),iF=to(/[\dA-Fa-f]/),sF=to(/[!-/:-@[-`{-~]/);function Xe(t){return t!==null&&t<-2}function vr(t){return t!==null&&(t<0||t===32)}function wt(t){return t===-2||t===-1||t===32}const aF=to(new RegExp("\\p{P}|\\p{S}","u")),oF=to(/\s/);function to(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Ql(t){const e=[];let n=-1,r=0,s=0;for(;++n<t.length;){const o=t.charCodeAt(n);let u="";if(o===37&&zr(t.charCodeAt(n+1))&&zr(t.charCodeAt(n+2)))s=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(u=String.fromCharCode(o));else if(o>55295&&o<57344){const c=t.charCodeAt(n+1);o<56320&&c>56319&&c<57344?(u=String.fromCharCode(o,c),s=1):u=""}else u=String.fromCharCode(o);u&&(e.push(t.slice(r,n),encodeURIComponent(u)),r=n+s+1,u=""),s&&(n+=s,s=0)}return e.join("")+t.slice(r)}function zt(t,e,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let o=0;return u;function u(d){return wt(d)?(t.enter(n),c(d)):e(d)}function c(d){return wt(d)&&o++<s?(t.consume(d),c):(t.exit(n),e(d))}}const uF={tokenize:lF};function lF(t){const e=t.attempt(this.parser.constructs.contentInitial,r,s);let n;return e;function r(c){if(c===null){t.consume(c);return}return t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),zt(t,e,"linePrefix")}function s(c){return t.enter("paragraph"),o(c)}function o(c){const d=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=d),n=d,u(c)}function u(c){if(c===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(c);return}return Xe(c)?(t.consume(c),t.exit("chunkText"),o):(t.consume(c),u)}}const cF={tokenize:hF},bx={tokenize:dF};function hF(t){const e=this,n=[];let r=0,s,o,u;return c;function c($){if(r<n.length){const j=n[r];return e.containerState=j[1],t.attempt(j[0].continuation,d,f)($)}return f($)}function d($){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&q();const j=e.events.length;let te=j,Y;for(;te--;)if(e.events[te][0]==="exit"&&e.events[te][1].type==="chunkFlow"){Y=e.events[te][1].end;break}k(r);let M=j;for(;M<e.events.length;)e.events[M][1].end={...Y},M++;return us(e.events,te+1,0,e.events.slice(j)),e.events.length=M,f($)}return c($)}function f($){if(r===n.length){if(!s)return b($);if(s.currentConstruct&&s.currentConstruct.concrete)return w($);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(bx,m,y)($)}function m($){return s&&q(),k(r),b($)}function y($){return e.parser.lazy[e.now().line]=r!==n.length,u=e.now().offset,w($)}function b($){return e.containerState={},t.attempt(bx,T,w)($)}function T($){return r++,n.push([e.currentConstruct,e.containerState]),b($)}function w($){if($===null){s&&q(),k(0),t.consume($);return}return s=s||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:o}),I($)}function I($){if($===null){L(t.exit("chunkFlow"),!0),k(0),t.consume($);return}return Xe($)?(t.consume($),L(t.exit("chunkFlow")),r=0,e.interrupt=void 0,c):(t.consume($),I)}function L($,j){const te=e.sliceStream($);if(j&&te.push(null),$.previous=o,o&&(o.next=$),o=$,s.defineSkip($.start),s.write(te),e.parser.lazy[$.start.line]){let Y=s.events.length;for(;Y--;)if(s.events[Y][1].start.offset<u&&(!s.events[Y][1].end||s.events[Y][1].end.offset>u))return;const M=e.events.length;let N=M,D,U;for(;N--;)if(e.events[N][0]==="exit"&&e.events[N][1].type==="chunkFlow"){if(D){U=e.events[N][1].end;break}D=!0}for(k(r),Y=M;Y<e.events.length;)e.events[Y][1].end={...U},Y++;us(e.events,N+1,0,e.events.slice(M)),e.events.length=Y}}function k($){let j=n.length;for(;j-- >$;){const te=n[j];e.containerState=te[1],te[0].exit.call(e,t)}n.length=$}function q(){s.write([null]),o=void 0,s=void 0,e.containerState._closeFlow=void 0}}function dF(t,e,n){return zt(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Tx(t){if(t===null||vr(t)||oF(t))return 1;if(aF(t))return 2}function H_(t,e,n){const r=[];let s=-1;for(;++s<t.length;){const o=t[s].resolveAll;o&&!r.includes(o)&&(e=o(e,n),r.push(o))}return e}const e1={name:"attention",resolveAll:fF,tokenize:pF};function fF(t,e){let n=-1,r,s,o,u,c,d,f,m;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;d=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const y={...t[r][1].end},b={...t[n][1].start};vx(y,-d),vx(b,d),u={type:d>1?"strongSequence":"emphasisSequence",start:y,end:{...t[r][1].end}},c={type:d>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:b},o={type:d>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},s={type:d>1?"strong":"emphasis",start:{...u.start},end:{...c.end}},t[r][1].end={...u.start},t[n][1].start={...c.end},f=[],t[r][1].end.offset-t[r][1].start.offset&&(f=li(f,[["enter",t[r][1],e],["exit",t[r][1],e]])),f=li(f,[["enter",s,e],["enter",u,e],["exit",u,e],["enter",o,e]]),f=li(f,H_(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),f=li(f,[["exit",o,e],["enter",c,e],["exit",c,e],["exit",s,e]]),t[n][1].end.offset-t[n][1].start.offset?(m=2,f=li(f,[["enter",t[n][1],e],["exit",t[n][1],e]])):m=0,us(t,r-1,n-r+3,f),n=r+f.length-m-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function pF(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=Tx(r);let o;return u;function u(d){return o=d,t.enter("attentionSequence"),c(d)}function c(d){if(d===o)return t.consume(d),c;const f=t.exit("attentionSequence"),m=Tx(d),y=!m||m===2&&s||n.includes(d),b=!s||s===2&&m||n.includes(r);return f._open=!!(o===42?y:y&&(s||!b)),f._close=!!(o===42?b:b&&(m||!y)),e(d)}}function vx(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const mF={name:"autolink",tokenize:gF};function gF(t,e,n){let r=0;return s;function s(T){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(T),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(T){return es(T)?(t.consume(T),u):T===64?n(T):f(T)}function u(T){return T===43||T===45||T===46||zr(T)?(r=1,c(T)):f(T)}function c(T){return T===58?(t.consume(T),r=0,d):(T===43||T===45||T===46||zr(T))&&r++<32?(t.consume(T),c):(r=0,f(T))}function d(T){return T===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(T),t.exit("autolinkMarker"),t.exit("autolink"),e):T===null||T===32||T===60||ZE(T)?n(T):(t.consume(T),d)}function f(T){return T===64?(t.consume(T),m):rF(T)?(t.consume(T),f):n(T)}function m(T){return zr(T)?y(T):n(T)}function y(T){return T===46?(t.consume(T),r=0,m):T===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(T),t.exit("autolinkMarker"),t.exit("autolink"),e):b(T)}function b(T){if((T===45||zr(T))&&r++<63){const w=T===45?b:y;return t.consume(T),w}return n(T)}}const tm={partial:!0,tokenize:yF};function yF(t,e,n){return r;function r(o){return wt(o)?zt(t,s,"linePrefix")(o):s(o)}function s(o){return o===null||Xe(o)?e(o):n(o)}}const $3={continuation:{tokenize:_F},exit:bF,name:"blockQuote",tokenize:EF};function EF(t,e,n){const r=this;return s;function s(u){if(u===62){const c=r.containerState;return c.open||(t.enter("blockQuote",{_container:!0}),c.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(u),t.exit("blockQuoteMarker"),o}return n(u)}function o(u){return wt(u)?(t.enter("blockQuotePrefixWhitespace"),t.consume(u),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(u))}}function _F(t,e,n){const r=this;return s;function s(u){return wt(u)?zt(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(u):o(u)}function o(u){return t.attempt($3,e,n)(u)}}function bF(t){t.exit("blockQuote")}const K3={name:"characterEscape",tokenize:TF};function TF(t,e,n){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),s}function s(o){return sF(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(o)}}const X3={name:"characterReference",tokenize:vF};function vF(t,e,n){const r=this;let s=0,o,u;return c;function c(y){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),d}function d(y){return y===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(y),t.exit("characterReferenceMarkerNumeric"),f):(t.enter("characterReferenceValue"),o=31,u=zr,m(y))}function f(y){return y===88||y===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(y),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,u=iF,m):(t.enter("characterReferenceValue"),o=7,u=JE,m(y))}function m(y){if(y===59&&s){const b=t.exit("characterReferenceValue");return u===zr&&!U_(r.sliceSerialize(b))?n(y):(t.enter("characterReferenceMarker"),t.consume(y),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return u(y)&&s++<o?(t.consume(y),m):n(y)}}const Ax={partial:!0,tokenize:SF},Sx={concrete:!0,name:"codeFenced",tokenize:AF};function AF(t,e,n){const r=this,s={partial:!0,tokenize:te};let o=0,u=0,c;return d;function d(Y){return f(Y)}function f(Y){const M=r.events[r.events.length-1];return o=M&&M[1].type==="linePrefix"?M[2].sliceSerialize(M[1],!0).length:0,c=Y,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),m(Y)}function m(Y){return Y===c?(u++,t.consume(Y),m):u<3?n(Y):(t.exit("codeFencedFenceSequence"),wt(Y)?zt(t,y,"whitespace")(Y):y(Y))}function y(Y){return Y===null||Xe(Y)?(t.exit("codeFencedFence"),r.interrupt?e(Y):t.check(Ax,I,j)(Y)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),b(Y))}function b(Y){return Y===null||Xe(Y)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),y(Y)):wt(Y)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),zt(t,T,"whitespace")(Y)):Y===96&&Y===c?n(Y):(t.consume(Y),b)}function T(Y){return Y===null||Xe(Y)?y(Y):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),w(Y))}function w(Y){return Y===null||Xe(Y)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),y(Y)):Y===96&&Y===c?n(Y):(t.consume(Y),w)}function I(Y){return t.attempt(s,j,L)(Y)}function L(Y){return t.enter("lineEnding"),t.consume(Y),t.exit("lineEnding"),k}function k(Y){return o>0&&wt(Y)?zt(t,q,"linePrefix",o+1)(Y):q(Y)}function q(Y){return Y===null||Xe(Y)?t.check(Ax,I,j)(Y):(t.enter("codeFlowValue"),$(Y))}function $(Y){return Y===null||Xe(Y)?(t.exit("codeFlowValue"),q(Y)):(t.consume(Y),$)}function j(Y){return t.exit("codeFenced"),e(Y)}function te(Y,M,N){let D=0;return U;function U(K){return Y.enter("lineEnding"),Y.consume(K),Y.exit("lineEnding"),B}function B(K){return Y.enter("codeFencedFence"),wt(K)?zt(Y,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):V(K)}function V(K){return K===c?(Y.enter("codeFencedFenceSequence"),C(K)):N(K)}function C(K){return K===c?(D++,Y.consume(K),C):D>=u?(Y.exit("codeFencedFenceSequence"),wt(K)?zt(Y,O,"whitespace")(K):O(K)):N(K)}function O(K){return K===null||Xe(K)?(Y.exit("codeFencedFence"),M(K)):N(K)}}}function SF(t,e,n){const r=this;return s;function s(u){return u===null?n(u):(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),o)}function o(u){return r.parser.lazy[r.now().line]?n(u):e(u)}}const qy={name:"codeIndented",tokenize:wF},xF={partial:!0,tokenize:CF};function wF(t,e,n){const r=this;return s;function s(f){return t.enter("codeIndented"),zt(t,o,"linePrefix",5)(f)}function o(f){const m=r.events[r.events.length-1];return m&&m[1].type==="linePrefix"&&m[2].sliceSerialize(m[1],!0).length>=4?u(f):n(f)}function u(f){return f===null?d(f):Xe(f)?t.attempt(xF,u,d)(f):(t.enter("codeFlowValue"),c(f))}function c(f){return f===null||Xe(f)?(t.exit("codeFlowValue"),u(f)):(t.consume(f),c)}function d(f){return t.exit("codeIndented"),e(f)}}function CF(t,e,n){const r=this;return s;function s(u){return r.parser.lazy[r.now().line]?n(u):Xe(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),s):zt(t,o,"linePrefix",5)(u)}function o(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(u):Xe(u)?s(u):n(u)}}const IF={name:"codeText",previous:RF,resolve:NF,tokenize:kF};function NF(t){let e=t.length-4,n=3,r,s;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)s===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(s=r):(r===e||t[r][1].type==="lineEnding")&&(t[s][1].type="codeTextData",r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return t}function RF(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function kF(t,e,n){let r=0,s,o;return u;function u(y){return t.enter("codeText"),t.enter("codeTextSequence"),c(y)}function c(y){return y===96?(t.consume(y),r++,c):(t.exit("codeTextSequence"),d(y))}function d(y){return y===null?n(y):y===32?(t.enter("space"),t.consume(y),t.exit("space"),d):y===96?(o=t.enter("codeTextSequence"),s=0,m(y)):Xe(y)?(t.enter("lineEnding"),t.consume(y),t.exit("lineEnding"),d):(t.enter("codeTextData"),f(y))}function f(y){return y===null||y===32||y===96||Xe(y)?(t.exit("codeTextData"),d(y)):(t.consume(y),f)}function m(y){return y===96?(t.consume(y),s++,m):s===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(y)):(o.type="codeTextData",f(y))}}class DF{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const s=n||0;this.setCursor(Math.trunc(e));const o=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&lh(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),lh(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),lh(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);lh(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);lh(this.left,n.reverse())}}}function lh(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function Q3(t){const e={};let n=-1,r,s,o,u,c,d,f;const m=new DF(t);for(;++n<m.length;){for(;n in e;)n=e[n];if(r=m.get(n),n&&r[1].type==="chunkFlow"&&m.get(n-1)[1].type==="listItemPrefix"&&(d=r[1]._tokenizer.events,o=0,o<d.length&&d[o][1].type==="lineEndingBlank"&&(o+=2),o<d.length&&d[o][1].type==="content"))for(;++o<d.length&&d[o][1].type!=="content";)d[o][1].type==="chunkText"&&(d[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,OF(m,n)),n=e[n],f=!0);else if(r[1]._container){for(o=n,s=void 0;o--;)if(u=m.get(o),u[1].type==="lineEnding"||u[1].type==="lineEndingBlank")u[0]==="enter"&&(s&&(m.get(s)[1].type="lineEndingBlank"),u[1].type="lineEnding",s=o);else if(!(u[1].type==="linePrefix"||u[1].type==="listItemIndent"))break;s&&(r[1].end={...m.get(s)[1].start},c=m.slice(s,n),c.unshift(r),m.splice(s,n-s+1,c))}}return us(t,0,Number.POSITIVE_INFINITY,m.slice(0)),!f}function OF(t,e){const n=t.get(e)[1],r=t.get(e)[2];let s=e-1;const o=[];let u=n._tokenizer;u||(u=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(u._contentTypeTextTrailing=!0));const c=u.events,d=[],f={};let m,y,b=-1,T=n,w=0,I=0;const L=[I];for(;T;){for(;t.get(++s)[1]!==T;);o.push(s),T._tokenizer||(m=r.sliceStream(T),T.next||m.push(null),y&&u.defineSkip(T.start),T._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=!0),u.write(m),T._isInFirstContentOfListItem&&(u._gfmTasklistFirstContentOfListItem=void 0)),y=T,T=T.next}for(T=n;++b<c.length;)c[b][0]==="exit"&&c[b-1][0]==="enter"&&c[b][1].type===c[b-1][1].type&&c[b][1].start.line!==c[b][1].end.line&&(I=b+1,L.push(I),T._tokenizer=void 0,T.previous=void 0,T=T.next);for(u.events=[],T?(T._tokenizer=void 0,T.previous=void 0):L.pop(),b=L.length;b--;){const k=c.slice(L[b],L[b+1]),q=o.pop();d.push([q,q+k.length-1]),t.splice(q,2,k)}for(d.reverse(),b=-1;++b<d.length;)f[w+d[b][0]]=w+d[b][1],w+=d[b][1]-d[b][0]-1;return f}const LF={resolve:MF,tokenize:BF},PF={partial:!0,tokenize:UF};function MF(t){return Q3(t),t}function BF(t,e){let n;return r;function r(c){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),s(c)}function s(c){return c===null?o(c):Xe(c)?t.check(PF,u,o)(c):(t.consume(c),s)}function o(c){return t.exit("chunkContent"),t.exit("content"),e(c)}function u(c){return t.consume(c),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function UF(t,e,n){const r=this;return s;function s(u){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),zt(t,o,"linePrefix")}function o(u){if(u===null||Xe(u))return n(u);const c=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?e(u):t.interrupt(r.parser.constructs.flow,n,e)(u)}}function W3(t,e,n,r,s,o,u,c,d){const f=d||Number.POSITIVE_INFINITY;let m=0;return y;function y(k){return k===60?(t.enter(r),t.enter(s),t.enter(o),t.consume(k),t.exit(o),b):k===null||k===32||k===41||ZE(k)?n(k):(t.enter(r),t.enter(u),t.enter(c),t.enter("chunkString",{contentType:"string"}),I(k))}function b(k){return k===62?(t.enter(o),t.consume(k),t.exit(o),t.exit(s),t.exit(r),e):(t.enter(c),t.enter("chunkString",{contentType:"string"}),T(k))}function T(k){return k===62?(t.exit("chunkString"),t.exit(c),b(k)):k===null||k===60||Xe(k)?n(k):(t.consume(k),k===92?w:T)}function w(k){return k===60||k===62||k===92?(t.consume(k),T):T(k)}function I(k){return!m&&(k===null||k===41||vr(k))?(t.exit("chunkString"),t.exit(c),t.exit(u),t.exit(r),e(k)):m<f&&k===40?(t.consume(k),m++,I):k===41?(t.consume(k),m--,I):k===null||k===32||k===40||ZE(k)?n(k):(t.consume(k),k===92?L:I)}function L(k){return k===40||k===41||k===92?(t.consume(k),I):I(k)}}function Z3(t,e,n,r,s,o){const u=this;let c=0,d;return f;function f(T){return t.enter(r),t.enter(s),t.consume(T),t.exit(s),t.enter(o),m}function m(T){return c>999||T===null||T===91||T===93&&!d||T===94&&!c&&"_hiddenFootnoteSupport"in u.parser.constructs?n(T):T===93?(t.exit(o),t.enter(s),t.consume(T),t.exit(s),t.exit(r),e):Xe(T)?(t.enter("lineEnding"),t.consume(T),t.exit("lineEnding"),m):(t.enter("chunkString",{contentType:"string"}),y(T))}function y(T){return T===null||T===91||T===93||Xe(T)||c++>999?(t.exit("chunkString"),m(T)):(t.consume(T),d||(d=!wt(T)),T===92?b:y)}function b(T){return T===91||T===92||T===93?(t.consume(T),c++,y):y(T)}}function J3(t,e,n,r,s,o){let u;return c;function c(b){return b===34||b===39||b===40?(t.enter(r),t.enter(s),t.consume(b),t.exit(s),u=b===40?41:b,d):n(b)}function d(b){return b===u?(t.enter(s),t.consume(b),t.exit(s),t.exit(r),e):(t.enter(o),f(b))}function f(b){return b===u?(t.exit(o),d(u)):b===null?n(b):Xe(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),zt(t,f,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),m(b))}function m(b){return b===u||b===null||Xe(b)?(t.exit("chunkString"),f(b)):(t.consume(b),b===92?y:m)}function y(b){return b===u||b===92?(t.consume(b),m):m(b)}}function kh(t,e){let n;return r;function r(s){return Xe(s)?(t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),n=!0,r):wt(s)?zt(t,r,n?"linePrefix":"lineSuffix")(s):e(s)}}const HF={name:"definition",tokenize:zF},VF={partial:!0,tokenize:FF};function zF(t,e,n){const r=this;let s;return o;function o(T){return t.enter("definition"),u(T)}function u(T){return Z3.call(r,t,c,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(T)}function c(T){return s=Sl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),T===58?(t.enter("definitionMarker"),t.consume(T),t.exit("definitionMarker"),d):n(T)}function d(T){return vr(T)?kh(t,f)(T):f(T)}function f(T){return W3(t,m,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(T)}function m(T){return t.attempt(VF,y,y)(T)}function y(T){return wt(T)?zt(t,b,"whitespace")(T):b(T)}function b(T){return T===null||Xe(T)?(t.exit("definition"),r.parser.defined.push(s),e(T)):n(T)}}function FF(t,e,n){return r;function r(c){return vr(c)?kh(t,s)(c):n(c)}function s(c){return J3(t,o,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(c)}function o(c){return wt(c)?zt(t,u,"whitespace")(c):u(c)}function u(c){return c===null||Xe(c)?e(c):n(c)}}const jF={name:"hardBreakEscape",tokenize:qF};function qF(t,e,n){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),s}function s(o){return Xe(o)?(t.exit("hardBreakEscape"),e(o)):n(o)}}const YF={name:"headingAtx",resolve:GF,tokenize:$F};function GF(t,e){let n=t.length-2,r=3,s,o;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},o={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},us(t,r,n-r+1,[["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e]])),t}function $F(t,e,n){let r=0;return s;function s(m){return t.enter("atxHeading"),o(m)}function o(m){return t.enter("atxHeadingSequence"),u(m)}function u(m){return m===35&&r++<6?(t.consume(m),u):m===null||vr(m)?(t.exit("atxHeadingSequence"),c(m)):n(m)}function c(m){return m===35?(t.enter("atxHeadingSequence"),d(m)):m===null||Xe(m)?(t.exit("atxHeading"),e(m)):wt(m)?zt(t,c,"whitespace")(m):(t.enter("atxHeadingText"),f(m))}function d(m){return m===35?(t.consume(m),d):(t.exit("atxHeadingSequence"),c(m))}function f(m){return m===null||m===35||vr(m)?(t.exit("atxHeadingText"),c(m)):(t.consume(m),f)}}const KF=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],xx=["pre","script","style","textarea"],XF={concrete:!0,name:"htmlFlow",resolveTo:ZF,tokenize:JF},QF={partial:!0,tokenize:tj},WF={partial:!0,tokenize:ej};function ZF(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function JF(t,e,n){const r=this;let s,o,u,c,d;return f;function f(R){return m(R)}function m(R){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(R),y}function y(R){return R===33?(t.consume(R),b):R===47?(t.consume(R),o=!0,I):R===63?(t.consume(R),s=3,r.interrupt?e:A):es(R)?(t.consume(R),u=String.fromCharCode(R),L):n(R)}function b(R){return R===45?(t.consume(R),s=2,T):R===91?(t.consume(R),s=5,c=0,w):es(R)?(t.consume(R),s=4,r.interrupt?e:A):n(R)}function T(R){return R===45?(t.consume(R),r.interrupt?e:A):n(R)}function w(R){const oe="CDATA[";return R===oe.charCodeAt(c++)?(t.consume(R),c===oe.length?r.interrupt?e:V:w):n(R)}function I(R){return es(R)?(t.consume(R),u=String.fromCharCode(R),L):n(R)}function L(R){if(R===null||R===47||R===62||vr(R)){const oe=R===47,Ee=u.toLowerCase();return!oe&&!o&&xx.includes(Ee)?(s=1,r.interrupt?e(R):V(R)):KF.includes(u.toLowerCase())?(s=6,oe?(t.consume(R),k):r.interrupt?e(R):V(R)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(R):o?q(R):$(R))}return R===45||zr(R)?(t.consume(R),u+=String.fromCharCode(R),L):n(R)}function k(R){return R===62?(t.consume(R),r.interrupt?e:V):n(R)}function q(R){return wt(R)?(t.consume(R),q):U(R)}function $(R){return R===47?(t.consume(R),U):R===58||R===95||es(R)?(t.consume(R),j):wt(R)?(t.consume(R),$):U(R)}function j(R){return R===45||R===46||R===58||R===95||zr(R)?(t.consume(R),j):te(R)}function te(R){return R===61?(t.consume(R),Y):wt(R)?(t.consume(R),te):$(R)}function Y(R){return R===null||R===60||R===61||R===62||R===96?n(R):R===34||R===39?(t.consume(R),d=R,M):wt(R)?(t.consume(R),Y):N(R)}function M(R){return R===d?(t.consume(R),d=null,D):R===null||Xe(R)?n(R):(t.consume(R),M)}function N(R){return R===null||R===34||R===39||R===47||R===60||R===61||R===62||R===96||vr(R)?te(R):(t.consume(R),N)}function D(R){return R===47||R===62||wt(R)?$(R):n(R)}function U(R){return R===62?(t.consume(R),B):n(R)}function B(R){return R===null||Xe(R)?V(R):wt(R)?(t.consume(R),B):n(R)}function V(R){return R===45&&s===2?(t.consume(R),z):R===60&&s===1?(t.consume(R),J):R===62&&s===4?(t.consume(R),ee):R===63&&s===3?(t.consume(R),A):R===93&&s===5?(t.consume(R),re):Xe(R)&&(s===6||s===7)?(t.exit("htmlFlowData"),t.check(QF,ae,C)(R)):R===null||Xe(R)?(t.exit("htmlFlowData"),C(R)):(t.consume(R),V)}function C(R){return t.check(WF,O,ae)(R)}function O(R){return t.enter("lineEnding"),t.consume(R),t.exit("lineEnding"),K}function K(R){return R===null||Xe(R)?C(R):(t.enter("htmlFlowData"),V(R))}function z(R){return R===45?(t.consume(R),A):V(R)}function J(R){return R===47?(t.consume(R),u="",se):V(R)}function se(R){if(R===62){const oe=u.toLowerCase();return xx.includes(oe)?(t.consume(R),ee):V(R)}return es(R)&&u.length<8?(t.consume(R),u+=String.fromCharCode(R),se):V(R)}function re(R){return R===93?(t.consume(R),A):V(R)}function A(R){return R===62?(t.consume(R),ee):R===45&&s===2?(t.consume(R),A):V(R)}function ee(R){return R===null||Xe(R)?(t.exit("htmlFlowData"),ae(R)):(t.consume(R),ee)}function ae(R){return t.exit("htmlFlow"),e(R)}}function ej(t,e,n){const r=this;return s;function s(u){return Xe(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),o):n(u)}function o(u){return r.parser.lazy[r.now().line]?n(u):e(u)}}function tj(t,e,n){return r;function r(s){return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),t.attempt(tm,e,n)}}const nj={name:"htmlText",tokenize:rj};function rj(t,e,n){const r=this;let s,o,u;return c;function c(A){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(A),d}function d(A){return A===33?(t.consume(A),f):A===47?(t.consume(A),te):A===63?(t.consume(A),$):es(A)?(t.consume(A),N):n(A)}function f(A){return A===45?(t.consume(A),m):A===91?(t.consume(A),o=0,w):es(A)?(t.consume(A),q):n(A)}function m(A){return A===45?(t.consume(A),T):n(A)}function y(A){return A===null?n(A):A===45?(t.consume(A),b):Xe(A)?(u=y,J(A)):(t.consume(A),y)}function b(A){return A===45?(t.consume(A),T):y(A)}function T(A){return A===62?z(A):A===45?b(A):y(A)}function w(A){const ee="CDATA[";return A===ee.charCodeAt(o++)?(t.consume(A),o===ee.length?I:w):n(A)}function I(A){return A===null?n(A):A===93?(t.consume(A),L):Xe(A)?(u=I,J(A)):(t.consume(A),I)}function L(A){return A===93?(t.consume(A),k):I(A)}function k(A){return A===62?z(A):A===93?(t.consume(A),k):I(A)}function q(A){return A===null||A===62?z(A):Xe(A)?(u=q,J(A)):(t.consume(A),q)}function $(A){return A===null?n(A):A===63?(t.consume(A),j):Xe(A)?(u=$,J(A)):(t.consume(A),$)}function j(A){return A===62?z(A):$(A)}function te(A){return es(A)?(t.consume(A),Y):n(A)}function Y(A){return A===45||zr(A)?(t.consume(A),Y):M(A)}function M(A){return Xe(A)?(u=M,J(A)):wt(A)?(t.consume(A),M):z(A)}function N(A){return A===45||zr(A)?(t.consume(A),N):A===47||A===62||vr(A)?D(A):n(A)}function D(A){return A===47?(t.consume(A),z):A===58||A===95||es(A)?(t.consume(A),U):Xe(A)?(u=D,J(A)):wt(A)?(t.consume(A),D):z(A)}function U(A){return A===45||A===46||A===58||A===95||zr(A)?(t.consume(A),U):B(A)}function B(A){return A===61?(t.consume(A),V):Xe(A)?(u=B,J(A)):wt(A)?(t.consume(A),B):D(A)}function V(A){return A===null||A===60||A===61||A===62||A===96?n(A):A===34||A===39?(t.consume(A),s=A,C):Xe(A)?(u=V,J(A)):wt(A)?(t.consume(A),V):(t.consume(A),O)}function C(A){return A===s?(t.consume(A),s=void 0,K):A===null?n(A):Xe(A)?(u=C,J(A)):(t.consume(A),C)}function O(A){return A===null||A===34||A===39||A===60||A===61||A===96?n(A):A===47||A===62||vr(A)?D(A):(t.consume(A),O)}function K(A){return A===47||A===62||vr(A)?D(A):n(A)}function z(A){return A===62?(t.consume(A),t.exit("htmlTextData"),t.exit("htmlText"),e):n(A)}function J(A){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),se}function se(A){return wt(A)?zt(t,re,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):re(A)}function re(A){return t.enter("htmlTextData"),u(A)}}const V_={name:"labelEnd",resolveAll:oj,resolveTo:uj,tokenize:lj},ij={tokenize:cj},sj={tokenize:hj},aj={tokenize:dj};function oj(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const s=r.type==="labelImage"?4:2;r.type="data",e+=s}}return t.length!==n.length&&us(t,0,t.length,n),t}function uj(t,e){let n=t.length,r=0,s,o,u,c;for(;n--;)if(s=t[n][1],o){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;t[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(u){if(t[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(o=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(u=n);const d={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},f={type:"label",start:{...t[o][1].start},end:{...t[u][1].end}},m={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[u-2][1].start}};return c=[["enter",d,e],["enter",f,e]],c=li(c,t.slice(o+1,o+r+3)),c=li(c,[["enter",m,e]]),c=li(c,H_(e.parser.constructs.insideSpan.null,t.slice(o+r+4,u-3),e)),c=li(c,[["exit",m,e],t[u-2],t[u-1],["exit",f,e]]),c=li(c,t.slice(u+1)),c=li(c,[["exit",d,e]]),us(t,o,t.length,c),t}function lj(t,e,n){const r=this;let s=r.events.length,o,u;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){o=r.events[s][1];break}return c;function c(b){return o?o._inactive?y(b):(u=r.parser.defined.includes(Sl(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(b),t.exit("labelMarker"),t.exit("labelEnd"),d):n(b)}function d(b){return b===40?t.attempt(ij,m,u?m:y)(b):b===91?t.attempt(sj,m,u?f:y)(b):u?m(b):y(b)}function f(b){return t.attempt(aj,m,y)(b)}function m(b){return e(b)}function y(b){return o._balanced=!0,n(b)}}function cj(t,e,n){return r;function r(y){return t.enter("resource"),t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),s}function s(y){return vr(y)?kh(t,o)(y):o(y)}function o(y){return y===41?m(y):W3(t,u,c,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(y)}function u(y){return vr(y)?kh(t,d)(y):m(y)}function c(y){return n(y)}function d(y){return y===34||y===39||y===40?J3(t,f,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(y):m(y)}function f(y){return vr(y)?kh(t,m)(y):m(y)}function m(y){return y===41?(t.enter("resourceMarker"),t.consume(y),t.exit("resourceMarker"),t.exit("resource"),e):n(y)}}function hj(t,e,n){const r=this;return s;function s(c){return Z3.call(r,t,o,u,"reference","referenceMarker","referenceString")(c)}function o(c){return r.parser.defined.includes(Sl(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(c):n(c)}function u(c){return n(c)}}function dj(t,e,n){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),s}function s(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),e):n(o)}}const fj={name:"labelStartImage",resolveAll:V_.resolveAll,tokenize:pj};function pj(t,e,n){const r=this;return s;function s(c){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(c),t.exit("labelImageMarker"),o}function o(c){return c===91?(t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelImage"),u):n(c)}function u(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):e(c)}}const mj={name:"labelStartLink",resolveAll:V_.resolveAll,tokenize:gj};function gj(t,e,n){const r=this;return s;function s(u){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(u),t.exit("labelMarker"),t.exit("labelLink"),o}function o(u){return u===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(u):e(u)}}const Yy={name:"lineEnding",tokenize:yj};function yj(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),zt(t,e,"linePrefix")}}const D0={name:"thematicBreak",tokenize:Ej};function Ej(t,e,n){let r=0,s;return o;function o(f){return t.enter("thematicBreak"),u(f)}function u(f){return s=f,c(f)}function c(f){return f===s?(t.enter("thematicBreakSequence"),d(f)):r>=3&&(f===null||Xe(f))?(t.exit("thematicBreak"),e(f)):n(f)}function d(f){return f===s?(t.consume(f),r++,d):(t.exit("thematicBreakSequence"),wt(f)?zt(t,c,"whitespace")(f):c(f))}}const gr={continuation:{tokenize:vj},exit:Sj,name:"list",tokenize:Tj},_j={partial:!0,tokenize:xj},bj={partial:!0,tokenize:Aj};function Tj(t,e,n){const r=this,s=r.events[r.events.length-1];let o=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,u=0;return c;function c(T){const w=r.containerState.type||(T===42||T===43||T===45?"listUnordered":"listOrdered");if(w==="listUnordered"?!r.containerState.marker||T===r.containerState.marker:JE(T)){if(r.containerState.type||(r.containerState.type=w,t.enter(w,{_container:!0})),w==="listUnordered")return t.enter("listItemPrefix"),T===42||T===45?t.check(D0,n,f)(T):f(T);if(!r.interrupt||T===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),d(T)}return n(T)}function d(T){return JE(T)&&++u<10?(t.consume(T),d):(!r.interrupt||u<2)&&(r.containerState.marker?T===r.containerState.marker:T===41||T===46)?(t.exit("listItemValue"),f(T)):n(T)}function f(T){return t.enter("listItemMarker"),t.consume(T),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||T,t.check(tm,r.interrupt?n:m,t.attempt(_j,b,y))}function m(T){return r.containerState.initialBlankLine=!0,o++,b(T)}function y(T){return wt(T)?(t.enter("listItemPrefixWhitespace"),t.consume(T),t.exit("listItemPrefixWhitespace"),b):n(T)}function b(T){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(T)}}function vj(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(tm,s,o);function s(c){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,zt(t,e,"listItemIndent",r.containerState.size+1)(c)}function o(c){return r.containerState.furtherBlankLines||!wt(c)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,u(c)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(bj,e,u)(c))}function u(c){return r.containerState._closeFlow=!0,r.interrupt=void 0,zt(t,t.attempt(gr,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c)}}function Aj(t,e,n){const r=this;return zt(t,s,"listItemIndent",r.containerState.size+1);function s(o){const u=r.events[r.events.length-1];return u&&u[1].type==="listItemIndent"&&u[2].sliceSerialize(u[1],!0).length===r.containerState.size?e(o):n(o)}}function Sj(t){t.exit(this.containerState.type)}function xj(t,e,n){const r=this;return zt(t,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(o){const u=r.events[r.events.length-1];return!wt(o)&&u&&u[1].type==="listItemPrefixWhitespace"?e(o):n(o)}}const wx={name:"setextUnderline",resolveTo:wj,tokenize:Cj};function wj(t,e){let n=t.length,r,s,o;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(s=n)}else t[n][1].type==="content"&&t.splice(n,1),!o&&t[n][1].type==="definition"&&(o=n);const u={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[s][1].type="setextHeadingText",o?(t.splice(s,0,["enter",u,e]),t.splice(o+1,0,["exit",t[r][1],e]),t[r][1].end={...t[o][1].end}):t[r][1]=u,t.push(["exit",u,e]),t}function Cj(t,e,n){const r=this;let s;return o;function o(f){let m=r.events.length,y;for(;m--;)if(r.events[m][1].type!=="lineEnding"&&r.events[m][1].type!=="linePrefix"&&r.events[m][1].type!=="content"){y=r.events[m][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||y)?(t.enter("setextHeadingLine"),s=f,u(f)):n(f)}function u(f){return t.enter("setextHeadingLineSequence"),c(f)}function c(f){return f===s?(t.consume(f),c):(t.exit("setextHeadingLineSequence"),wt(f)?zt(t,d,"lineSuffix")(f):d(f))}function d(f){return f===null||Xe(f)?(t.exit("setextHeadingLine"),e(f)):n(f)}}const Ij={tokenize:Nj};function Nj(t){const e=this,n=t.attempt(tm,r,t.attempt(this.parser.constructs.flowInitial,s,zt(t,t.attempt(this.parser.constructs.flow,s,t.attempt(LF,s)),"linePrefix")));return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function s(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const Rj={resolveAll:tR()},kj=eR("string"),Dj=eR("text");function eR(t){return{resolveAll:tR(t==="text"?Oj:void 0),tokenize:e};function e(n){const r=this,s=this.parser.constructs[t],o=n.attempt(s,u,c);return u;function u(m){return f(m)?o(m):c(m)}function c(m){if(m===null){n.consume(m);return}return n.enter("data"),n.consume(m),d}function d(m){return f(m)?(n.exit("data"),o(m)):(n.consume(m),d)}function f(m){if(m===null)return!0;const y=s[m];let b=-1;if(y)for(;++b<y.length;){const T=y[b];if(!T.previous||T.previous.call(r,r.previous))return!0}return!1}}}function tR(t){return e;function e(n,r){let s=-1,o;for(;++s<=n.length;)o===void 0?n[s]&&n[s][1].type==="data"&&(o=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==o+2&&(n[o][1].end=n[s-1][1].end,n.splice(o+2,s-o-2),s=o+2),o=void 0);return t?t(n,r):n}}function Oj(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],s=e.sliceStream(r);let o=s.length,u=-1,c=0,d;for(;o--;){const f=s[o];if(typeof f=="string"){for(u=f.length;f.charCodeAt(u-1)===32;)c++,u--;if(u)break;u=-1}else if(f===-2)d=!0,c++;else if(f!==-1){o++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(c=0),c){const f={type:n===t.length||d||c<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?u:r.start._bufferIndex+u,_index:r.start._index+o,line:r.end.line,column:r.end.column-c,offset:r.end.offset-c},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(t.splice(n,0,["enter",f,e],["exit",f,e]),n+=2)}n++}return t}const Lj={42:gr,43:gr,45:gr,48:gr,49:gr,50:gr,51:gr,52:gr,53:gr,54:gr,55:gr,56:gr,57:gr,62:$3},Pj={91:HF},Mj={[-2]:qy,[-1]:qy,32:qy},Bj={35:YF,42:D0,45:[wx,D0],60:XF,61:wx,95:D0,96:Sx,126:Sx},Uj={38:X3,92:K3},Hj={[-5]:Yy,[-4]:Yy,[-3]:Yy,33:fj,38:X3,42:e1,60:[mF,nj],91:mj,92:[jF,K3],93:V_,95:e1,96:IF},Vj={null:[e1,Rj]},zj={null:[42,95]},Fj={null:[]},jj=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:zj,contentInitial:Pj,disable:Fj,document:Lj,flow:Bj,flowInitial:Mj,insideSpan:Vj,string:Uj,text:Hj},Symbol.toStringTag,{value:"Module"}));function qj(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const s={},o=[];let u=[],c=[];const d={attempt:M(te),check:M(Y),consume:q,enter:$,exit:j,interrupt:M(Y,{interrupt:!0})},f={code:null,containerState:{},defineSkip:I,events:[],now:w,parser:t,previous:null,sliceSerialize:b,sliceStream:T,write:y};let m=e.tokenize.call(f,d);return e.resolveAll&&o.push(e),f;function y(B){return u=li(u,B),L(),u[u.length-1]!==null?[]:(N(e,0),f.events=H_(o,f.events,f),f.events)}function b(B,V){return Gj(T(B),V)}function T(B){return Yj(u,B)}function w(){const{_bufferIndex:B,_index:V,line:C,column:O,offset:K}=r;return{_bufferIndex:B,_index:V,line:C,column:O,offset:K}}function I(B){s[B.line]=B.column,U()}function L(){let B;for(;r._index<u.length;){const V=u[r._index];if(typeof V=="string")for(B=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===B&&r._bufferIndex<V.length;)k(V.charCodeAt(r._bufferIndex));else k(V)}}function k(B){m=m(B)}function q(B){Xe(B)?(r.line++,r.column=1,r.offset+=B===-3?2:1,U()):B!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===u[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=B}function $(B,V){const C=V||{};return C.type=B,C.start=w(),f.events.push(["enter",C,f]),c.push(C),C}function j(B){const V=c.pop();return V.end=w(),f.events.push(["exit",V,f]),V}function te(B,V){N(B,V.from)}function Y(B,V){V.restore()}function M(B,V){return C;function C(O,K,z){let J,se,re,A;return Array.isArray(O)?ae(O):"tokenize"in O?ae([O]):ee(O);function ee(me){return we;function we(Ce){const Le=Ce!==null&&me[Ce],Ve=Ce!==null&&me.null,ct=[...Array.isArray(Le)?Le:Le?[Le]:[],...Array.isArray(Ve)?Ve:Ve?[Ve]:[]];return ae(ct)(Ce)}}function ae(me){return J=me,se=0,me.length===0?z:R(me[se])}function R(me){return we;function we(Ce){return A=D(),re=me,me.partial||(f.currentConstruct=me),me.name&&f.parser.constructs.disable.null.includes(me.name)?Ee():me.tokenize.call(V?Object.assign(Object.create(f),V):f,d,oe,Ee)(Ce)}}function oe(me){return B(re,A),K}function Ee(me){return A.restore(),++se<J.length?R(J[se]):z}}}function N(B,V){B.resolveAll&&!o.includes(B)&&o.push(B),B.resolve&&us(f.events,V,f.events.length-V,B.resolve(f.events.slice(V),f)),B.resolveTo&&(f.events=B.resolveTo(f.events,f))}function D(){const B=w(),V=f.previous,C=f.currentConstruct,O=f.events.length,K=Array.from(c);return{from:O,restore:z};function z(){r=B,f.previous=V,f.currentConstruct=C,f.events.length=O,c=K,U()}}function U(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Yj(t,e){const n=e.start._index,r=e.start._bufferIndex,s=e.end._index,o=e.end._bufferIndex;let u;if(n===s)u=[t[n].slice(r,o)];else{if(u=t.slice(n,s),r>-1){const c=u[0];typeof c=="string"?u[0]=c.slice(r):u.shift()}o>0&&u.push(t[s].slice(0,o))}return u}function Gj(t,e){let n=-1;const r=[];let s;for(;++n<t.length;){const o=t[n];let u;if(typeof o=="string")u=o;else switch(o){case-5:{u="\r";break}case-4:{u=`
`;break}case-3:{u=`\r
`;break}case-2:{u=e?" ":"	";break}case-1:{if(!e&&s)continue;u=" ";break}default:u=String.fromCharCode(o)}s=o===-2,r.push(u)}return r.join("")}function $j(t){const r={constructs:eF([jj,...(t||{}).extensions||[]]),content:s(uF),defined:[],document:s(cF),flow:s(Ij),lazy:{},string:s(kj),text:s(Dj)};return r;function s(o){return u;function u(c){return qj(r,o,c)}}}function Kj(t){for(;!Q3(t););return t}const Cx=/[\0\t\n\r]/g;function Xj(){let t=1,e="",n=!0,r;return s;function s(o,u,c){const d=[];let f,m,y,b,T;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(u||void 0).decode(o)),y=0,e="",n&&(o.charCodeAt(0)===65279&&y++,n=void 0);y<o.length;){if(Cx.lastIndex=y,f=Cx.exec(o),b=f&&f.index!==void 0?f.index:o.length,T=o.charCodeAt(b),!f){e=o.slice(y);break}if(T===10&&y===b&&r)d.push(-3),r=void 0;else switch(r&&(d.push(-5),r=void 0),y<b&&(d.push(o.slice(y,b)),t+=b-y),T){case 0:{d.push(65533),t++;break}case 9:{for(m=Math.ceil(t/4)*4,d.push(-2);t++<m;)d.push(-1);break}case 10:{d.push(-4),t=1;break}default:r=!0,t=1}y=b+1}return c&&(r&&d.push(-5),e&&d.push(e),d.push(null)),d}}const Qj=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Wj(t){return t.replace(Qj,Zj)}function Zj(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const s=n.charCodeAt(1),o=s===120||s===88;return G3(n.slice(o?2:1),o?16:10)}return U_(n)||t}const nR={}.hasOwnProperty;function Jj(t,e,n){return typeof e!="string"&&(n=e,e=void 0),eq(n)(Kj($j(n).document().write(Xj()(t,e,!0))))}function eq(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Ft),autolinkProtocol:D,autolinkEmail:D,atxHeading:o(gt),blockQuote:o(Ve),characterEscape:D,characterReference:D,codeFenced:o(ct),codeFencedFenceInfo:u,codeFencedFenceMeta:u,codeIndented:o(ct,u),codeText:o(Tt,u),codeTextData:D,data:D,codeFlowValue:D,definition:o(Ze),definitionDestinationString:u,definitionLabelString:u,definitionTitleString:u,emphasis:o(mt),hardBreakEscape:o(Xt),hardBreakTrailing:o(Xt),htmlFlow:o(Qe,u),htmlFlowData:D,htmlText:o(Qe,u),htmlTextData:D,image:o(Oe),label:u,link:o(Ft),listItem:o(un),listItemValue:b,listOrdered:o(An,y),listUnordered:o(An),paragraph:o(sr),reference:R,referenceString:u,resourceDestinationString:u,resourceTitleString:u,setextHeading:o(gt),strong:o(Vn),thematicBreak:o(Sr)},exit:{atxHeading:d(),atxHeadingSequence:te,autolink:d(),autolinkEmail:Le,autolinkProtocol:Ce,blockQuote:d(),characterEscapeValue:U,characterReferenceMarkerHexadecimal:Ee,characterReferenceMarkerNumeric:Ee,characterReferenceValue:me,characterReference:we,codeFenced:d(L),codeFencedFence:I,codeFencedFenceInfo:T,codeFencedFenceMeta:w,codeFlowValue:U,codeIndented:d(k),codeText:d(K),codeTextData:U,data:U,definition:d(),definitionDestinationString:j,definitionLabelString:q,definitionTitleString:$,emphasis:d(),hardBreakEscape:d(V),hardBreakTrailing:d(V),htmlFlow:d(C),htmlFlowData:U,htmlText:d(O),htmlTextData:U,image:d(J),label:re,labelText:se,lineEnding:B,link:d(z),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:oe,resourceDestinationString:A,resourceTitleString:ee,resource:ae,setextHeading:d(N),setextHeadingLineSequence:M,setextHeadingText:Y,strong:d(),thematicBreak:d()}};rR(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(fe){let Te={type:"root",children:[]};const Be={stack:[Te],tokenStack:[],config:e,enter:c,exit:f,buffer:u,resume:m,data:n},ze=[];let at=-1;for(;++at<fe.length;)if(fe[at][1].type==="listOrdered"||fe[at][1].type==="listUnordered")if(fe[at][0]==="enter")ze.push(at);else{const vt=ze.pop();at=s(fe,vt,at)}for(at=-1;++at<fe.length;){const vt=e[fe[at][0]];nR.call(vt,fe[at][1].type)&&vt[fe[at][1].type].call(Object.assign({sliceSerialize:fe[at][2].sliceSerialize},Be),fe[at][1])}if(Be.tokenStack.length>0){const vt=Be.tokenStack[Be.tokenStack.length-1];(vt[1]||Ix).call(Be,void 0,vt[0])}for(Te.position={start:va(fe.length>0?fe[0][1].start:{line:1,column:1,offset:0}),end:va(fe.length>0?fe[fe.length-2][1].end:{line:1,column:1,offset:0})},at=-1;++at<e.transforms.length;)Te=e.transforms[at](Te)||Te;return Te}function s(fe,Te,Be){let ze=Te-1,at=-1,vt=!1,Mt,jt,ln,Gt;for(;++ze<=Be;){const St=fe[ze];switch(St[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{St[0]==="enter"?at++:at--,Gt=void 0;break}case"lineEndingBlank":{St[0]==="enter"&&(Mt&&!Gt&&!at&&!ln&&(ln=ze),Gt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Gt=void 0}if(!at&&St[0]==="enter"&&St[1].type==="listItemPrefix"||at===-1&&St[0]==="exit"&&(St[1].type==="listUnordered"||St[1].type==="listOrdered")){if(Mt){let en=ze;for(jt=void 0;en--;){const Sn=fe[en];if(Sn[1].type==="lineEnding"||Sn[1].type==="lineEndingBlank"){if(Sn[0]==="exit")continue;jt&&(fe[jt][1].type="lineEndingBlank",vt=!0),Sn[1].type="lineEnding",jt=en}else if(!(Sn[1].type==="linePrefix"||Sn[1].type==="blockQuotePrefix"||Sn[1].type==="blockQuotePrefixWhitespace"||Sn[1].type==="blockQuoteMarker"||Sn[1].type==="listItemIndent"))break}ln&&(!jt||ln<jt)&&(Mt._spread=!0),Mt.end=Object.assign({},jt?fe[jt][1].start:St[1].end),fe.splice(jt||ze,0,["exit",Mt,St[2]]),ze++,Be++}if(St[1].type==="listItemPrefix"){const en={type:"listItem",_spread:!1,start:Object.assign({},St[1].start),end:void 0};Mt=en,fe.splice(ze,0,["enter",en,St[2]]),ze++,Be++,ln=void 0,Gt=!0}}}return fe[Te][1]._spread=vt,Be}function o(fe,Te){return Be;function Be(ze){c.call(this,fe(ze),ze),Te&&Te.call(this,ze)}}function u(){this.stack.push({type:"fragment",children:[]})}function c(fe,Te,Be){this.stack[this.stack.length-1].children.push(fe),this.stack.push(fe),this.tokenStack.push([Te,Be||void 0]),fe.position={start:va(Te.start),end:void 0}}function d(fe){return Te;function Te(Be){fe&&fe.call(this,Be),f.call(this,Be)}}function f(fe,Te){const Be=this.stack.pop(),ze=this.tokenStack.pop();if(ze)ze[0].type!==fe.type&&(Te?Te.call(this,fe,ze[0]):(ze[1]||Ix).call(this,fe,ze[0]));else throw new Error("Cannot close `"+fe.type+"` ("+Rh({start:fe.start,end:fe.end})+"): its not open");Be.position.end=va(fe.end)}function m(){return Zz(this.stack.pop())}function y(){this.data.expectingFirstListItemValue=!0}function b(fe){if(this.data.expectingFirstListItemValue){const Te=this.stack[this.stack.length-2];Te.start=Number.parseInt(this.sliceSerialize(fe),10),this.data.expectingFirstListItemValue=void 0}}function T(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.lang=fe}function w(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.meta=fe}function I(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function L(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.value=fe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function k(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.value=fe.replace(/(\r?\n|\r)$/g,"")}function q(fe){const Te=this.resume(),Be=this.stack[this.stack.length-1];Be.label=Te,Be.identifier=Sl(this.sliceSerialize(fe)).toLowerCase()}function $(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.title=fe}function j(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.url=fe}function te(fe){const Te=this.stack[this.stack.length-1];if(!Te.depth){const Be=this.sliceSerialize(fe).length;Te.depth=Be}}function Y(){this.data.setextHeadingSlurpLineEnding=!0}function M(fe){const Te=this.stack[this.stack.length-1];Te.depth=this.sliceSerialize(fe).codePointAt(0)===61?1:2}function N(){this.data.setextHeadingSlurpLineEnding=void 0}function D(fe){const Be=this.stack[this.stack.length-1].children;let ze=Be[Be.length-1];(!ze||ze.type!=="text")&&(ze=zn(),ze.position={start:va(fe.start),end:void 0},Be.push(ze)),this.stack.push(ze)}function U(fe){const Te=this.stack.pop();Te.value+=this.sliceSerialize(fe),Te.position.end=va(fe.end)}function B(fe){const Te=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Be=Te.children[Te.children.length-1];Be.position.end=va(fe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Te.type)&&(D.call(this,fe),U.call(this,fe))}function V(){this.data.atHardBreak=!0}function C(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.value=fe}function O(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.value=fe}function K(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.value=fe}function z(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=Te,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function J(){const fe=this.stack[this.stack.length-1];if(this.data.inReference){const Te=this.data.referenceType||"shortcut";fe.type+="Reference",fe.referenceType=Te,delete fe.url,delete fe.title}else delete fe.identifier,delete fe.label;this.data.referenceType=void 0}function se(fe){const Te=this.sliceSerialize(fe),Be=this.stack[this.stack.length-2];Be.label=Wj(Te),Be.identifier=Sl(Te).toLowerCase()}function re(){const fe=this.stack[this.stack.length-1],Te=this.resume(),Be=this.stack[this.stack.length-1];if(this.data.inReference=!0,Be.type==="link"){const ze=fe.children;Be.children=ze}else Be.alt=Te}function A(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.url=fe}function ee(){const fe=this.resume(),Te=this.stack[this.stack.length-1];Te.title=fe}function ae(){this.data.inReference=void 0}function R(){this.data.referenceType="collapsed"}function oe(fe){const Te=this.resume(),Be=this.stack[this.stack.length-1];Be.label=Te,Be.identifier=Sl(this.sliceSerialize(fe)).toLowerCase(),this.data.referenceType="full"}function Ee(fe){this.data.characterReferenceType=fe.type}function me(fe){const Te=this.sliceSerialize(fe),Be=this.data.characterReferenceType;let ze;Be?(ze=G3(Te,Be==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ze=U_(Te);const at=this.stack[this.stack.length-1];at.value+=ze}function we(fe){const Te=this.stack.pop();Te.position.end=va(fe.end)}function Ce(fe){U.call(this,fe);const Te=this.stack[this.stack.length-1];Te.url=this.sliceSerialize(fe)}function Le(fe){U.call(this,fe);const Te=this.stack[this.stack.length-1];Te.url="mailto:"+this.sliceSerialize(fe)}function Ve(){return{type:"blockquote",children:[]}}function ct(){return{type:"code",lang:null,meta:null,value:""}}function Tt(){return{type:"inlineCode",value:""}}function Ze(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function mt(){return{type:"emphasis",children:[]}}function gt(){return{type:"heading",depth:0,children:[]}}function Xt(){return{type:"break"}}function Qe(){return{type:"html",value:""}}function Oe(){return{type:"image",title:null,url:"",alt:null}}function Ft(){return{type:"link",title:null,url:"",children:[]}}function An(fe){return{type:"list",ordered:fe.type==="listOrdered",start:null,spread:fe._spread,children:[]}}function un(fe){return{type:"listItem",spread:fe._spread,checked:null,children:[]}}function sr(){return{type:"paragraph",children:[]}}function Vn(){return{type:"strong",children:[]}}function zn(){return{type:"text",value:""}}function Sr(){return{type:"thematicBreak"}}}function va(t){return{line:t.line,column:t.column,offset:t.offset}}function rR(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?rR(t,r):tq(t,r)}}function tq(t,e){let n;for(n in e)if(nR.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function Ix(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Rh({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Rh({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Rh({start:e.start,end:e.end})+") is still open")}function nq(t){const e=this;e.parser=n;function n(r){return Jj(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function rq(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function iq(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function sq(t,e){const n=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function aq(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function oq(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function uq(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),s=Ql(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let u,c=t.footnoteCounts.get(r);c===void 0?(c=0,t.footnoteOrder.push(r),u=t.footnoteOrder.length):u=o+1,c+=1,t.footnoteCounts.set(r,c);const d={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(c>1?"-"+c:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(u)}]};t.patch(e,d);const f={type:"element",tagName:"sup",properties:{},children:[d]};return t.patch(e,f),t.applyData(e,f)}function lq(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function cq(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function iR(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const s=t.all(e),o=s[0];o&&o.type==="text"?o.value="["+o.value:s.unshift({type:"text",value:"["});const u=s[s.length-1];return u&&u.type==="text"?u.value+=r:s.push({type:"text",value:r}),s}function hq(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return iR(t,e);const s={src:Ql(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"img",properties:s,children:[]};return t.patch(e,o),t.applyData(e,o)}function dq(t,e){const n={src:Ql(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function fq(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function pq(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return iR(t,e);const s={href:Ql(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const o={type:"element",tagName:"a",properties:s,children:t.all(e)};return t.patch(e,o),t.applyData(e,o)}function mq(t,e){const n={href:Ql(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function gq(t,e,n){const r=t.all(e),s=n?yq(n):sR(e),o={},u=[];if(typeof e.checked=="boolean"){const m=r[0];let y;m&&m.type==="element"&&m.tagName==="p"?y=m:(y={type:"element",tagName:"p",properties:{},children:[]},r.unshift(y)),y.children.length>0&&y.children.unshift({type:"text",value:" "}),y.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let c=-1;for(;++c<r.length;){const m=r[c];(s||c!==0||m.type!=="element"||m.tagName!=="p")&&u.push({type:"text",value:`
`}),m.type==="element"&&m.tagName==="p"&&!s?u.push(...m.children):u.push(m)}const d=r[r.length-1];d&&(s||d.type!=="element"||d.tagName!=="p")&&u.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:o,children:u};return t.patch(e,f),t.applyData(e,f)}function yq(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=sR(n[r])}return e}function sR(t){const e=t.spread;return e??t.children.length>1}function Eq(t,e){const n={},r=t.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++s<r.length;){const u=r[s];if(u.type==="element"&&u.tagName==="li"&&u.properties&&Array.isArray(u.properties.className)&&u.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,o),t.applyData(e,o)}function _q(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function bq(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Tq(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function vq(t,e){const n=t.all(e),r=n.shift(),s=[];if(r){const u={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],u),s.push(u)}if(n.length>0){const u={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},c=hs(e.children[1]),d=em(e.children[e.children.length-1]);c&&d&&(u.position={start:c,end:d}),s.push(u)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(s,!0)};return t.patch(e,o),t.applyData(e,o)}function Aq(t,e,n){const r=n?n.children:void 0,o=(r?r.indexOf(e):1)===0?"th":"td",u=n&&n.type==="table"?n.align:void 0,c=u?u.length:e.children.length;let d=-1;const f=[];for(;++d<c;){const y=e.children[d],b={},T=u?u[d]:void 0;T&&(b.align=T);let w={type:"element",tagName:o,properties:b,children:[]};y&&(w.children=t.all(y),t.patch(y,w),w=t.applyData(y,w)),f.push(w)}const m={type:"element",tagName:"tr",properties:{},children:t.wrap(f,!0)};return t.patch(e,m),t.applyData(e,m)}function Sq(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const Nx=9,Rx=32;function xq(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),s=0;const o=[];for(;r;)o.push(kx(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(e);return o.push(kx(e.slice(s),s>0,!1)),o.join("")}function kx(t,e,n){let r=0,s=t.length;if(e){let o=t.codePointAt(r);for(;o===Nx||o===Rx;)r++,o=t.codePointAt(r)}if(n){let o=t.codePointAt(s-1);for(;o===Nx||o===Rx;)s--,o=t.codePointAt(s-1)}return s>r?t.slice(r,s):""}function wq(t,e){const n={type:"text",value:xq(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Cq(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Iq={blockquote:rq,break:iq,code:sq,delete:aq,emphasis:oq,footnoteReference:uq,heading:lq,html:cq,imageReference:hq,image:dq,inlineCode:fq,linkReference:pq,link:mq,listItem:gq,list:Eq,paragraph:_q,root:bq,strong:Tq,table:vq,tableCell:Sq,tableRow:Aq,text:wq,thematicBreak:Cq,toml:f0,yaml:f0,definition:f0,footnoteDefinition:f0};function f0(){}const aR=-1,nm=0,Dh=1,mp=2,z_=3,F_=4,j_=5,q_=6,oR=7,uR=8,Dx=typeof self=="object"?self:globalThis,Nq=(t,e)=>{const n=(s,o)=>(t.set(o,s),s),r=s=>{if(t.has(s))return t.get(s);const[o,u]=e[s];switch(o){case nm:case aR:return n(u,s);case Dh:{const c=n([],s);for(const d of u)c.push(r(d));return c}case mp:{const c=n({},s);for(const[d,f]of u)c[r(d)]=r(f);return c}case z_:return n(new Date(u),s);case F_:{const{source:c,flags:d}=u;return n(new RegExp(c,d),s)}case j_:{const c=n(new Map,s);for(const[d,f]of u)c.set(r(d),r(f));return c}case q_:{const c=n(new Set,s);for(const d of u)c.add(r(d));return c}case oR:{const{name:c,message:d}=u;return n(new Dx[c](d),s)}case uR:return n(BigInt(u),s);case"BigInt":return n(Object(BigInt(u)),s);case"ArrayBuffer":return n(new Uint8Array(u).buffer,u);case"DataView":{const{buffer:c}=new Uint8Array(u);return n(new DataView(c),u)}}return n(new Dx[o](u),s)};return r},Ox=t=>Nq(new Map,t)(0),rl="",{toString:Rq}={},{keys:kq}=Object,ch=t=>{const e=typeof t;if(e!=="object"||!t)return[nm,e];const n=Rq.call(t).slice(8,-1);switch(n){case"Array":return[Dh,rl];case"Object":return[mp,rl];case"Date":return[z_,rl];case"RegExp":return[F_,rl];case"Map":return[j_,rl];case"Set":return[q_,rl];case"DataView":return[Dh,n]}return n.includes("Array")?[Dh,n]:n.includes("Error")?[oR,n]:[mp,n]},p0=([t,e])=>t===nm&&(e==="function"||e==="symbol"),Dq=(t,e,n,r)=>{const s=(u,c)=>{const d=r.push(u)-1;return n.set(c,d),d},o=u=>{if(n.has(u))return n.get(u);let[c,d]=ch(u);switch(c){case nm:{let m=u;switch(d){case"bigint":c=uR,m=u.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+d);m=null;break;case"undefined":return s([aR],u)}return s([c,m],u)}case Dh:{if(d){let b=u;return d==="DataView"?b=new Uint8Array(u.buffer):d==="ArrayBuffer"&&(b=new Uint8Array(u)),s([d,[...b]],u)}const m=[],y=s([c,m],u);for(const b of u)m.push(o(b));return y}case mp:{if(d)switch(d){case"BigInt":return s([d,u.toString()],u);case"Boolean":case"Number":case"String":return s([d,u.valueOf()],u)}if(e&&"toJSON"in u)return o(u.toJSON());const m=[],y=s([c,m],u);for(const b of kq(u))(t||!p0(ch(u[b])))&&m.push([o(b),o(u[b])]);return y}case z_:return s([c,u.toISOString()],u);case F_:{const{source:m,flags:y}=u;return s([c,{source:m,flags:y}],u)}case j_:{const m=[],y=s([c,m],u);for(const[b,T]of u)(t||!(p0(ch(b))||p0(ch(T))))&&m.push([o(b),o(T)]);return y}case q_:{const m=[],y=s([c,m],u);for(const b of u)(t||!p0(ch(b)))&&m.push(o(b));return y}}const{message:f}=u;return s([c,{name:d,message:f}],u)};return o},Lx=(t,{json:e,lossy:n}={})=>{const r=[];return Dq(!(e||n),!!e,new Map,r)(t),r},Ul=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Ox(Lx(t,e)):structuredClone(t):(t,e)=>Ox(Lx(t,e));function Oq(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function Lq(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function Pq(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||Oq,r=t.options.footnoteBackLabel||Lq,s=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",u=t.options.footnoteLabelProperties||{className:["sr-only"]},c=[];let d=-1;for(;++d<t.footnoteOrder.length;){const f=t.footnoteById.get(t.footnoteOrder[d]);if(!f)continue;const m=t.all(f),y=String(f.identifier).toUpperCase(),b=Ql(y.toLowerCase());let T=0;const w=[],I=t.footnoteCounts.get(y);for(;I!==void 0&&++T<=I;){w.length>0&&w.push({type:"text",value:" "});let q=typeof n=="string"?n:n(d,T);typeof q=="string"&&(q={type:"text",value:q}),w.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+b+(T>1?"-"+T:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(d,T),className:["data-footnote-backref"]},children:Array.isArray(q)?q:[q]})}const L=m[m.length-1];if(L&&L.type==="element"&&L.tagName==="p"){const q=L.children[L.children.length-1];q&&q.type==="text"?q.value+=" ":L.children.push({type:"text",value:" "}),L.children.push(...w)}else m.push(...w);const k={type:"element",tagName:"li",properties:{id:e+"fn-"+b},children:t.wrap(m,!0)};t.patch(f,k),c.push(k)}if(c.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...Ul(u),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(c,!0)},{type:"text",value:`
`}]}}const lR=function(t){if(t==null)return Hq;if(typeof t=="function")return rm(t);if(typeof t=="object")return Array.isArray(t)?Mq(t):Bq(t);if(typeof t=="string")return Uq(t);throw new Error("Expected function, string, or object as test")};function Mq(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=lR(t[n]);return rm(r);function r(...s){let o=-1;for(;++o<e.length;)if(e[o].apply(this,s))return!0;return!1}}function Bq(t){const e=t;return rm(n);function n(r){const s=r;let o;for(o in t)if(s[o]!==e[o])return!1;return!0}}function Uq(t){return rm(e);function e(n){return n&&n.type===t}}function rm(t){return e;function e(n,r,s){return!!(Vq(n)&&t.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function Hq(){return!0}function Vq(t){return t!==null&&typeof t=="object"&&"type"in t}const cR=[],zq=!0,Px=!1,Fq="skip";function jq(t,e,n,r){let s;typeof e=="function"&&typeof n!="function"?(r=n,n=e):s=e;const o=lR(s),u=r?-1:1;c(t,void 0,[])();function c(d,f,m){const y=d&&typeof d=="object"?d:{};if(typeof y.type=="string"){const T=typeof y.tagName=="string"?y.tagName:typeof y.name=="string"?y.name:void 0;Object.defineProperty(b,"name",{value:"node ("+(d.type+(T?"<"+T+">":""))+")"})}return b;function b(){let T=cR,w,I,L;if((!e||o(d,f,m[m.length-1]||void 0))&&(T=qq(n(d,m)),T[0]===Px))return T;if("children"in d&&d.children){const k=d;if(k.children&&T[0]!==Fq)for(I=(r?k.children.length:-1)+u,L=m.concat(k);I>-1&&I<k.children.length;){const q=k.children[I];if(w=c(q,I,L)(),w[0]===Px)return w;I=typeof w[1]=="number"?w[1]:I+u}}return T}}}function qq(t){return Array.isArray(t)?t:typeof t=="number"?[zq,t]:t==null?cR:[t]}function Y_(t,e,n,r){let s,o,u;typeof e=="function"&&typeof n!="function"?(o=void 0,u=e,s=n):(o=e,u=n,s=r),jq(t,o,c,s);function c(d,f){const m=f[f.length-1],y=m?m.children.indexOf(d):void 0;return u(d,y,m)}}const t1={}.hasOwnProperty,Yq={};function Gq(t,e){const n=e||Yq,r=new Map,s=new Map,o=new Map,u={...Iq,...n.handlers},c={all:f,applyData:Kq,definitionById:r,footnoteById:s,footnoteCounts:o,footnoteOrder:[],handlers:u,one:d,options:n,patch:$q,wrap:Qq};return Y_(t,function(m){if(m.type==="definition"||m.type==="footnoteDefinition"){const y=m.type==="definition"?r:s,b=String(m.identifier).toUpperCase();y.has(b)||y.set(b,m)}}),c;function d(m,y){const b=m.type,T=c.handlers[b];if(t1.call(c.handlers,b)&&T)return T(c,m,y);if(c.options.passThrough&&c.options.passThrough.includes(b)){if("children"in m){const{children:I,...L}=m,k=Ul(L);return k.children=c.all(m),k}return Ul(m)}return(c.options.unknownHandler||Xq)(c,m,y)}function f(m){const y=[];if("children"in m){const b=m.children;let T=-1;for(;++T<b.length;){const w=c.one(b[T],m);if(w){if(T&&b[T-1].type==="break"&&(!Array.isArray(w)&&w.type==="text"&&(w.value=Mx(w.value)),!Array.isArray(w)&&w.type==="element")){const I=w.children[0];I&&I.type==="text"&&(I.value=Mx(I.value))}Array.isArray(w)?y.push(...w):y.push(w)}}}return y}}function $q(t,e){t.position&&(e.position=Rz(t))}function Kq(t,e){let n=e;if(t&&t.data){const r=t.data.hName,s=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const u="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:u}}n.type==="element"&&o&&Object.assign(n.properties,Ul(o)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function Xq(t,e){const n=e.data||{},r="value"in e&&!(t1.call(n,"hProperties")||t1.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function Qq(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function Mx(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function Bx(t,e){const n=Gq(t,e),r=n.one(t,void 0),s=Pq(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&o.children.push({type:"text",value:`
`},s),o}function Wq(t,e){return t&&"run"in t?async function(n,r){const s=Bx(n,{file:r,...e});await t.run(s,r)}:function(n,r){return Bx(n,{file:r,...t||e})}}function Ux(t){if(t)throw t}var Gy,Hx;function Zq(){if(Hx)return Gy;Hx=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,s=function(f){return typeof Array.isArray=="function"?Array.isArray(f):e.call(f)==="[object Array]"},o=function(f){if(!f||e.call(f)!=="[object Object]")return!1;var m=t.call(f,"constructor"),y=f.constructor&&f.constructor.prototype&&t.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!m&&!y)return!1;var b;for(b in f);return typeof b>"u"||t.call(f,b)},u=function(f,m){n&&m.name==="__proto__"?n(f,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):f[m.name]=m.newValue},c=function(f,m){if(m==="__proto__")if(t.call(f,m)){if(r)return r(f,m).value}else return;return f[m]};return Gy=function d(){var f,m,y,b,T,w,I=arguments[0],L=1,k=arguments.length,q=!1;for(typeof I=="boolean"&&(q=I,I=arguments[1]||{},L=2),(I==null||typeof I!="object"&&typeof I!="function")&&(I={});L<k;++L)if(f=arguments[L],f!=null)for(m in f)y=c(I,m),b=c(f,m),I!==b&&(q&&b&&(o(b)||(T=s(b)))?(T?(T=!1,w=y&&s(y)?y:[]):w=y&&o(y)?y:{},u(I,{name:m,newValue:d(q,w,b)})):typeof b<"u"&&u(I,{name:m,newValue:b}));return I},Gy}var Jq=Zq();const $y=_p(Jq);function n1(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function eY(){const t=[],e={run:n,use:r};return e;function n(...s){let o=-1;const u=s.pop();if(typeof u!="function")throw new TypeError("Expected function as last argument, not "+u);c(null,...s);function c(d,...f){const m=t[++o];let y=-1;if(d){u(d);return}for(;++y<s.length;)(f[y]===null||f[y]===void 0)&&(f[y]=s[y]);s=f,m?tY(m,c)(...f):u(null,...f)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return t.push(s),e}}function tY(t,e){let n;return r;function r(...u){const c=t.length>u.length;let d;c&&u.push(s);try{d=t.apply(this,u)}catch(f){const m=f;if(c&&n)throw m;return s(m)}c||(d&&d.then&&typeof d.then=="function"?d.then(o,s):d instanceof Error?s(d):o(d))}function s(u,...c){n||(n=!0,e(u,...c))}function o(u){s(null,u)}}const Qi={basename:nY,dirname:rY,extname:iY,join:sY,sep:"/"};function nY(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');wd(t);let n=0,r=-1,s=t.length,o;if(e===void 0||e.length===0||e.length>t.length){for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else r<0&&(o=!0,r=s+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let u=-1,c=e.length-1;for(;s--;)if(t.codePointAt(s)===47){if(o){n=s+1;break}}else u<0&&(o=!0,u=s+1),c>-1&&(t.codePointAt(s)===e.codePointAt(c--)?c<0&&(r=s):(c=-1,r=u));return n===r?r=u:r<0&&(r=t.length),t.slice(n,r)}function rY(t){if(wd(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function iY(t){wd(t);let e=t.length,n=-1,r=0,s=-1,o=0,u;for(;e--;){const c=t.codePointAt(e);if(c===47){if(u){r=e+1;break}continue}n<0&&(u=!0,n=e+1),c===46?s<0?s=e:o!==1&&(o=1):s>-1&&(o=-1)}return s<0||n<0||o===0||o===1&&s===n-1&&s===r+1?"":t.slice(s,n)}function sY(...t){let e=-1,n;for(;++e<t.length;)wd(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":aY(n)}function aY(t){wd(t);const e=t.codePointAt(0)===47;let n=oY(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function oY(t,e){let n="",r=0,s=-1,o=0,u=-1,c,d;for(;++u<=t.length;){if(u<t.length)c=t.codePointAt(u);else{if(c===47)break;c=47}if(c===47){if(!(s===u-1||o===1))if(s!==u-1&&o===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(d=n.lastIndexOf("/"),d!==n.length-1){d<0?(n="",r=0):(n=n.slice(0,d),r=n.length-1-n.lastIndexOf("/")),s=u,o=0;continue}}else if(n.length>0){n="",r=0,s=u,o=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(s+1,u):n=t.slice(s+1,u),r=u-s-1;s=u,o=0}else c===46&&o>-1?o++:o=-1}return n}function wd(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const uY={cwd:lY};function lY(){return"/"}function r1(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function cY(t){if(typeof t=="string")t=new URL(t);else if(!r1(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return hY(t)}function hY(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const Ky=["history","path","basename","stem","extname","dirname"];class hR{constructor(e){let n;e?r1(e)?n={path:e}:typeof e=="string"||dY(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":uY.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Ky.length;){const o=Ky[r];o in n&&n[o]!==void 0&&n[o]!==null&&(this[o]=o==="history"?[...n[o]]:n[o])}let s;for(s in n)Ky.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Qi.basename(this.path):void 0}set basename(e){Qy(e,"basename"),Xy(e,"basename"),this.path=Qi.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Qi.dirname(this.path):void 0}set dirname(e){Vx(this.basename,"dirname"),this.path=Qi.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Qi.extname(this.path):void 0}set extname(e){if(Xy(e,"extname"),Vx(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Qi.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){r1(e)&&(e=cY(e)),Qy(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Qi.basename(this.path,this.extname):void 0}set stem(e){Qy(e,"stem"),Xy(e,"stem"),this.path=Qi.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const s=this.message(e,n,r);throw s.fatal=!0,s}info(e,n,r){const s=this.message(e,n,r);return s.fatal=void 0,s}message(e,n,r){const s=new rr(e,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function Xy(t,e){if(t&&t.includes(Qi.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Qi.sep+"`")}function Qy(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Vx(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function dY(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const fY=function(t){const r=this.constructor.prototype,s=r[t],o=function(){return s.apply(o,arguments)};return Object.setPrototypeOf(o,r),o},pY={}.hasOwnProperty;class G_ extends fY{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=eY()}copy(){const e=new G_;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data($y(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Jy("data",this.frozen),this.namespace[e]=n,this):pY.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Jy("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(e,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=m0(e),r=this.parser||this.Parser;return Wy("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),Wy("process",this.parser||this.Parser),Zy("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(o,u){const c=m0(e),d=r.parse(c);r.run(d,c,function(m,y,b){if(m||!y||!b)return f(m);const T=y,w=r.stringify(T,b);yY(w)?b.value=w:b.result=w,f(m,b)});function f(m,y){m||!y?u(m):o?o(y):n(void 0,y)}}}processSync(e){let n=!1,r;return this.freeze(),Wy("processSync",this.parser||this.Parser),Zy("processSync",this.compiler||this.Compiler),this.process(e,s),Fx("processSync","process",n),r;function s(o,u){n=!0,Ux(o),r=u}}run(e,n,r){zx(e),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?o(void 0,r):new Promise(o);function o(u,c){const d=m0(n);s.run(e,d,f);function f(m,y,b){const T=y||e;m?c(m):u?u(T):r(void 0,T,b)}}}runSync(e,n){let r=!1,s;return this.run(e,n,o),Fx("runSync","run",r),s;function o(u,c){Ux(u),s=c,r=!0}}stringify(e,n){this.freeze();const r=m0(n),s=this.compiler||this.Compiler;return Zy("stringify",s),zx(e),s(e,r)}use(e,...n){const r=this.attachers,s=this.namespace;if(Jy("use",this.frozen),e!=null)if(typeof e=="function")d(e,n);else if(typeof e=="object")Array.isArray(e)?c(e):u(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(f){if(typeof f=="function")d(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[m,...y]=f;d(m,y)}else u(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function u(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");c(f.plugins),f.settings&&(s.settings=$y(!0,s.settings,f.settings))}function c(f){let m=-1;if(f!=null)if(Array.isArray(f))for(;++m<f.length;){const y=f[m];o(y)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function d(f,m){let y=-1,b=-1;for(;++y<r.length;)if(r[y][0]===f){b=y;break}if(b===-1)r.push([f,...m]);else if(m.length>0){let[T,...w]=m;const I=r[b][1];n1(I)&&n1(T)&&(T=$y(!0,I,T)),r[b]=[f,T,...w]}}}}const mY=new G_().freeze();function Wy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Zy(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Jy(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function zx(t){if(!n1(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function Fx(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function m0(t){return gY(t)?t:new hR(t)}function gY(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function yY(t){return typeof t=="string"||EY(t)}function EY(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const _Y="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",jx=[],qx={allowDangerousHtml:!0},bY=/^(https?|ircs?|mailto|xmpp)$/i,TY=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function vY(t){const e=AY(t),n=SY(t);return xY(e.runSync(e.parse(n),n),t)}function AY(t){const e=t.rehypePlugins||jx,n=t.remarkPlugins||jx,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...qx}:qx;return mY().use(nq).use(n).use(Wq,r).use(e)}function SY(t){const e=t.children||"",n=new hR;return typeof e=="string"&&(n.value=e),n}function xY(t,e){const n=e.allowedElements,r=e.allowElement,s=e.components,o=e.disallowedElements,u=e.skipHtml,c=e.unwrapDisallowed,d=e.urlTransform||wY;for(const m of TY)Object.hasOwn(e,m.from)&&(""+m.from+(m.to?"use `"+m.to+"` instead":"remove it")+_Y+m.id,void 0);return Y_(t,f),Pz(t,{Fragment:P.Fragment,components:s,ignoreInvalidStyle:!0,jsx:P.jsx,jsxs:P.jsxs,passKeys:!0,passNode:!0});function f(m,y,b){if(m.type==="raw"&&b&&typeof y=="number")return u?b.children.splice(y,1):b.children[y]={type:"text",value:m.value},y;if(m.type==="element"){let T;for(T in jy)if(Object.hasOwn(jy,T)&&Object.hasOwn(m.properties,T)){const w=m.properties[T],I=jy[T];(I===null||I.includes(m.tagName))&&(m.properties[T]=d(String(w||""),T,m))}}if(m.type==="element"){let T=n?!n.includes(m.tagName):o?o.includes(m.tagName):!1;if(!T&&r&&typeof y=="number"&&(T=!r(m,y,b)),T&&b&&typeof y=="number")return c&&m.children?b.children.splice(y,1,...m.children):b.children.splice(y,1),y}}}function wY(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),s=t.indexOf("/");return e===-1||s!==-1&&e>s||n!==-1&&e>n||r!==-1&&e>r||bY.test(t.slice(0,e))?t:""}const Yx=/[#.]/g;function CY(t,e){const n=t||"",r={};let s=0,o,u;for(;s<n.length;){Yx.lastIndex=s;const c=Yx.exec(n),d=n.slice(s,c?c.index:n.length);d&&(o?o==="#"?r.id=d:Array.isArray(r.className)?r.className.push(d):r.className=[d]:u=d,s+=d.length),c&&(o=c[0],s++)}return{type:"element",tagName:u||e||"div",properties:r,children:[]}}function dR(t,e,n){const r=n?kY(n):void 0;function s(o,u,...c){let d;if(o==null){d={type:"root",children:[]};const f=u;c.unshift(f)}else{d=CY(o,e);const f=d.tagName.toLowerCase(),m=r?r.get(f):void 0;if(d.tagName=m||f,IY(u))c.unshift(u);else for(const[y,b]of Object.entries(u))NY(t,d.properties,y,b)}for(const f of c)i1(d.children,f);return d.type==="element"&&d.tagName==="template"&&(d.content={type:"root",children:d.children},d.children=[]),d}return s}function IY(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const s=e[r];if(s&&typeof s=="object"){if(!Array.isArray(s))return!0;const o=s;for(const u of o)if(typeof u!="number"&&typeof u!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function NY(t,e,n,r){const s=L_(t,n);let o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?s.spaceSeparated?o=cx(r):s.commaSeparated?o=sx(r):s.commaOrSpaceSeparated?o=cx(sx(r).join(" ")):o=Gx(s,s.property,r):Array.isArray(r)?o=[...r]:o=s.property==="style"?RY(r):String(r);if(Array.isArray(o)){const u=[];for(const c of o)u.push(Gx(s,s.property,c));o=u}s.property==="className"&&Array.isArray(e.className)&&(o=e.className.concat(o)),e[s.property]=o}}function i1(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)i1(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?i1(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function Gx(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||sd(n)===sd(e)))return!0}return n}function RY(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function kY(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const DY=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],OY=dR(Jp,"div"),LY=dR(Xl,"g",DY);function PY(t){const e=String(t),n=[];return{toOffset:s,toPoint:r};function r(o){if(typeof o=="number"&&o>-1&&o<=e.length){let u=0;for(;;){let c=n[u];if(c===void 0){const d=$x(e,n[u-1]);c=d===-1?e.length+1:d+1,n[u]=c}if(c>o)return{line:u+1,column:o-(u>0?n[u-1]:0)+1,offset:o};u++}}}function s(o){if(o&&typeof o.line=="number"&&typeof o.column=="number"&&!Number.isNaN(o.line)&&!Number.isNaN(o.column)){for(;n.length<o.line;){const c=n[n.length-1],d=$x(e,c),f=d===-1?e.length+1:d+1;if(c===f)break;n.push(f)}const u=(o.line>1?n[o.line-2]:0)+o.column-1;if(u<n[o.line-1])return u}}}function $x(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const Ho={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},fR={}.hasOwnProperty,MY=Object.prototype;function BY(t,e){const n=e||{};return $_({file:n.file||void 0,location:!1,schema:n.space==="svg"?Xl:Jp,verbose:n.verbose||!1},t)}function $_(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},O0(t,r,n),n}case"#document":case"#document-fragment":{const r=e,s="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:pR(t,e.childNodes),data:{quirksMode:s}},t.file&&t.location){const o=String(t.file),u=PY(o),c=u.toPoint(0),d=u.toPoint(o.length);n.position={start:c,end:d}}return n}case"#documentType":{const r=e;return n={type:"doctype"},O0(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},O0(t,r,n),n}default:return n=UY(t,e),n}}function pR(t,e){let n=-1;const r=[];for(;++n<e.length;){const s=$_(t,e[n]);r.push(s)}return r}function UY(t,e){const n=t.schema;t.schema=e.namespaceURI===Ho.svg?Xl:Jp;let r=-1;const s={};for(;++r<e.attrs.length;){const c=e.attrs[r],d=(c.prefix?c.prefix+":":"")+c.name;fR.call(MY,d)||(s[d]=c.value)}const u=(t.schema.space==="svg"?LY:OY)(e.tagName,s,pR(t,e.childNodes));if(O0(t,e,u),u.tagName==="template"){const c=e,d=c.sourceCodeLocation,f=d&&d.startTag&&fl(d.startTag),m=d&&d.endTag&&fl(d.endTag),y=$_(t,c.content);f&&m&&t.file&&(y.position={start:f.end,end:m.start}),u.content=y}return t.schema=n,u}function O0(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=HY(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function HY(t,e,n){const r=fl(n);if(e.type==="element"){const s=e.children[e.children.length-1];if(r&&!n.endTag&&s&&s.position&&s.position.end&&(r.end=Object.assign({},s.position.end)),t.verbose){const o={};let u;if(n.attrs)for(u in n.attrs)fR.call(n.attrs,u)&&(o[L_(t.schema,u).property]=fl(n.attrs[u]));n.startTag;const c=fl(n.startTag),d=n.endTag?fl(n.endTag):void 0,f={opening:c};d&&(f.closing=d),f.properties=o,e.data={position:f}}}return r}function fl(t){const e=Kx({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=Kx({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function Kx(t){return t.line&&t.column?t:void 0}class Cd{constructor(e,n,r){this.property=e,this.normal=n,r&&(this.space=r)}}Cd.prototype.property={};Cd.prototype.normal={};Cd.prototype.space=null;function mR(t,e){const n={},r={};let s=-1;for(;++s<t.length;)Object.assign(n,t[s].property),Object.assign(r,t[s].normal);return new Cd(n,r,e)}function s1(t){return t.toLowerCase()}class fi{constructor(e,n){this.property=e,this.attribute=n}}fi.prototype.space=null;fi.prototype.boolean=!1;fi.prototype.booleanish=!1;fi.prototype.overloadedBoolean=!1;fi.prototype.number=!1;fi.prototype.commaSeparated=!1;fi.prototype.spaceSeparated=!1;fi.prototype.commaOrSpaceSeparated=!1;fi.prototype.mustUseProperty=!1;fi.prototype.defined=!1;let VY=0;const et=iu(),Tn=iu(),gR=iu(),ke=iu(),Vt=iu(),xl=iu(),Br=iu();function iu(){return 2**++VY}const a1=Object.freeze(Object.defineProperty({__proto__:null,boolean:et,booleanish:Tn,commaOrSpaceSeparated:Br,commaSeparated:xl,number:ke,overloadedBoolean:gR,spaceSeparated:Vt},Symbol.toStringTag,{value:"Module"})),eE=Object.keys(a1);class K_ extends fi{constructor(e,n,r,s){let o=-1;if(super(e,n),Xx(this,"space",s),typeof r=="number")for(;++o<eE.length;){const u=eE[o];Xx(this,eE[o],(r&a1[u])===a1[u])}}}K_.prototype.defined=!0;function Xx(t,e,n){n&&(t[e]=n)}const zY={}.hasOwnProperty;function Wl(t){const e={},n={};let r;for(r in t.properties)if(zY.call(t.properties,r)){const s=t.properties[r],o=new K_(r,t.transform(t.attributes||{},r),s,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),e[r]=o,n[s1(r)]=r,n[s1(o.attribute)]=r}return new Cd(e,n,t.space)}const yR=Wl({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),ER=Wl({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function _R(t,e){return e in t?t[e]:e}function bR(t,e){return _R(t,e.toLowerCase())}const TR=Wl({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:bR,properties:{xmlns:null,xmlnsXLink:null}}),vR=Wl({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Tn,ariaAutoComplete:null,ariaBusy:Tn,ariaChecked:Tn,ariaColCount:ke,ariaColIndex:ke,ariaColSpan:ke,ariaControls:Vt,ariaCurrent:null,ariaDescribedBy:Vt,ariaDetails:null,ariaDisabled:Tn,ariaDropEffect:Vt,ariaErrorMessage:null,ariaExpanded:Tn,ariaFlowTo:Vt,ariaGrabbed:Tn,ariaHasPopup:null,ariaHidden:Tn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Vt,ariaLevel:ke,ariaLive:null,ariaModal:Tn,ariaMultiLine:Tn,ariaMultiSelectable:Tn,ariaOrientation:null,ariaOwns:Vt,ariaPlaceholder:null,ariaPosInSet:ke,ariaPressed:Tn,ariaReadOnly:Tn,ariaRelevant:null,ariaRequired:Tn,ariaRoleDescription:Vt,ariaRowCount:ke,ariaRowIndex:ke,ariaRowSpan:ke,ariaSelected:Tn,ariaSetSize:ke,ariaSort:null,ariaValueMax:ke,ariaValueMin:ke,ariaValueNow:ke,ariaValueText:null,role:null}}),FY=Wl({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:bR,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:xl,acceptCharset:Vt,accessKey:Vt,action:null,allow:null,allowFullScreen:et,allowPaymentRequest:et,allowUserMedia:et,alt:null,as:null,async:et,autoCapitalize:null,autoComplete:Vt,autoFocus:et,autoPlay:et,blocking:Vt,capture:null,charSet:null,checked:et,cite:null,className:Vt,cols:ke,colSpan:null,content:null,contentEditable:Tn,controls:et,controlsList:Vt,coords:ke|xl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:et,defer:et,dir:null,dirName:null,disabled:et,download:gR,draggable:Tn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:et,formTarget:null,headers:Vt,height:ke,hidden:et,high:ke,href:null,hrefLang:null,htmlFor:Vt,httpEquiv:Vt,id:null,imageSizes:null,imageSrcSet:null,inert:et,inputMode:null,integrity:null,is:null,isMap:et,itemId:null,itemProp:Vt,itemRef:Vt,itemScope:et,itemType:Vt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:et,low:ke,manifest:null,max:null,maxLength:ke,media:null,method:null,min:null,minLength:ke,multiple:et,muted:et,name:null,nonce:null,noModule:et,noValidate:et,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:et,optimum:ke,pattern:null,ping:Vt,placeholder:null,playsInline:et,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:et,referrerPolicy:null,rel:Vt,required:et,reversed:et,rows:ke,rowSpan:ke,sandbox:Vt,scope:null,scoped:et,seamless:et,selected:et,shadowRootClonable:et,shadowRootDelegatesFocus:et,shadowRootMode:null,shape:null,size:ke,sizes:null,slot:null,span:ke,spellCheck:Tn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ke,step:null,style:null,tabIndex:ke,target:null,title:null,translate:null,type:null,typeMustMatch:et,useMap:null,value:Tn,width:ke,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Vt,axis:null,background:null,bgColor:null,border:ke,borderColor:null,bottomMargin:ke,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:et,declare:et,event:null,face:null,frame:null,frameBorder:null,hSpace:ke,leftMargin:ke,link:null,longDesc:null,lowSrc:null,marginHeight:ke,marginWidth:ke,noResize:et,noHref:et,noShade:et,noWrap:et,object:null,profile:null,prompt:null,rev:null,rightMargin:ke,rules:null,scheme:null,scrolling:Tn,standby:null,summary:null,text:null,topMargin:ke,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ke,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:et,disableRemotePlayback:et,prefix:null,property:null,results:ke,security:null,unselectable:null}}),jY=Wl({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:_R,properties:{about:Br,accentHeight:ke,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ke,amplitude:ke,arabicForm:null,ascent:ke,attributeName:null,attributeType:null,azimuth:ke,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ke,by:null,calcMode:null,capHeight:ke,className:Vt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ke,diffuseConstant:ke,direction:null,display:null,dur:null,divisor:ke,dominantBaseline:null,download:et,dx:null,dy:null,edgeMode:null,editable:null,elevation:ke,enableBackground:null,end:null,event:null,exponent:ke,externalResourcesRequired:null,fill:null,fillOpacity:ke,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:xl,g2:xl,glyphName:xl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ke,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ke,horizOriginX:ke,horizOriginY:ke,id:null,ideographic:ke,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ke,k:ke,k1:ke,k2:ke,k3:ke,k4:ke,kernelMatrix:Br,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ke,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ke,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ke,overlineThickness:ke,paintOrder:null,panose1:null,path:null,pathLength:ke,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Vt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ke,pointsAtY:ke,pointsAtZ:ke,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Br,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Br,rev:Br,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Br,requiredFeatures:Br,requiredFonts:Br,requiredFormats:Br,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ke,specularExponent:ke,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ke,strikethroughThickness:ke,string:null,stroke:null,strokeDashArray:Br,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ke,strokeOpacity:ke,strokeWidth:null,style:null,surfaceScale:ke,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Br,tabIndex:ke,tableValues:null,target:null,targetX:ke,targetY:ke,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Br,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ke,underlineThickness:ke,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ke,values:null,vAlphabetic:ke,vMathematical:ke,vectorEffect:null,vHanging:ke,vIdeographic:ke,version:null,vertAdvY:ke,vertOriginX:ke,vertOriginY:ke,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ke,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),qY=/^data[-\w.:]+$/i,Qx=/-[a-z]/g,YY=/[A-Z]/g;function GY(t,e){const n=s1(e);let r=e,s=fi;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&qY.test(e)){if(e.charAt(4)==="-"){const o=e.slice(5).replace(Qx,KY);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=e.slice(4);if(!Qx.test(o)){let u=o.replace(YY,$Y);u.charAt(0)!=="-"&&(u="-"+u),e="data"+u}}s=K_}return new s(r,e)}function $Y(t){return"-"+t.toLowerCase()}function KY(t){return t.charAt(1).toUpperCase()}const XY=mR([ER,yR,TR,vR,FY],"html"),AR=mR([ER,yR,TR,vR,jY],"svg"),Wx={}.hasOwnProperty;function SR(t,e){const n=e||{};function r(s,...o){let u=r.invalid;const c=r.handlers;if(s&&Wx.call(s,t)){const d=String(s[t]);u=Wx.call(c,d)?c[d]:r.unknown}if(u)return u.call(this,s,...o)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const QY={},WY={}.hasOwnProperty,xR=SR("type",{handlers:{root:JY,element:iG,text:nG,comment:rG,doctype:tG}});function ZY(t,e){const r=(e||QY).space;return xR(t,r==="svg"?AR:XY)}function JY(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=X_(t.children,n,e),Zl(t,n),n}function eG(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=X_(t.children,n,e),Zl(t,n),n}function tG(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Zl(t,e),e}function nG(t){const e={nodeName:"#text",value:t.value,parentNode:null};return Zl(t,e),e}function rG(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return Zl(t,e),e}function iG(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=AR);const s=[];let o;if(t.properties){for(o in t.properties)if(o!=="children"&&WY.call(t.properties,o)){const d=sG(r,o,t.properties[o]);d&&s.push(d)}}const u=r.space,c={nodeName:t.tagName,tagName:t.tagName,attrs:s,namespaceURI:Ho[u],childNodes:[],parentNode:null};return c.childNodes=X_(t.children,c,r),Zl(t,c),t.tagName==="template"&&t.content&&(c.content=eG(t.content,r)),c}function sG(t,e,n){const r=GY(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?k3(n):H3(n));const s={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const o=s.name.indexOf(":");o<0?s.prefix="":(s.name=s.name.slice(o+1),s.prefix=r.attribute.slice(0,o)),s.namespace=Ho[r.space]}return s}function X_(t,e,n){let r=-1;const s=[];if(t)for(;++r<t.length;){const o=xR(t[r],n);o.parentNode=e,s.push(o)}return s}function Zl(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const aG=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],oG=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Kt="";var G;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(G||(G={}));const mr={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function wR(t){return t>=55296&&t<=57343}function uG(t){return t>=56320&&t<=57343}function lG(t,e){return(t-55296)*1024+9216+e}function CR(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function IR(t){return t>=64976&&t<=65007||oG.has(t)}var ye;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ye||(ye={}));const cG=65536;class hG{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=cG,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:s,offset:o}=this,u=s+n,c=o+n;return{code:e,startLine:r,endLine:r,startCol:u,endCol:u,startOffset:c,endOffset:c}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(uG(n))return this.pos++,this._addGap(),lG(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,G.EOF;return this._err(ye.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,G.EOF;const r=this.html.charCodeAt(n);return r===G.CARRIAGE_RETURN?G.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,G.EOF;let e=this.html.charCodeAt(this.pos);return e===G.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,G.LINE_FEED):e===G.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,wR(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===G.LINE_FEED||e===G.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){CR(e)?this._err(ye.controlCharacterInInputStream):IR(e)&&this._err(ye.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var lt;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(lt||(lt={}));function NR(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}const dG=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(t=>t.charCodeAt(0))),fG=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function pG(t){var e;return t>=55296&&t<=57343||t>1114111?65533:(e=fG.get(t))!==null&&e!==void 0?e:t}var Un;(function(t){t[t.NUM=35]="NUM",t[t.SEMI=59]="SEMI",t[t.EQUALS=61]="EQUALS",t[t.ZERO=48]="ZERO",t[t.NINE=57]="NINE",t[t.LOWER_A=97]="LOWER_A",t[t.LOWER_F=102]="LOWER_F",t[t.LOWER_X=120]="LOWER_X",t[t.LOWER_Z=122]="LOWER_Z",t[t.UPPER_A=65]="UPPER_A",t[t.UPPER_F=70]="UPPER_F",t[t.UPPER_Z=90]="UPPER_Z"})(Un||(Un={}));const mG=32;var Pa;(function(t){t[t.VALUE_LENGTH=49152]="VALUE_LENGTH",t[t.BRANCH_LENGTH=16256]="BRANCH_LENGTH",t[t.JUMP_TABLE=127]="JUMP_TABLE"})(Pa||(Pa={}));function o1(t){return t>=Un.ZERO&&t<=Un.NINE}function gG(t){return t>=Un.UPPER_A&&t<=Un.UPPER_F||t>=Un.LOWER_A&&t<=Un.LOWER_F}function yG(t){return t>=Un.UPPER_A&&t<=Un.UPPER_Z||t>=Un.LOWER_A&&t<=Un.LOWER_Z||o1(t)}function EG(t){return t===Un.EQUALS||yG(t)}var Mn;(function(t){t[t.EntityStart=0]="EntityStart",t[t.NumericStart=1]="NumericStart",t[t.NumericDecimal=2]="NumericDecimal",t[t.NumericHex=3]="NumericHex",t[t.NamedEntity=4]="NamedEntity"})(Mn||(Mn={}));var Bs;(function(t){t[t.Legacy=0]="Legacy",t[t.Strict=1]="Strict",t[t.Attribute=2]="Attribute"})(Bs||(Bs={}));class _G{constructor(e,n,r){this.decodeTree=e,this.emitCodePoint=n,this.errors=r,this.state=Mn.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Bs.Strict}startEntity(e){this.decodeMode=e,this.state=Mn.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,n){switch(this.state){case Mn.EntityStart:return e.charCodeAt(n)===Un.NUM?(this.state=Mn.NumericStart,this.consumed+=1,this.stateNumericStart(e,n+1)):(this.state=Mn.NamedEntity,this.stateNamedEntity(e,n));case Mn.NumericStart:return this.stateNumericStart(e,n);case Mn.NumericDecimal:return this.stateNumericDecimal(e,n);case Mn.NumericHex:return this.stateNumericHex(e,n);case Mn.NamedEntity:return this.stateNamedEntity(e,n)}}stateNumericStart(e,n){return n>=e.length?-1:(e.charCodeAt(n)|mG)===Un.LOWER_X?(this.state=Mn.NumericHex,this.consumed+=1,this.stateNumericHex(e,n+1)):(this.state=Mn.NumericDecimal,this.stateNumericDecimal(e,n))}addToNumericResult(e,n,r,s){if(n!==r){const o=r-n;this.result=this.result*Math.pow(s,o)+Number.parseInt(e.substr(n,o),s),this.consumed+=o}}stateNumericHex(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(o1(s)||gG(s))n+=1;else return this.addToNumericResult(e,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(e,r,n,16),-1}stateNumericDecimal(e,n){const r=n;for(;n<e.length;){const s=e.charCodeAt(n);if(o1(s))n+=1;else return this.addToNumericResult(e,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(e,r,n,10),-1}emitNumericEntity(e,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===Un.SEMI)this.consumed+=1;else if(this.decodeMode===Bs.Strict)return 0;return this.emitCodePoint(pG(this.result),this.consumed),this.errors&&(e!==Un.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,n){const{decodeTree:r}=this;let s=r[this.treeIndex],o=(s&Pa.VALUE_LENGTH)>>14;for(;n<e.length;n++,this.excess++){const u=e.charCodeAt(n);if(this.treeIndex=bG(r,s,this.treeIndex+Math.max(1,o),u),this.treeIndex<0)return this.result===0||this.decodeMode===Bs.Attribute&&(o===0||EG(u))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],o=(s&Pa.VALUE_LENGTH)>>14,o!==0){if(u===Un.SEMI)return this.emitNamedEntityData(this.treeIndex,o,this.consumed+this.excess);this.decodeMode!==Bs.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:n,decodeTree:r}=this,s=(r[n]&Pa.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(e=this.errors)===null||e===void 0||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[e]&~Pa.VALUE_LENGTH:s[e+1],r),n===3&&this.emitCodePoint(s[e+2],r),r}end(){var e;switch(this.state){case Mn.NamedEntity:return this.result!==0&&(this.decodeMode!==Bs.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Mn.NumericDecimal:return this.emitNumericEntity(0,2);case Mn.NumericHex:return this.emitNumericEntity(0,3);case Mn.NumericStart:return(e=this.errors)===null||e===void 0||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Mn.EntityStart:return 0}}}function bG(t,e,n,r){const s=(e&Pa.BRANCH_LENGTH)>>7,o=e&Pa.JUMP_TABLE;if(s===0)return o!==0&&r===o?n:-1;if(o){const d=r-o;return d<0||d>=s?-1:t[n+d]-1}let u=n,c=u+s-1;for(;u<=c;){const d=u+c>>>1,f=t[d];if(f<r)u=d+1;else if(f>r)c=d-1;else return t[d+s]}return-1}var Ie;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(Ie||(Ie={}));var Fo;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(Fo||(Fo={}));var ci;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(ci||(ci={}));var ce;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(ce||(ce={}));var _;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(_||(_={}));const TG=new Map([[ce.A,_.A],[ce.ADDRESS,_.ADDRESS],[ce.ANNOTATION_XML,_.ANNOTATION_XML],[ce.APPLET,_.APPLET],[ce.AREA,_.AREA],[ce.ARTICLE,_.ARTICLE],[ce.ASIDE,_.ASIDE],[ce.B,_.B],[ce.BASE,_.BASE],[ce.BASEFONT,_.BASEFONT],[ce.BGSOUND,_.BGSOUND],[ce.BIG,_.BIG],[ce.BLOCKQUOTE,_.BLOCKQUOTE],[ce.BODY,_.BODY],[ce.BR,_.BR],[ce.BUTTON,_.BUTTON],[ce.CAPTION,_.CAPTION],[ce.CENTER,_.CENTER],[ce.CODE,_.CODE],[ce.COL,_.COL],[ce.COLGROUP,_.COLGROUP],[ce.DD,_.DD],[ce.DESC,_.DESC],[ce.DETAILS,_.DETAILS],[ce.DIALOG,_.DIALOG],[ce.DIR,_.DIR],[ce.DIV,_.DIV],[ce.DL,_.DL],[ce.DT,_.DT],[ce.EM,_.EM],[ce.EMBED,_.EMBED],[ce.FIELDSET,_.FIELDSET],[ce.FIGCAPTION,_.FIGCAPTION],[ce.FIGURE,_.FIGURE],[ce.FONT,_.FONT],[ce.FOOTER,_.FOOTER],[ce.FOREIGN_OBJECT,_.FOREIGN_OBJECT],[ce.FORM,_.FORM],[ce.FRAME,_.FRAME],[ce.FRAMESET,_.FRAMESET],[ce.H1,_.H1],[ce.H2,_.H2],[ce.H3,_.H3],[ce.H4,_.H4],[ce.H5,_.H5],[ce.H6,_.H6],[ce.HEAD,_.HEAD],[ce.HEADER,_.HEADER],[ce.HGROUP,_.HGROUP],[ce.HR,_.HR],[ce.HTML,_.HTML],[ce.I,_.I],[ce.IMG,_.IMG],[ce.IMAGE,_.IMAGE],[ce.INPUT,_.INPUT],[ce.IFRAME,_.IFRAME],[ce.KEYGEN,_.KEYGEN],[ce.LABEL,_.LABEL],[ce.LI,_.LI],[ce.LINK,_.LINK],[ce.LISTING,_.LISTING],[ce.MAIN,_.MAIN],[ce.MALIGNMARK,_.MALIGNMARK],[ce.MARQUEE,_.MARQUEE],[ce.MATH,_.MATH],[ce.MENU,_.MENU],[ce.META,_.META],[ce.MGLYPH,_.MGLYPH],[ce.MI,_.MI],[ce.MO,_.MO],[ce.MN,_.MN],[ce.MS,_.MS],[ce.MTEXT,_.MTEXT],[ce.NAV,_.NAV],[ce.NOBR,_.NOBR],[ce.NOFRAMES,_.NOFRAMES],[ce.NOEMBED,_.NOEMBED],[ce.NOSCRIPT,_.NOSCRIPT],[ce.OBJECT,_.OBJECT],[ce.OL,_.OL],[ce.OPTGROUP,_.OPTGROUP],[ce.OPTION,_.OPTION],[ce.P,_.P],[ce.PARAM,_.PARAM],[ce.PLAINTEXT,_.PLAINTEXT],[ce.PRE,_.PRE],[ce.RB,_.RB],[ce.RP,_.RP],[ce.RT,_.RT],[ce.RTC,_.RTC],[ce.RUBY,_.RUBY],[ce.S,_.S],[ce.SCRIPT,_.SCRIPT],[ce.SEARCH,_.SEARCH],[ce.SECTION,_.SECTION],[ce.SELECT,_.SELECT],[ce.SOURCE,_.SOURCE],[ce.SMALL,_.SMALL],[ce.SPAN,_.SPAN],[ce.STRIKE,_.STRIKE],[ce.STRONG,_.STRONG],[ce.STYLE,_.STYLE],[ce.SUB,_.SUB],[ce.SUMMARY,_.SUMMARY],[ce.SUP,_.SUP],[ce.TABLE,_.TABLE],[ce.TBODY,_.TBODY],[ce.TEMPLATE,_.TEMPLATE],[ce.TEXTAREA,_.TEXTAREA],[ce.TFOOT,_.TFOOT],[ce.TD,_.TD],[ce.TH,_.TH],[ce.THEAD,_.THEAD],[ce.TITLE,_.TITLE],[ce.TR,_.TR],[ce.TRACK,_.TRACK],[ce.TT,_.TT],[ce.U,_.U],[ce.UL,_.UL],[ce.SVG,_.SVG],[ce.VAR,_.VAR],[ce.WBR,_.WBR],[ce.XMP,_.XMP]]);function Jl(t){var e;return(e=TG.get(t))!==null&&e!==void 0?e:_.UNKNOWN}const Ne=_,vG={[Ie.HTML]:new Set([Ne.ADDRESS,Ne.APPLET,Ne.AREA,Ne.ARTICLE,Ne.ASIDE,Ne.BASE,Ne.BASEFONT,Ne.BGSOUND,Ne.BLOCKQUOTE,Ne.BODY,Ne.BR,Ne.BUTTON,Ne.CAPTION,Ne.CENTER,Ne.COL,Ne.COLGROUP,Ne.DD,Ne.DETAILS,Ne.DIR,Ne.DIV,Ne.DL,Ne.DT,Ne.EMBED,Ne.FIELDSET,Ne.FIGCAPTION,Ne.FIGURE,Ne.FOOTER,Ne.FORM,Ne.FRAME,Ne.FRAMESET,Ne.H1,Ne.H2,Ne.H3,Ne.H4,Ne.H5,Ne.H6,Ne.HEAD,Ne.HEADER,Ne.HGROUP,Ne.HR,Ne.HTML,Ne.IFRAME,Ne.IMG,Ne.INPUT,Ne.LI,Ne.LINK,Ne.LISTING,Ne.MAIN,Ne.MARQUEE,Ne.MENU,Ne.META,Ne.NAV,Ne.NOEMBED,Ne.NOFRAMES,Ne.NOSCRIPT,Ne.OBJECT,Ne.OL,Ne.P,Ne.PARAM,Ne.PLAINTEXT,Ne.PRE,Ne.SCRIPT,Ne.SECTION,Ne.SELECT,Ne.SOURCE,Ne.STYLE,Ne.SUMMARY,Ne.TABLE,Ne.TBODY,Ne.TD,Ne.TEMPLATE,Ne.TEXTAREA,Ne.TFOOT,Ne.TH,Ne.THEAD,Ne.TITLE,Ne.TR,Ne.TRACK,Ne.UL,Ne.WBR,Ne.XMP]),[Ie.MATHML]:new Set([Ne.MI,Ne.MO,Ne.MN,Ne.MS,Ne.MTEXT,Ne.ANNOTATION_XML]),[Ie.SVG]:new Set([Ne.TITLE,Ne.FOREIGN_OBJECT,Ne.DESC]),[Ie.XLINK]:new Set,[Ie.XML]:new Set,[Ie.XMLNS]:new Set},u1=new Set([Ne.H1,Ne.H2,Ne.H3,Ne.H4,Ne.H5,Ne.H6]);ce.STYLE,ce.SCRIPT,ce.XMP,ce.IFRAME,ce.NOEMBED,ce.NOFRAMES,ce.PLAINTEXT;var X;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(X||(X={}));const pn={DATA:X.DATA,RCDATA:X.RCDATA,RAWTEXT:X.RAWTEXT,SCRIPT_DATA:X.SCRIPT_DATA,PLAINTEXT:X.PLAINTEXT,CDATA_SECTION:X.CDATA_SECTION};function AG(t){return t>=G.DIGIT_0&&t<=G.DIGIT_9}function Ah(t){return t>=G.LATIN_CAPITAL_A&&t<=G.LATIN_CAPITAL_Z}function SG(t){return t>=G.LATIN_SMALL_A&&t<=G.LATIN_SMALL_Z}function Aa(t){return SG(t)||Ah(t)}function Zx(t){return Aa(t)||AG(t)}function g0(t){return t+32}function RR(t){return t===G.SPACE||t===G.LINE_FEED||t===G.TABULATION||t===G.FORM_FEED}function Jx(t){return RR(t)||t===G.SOLIDUS||t===G.GREATER_THAN_SIGN}function xG(t){return t===G.NULL?ye.nullCharacterReference:t>1114111?ye.characterReferenceOutsideUnicodeRange:wR(t)?ye.surrogateCharacterReference:IR(t)?ye.noncharacterCharacterReference:CR(t)||t===G.CARRIAGE_RETURN?ye.controlCharacterReference:null}class wG{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=X.DATA,this.returnState=X.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new hG(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new _G(dG,(r,s)=>{this.preprocessor.pos=this.entityStartPos+s-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(ye.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(ye.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const s=xG(r);s&&this._err(s,1)}}:void 0)}_err(e,n=0){var r,s;(s=(r=this.handler).onParseError)===null||s===void 0||s.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:lt.START_TAG,tagName:"",tagID:_.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:lt.END_TAG,tagName:"",tagID:_.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:lt.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:lt.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(NR(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const s=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);s[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ye.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=Jl(e.tagName),e.type===lt.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(ye.endTagWithAttributes),e.selfClosing&&this._err(ye.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case lt.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case lt.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case lt.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:lt.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=RR(e)?lt.WHITESPACE_CHARACTER:e===G.NULL?lt.NULL_CHARACTER:lt.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(lt.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=X.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Bs.Attribute:Bs.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===X.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===X.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case X.DATA:{this._stateData(e);break}case X.RCDATA:{this._stateRcdata(e);break}case X.RAWTEXT:{this._stateRawtext(e);break}case X.SCRIPT_DATA:{this._stateScriptData(e);break}case X.PLAINTEXT:{this._statePlaintext(e);break}case X.TAG_OPEN:{this._stateTagOpen(e);break}case X.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case X.TAG_NAME:{this._stateTagName(e);break}case X.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case X.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case X.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case X.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case X.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case X.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case X.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case X.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case X.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case X.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case X.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case X.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case X.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case X.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case X.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case X.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case X.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case X.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case X.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case X.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case X.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case X.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case X.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case X.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case X.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case X.BOGUS_COMMENT:{this._stateBogusComment(e);break}case X.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case X.COMMENT_START:{this._stateCommentStart(e);break}case X.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case X.COMMENT:{this._stateComment(e);break}case X.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case X.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case X.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case X.COMMENT_END:{this._stateCommentEnd(e);break}case X.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case X.DOCTYPE:{this._stateDoctype(e);break}case X.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case X.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case X.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case X.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case X.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case X.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case X.CDATA_SECTION:{this._stateCdataSection(e);break}case X.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case X.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case X.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case X.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case G.LESS_THAN_SIGN:{this.state=X.TAG_OPEN;break}case G.AMPERSAND:{this._startCharacterReference();break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this._emitCodePoint(e);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case G.AMPERSAND:{this._startCharacterReference();break}case G.LESS_THAN_SIGN:{this.state=X.RCDATA_LESS_THAN_SIGN;break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this._emitChars(Kt);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case G.LESS_THAN_SIGN:{this.state=X.RAWTEXT_LESS_THAN_SIGN;break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this._emitChars(Kt);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_LESS_THAN_SIGN;break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this._emitChars(Kt);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case G.NULL:{this._err(ye.unexpectedNullCharacter),this._emitChars(Kt);break}case G.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(Aa(e))this._createStartTagToken(),this.state=X.TAG_NAME,this._stateTagName(e);else switch(e){case G.EXCLAMATION_MARK:{this.state=X.MARKUP_DECLARATION_OPEN;break}case G.SOLIDUS:{this.state=X.END_TAG_OPEN;break}case G.QUESTION_MARK:{this._err(ye.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=X.BOGUS_COMMENT,this._stateBogusComment(e);break}case G.EOF:{this._err(ye.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ye.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=X.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(Aa(e))this._createEndTagToken(),this.state=X.TAG_NAME,this._stateTagName(e);else switch(e){case G.GREATER_THAN_SIGN:{this._err(ye.missingEndTagName),this.state=X.DATA;break}case G.EOF:{this._err(ye.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ye.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BEFORE_ATTRIBUTE_NAME;break}case G.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case G.NULL:{this._err(ye.unexpectedNullCharacter),n.tagName+=Kt;break}case G.EOF:{this._err(ye.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(Ah(e)?g0(e):e)}}_stateRcdataLessThanSign(e){e===G.SOLIDUS?this.state=X.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){Aa(e)?(this.state=X.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=X.BEFORE_ATTRIBUTE_NAME,!1;case G.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=X.SELF_CLOSING_START_TAG,!1;case G.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=X.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=X.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===G.SOLIDUS?this.state=X.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=X.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){Aa(e)?(this.state=X.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=X.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case G.SOLIDUS:{this.state=X.SCRIPT_DATA_END_TAG_OPEN;break}case G.EXCLAMATION_MARK:{this.state=X.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=X.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){Aa(e)?(this.state=X.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===G.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===G.HYPHEN_MINUS?(this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=X.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this._emitChars(Kt);break}case G.EOF:{this._err(ye.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(Kt);break}case G.EOF:{this._err(ye.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case G.HYPHEN_MINUS:{this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case G.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_ESCAPED,this._emitChars(Kt);break}case G.EOF:{this._err(ye.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===G.SOLIDUS?this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Aa(e)?(this._emitChars("<"),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){Aa(e)?(this.state=X.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(mr.SCRIPT,!1)&&Jx(this.preprocessor.peek(mr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<mr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this._emitChars(Kt);break}case G.EOF:{this._err(ye.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Kt);break}case G.EOF:{this._err(ye.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case G.HYPHEN_MINUS:{this._emitChars("-");break}case G.LESS_THAN_SIGN:{this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case G.GREATER_THAN_SIGN:{this.state=X.SCRIPT_DATA,this._emitChars(">");break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Kt);break}case G.EOF:{this._err(ye.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===G.SOLIDUS?(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(mr.SCRIPT,!1)&&Jx(this.preprocessor.peek(mr.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<mr.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=X.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=X.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.SOLIDUS:case G.GREATER_THAN_SIGN:case G.EOF:{this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case G.EQUALS_SIGN:{this._err(ye.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=X.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:case G.SOLIDUS:case G.GREATER_THAN_SIGN:case G.EOF:{this._leaveAttrName(),this.state=X.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case G.EQUALS_SIGN:{this._leaveAttrName(),this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case G.QUOTATION_MARK:case G.APOSTROPHE:case G.LESS_THAN_SIGN:{this._err(ye.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this.currentAttr.name+=Kt;break}default:this.currentAttr.name+=String.fromCodePoint(Ah(e)?g0(e):e)}}_stateAfterAttributeName(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.SOLIDUS:{this.state=X.SELF_CLOSING_START_TAG;break}case G.EQUALS_SIGN:{this.state=X.BEFORE_ATTRIBUTE_VALUE;break}case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentTagToken();break}case G.EOF:{this._err(ye.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=X.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.QUOTATION_MARK:{this.state=X.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case G.APOSTROPHE:{this.state=X.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(ye.missingAttributeValue),this.state=X.DATA,this.emitCurrentTagToken();break}default:this.state=X.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case G.QUOTATION_MARK:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case G.AMPERSAND:{this._startCharacterReference();break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this.currentAttr.value+=Kt;break}case G.EOF:{this._err(ye.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case G.APOSTROPHE:{this.state=X.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case G.AMPERSAND:{this._startCharacterReference();break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this.currentAttr.value+=Kt;break}case G.EOF:{this._err(ye.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case G.AMPERSAND:{this._startCharacterReference();break}case G.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case G.NULL:{this._err(ye.unexpectedNullCharacter),this.currentAttr.value+=Kt;break}case G.QUOTATION_MARK:case G.APOSTROPHE:case G.LESS_THAN_SIGN:case G.EQUALS_SIGN:case G.GRAVE_ACCENT:{this._err(ye.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case G.EOF:{this._err(ye.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this._leaveAttrValue(),this.state=X.BEFORE_ATTRIBUTE_NAME;break}case G.SOLIDUS:{this._leaveAttrValue(),this.state=X.SELF_CLOSING_START_TAG;break}case G.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=X.DATA,this.emitCurrentTagToken();break}case G.EOF:{this._err(ye.eofInTag),this._emitEOFToken();break}default:this._err(ye.missingWhitespaceBetweenAttributes),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case G.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=X.DATA,this.emitCurrentTagToken();break}case G.EOF:{this._err(ye.eofInTag),this._emitEOFToken();break}default:this._err(ye.unexpectedSolidusInTag),this.state=X.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case G.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case G.NULL:{this._err(ye.unexpectedNullCharacter),n.data+=Kt;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(mr.DASH_DASH,!0)?(this._createCommentToken(mr.DASH_DASH.length+1),this.state=X.COMMENT_START):this._consumeSequenceIfMatch(mr.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(mr.DOCTYPE.length+1),this.state=X.DOCTYPE):this._consumeSequenceIfMatch(mr.CDATA_START,!0)?this.inForeignNode?this.state=X.CDATA_SECTION:(this._err(ye.cdataInHtmlContent),this._createCommentToken(mr.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=X.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ye.incorrectlyOpenedComment),this._createCommentToken(2),this.state=X.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case G.HYPHEN_MINUS:{this.state=X.COMMENT_START_DASH;break}case G.GREATER_THAN_SIGN:{this._err(ye.abruptClosingOfEmptyComment),this.state=X.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=X.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case G.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case G.GREATER_THAN_SIGN:{this._err(ye.abruptClosingOfEmptyComment),this.state=X.DATA,this.emitCurrentComment(n);break}case G.EOF:{this._err(ye.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case G.HYPHEN_MINUS:{this.state=X.COMMENT_END_DASH;break}case G.LESS_THAN_SIGN:{n.data+="<",this.state=X.COMMENT_LESS_THAN_SIGN;break}case G.NULL:{this._err(ye.unexpectedNullCharacter),n.data+=Kt;break}case G.EOF:{this._err(ye.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case G.EXCLAMATION_MARK:{n.data+="!",this.state=X.COMMENT_LESS_THAN_SIGN_BANG;break}case G.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=X.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===G.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=X.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===G.HYPHEN_MINUS?this.state=X.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=X.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==G.GREATER_THAN_SIGN&&e!==G.EOF&&this._err(ye.nestedComment),this.state=X.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case G.HYPHEN_MINUS:{this.state=X.COMMENT_END;break}case G.EOF:{this._err(ye.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=X.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentComment(n);break}case G.EXCLAMATION_MARK:{this.state=X.COMMENT_END_BANG;break}case G.HYPHEN_MINUS:{n.data+="-";break}case G.EOF:{this._err(ye.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=X.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case G.HYPHEN_MINUS:{n.data+="--!",this.state=X.COMMENT_END_DASH;break}case G.GREATER_THAN_SIGN:{this._err(ye.incorrectlyClosedComment),this.state=X.DATA,this.emitCurrentComment(n);break}case G.EOF:{this._err(ye.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=X.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_NAME;break}case G.GREATER_THAN_SIGN:{this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case G.EOF:{this._err(ye.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ye.missingWhitespaceBeforeDoctypeName),this.state=X.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(Ah(e))this._createDoctypeToken(String.fromCharCode(g0(e))),this.state=X.DOCTYPE_NAME;else switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.NULL:{this._err(ye.unexpectedNullCharacter),this._createDoctypeToken(Kt),this.state=X.DOCTYPE_NAME;break}case G.GREATER_THAN_SIGN:{this._err(ye.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(ye.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=X.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.AFTER_DOCTYPE_NAME;break}case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.NULL:{this._err(ye.unexpectedNullCharacter),n.name+=Kt;break}case G.EOF:{this._err(ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(Ah(e)?g0(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(mr.PUBLIC,!1)?this.state=X.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(mr.SYSTEM,!1)?this.state=X.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ye.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case G.QUOTATION_MARK:{this._err(ye.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{this._err(ye.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(ye.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ye.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.QUOTATION_MARK:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{n.publicId="",this.state=X.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(ye.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ye.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case G.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case G.NULL:{this._err(ye.unexpectedNullCharacter),n.publicId+=Kt;break}case G.GREATER_THAN_SIGN:{this._err(ye.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case G.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case G.NULL:{this._err(ye.unexpectedNullCharacter),n.publicId+=Kt;break}case G.GREATER_THAN_SIGN:{this._err(ye.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case G.GREATER_THAN_SIGN:{this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.QUOTATION_MARK:{this._err(ye.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{this._err(ye.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case G.EOF:{this._err(ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ye.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case G.EOF:{this._err(ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ye.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:{this.state=X.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case G.QUOTATION_MARK:{this._err(ye.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{this._err(ye.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(ye.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ye.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.QUOTATION_MARK:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case G.APOSTROPHE:{n.systemId="",this.state=X.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case G.GREATER_THAN_SIGN:{this._err(ye.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.DATA,this.emitCurrentDoctype(n);break}case G.EOF:{this._err(ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ye.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case G.QUOTATION_MARK:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case G.NULL:{this._err(ye.unexpectedNullCharacter),n.systemId+=Kt;break}case G.GREATER_THAN_SIGN:{this._err(ye.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case G.APOSTROPHE:{this.state=X.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case G.NULL:{this._err(ye.unexpectedNullCharacter),n.systemId+=Kt;break}case G.GREATER_THAN_SIGN:{this._err(ye.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case G.SPACE:case G.LINE_FEED:case G.TABULATION:case G.FORM_FEED:break;case G.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.EOF:{this._err(ye.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ye.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=X.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case G.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=X.DATA;break}case G.NULL:{this._err(ye.unexpectedNullCharacter);break}case G.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case G.RIGHT_SQUARE_BRACKET:{this.state=X.CDATA_SECTION_BRACKET;break}case G.EOF:{this._err(ye.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===G.RIGHT_SQUARE_BRACKET?this.state=X.CDATA_SECTION_END:(this._emitChars("]"),this.state=X.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case G.GREATER_THAN_SIGN:{this.state=X.DATA;break}case G.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=X.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(G.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&Zx(this.preprocessor.peek(1))?X.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){Zx(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===G.SEMICOLON&&this._err(ye.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const kR=new Set([_.DD,_.DT,_.LI,_.OPTGROUP,_.OPTION,_.P,_.RB,_.RP,_.RT,_.RTC]),ew=new Set([...kR,_.CAPTION,_.COLGROUP,_.TBODY,_.TD,_.TFOOT,_.TH,_.THEAD,_.TR]),gp=new Set([_.APPLET,_.CAPTION,_.HTML,_.MARQUEE,_.OBJECT,_.TABLE,_.TD,_.TEMPLATE,_.TH]),CG=new Set([...gp,_.OL,_.UL]),IG=new Set([...gp,_.BUTTON]),tw=new Set([_.ANNOTATION_XML,_.MI,_.MN,_.MO,_.MS,_.MTEXT]),nw=new Set([_.DESC,_.FOREIGN_OBJECT,_.TITLE]),NG=new Set([_.TR,_.TEMPLATE,_.HTML]),RG=new Set([_.TBODY,_.TFOOT,_.THEAD,_.TEMPLATE,_.HTML]),kG=new Set([_.TABLE,_.TEMPLATE,_.HTML]),DG=new Set([_.TD,_.TH]);class OG{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=_.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===_.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ie.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const s=this._indexOf(e)+1;this.items.splice(s,0,n),this.tagIDs.splice(s,0,r),this.stackTop++,s===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,s===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ie.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(u1,Ie.HTML)}popUntilTableCellPopped(){this.popUntilPopped(DG,Ie.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(kG,Ie.HTML)}clearBackToTableBodyContext(){this.clearBackTo(RG,Ie.HTML)}clearBackToTableRowContext(){this.clearBackTo(NG,Ie.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===_.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===_.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const s=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case Ie.HTML:{if(s===e)return!0;if(n.has(s))return!1;break}case Ie.SVG:{if(nw.has(s))return!1;break}case Ie.MATHML:{if(tw.has(s))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,gp)}hasInListItemScope(e){return this.hasInDynamicScope(e,CG)}hasInButtonScope(e){return this.hasInDynamicScope(e,IG)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case Ie.HTML:{if(u1.has(n))return!0;if(gp.has(n))return!1;break}case Ie.SVG:{if(nw.has(n))return!1;break}case Ie.MATHML:{if(tw.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Ie.HTML)switch(this.tagIDs[n]){case e:return!0;case _.TABLE:case _.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===Ie.HTML)switch(this.tagIDs[e]){case _.TBODY:case _.THEAD:case _.TFOOT:return!0;case _.TABLE:case _.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Ie.HTML)switch(this.tagIDs[n]){case e:return!0;case _.OPTION:case _.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&kR.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&ew.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&ew.has(this.currentTagId);)this.pop()}}const tE=3;var Ji;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(Ji||(Ji={}));const rw={type:Ji.Marker};class LG{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],s=n.length,o=this.treeAdapter.getTagName(e),u=this.treeAdapter.getNamespaceURI(e);for(let c=0;c<this.entries.length;c++){const d=this.entries[c];if(d.type===Ji.Marker)break;const{element:f}=d;if(this.treeAdapter.getTagName(f)===o&&this.treeAdapter.getNamespaceURI(f)===u){const m=this.treeAdapter.getAttrList(f);m.length===s&&r.push({idx:c,attrs:m})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<tE)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<tE)return;const s=new Map(n.map(u=>[u.name,u.value]));let o=0;for(let u=0;u<r.length;u++){const c=r[u];c.attrs.every(d=>s.get(d.name)===d.value)&&(o+=1,o>=tE&&this.entries.splice(c.idx,1))}}insertMarker(){this.entries.unshift(rw)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:Ji.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Ji.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(rw);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===Ji.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===Ji.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===Ji.Element&&n.element===e)}}const Sa={createDocument(){return{nodeName:"#document",mode:ci.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const s=t.childNodes.find(o=>o.nodeName==="#documentType");if(s)s.name=e,s.publicId=n,s.systemId=r;else{const o={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};Sa.appendChild(t,o)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(Sa.isTextNode(n)){n.value+=e;return}}Sa.appendChild(t,Sa.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&Sa.isTextNode(r)?r.value+=e:Sa.insertBefore(t,Sa.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},DR="html",PG="about:legacy-compat",MG="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",OR=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],BG=[...OR,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],UG=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),LR=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],HG=[...LR,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function iw(t,e){return e.some(n=>t.startsWith(n))}function VG(t){return t.name===DR&&t.publicId===null&&(t.systemId===null||t.systemId===PG)}function zG(t){if(t.name!==DR)return ci.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===MG)return ci.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),UG.has(n))return ci.QUIRKS;let r=e===null?BG:OR;if(iw(n,r))return ci.QUIRKS;if(r=e===null?LR:HG,iw(n,r))return ci.LIMITED_QUIRKS}return ci.NO_QUIRKS}const sw={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},FG="definitionurl",jG="definitionURL",qG=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),YG=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ie.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ie.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ie.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ie.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ie.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ie.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ie.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ie.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ie.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ie.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ie.XMLNS}]]),GG=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),$G=new Set([_.B,_.BIG,_.BLOCKQUOTE,_.BODY,_.BR,_.CENTER,_.CODE,_.DD,_.DIV,_.DL,_.DT,_.EM,_.EMBED,_.H1,_.H2,_.H3,_.H4,_.H5,_.H6,_.HEAD,_.HR,_.I,_.IMG,_.LI,_.LISTING,_.MENU,_.META,_.NOBR,_.OL,_.P,_.PRE,_.RUBY,_.S,_.SMALL,_.SPAN,_.STRONG,_.STRIKE,_.SUB,_.SUP,_.TABLE,_.TT,_.U,_.UL,_.VAR]);function KG(t){const e=t.tagID;return e===_.FONT&&t.attrs.some(({name:r})=>r===Fo.COLOR||r===Fo.SIZE||r===Fo.FACE)||$G.has(e)}function PR(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===FG){t.attrs[e].name=jG;break}}function MR(t){for(let e=0;e<t.attrs.length;e++){const n=qG.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function Q_(t){for(let e=0;e<t.attrs.length;e++){const n=YG.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function XG(t){const e=GG.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=Jl(t.tagName))}function QG(t,e){return e===Ie.MATHML&&(t===_.MI||t===_.MO||t===_.MN||t===_.MS||t===_.MTEXT)}function WG(t,e,n){if(e===Ie.MATHML&&t===_.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===Fo.ENCODING){const s=n[r].value.toLowerCase();return s===sw.TEXT_HTML||s===sw.APPLICATION_XML}}return e===Ie.SVG&&(t===_.FOREIGN_OBJECT||t===_.DESC||t===_.TITLE)}function ZG(t,e,n,r){return(!r||r===Ie.HTML)&&WG(t,e,n)||(!r||r===Ie.MATHML)&&QG(t,e)}const JG="hidden",e$=8,t$=3;var W;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(W||(W={}));const n$={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},BR=new Set([_.TABLE,_.TBODY,_.TFOOT,_.THEAD,_.TR]),aw={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Sa,onParseError:null};class ow{constructor(e,n,r=null,s=null){this.fragmentContext=r,this.scriptHandler=s,this.currentToken=null,this.stopped=!1,this.insertionMode=W.INITIAL,this.originalInsertionMode=W.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...aw,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new wG(this.options,this),this.activeFormattingElements=new LG(this.treeAdapter),this.fragmentContextID=r?Jl(this.treeAdapter.getTagName(r)):_.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new OG(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...aw,...n};e??(e=r.treeAdapter.createElement(ce.TEMPLATE,Ie.HTML,[]));const s=r.treeAdapter.createElement("documentmock",Ie.HTML,[]),o=new this(r,s,e);return o.fragmentContextID===_.TEMPLATE&&o.tmplInsertionModeStack.unshift(W.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var s;if(!this.onParseError)return;const o=(s=e.location)!==null&&s!==void 0?s:n$,u={code:n,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(u)}onItemPush(e,n,r){var s,o;(o=(s=this.treeAdapter).onItemPush)===null||o===void 0||o.call(s,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,s;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(s=(r=this.treeAdapter).onItemPop)===null||s===void 0||s.call(r,e,this.openElements.current),n){let o,u;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,u=this.fragmentContextID):{current:o,currentTagId:u}=this.openElements,this._setContextModes(o,u)}}_setContextModes(e,n){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===Ie.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,Ie.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=W.TEXT}switchToPlaintextParsing(){this.insertionMode=W.TEXT,this.originalInsertionMode=W.IN_BODY,this.tokenizer.state=pn.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===ce.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ie.HTML))switch(this.fragmentContextID){case _.TITLE:case _.TEXTAREA:{this.tokenizer.state=pn.RCDATA;break}case _.STYLE:case _.XMP:case _.IFRAME:case _.NOEMBED:case _.NOFRAMES:case _.NOSCRIPT:{this.tokenizer.state=pn.RAWTEXT;break}case _.SCRIPT:{this.tokenizer.state=pn.SCRIPT_DATA;break}case _.PLAINTEXT:{this.tokenizer.state=pn.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",s=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,s),e.location){const u=this.treeAdapter.getChildNodes(this.document).find(c=>this.treeAdapter.isDocumentTypeNode(c));u&&this.treeAdapter.setNodeSourceCodeLocation(u,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,Ie.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,Ie.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(ce.HTML,Ie.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,_.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const s=this.treeAdapter.getChildNodes(n),o=r?s.lastIndexOf(r):s.length,u=s[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(u)){const{endLine:d,endCol:f,endOffset:m}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(u,{endLine:d,endCol:f,endOffset:m})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(u,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,s=this.treeAdapter.getTagName(e),o=n.type===lt.END_TAG&&s===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,o)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===_.SVG&&this.treeAdapter.getTagName(n)===ce.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ie.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===_.MGLYPH||e.tagID===_.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,Ie.HTML)}_processToken(e){switch(e.type){case lt.CHARACTER:{this.onCharacter(e);break}case lt.NULL_CHARACTER:{this.onNullCharacter(e);break}case lt.COMMENT:{this.onComment(e);break}case lt.DOCTYPE:{this.onDoctype(e);break}case lt.START_TAG:{this._processStartTag(e);break}case lt.END_TAG:{this.onEndTag(e);break}case lt.EOF:{this.onEof(e);break}case lt.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const s=this.treeAdapter.getNamespaceURI(n),o=this.treeAdapter.getAttrList(n);return ZG(e,s,o,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(s=>s.type===Ji.Marker||this.openElements.contains(s.element)),r=n===-1?e-1:n-1;for(let s=r;s>=0;s--){const o=this.activeFormattingElements.entries[s];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=W.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(_.P),this.openElements.popUntilTagNamePopped(_.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case _.TR:{this.insertionMode=W.IN_ROW;return}case _.TBODY:case _.THEAD:case _.TFOOT:{this.insertionMode=W.IN_TABLE_BODY;return}case _.CAPTION:{this.insertionMode=W.IN_CAPTION;return}case _.COLGROUP:{this.insertionMode=W.IN_COLUMN_GROUP;return}case _.TABLE:{this.insertionMode=W.IN_TABLE;return}case _.BODY:{this.insertionMode=W.IN_BODY;return}case _.FRAMESET:{this.insertionMode=W.IN_FRAMESET;return}case _.SELECT:{this._resetInsertionModeForSelect(e);return}case _.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case _.HTML:{this.insertionMode=this.headElement?W.AFTER_HEAD:W.BEFORE_HEAD;return}case _.TD:case _.TH:{if(e>0){this.insertionMode=W.IN_CELL;return}break}case _.HEAD:{if(e>0){this.insertionMode=W.IN_HEAD;return}break}}this.insertionMode=W.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===_.TEMPLATE)break;if(r===_.TABLE){this.insertionMode=W.IN_SELECT_IN_TABLE;return}}this.insertionMode=W.IN_SELECT}_isElementCausesFosterParenting(e){return BR.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case _.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ie.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case _.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return vG[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){DK(this,e);return}switch(this.insertionMode){case W.INITIAL:{hh(this,e);break}case W.BEFORE_HTML:{Oh(this,e);break}case W.BEFORE_HEAD:{Lh(this,e);break}case W.IN_HEAD:{Ph(this,e);break}case W.IN_HEAD_NO_SCRIPT:{Mh(this,e);break}case W.AFTER_HEAD:{Bh(this,e);break}case W.IN_BODY:case W.IN_CAPTION:case W.IN_CELL:case W.IN_TEMPLATE:{HR(this,e);break}case W.TEXT:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case W.IN_TABLE:case W.IN_TABLE_BODY:case W.IN_ROW:{nE(this,e);break}case W.IN_TABLE_TEXT:{YR(this,e);break}case W.IN_COLUMN_GROUP:{yp(this,e);break}case W.AFTER_BODY:{Ep(this,e);break}case W.AFTER_AFTER_BODY:{L0(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){kK(this,e);return}switch(this.insertionMode){case W.INITIAL:{hh(this,e);break}case W.BEFORE_HTML:{Oh(this,e);break}case W.BEFORE_HEAD:{Lh(this,e);break}case W.IN_HEAD:{Ph(this,e);break}case W.IN_HEAD_NO_SCRIPT:{Mh(this,e);break}case W.AFTER_HEAD:{Bh(this,e);break}case W.TEXT:{this._insertCharacters(e);break}case W.IN_TABLE:case W.IN_TABLE_BODY:case W.IN_ROW:{nE(this,e);break}case W.IN_COLUMN_GROUP:{yp(this,e);break}case W.AFTER_BODY:{Ep(this,e);break}case W.AFTER_AFTER_BODY:{L0(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){l1(this,e);return}switch(this.insertionMode){case W.INITIAL:case W.BEFORE_HTML:case W.BEFORE_HEAD:case W.IN_HEAD:case W.IN_HEAD_NO_SCRIPT:case W.AFTER_HEAD:case W.IN_BODY:case W.IN_TABLE:case W.IN_CAPTION:case W.IN_COLUMN_GROUP:case W.IN_TABLE_BODY:case W.IN_ROW:case W.IN_CELL:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:case W.IN_TEMPLATE:case W.IN_FRAMESET:case W.AFTER_FRAMESET:{l1(this,e);break}case W.IN_TABLE_TEXT:{dh(this,e);break}case W.AFTER_BODY:{l$(this,e);break}case W.AFTER_AFTER_BODY:case W.AFTER_AFTER_FRAMESET:{c$(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case W.INITIAL:{h$(this,e);break}case W.BEFORE_HEAD:case W.IN_HEAD:case W.IN_HEAD_NO_SCRIPT:case W.AFTER_HEAD:{this._err(e,ye.misplacedDoctype);break}case W.IN_TABLE_TEXT:{dh(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,ye.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?OK(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case W.INITIAL:{hh(this,e);break}case W.BEFORE_HTML:{d$(this,e);break}case W.BEFORE_HEAD:{p$(this,e);break}case W.IN_HEAD:{Ni(this,e);break}case W.IN_HEAD_NO_SCRIPT:{y$(this,e);break}case W.AFTER_HEAD:{_$(this,e);break}case W.IN_BODY:{ir(this,e);break}case W.IN_TABLE:{Hl(this,e);break}case W.IN_TABLE_TEXT:{dh(this,e);break}case W.IN_CAPTION:{mK(this,e);break}case W.IN_COLUMN_GROUP:{J_(this,e);break}case W.IN_TABLE_BODY:{am(this,e);break}case W.IN_ROW:{om(this,e);break}case W.IN_CELL:{EK(this,e);break}case W.IN_SELECT:{KR(this,e);break}case W.IN_SELECT_IN_TABLE:{bK(this,e);break}case W.IN_TEMPLATE:{vK(this,e);break}case W.AFTER_BODY:{SK(this,e);break}case W.IN_FRAMESET:{xK(this,e);break}case W.AFTER_FRAMESET:{CK(this,e);break}case W.AFTER_AFTER_BODY:{NK(this,e);break}case W.AFTER_AFTER_FRAMESET:{RK(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?LK(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case W.INITIAL:{hh(this,e);break}case W.BEFORE_HTML:{f$(this,e);break}case W.BEFORE_HEAD:{m$(this,e);break}case W.IN_HEAD:{g$(this,e);break}case W.IN_HEAD_NO_SCRIPT:{E$(this,e);break}case W.AFTER_HEAD:{b$(this,e);break}case W.IN_BODY:{sm(this,e);break}case W.TEXT:{sK(this,e);break}case W.IN_TABLE:{od(this,e);break}case W.IN_TABLE_TEXT:{dh(this,e);break}case W.IN_CAPTION:{gK(this,e);break}case W.IN_COLUMN_GROUP:{yK(this,e);break}case W.IN_TABLE_BODY:{c1(this,e);break}case W.IN_ROW:{$R(this,e);break}case W.IN_CELL:{_K(this,e);break}case W.IN_SELECT:{XR(this,e);break}case W.IN_SELECT_IN_TABLE:{TK(this,e);break}case W.IN_TEMPLATE:{AK(this,e);break}case W.AFTER_BODY:{WR(this,e);break}case W.IN_FRAMESET:{wK(this,e);break}case W.AFTER_FRAMESET:{IK(this,e);break}case W.AFTER_AFTER_BODY:{L0(this,e);break}}}onEof(e){switch(this.insertionMode){case W.INITIAL:{hh(this,e);break}case W.BEFORE_HTML:{Oh(this,e);break}case W.BEFORE_HEAD:{Lh(this,e);break}case W.IN_HEAD:{Ph(this,e);break}case W.IN_HEAD_NO_SCRIPT:{Mh(this,e);break}case W.AFTER_HEAD:{Bh(this,e);break}case W.IN_BODY:case W.IN_TABLE:case W.IN_CAPTION:case W.IN_COLUMN_GROUP:case W.IN_TABLE_BODY:case W.IN_ROW:case W.IN_CELL:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:{jR(this,e);break}case W.TEXT:{aK(this,e);break}case W.IN_TABLE_TEXT:{dh(this,e);break}case W.IN_TEMPLATE:{QR(this,e);break}case W.AFTER_BODY:case W.IN_FRAMESET:case W.AFTER_FRAMESET:case W.AFTER_AFTER_BODY:case W.AFTER_AFTER_FRAMESET:{Z_(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===G.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case W.IN_HEAD:case W.IN_HEAD_NO_SCRIPT:case W.AFTER_HEAD:case W.TEXT:case W.IN_COLUMN_GROUP:case W.IN_SELECT:case W.IN_SELECT_IN_TABLE:case W.IN_FRAMESET:case W.AFTER_FRAMESET:{this._insertCharacters(e);break}case W.IN_BODY:case W.IN_CAPTION:case W.IN_CELL:case W.IN_TEMPLATE:case W.AFTER_BODY:case W.AFTER_AFTER_BODY:case W.AFTER_AFTER_FRAMESET:{UR(this,e);break}case W.IN_TABLE:case W.IN_TABLE_BODY:case W.IN_ROW:{nE(this,e);break}case W.IN_TABLE_TEXT:{qR(this,e);break}}}}function r$(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):FR(t,e),n}function i$(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const s=t.openElements.items[r];if(s===e.element)break;t._isSpecialElement(s,t.openElements.tagIDs[r])&&(n=s)}return n||(t.openElements.shortenToLength(Math.max(r,0)),t.activeFormattingElements.removeEntry(e)),n}function s$(t,e,n){let r=e,s=t.openElements.getCommonAncestor(e);for(let o=0,u=s;u!==n;o++,u=s){s=t.openElements.getCommonAncestor(u);const c=t.activeFormattingElements.getElementEntry(u),d=c&&o>=t$;!c||d?(d&&t.activeFormattingElements.removeEntry(c),t.openElements.remove(u)):(u=a$(t,c),r===e&&(t.activeFormattingElements.bookmark=c),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(u,r),r=u)}return r}function a$(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function o$(t,e,n){const r=t.treeAdapter.getTagName(e),s=Jl(r);if(t._isElementCausesFosterParenting(s))t._fosterParentElement(n);else{const o=t.treeAdapter.getNamespaceURI(e);s===_.TEMPLATE&&o===Ie.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function u$(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:s}=n,o=t.treeAdapter.createElement(s.tagName,r,s.attrs);t._adoptNodes(e,o),t.treeAdapter.appendChild(e,o),t.activeFormattingElements.insertElementAfterBookmark(o,s),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,o,s.tagID)}function W_(t,e){for(let n=0;n<e$;n++){const r=r$(t,e);if(!r)break;const s=i$(t,r);if(!s)break;t.activeFormattingElements.bookmark=r;const o=s$(t,s,r.element),u=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(o),u&&o$(t,u,o),u$(t,s,r)}}function l1(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function l$(t,e){t._appendCommentNode(e,t.openElements.items[0])}function c$(t,e){t._appendCommentNode(e,t.document)}function Z_(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],s=t.treeAdapter.getNodeSourceCodeLocation(r);if(s&&!s.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const o=t.openElements.items[1],u=t.treeAdapter.getNodeSourceCodeLocation(o);u&&!u.endTag&&t._setEndLocation(o,e)}}}}function h$(t,e){t._setDocumentType(e);const n=e.forceQuirks?ci.QUIRKS:zG(e);VG(e)||t._err(e,ye.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=W.BEFORE_HTML}function hh(t,e){t._err(e,ye.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,ci.QUIRKS),t.insertionMode=W.BEFORE_HTML,t._processToken(e)}function d$(t,e){e.tagID===_.HTML?(t._insertElement(e,Ie.HTML),t.insertionMode=W.BEFORE_HEAD):Oh(t,e)}function f$(t,e){const n=e.tagID;(n===_.HTML||n===_.HEAD||n===_.BODY||n===_.BR)&&Oh(t,e)}function Oh(t,e){t._insertFakeRootElement(),t.insertionMode=W.BEFORE_HEAD,t._processToken(e)}function p$(t,e){switch(e.tagID){case _.HTML:{ir(t,e);break}case _.HEAD:{t._insertElement(e,Ie.HTML),t.headElement=t.openElements.current,t.insertionMode=W.IN_HEAD;break}default:Lh(t,e)}}function m$(t,e){const n=e.tagID;n===_.HEAD||n===_.BODY||n===_.HTML||n===_.BR?Lh(t,e):t._err(e,ye.endTagWithoutMatchingOpenElement)}function Lh(t,e){t._insertFakeElement(ce.HEAD,_.HEAD),t.headElement=t.openElements.current,t.insertionMode=W.IN_HEAD,t._processToken(e)}function Ni(t,e){switch(e.tagID){case _.HTML:{ir(t,e);break}case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:{t._appendElement(e,Ie.HTML),e.ackSelfClosing=!0;break}case _.TITLE:{t._switchToTextParsing(e,pn.RCDATA);break}case _.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,pn.RAWTEXT):(t._insertElement(e,Ie.HTML),t.insertionMode=W.IN_HEAD_NO_SCRIPT);break}case _.NOFRAMES:case _.STYLE:{t._switchToTextParsing(e,pn.RAWTEXT);break}case _.SCRIPT:{t._switchToTextParsing(e,pn.SCRIPT_DATA);break}case _.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=W.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(W.IN_TEMPLATE);break}case _.HEAD:{t._err(e,ye.misplacedStartTagForHeadElement);break}default:Ph(t,e)}}function g$(t,e){switch(e.tagID){case _.HEAD:{t.openElements.pop(),t.insertionMode=W.AFTER_HEAD;break}case _.BODY:case _.BR:case _.HTML:{Ph(t,e);break}case _.TEMPLATE:{su(t,e);break}default:t._err(e,ye.endTagWithoutMatchingOpenElement)}}function su(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==_.TEMPLATE&&t._err(e,ye.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(_.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,ye.endTagWithoutMatchingOpenElement)}function Ph(t,e){t.openElements.pop(),t.insertionMode=W.AFTER_HEAD,t._processToken(e)}function y$(t,e){switch(e.tagID){case _.HTML:{ir(t,e);break}case _.BASEFONT:case _.BGSOUND:case _.HEAD:case _.LINK:case _.META:case _.NOFRAMES:case _.STYLE:{Ni(t,e);break}case _.NOSCRIPT:{t._err(e,ye.nestedNoscriptInHead);break}default:Mh(t,e)}}function E$(t,e){switch(e.tagID){case _.NOSCRIPT:{t.openElements.pop(),t.insertionMode=W.IN_HEAD;break}case _.BR:{Mh(t,e);break}default:t._err(e,ye.endTagWithoutMatchingOpenElement)}}function Mh(t,e){const n=e.type===lt.EOF?ye.openElementsLeftAfterEof:ye.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=W.IN_HEAD,t._processToken(e)}function _$(t,e){switch(e.tagID){case _.HTML:{ir(t,e);break}case _.BODY:{t._insertElement(e,Ie.HTML),t.framesetOk=!1,t.insertionMode=W.IN_BODY;break}case _.FRAMESET:{t._insertElement(e,Ie.HTML),t.insertionMode=W.IN_FRAMESET;break}case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:case _.NOFRAMES:case _.SCRIPT:case _.STYLE:case _.TEMPLATE:case _.TITLE:{t._err(e,ye.abandonedHeadElementChild),t.openElements.push(t.headElement,_.HEAD),Ni(t,e),t.openElements.remove(t.headElement);break}case _.HEAD:{t._err(e,ye.misplacedStartTagForHeadElement);break}default:Bh(t,e)}}function b$(t,e){switch(e.tagID){case _.BODY:case _.HTML:case _.BR:{Bh(t,e);break}case _.TEMPLATE:{su(t,e);break}default:t._err(e,ye.endTagWithoutMatchingOpenElement)}}function Bh(t,e){t._insertFakeElement(ce.BODY,_.BODY),t.insertionMode=W.IN_BODY,im(t,e)}function im(t,e){switch(e.type){case lt.CHARACTER:{HR(t,e);break}case lt.WHITESPACE_CHARACTER:{UR(t,e);break}case lt.COMMENT:{l1(t,e);break}case lt.START_TAG:{ir(t,e);break}case lt.END_TAG:{sm(t,e);break}case lt.EOF:{jR(t,e);break}}}function UR(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function HR(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function T$(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function v$(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function A$(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,Ie.HTML),t.insertionMode=W.IN_FRAMESET)}function S$(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ie.HTML)}function x$(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&u1.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,Ie.HTML)}function w$(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ie.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function C$(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ie.HTML),n||(t.formElement=t.openElements.current))}function I$(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const s=t.openElements.tagIDs[r];if(n===_.LI&&s===_.LI||(n===_.DD||n===_.DT)&&(s===_.DD||s===_.DT)){t.openElements.generateImpliedEndTagsWithExclusion(s),t.openElements.popUntilTagNamePopped(s);break}if(s!==_.ADDRESS&&s!==_.DIV&&s!==_.P&&t._isSpecialElement(t.openElements.items[r],s))break}t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ie.HTML)}function N$(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ie.HTML),t.tokenizer.state=pn.PLAINTEXT}function R$(t,e){t.openElements.hasInScope(_.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML),t.framesetOk=!1}function k$(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(ce.A);n&&(W_(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function D$(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function O$(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(_.NOBR)&&(W_(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,Ie.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function L$(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function P$(t,e){t.treeAdapter.getDocumentMode(t.document)!==ci.QUIRKS&&t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._insertElement(e,Ie.HTML),t.framesetOk=!1,t.insertionMode=W.IN_TABLE}function VR(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Ie.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function zR(t){const e=NR(t,Fo.TYPE);return e!=null&&e.toLowerCase()===JG}function M$(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Ie.HTML),zR(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function B$(t,e){t._appendElement(e,Ie.HTML),e.ackSelfClosing=!0}function U$(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._appendElement(e,Ie.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function H$(t,e){e.tagName=ce.IMG,e.tagID=_.IMG,VR(t,e)}function V$(t,e){t._insertElement(e,Ie.HTML),t.skipNextNewLine=!0,t.tokenizer.state=pn.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=W.TEXT}function z$(t,e){t.openElements.hasInButtonScope(_.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,pn.RAWTEXT)}function F$(t,e){t.framesetOk=!1,t._switchToTextParsing(e,pn.RAWTEXT)}function uw(t,e){t._switchToTextParsing(e,pn.RAWTEXT)}function j$(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===W.IN_TABLE||t.insertionMode===W.IN_CAPTION||t.insertionMode===W.IN_TABLE_BODY||t.insertionMode===W.IN_ROW||t.insertionMode===W.IN_CELL?W.IN_SELECT_IN_TABLE:W.IN_SELECT}function q$(t,e){t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML)}function Y$(t,e){t.openElements.hasInScope(_.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,Ie.HTML)}function G$(t,e){t.openElements.hasInScope(_.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(_.RTC),t._insertElement(e,Ie.HTML)}function $$(t,e){t._reconstructActiveFormattingElements(),PR(e),Q_(e),e.selfClosing?t._appendElement(e,Ie.MATHML):t._insertElement(e,Ie.MATHML),e.ackSelfClosing=!0}function K$(t,e){t._reconstructActiveFormattingElements(),MR(e),Q_(e),e.selfClosing?t._appendElement(e,Ie.SVG):t._insertElement(e,Ie.SVG),e.ackSelfClosing=!0}function lw(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Ie.HTML)}function ir(t,e){switch(e.tagID){case _.I:case _.S:case _.B:case _.U:case _.EM:case _.TT:case _.BIG:case _.CODE:case _.FONT:case _.SMALL:case _.STRIKE:case _.STRONG:{D$(t,e);break}case _.A:{k$(t,e);break}case _.H1:case _.H2:case _.H3:case _.H4:case _.H5:case _.H6:{x$(t,e);break}case _.P:case _.DL:case _.OL:case _.UL:case _.DIV:case _.DIR:case _.NAV:case _.MAIN:case _.MENU:case _.ASIDE:case _.CENTER:case _.FIGURE:case _.FOOTER:case _.HEADER:case _.HGROUP:case _.DIALOG:case _.DETAILS:case _.ADDRESS:case _.ARTICLE:case _.SEARCH:case _.SECTION:case _.SUMMARY:case _.FIELDSET:case _.BLOCKQUOTE:case _.FIGCAPTION:{S$(t,e);break}case _.LI:case _.DD:case _.DT:{I$(t,e);break}case _.BR:case _.IMG:case _.WBR:case _.AREA:case _.EMBED:case _.KEYGEN:{VR(t,e);break}case _.HR:{U$(t,e);break}case _.RB:case _.RTC:{Y$(t,e);break}case _.RT:case _.RP:{G$(t,e);break}case _.PRE:case _.LISTING:{w$(t,e);break}case _.XMP:{z$(t,e);break}case _.SVG:{K$(t,e);break}case _.HTML:{T$(t,e);break}case _.BASE:case _.LINK:case _.META:case _.STYLE:case _.TITLE:case _.SCRIPT:case _.BGSOUND:case _.BASEFONT:case _.TEMPLATE:{Ni(t,e);break}case _.BODY:{v$(t,e);break}case _.FORM:{C$(t,e);break}case _.NOBR:{O$(t,e);break}case _.MATH:{$$(t,e);break}case _.TABLE:{P$(t,e);break}case _.INPUT:{M$(t,e);break}case _.PARAM:case _.TRACK:case _.SOURCE:{B$(t,e);break}case _.IMAGE:{H$(t,e);break}case _.BUTTON:{R$(t,e);break}case _.APPLET:case _.OBJECT:case _.MARQUEE:{L$(t,e);break}case _.IFRAME:{F$(t,e);break}case _.SELECT:{j$(t,e);break}case _.OPTION:case _.OPTGROUP:{q$(t,e);break}case _.NOEMBED:case _.NOFRAMES:{uw(t,e);break}case _.FRAMESET:{A$(t,e);break}case _.TEXTAREA:{V$(t,e);break}case _.NOSCRIPT:{t.options.scriptingEnabled?uw(t,e):lw(t,e);break}case _.PLAINTEXT:{N$(t,e);break}case _.COL:case _.TH:case _.TD:case _.TR:case _.HEAD:case _.FRAME:case _.TBODY:case _.TFOOT:case _.THEAD:case _.CAPTION:case _.COLGROUP:break;default:lw(t,e)}}function X$(t,e){if(t.openElements.hasInScope(_.BODY)&&(t.insertionMode=W.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function Q$(t,e){t.openElements.hasInScope(_.BODY)&&(t.insertionMode=W.AFTER_BODY,WR(t,e))}function W$(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function Z$(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(_.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(_.FORM):n&&t.openElements.remove(n))}function J$(t){t.openElements.hasInButtonScope(_.P)||t._insertFakeElement(ce.P,_.P),t._closePElement()}function eK(t){t.openElements.hasInListItemScope(_.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(_.LI),t.openElements.popUntilTagNamePopped(_.LI))}function tK(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function nK(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function rK(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function iK(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(ce.BR,_.BR),t.openElements.pop(),t.framesetOk=!1}function FR(t,e){const n=e.tagName,r=e.tagID;for(let s=t.openElements.stackTop;s>0;s--){const o=t.openElements.items[s],u=t.openElements.tagIDs[s];if(r===u&&(r!==_.UNKNOWN||t.treeAdapter.getTagName(o)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=s&&t.openElements.shortenToLength(s);break}if(t._isSpecialElement(o,u))break}}function sm(t,e){switch(e.tagID){case _.A:case _.B:case _.I:case _.S:case _.U:case _.EM:case _.TT:case _.BIG:case _.CODE:case _.FONT:case _.NOBR:case _.SMALL:case _.STRIKE:case _.STRONG:{W_(t,e);break}case _.P:{J$(t);break}case _.DL:case _.UL:case _.OL:case _.DIR:case _.DIV:case _.NAV:case _.PRE:case _.MAIN:case _.MENU:case _.ASIDE:case _.BUTTON:case _.CENTER:case _.FIGURE:case _.FOOTER:case _.HEADER:case _.HGROUP:case _.DIALOG:case _.ADDRESS:case _.ARTICLE:case _.DETAILS:case _.SEARCH:case _.SECTION:case _.SUMMARY:case _.LISTING:case _.FIELDSET:case _.BLOCKQUOTE:case _.FIGCAPTION:{W$(t,e);break}case _.LI:{eK(t);break}case _.DD:case _.DT:{tK(t,e);break}case _.H1:case _.H2:case _.H3:case _.H4:case _.H5:case _.H6:{nK(t);break}case _.BR:{iK(t);break}case _.BODY:{X$(t,e);break}case _.HTML:{Q$(t,e);break}case _.FORM:{Z$(t);break}case _.APPLET:case _.OBJECT:case _.MARQUEE:{rK(t,e);break}case _.TEMPLATE:{su(t,e);break}default:FR(t,e)}}function jR(t,e){t.tmplInsertionModeStack.length>0?QR(t,e):Z_(t,e)}function sK(t,e){var n;e.tagID===_.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function aK(t,e){t._err(e,ye.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function nE(t,e){if(t.openElements.currentTagId!==void 0&&BR.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=W.IN_TABLE_TEXT,e.type){case lt.CHARACTER:{YR(t,e);break}case lt.WHITESPACE_CHARACTER:{qR(t,e);break}}else Id(t,e)}function oK(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,Ie.HTML),t.insertionMode=W.IN_CAPTION}function uK(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Ie.HTML),t.insertionMode=W.IN_COLUMN_GROUP}function lK(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(ce.COLGROUP,_.COLGROUP),t.insertionMode=W.IN_COLUMN_GROUP,J_(t,e)}function cK(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Ie.HTML),t.insertionMode=W.IN_TABLE_BODY}function hK(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(ce.TBODY,_.TBODY),t.insertionMode=W.IN_TABLE_BODY,am(t,e)}function dK(t,e){t.openElements.hasInTableScope(_.TABLE)&&(t.openElements.popUntilTagNamePopped(_.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function fK(t,e){zR(e)?t._appendElement(e,Ie.HTML):Id(t,e),e.ackSelfClosing=!0}function pK(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,Ie.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function Hl(t,e){switch(e.tagID){case _.TD:case _.TH:case _.TR:{hK(t,e);break}case _.STYLE:case _.SCRIPT:case _.TEMPLATE:{Ni(t,e);break}case _.COL:{lK(t,e);break}case _.FORM:{pK(t,e);break}case _.TABLE:{dK(t,e);break}case _.TBODY:case _.TFOOT:case _.THEAD:{cK(t,e);break}case _.INPUT:{fK(t,e);break}case _.CAPTION:{oK(t,e);break}case _.COLGROUP:{uK(t,e);break}default:Id(t,e)}}function od(t,e){switch(e.tagID){case _.TABLE:{t.openElements.hasInTableScope(_.TABLE)&&(t.openElements.popUntilTagNamePopped(_.TABLE),t._resetInsertionMode());break}case _.TEMPLATE:{su(t,e);break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TBODY:case _.TD:case _.TFOOT:case _.TH:case _.THEAD:case _.TR:break;default:Id(t,e)}}function Id(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,im(t,e),t.fosterParentingEnabled=n}function qR(t,e){t.pendingCharacterTokens.push(e)}function YR(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function dh(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)Id(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const GR=new Set([_.CAPTION,_.COL,_.COLGROUP,_.TBODY,_.TD,_.TFOOT,_.TH,_.THEAD,_.TR]);function mK(t,e){const n=e.tagID;GR.has(n)?t.openElements.hasInTableScope(_.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=W.IN_TABLE,Hl(t,e)):ir(t,e)}function gK(t,e){const n=e.tagID;switch(n){case _.CAPTION:case _.TABLE:{t.openElements.hasInTableScope(_.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(_.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=W.IN_TABLE,n===_.TABLE&&od(t,e));break}case _.BODY:case _.COL:case _.COLGROUP:case _.HTML:case _.TBODY:case _.TD:case _.TFOOT:case _.TH:case _.THEAD:case _.TR:break;default:sm(t,e)}}function J_(t,e){switch(e.tagID){case _.HTML:{ir(t,e);break}case _.COL:{t._appendElement(e,Ie.HTML),e.ackSelfClosing=!0;break}case _.TEMPLATE:{Ni(t,e);break}default:yp(t,e)}}function yK(t,e){switch(e.tagID){case _.COLGROUP:{t.openElements.currentTagId===_.COLGROUP&&(t.openElements.pop(),t.insertionMode=W.IN_TABLE);break}case _.TEMPLATE:{su(t,e);break}case _.COL:break;default:yp(t,e)}}function yp(t,e){t.openElements.currentTagId===_.COLGROUP&&(t.openElements.pop(),t.insertionMode=W.IN_TABLE,t._processToken(e))}function am(t,e){switch(e.tagID){case _.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,Ie.HTML),t.insertionMode=W.IN_ROW;break}case _.TH:case _.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(ce.TR,_.TR),t.insertionMode=W.IN_ROW,om(t,e);break}case _.CAPTION:case _.COL:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE,Hl(t,e));break}default:Hl(t,e)}}function c1(t,e){const n=e.tagID;switch(e.tagID){case _.TBODY:case _.TFOOT:case _.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE);break}case _.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE,od(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TD:case _.TH:case _.TR:break;default:od(t,e)}}function om(t,e){switch(e.tagID){case _.TH:case _.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,Ie.HTML),t.insertionMode=W.IN_CELL,t.activeFormattingElements.insertMarker();break}case _.CAPTION:case _.COL:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:case _.TR:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE_BODY,am(t,e));break}default:Hl(t,e)}}function $R(t,e){switch(e.tagID){case _.TR:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE_BODY);break}case _.TABLE:{t.openElements.hasInTableScope(_.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE_BODY,c1(t,e));break}case _.TBODY:case _.TFOOT:case _.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(_.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=W.IN_TABLE_BODY,c1(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:case _.TD:case _.TH:break;default:od(t,e)}}function EK(t,e){const n=e.tagID;GR.has(n)?(t.openElements.hasInTableScope(_.TD)||t.openElements.hasInTableScope(_.TH))&&(t._closeTableCell(),om(t,e)):ir(t,e)}function _K(t,e){const n=e.tagID;switch(n){case _.TD:case _.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=W.IN_ROW);break}case _.TABLE:case _.TBODY:case _.TFOOT:case _.THEAD:case _.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),$R(t,e));break}case _.BODY:case _.CAPTION:case _.COL:case _.COLGROUP:case _.HTML:break;default:sm(t,e)}}function KR(t,e){switch(e.tagID){case _.HTML:{ir(t,e);break}case _.OPTION:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t._insertElement(e,Ie.HTML);break}case _.OPTGROUP:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop(),t._insertElement(e,Ie.HTML);break}case _.HR:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop(),t._appendElement(e,Ie.HTML),e.ackSelfClosing=!0;break}case _.INPUT:case _.KEYGEN:case _.TEXTAREA:case _.SELECT:{t.openElements.hasInSelectScope(_.SELECT)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),e.tagID!==_.SELECT&&t._processStartTag(e));break}case _.SCRIPT:case _.TEMPLATE:{Ni(t,e);break}}}function XR(t,e){switch(e.tagID){case _.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===_.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===_.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===_.OPTGROUP&&t.openElements.pop();break}case _.OPTION:{t.openElements.currentTagId===_.OPTION&&t.openElements.pop();break}case _.SELECT:{t.openElements.hasInSelectScope(_.SELECT)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode());break}case _.TEMPLATE:{su(t,e);break}}}function bK(t,e){const n=e.tagID;n===_.CAPTION||n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR||n===_.TD||n===_.TH?(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),t._processStartTag(e)):KR(t,e)}function TK(t,e){const n=e.tagID;n===_.CAPTION||n===_.TABLE||n===_.TBODY||n===_.TFOOT||n===_.THEAD||n===_.TR||n===_.TD||n===_.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(_.SELECT),t._resetInsertionMode(),t.onEndTag(e)):XR(t,e)}function vK(t,e){switch(e.tagID){case _.BASE:case _.BASEFONT:case _.BGSOUND:case _.LINK:case _.META:case _.NOFRAMES:case _.SCRIPT:case _.STYLE:case _.TEMPLATE:case _.TITLE:{Ni(t,e);break}case _.CAPTION:case _.COLGROUP:case _.TBODY:case _.TFOOT:case _.THEAD:{t.tmplInsertionModeStack[0]=W.IN_TABLE,t.insertionMode=W.IN_TABLE,Hl(t,e);break}case _.COL:{t.tmplInsertionModeStack[0]=W.IN_COLUMN_GROUP,t.insertionMode=W.IN_COLUMN_GROUP,J_(t,e);break}case _.TR:{t.tmplInsertionModeStack[0]=W.IN_TABLE_BODY,t.insertionMode=W.IN_TABLE_BODY,am(t,e);break}case _.TD:case _.TH:{t.tmplInsertionModeStack[0]=W.IN_ROW,t.insertionMode=W.IN_ROW,om(t,e);break}default:t.tmplInsertionModeStack[0]=W.IN_BODY,t.insertionMode=W.IN_BODY,ir(t,e)}}function AK(t,e){e.tagID===_.TEMPLATE&&su(t,e)}function QR(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(_.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):Z_(t,e)}function SK(t,e){e.tagID===_.HTML?ir(t,e):Ep(t,e)}function WR(t,e){var n;if(e.tagID===_.HTML){if(t.fragmentContext||(t.insertionMode=W.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===_.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else Ep(t,e)}function Ep(t,e){t.insertionMode=W.IN_BODY,im(t,e)}function xK(t,e){switch(e.tagID){case _.HTML:{ir(t,e);break}case _.FRAMESET:{t._insertElement(e,Ie.HTML);break}case _.FRAME:{t._appendElement(e,Ie.HTML),e.ackSelfClosing=!0;break}case _.NOFRAMES:{Ni(t,e);break}}}function wK(t,e){e.tagID===_.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==_.FRAMESET&&(t.insertionMode=W.AFTER_FRAMESET))}function CK(t,e){switch(e.tagID){case _.HTML:{ir(t,e);break}case _.NOFRAMES:{Ni(t,e);break}}}function IK(t,e){e.tagID===_.HTML&&(t.insertionMode=W.AFTER_AFTER_FRAMESET)}function NK(t,e){e.tagID===_.HTML?ir(t,e):L0(t,e)}function L0(t,e){t.insertionMode=W.IN_BODY,im(t,e)}function RK(t,e){switch(e.tagID){case _.HTML:{ir(t,e);break}case _.NOFRAMES:{Ni(t,e);break}}}function kK(t,e){e.chars=Kt,t._insertCharacters(e)}function DK(t,e){t._insertCharacters(e),t.framesetOk=!1}function ZR(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==Ie.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function OK(t,e){if(KG(e))ZR(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===Ie.MATHML?PR(e):r===Ie.SVG&&(XG(e),MR(e)),Q_(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function LK(t,e){if(e.tagID===_.P||e.tagID===_.BR){ZR(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===Ie.HTML){t._endTagOutsideForeignContent(e);break}const s=t.treeAdapter.getTagName(r);if(s.toLowerCase()===e.tagName){e.tagName=s,t.openElements.shortenToLength(n);break}}}ce.AREA,ce.BASE,ce.BASEFONT,ce.BGSOUND,ce.BR,ce.COL,ce.EMBED,ce.FRAME,ce.HR,ce.IMG,ce.INPUT,ce.KEYGEN,ce.LINK,ce.META,ce.PARAM,ce.SOURCE,ce.TRACK,ce.WBR;const PK=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,MK=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),cw={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function JR(t,e){const n=GK(t),r=SR("type",{handlers:{root:BK,element:UK,text:HK,comment:t4,doctype:VK,raw:FK},unknown:jK}),s={parser:n?new ow(cw):ow.getFragmentParser(void 0,cw),handle(c){r(c,s)},stitches:!1,options:e||{}};r(t,s),ec(s,hs());const o=n?s.parser.document:s.parser.getFragment(),u=BY(o,{file:s.options.file});return s.stitches&&Y_(u,"comment",function(c,d,f){const m=c;if(m.value.stitch&&f&&d!==void 0){const y=f.children;return y[d]=m.value.stitch,d}}),u.type==="root"&&u.children.length===1&&u.children[0].type===t.type?u.children[0]:u}function e4(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function BK(t,e){e4(t.children,e)}function UK(t,e){qK(t,e),e4(t.children,e),YK(t,e)}function HK(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:lt.CHARACTER,chars:t.value,location:Nd(t)};ec(e,hs(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function VK(t,e){const n={type:lt.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Nd(t)};ec(e,hs(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function zK(t,e){e.stitches=!0;const n=$K(t);if("children"in t&&"children"in n){const r=JR({type:"root",children:t.children},e.options);n.children=r.children}t4({type:"comment",value:{stitch:n}},e)}function t4(t,e){const n=t.value,r={type:lt.COMMENT,data:n,location:Nd(t)};ec(e,hs(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function FK(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,n4(e,hs(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(PK,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function jK(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))zK(n,e);else{let r="";throw MK.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function ec(t,e){n4(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=pn.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function n4(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function qK(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===pn.PLAINTEXT)return;ec(e,hs(t));const r=e.parser.openElements.current;let s="namespaceURI"in r?r.namespaceURI:Ho.html;s===Ho.html&&n==="svg"&&(s=Ho.svg);const o=ZY({...t,children:[]},{space:s===Ho.svg?"svg":"html"}),u={type:lt.START_TAG,tagName:n,tagID:Jl(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in o?o.attrs:[],location:Nd(t)};e.parser.currentToken=u,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function YK(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&aG.includes(n)||e.parser.tokenizer.state===pn.PLAINTEXT)return;ec(e,em(t));const r={type:lt.END_TAG,tagName:n,tagID:Jl(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Nd(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===pn.RCDATA||e.parser.tokenizer.state===pn.RAWTEXT||e.parser.tokenizer.state===pn.SCRIPT_DATA)&&(e.parser.tokenizer.state=pn.DATA)}function GK(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function Nd(t){const e=hs(t)||{line:void 0,column:void 0,offset:void 0},n=em(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function $K(t){return"children"in t?Ul({...t,children:[]}):Ul(t)}function KK(t){return function(e,n){return JR(e,{...t,file:n})}}function XK({explanation:t,onClose:e,isVisible:n}){return n?P.jsxs("div",{className:"h-full flex flex-col",children:[P.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200/50 dark:border-gray-700/50",children:[P.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 flex items-center gap-2",children:[P.jsx("span",{className:"text-blue-500",children:""}),"Explanation"]}),P.jsx("button",{className:`text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 
                             p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700/50 
                             transition-all duration-200 transform hover:scale-105`,onClick:e,title:"Close explanation","aria-label":"Close explanation sidebar",children:P.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:P.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),P.jsx("div",{className:"p-6 overflow-y-auto flex-1 scrollbar-thin",children:t?P.jsxs(P.Fragment,{children:[P.jsx("div",{className:"mb-6",children:P.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 leading-tight",children:t.title})}),P.jsx("div",{className:`prose prose-gray dark:prose-invert max-w-none text-gray-700 dark:text-gray-300
                                      [&>h1]:text-gray-900 [&>h1]:dark:text-gray-100 [&>h1]:text-2xl [&>h1]:font-bold [&>h1]:mb-4 [&>h1]:mt-6
                                      [&>h2]:text-gray-900 [&>h2]:dark:text-gray-100 [&>h2]:text-xl [&>h2]:font-semibold [&>h2]:mb-3 [&>h2]:mt-5
                                      [&>h3]:text-gray-900 [&>h3]:dark:text-gray-100 [&>h3]:text-lg [&>h3]:font-medium [&>h3]:mb-2 [&>h3]:mt-4
                                      [&>p]:text-gray-700 [&>p]:dark:text-gray-300 [&>p]:leading-relaxed [&>p]:mb-4
                                      [&>ul]:text-gray-700 [&>ul]:dark:text-gray-300 [&>ul]:mb-4 [&>ul>li]:mb-2
                                      [&>ol]:text-gray-700 [&>ol]:dark:text-gray-300 [&>ol]:mb-4 [&>ol>li]:mb-2
                                      [&>blockquote]:border-l-4 [&>blockquote]:border-blue-400 [&>blockquote]:pl-4 [&>blockquote]:italic [&>blockquote]:text-gray-600 [&>blockquote]:dark:text-gray-400 [&>blockquote]:bg-blue-50 [&>blockquote]:dark:bg-blue-900/20 [&>blockquote]:py-2 [&>blockquote]:rounded-r-lg
                                      [&>code]:bg-gray-100 [&>code]:dark:bg-gray-800 [&>code]:text-blue-600 [&>code]:dark:text-blue-400 [&>code]:px-2 [&>code]:py-1 [&>code]:rounded [&>code]:text-sm [&>code]:font-medium
                                      [&>pre]:bg-gray-100 [&>pre]:dark:bg-gray-800 [&>pre]:text-gray-800 [&>pre]:dark:text-gray-200 [&>pre]:p-4 [&>pre]:rounded-lg [&>pre]:overflow-x-auto [&>pre]:mb-4 [&>pre]:border [&>pre]:border-gray-200 [&>pre]:dark:border-gray-700`,children:P.jsx(vY,{rehypePlugins:[KK],children:t.text})})]}):P.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 dark:text-gray-400",children:P.jsxs("div",{className:"text-center",children:[P.jsx("div",{className:"text-6xl mb-6 opacity-60",children:""}),P.jsx("p",{className:"text-xl font-medium mb-2",children:"No explanation available"}),P.jsx("p",{className:"text-sm opacity-75",children:"Click on a node to see its explanation"})]})})})]}):null}const r4=Q.createContext(void 0),QK=()=>{const t=Q.useContext(r4);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},WK=({children:t})=>{const[e,n]=Q.useState(()=>{const s=localStorage.getItem("theme");return s||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});Q.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return P.jsx(r4.Provider,{value:{theme:e,toggleTheme:r},children:t})},i4=()=>{const{theme:t,toggleTheme:e}=QK();return P.jsx("button",{onClick:e,className:`p-2.5 rounded-xl bg-gray-200/80 dark:bg-gray-800/80 text-gray-700 dark:text-gray-300 
                     hover:bg-gray-300/80 dark:hover:bg-gray-700/80 border border-gray-300/60 dark:border-gray-700/60
                     hover:border-gray-400/60 dark:hover:border-gray-600/60 transition-all duration-200 
                     focus:outline-none focus:ring-2 focus:ring-indigo-500/30 dark:focus:ring-indigo-400/30
                     backdrop-blur-sm shadow-sm hover:shadow-md`,title:`Switch to ${t==="light"?"dark":"light"} mode`,"aria-label":`Switch to ${t==="light"?"dark":"light"} mode`,children:t==="light"?P.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:P.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})}):P.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:P.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})})})};function ZK({name:t,onSetName:e,user:n,isSaving:r}){const[s,o]=Q.useState(!1),[u,c]=Q.useState(t||"");Q.useEffect(()=>{c(t||"")},[t]);const d=m=>{m.key==="Enter"&&(e(u),o(!1))},f=()=>{o(!0),c(t||"")};return P.jsx(P.Fragment,{children:P.jsx("div",{className:"name bg-gray-900 dark:bg-gray-950 border-b border-gray-700 dark:border-gray-800",children:P.jsx("div",{className:"app-container max-w-7xl mx-auto px-4",children:P.jsxs("header",{className:"app-header flex justify-between items-center py-4",children:[P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsxs("div",{className:"flex items-center space-x-2",children:[P.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:P.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),P.jsx("h1",{className:"text-xl font-bold text-white dark:text-white",children:"TinkFlow"})]}),P.jsx("span",{className:"text-slate-500 dark:text-slate-500 text-sm",children:""}),s?P.jsx("input",{type:"text",value:u,onChange:m=>c(m.target.value),onKeyDown:d,onBlur:()=>{e(u),o(!1)},className:`bg-gray-800 dark:bg-gray-800 border border-white/20 dark:border-white/20 
                                             rounded px-2 py-1 text-slate-100 dark:text-slate-100 text-sm min-w-[120px]
                                             focus:outline-none focus:border-blue-400 dark:focus:border-blue-400`,autoFocus:!0}):P.jsx("button",{onClick:f,className:`bg-transparent border-none text-slate-400 dark:text-slate-400 text-sm cursor-pointer 
                                             px-2 py-1 rounded transition-all duration-150 ease-in-out
                                             hover:bg-white/5 dark:hover:bg-white/5 hover:text-slate-100 dark:hover:text-slate-100`,children:t||"Untitled Board"})]}),P.jsxs("div",{className:"user-info flex items-center gap-3",children:[P.jsx(i4,{}),P.jsx("p",{className:"text-slate-700 dark:text-slate-300 text-sm font-medium",children:n?.isAnonymous?"Guest":n?.email?.split("@")[0]||"User"}),r&&P.jsxs("div",{className:`text-emerald-500 dark:text-emerald-400 text-sm flex items-center gap-2 
                                               bg-emerald-50 dark:bg-emerald-900/20 px-3 py-1.5 rounded-full border border-emerald-200 dark:border-emerald-700/50
                                               animate-pulse`,children:[P.jsx("div",{className:"w-2 h-2 bg-emerald-500 dark:bg-emerald-400 rounded-full animate-bounce"}),P.jsx("span",{className:"font-medium",children:"Saving..."})]})]})]})})})})}const JK=({notification:t,onRemove:e})=>{const n=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":return"";default:return""}},r=s=>{switch(s){case"success":return"bg-green-900/20 dark:bg-green-900/30 border-green-500/30 dark:border-green-500/40 text-green-300 dark:text-green-400";case"error":return"bg-red-900/20 dark:bg-red-900/30 border-red-500/30 dark:border-red-500/40 text-red-300 dark:text-red-400";case"warning":return"bg-yellow-900/20 dark:bg-yellow-900/30 border-yellow-500/30 dark:border-yellow-500/40 text-yellow-300 dark:text-yellow-400";case"info":return"bg-blue-900/20 dark:bg-blue-900/30 border-blue-500/30 dark:border-blue-500/40 text-blue-300 dark:text-blue-400";default:return"bg-gray-900/20 dark:bg-gray-900/30 border-gray-500/30 dark:border-gray-500/40 text-gray-300 dark:text-gray-400"}};return P.jsxs("div",{className:`notification relative min-w-80 max-w-md p-4 rounded-xl border shadow-2xl backdrop-blur-sm                         transform transition-all duration-300 ease-out hover:scale-[1.02] hover:shadow-3xl                        ${r(t.type)}`,children:[" ",P.jsxs("div",{className:"flex items-start gap-3",children:[" ",P.jsxs("span",{className:"text-lg flex-shrink-0 mt-0.5",children:[" ",n(t.type)," "]})," ",P.jsxs("div",{className:"flex-1 min-w-0",children:[" ",P.jsxs("p",{className:"text-sm font-medium leading-5 break-words",children:[" ",t.message," "]})," "]})," ",P.jsxs("button",{onClick:()=>e(t.id),className:"flex-shrink-0 text-gray-400 dark:text-gray-500 hover:text-gray-200 dark:hover:text-gray-300                              hover:bg-gray-700/50 dark:hover:bg-gray-600/50                              rounded-full p-1 transition-all duration-200                              focus:outline-none focus:ring-2 focus:ring-gray-500/20 dark:focus:ring-gray-400/20","aria-label":"Close notification",children:[" ",P.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[" ",P.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})," "]})," "]})," "]})," "]})},eX=({notifications:t,onRemove:e})=>P.jsxs("div",{className:"notification-container fixed top-4 right-4 space-y-3 z-[2000] pointer-events-none",children:[" ",t.map(n=>P.jsxs("div",{className:"pointer-events-auto",children:[" ",P.jsx(JK,{notification:n,onRemove:e})," "]},n.id))," "]});function tX({onLogin:t}){return P.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 antialiased",children:[" "," ",P.jsxs("nav",{className:"bg-white/80 dark:bg-gray-900/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:[" ",P.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",P.jsxs("div",{className:"flex justify-between items-center py-4",children:[" ",P.jsxs("div",{className:"flex items-center space-x-3",children:[" ",P.jsxs("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",P.jsx("span",{className:"text-white font-bold text-lg",children:"T"})," "]})," ",P.jsxs("div",{className:"flex flex-col",children:[" ",P.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white tracking-tight",children:"TinkFlow"})," ",P.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-medium",children:"AI Learning Platform"})," "]})," "]})," ",P.jsxs("div",{className:"flex items-center gap-4",children:[" ",P.jsx(i4,{})," ",P.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors duration-200",children:[" ","Get Started"," "]})," "]})," "]})," "]})," "]})," "," ",P.jsxs("section",{className:"relative overflow-hidden",children:[" ",P.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-20 pb-32",children:[" ",P.jsxs("div",{className:"text-center",children:[" ",P.jsxs("div",{className:"inline-flex items-center gap-2 bg-indigo-50 dark:bg-indigo-900/20 px-4 py-2 rounded-full mb-8",children:[" ",P.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"})," ",P.jsx("span",{className:"text-indigo-600 dark:text-indigo-400 font-medium text-sm",children:"AI-Powered Concept Learning"})," "]})," ",P.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-6 leading-tight",children:[" ","Learn & Tinker with"," ",P.jsxs("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent block",children:[" ","AI-Powered Concepts"," "]})," "]})," ",P.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10 max-w-3xl mx-auto leading-relaxed",children:[" ","TinkFlow is the ultimate AI-powered platform for exploring, understanding, and experimenting with new concepts. Transform your learning journey with interactive visual flows and intelligent insights."," "]})," ",P.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[" ",P.jsxs("button",{onClick:t,className:"px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning Now"," "]})," ",P.jsxs("button",{className:"px-8 py-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-xl font-semibold text-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-all duration-200",children:[" ","Watch Demo"," "]})," "]})," "]})," "]})," "," ",P.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-full opacity-10 blur-3xl"})," ",P.jsx("div",{className:"absolute top-1/4 right-1/4 w-64 h-64 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full opacity-10 blur-2xl"})," "]})," "," ",P.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",P.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",P.jsxs("div",{className:"text-center mb-16",children:[" ",P.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Everything You Need to Learn"," "]})," ",P.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","AI-powered tools and features designed to accelerate your learning and conceptual understanding"," "]})," "]})," ",P.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",P.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/20 dark:to-indigo-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-indigo-200 dark:border-indigo-700/50 hover:transform hover:-translate-y-1",children:[" ",P.jsxs("div",{className:"w-14 h-14 bg-indigo-500 rounded-xl flex items-center justify-center mb-6",children:[" ",P.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})," "]})," "]})," ",P.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI-Powered Insights"," "]})," ",P.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Get intelligent explanations and connections between concepts powered by advanced AI that understands your learning style."," "]})," "]})," ",P.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-purple-200 dark:border-purple-700/50 hover:transform hover:-translate-y-1",children:[" ",P.jsxs("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center mb-6",children:[" ",P.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m-6 3l6-3"})," "]})," "]})," ",P.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Interactive Visual Flows"," "]})," ",P.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Build and explore concept maps with interactive nodes that respond to your curiosity and create dynamic learning pathways."," "]})," "]})," ",P.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 p-8 rounded-2xl hover:shadow-lg transition-all duration-200 border border-green-200 dark:border-green-700/50 hover:transform hover:-translate-y-1",children:[" ",P.jsxs("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center mb-6",children:[" ",P.jsxs("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[" ",P.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})," "]})," "]})," ",P.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Experimentation Sandbox"," "]})," ",P.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Tinker with concepts in a safe, guided environment where you can test ideas and see instant results with AI feedback."," "]})," "]})," "]})," "]})," "]})," "," ",P.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",P.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",P.jsxs("div",{className:"text-center mb-16",children:[" ",P.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","How TinkFlow Works"," "]})," ",P.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Three simple steps to unlock your learning potential with AI-powered concept exploration"," "]})," "]})," ",P.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[" ",P.jsxs("div",{className:"text-center",children:[" ",P.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",P.jsx("span",{className:"text-white font-bold text-xl",children:"1"})," "]})," ",P.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Input Your Concept"," "]})," ",P.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Start by entering any topic, question, or concept you want to explore. Our AI understands context and complexity."," "]})," "]})," ",P.jsxs("div",{className:"text-center",children:[" ",P.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",P.jsx("span",{className:"text-white font-bold text-xl",children:"2"})," "]})," ",P.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","AI Generates Flow"," "]})," ",P.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Watch as TinkFlow creates an interactive visual map with connected nodes, each representing key aspects of your concept."," "]})," "]})," ",P.jsxs("div",{className:"text-center",children:[" ",P.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-6",children:[" ",P.jsx("span",{className:"text-white font-bold text-xl",children:"3"})," "]})," ",P.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-3",children:[" ","Explore & Learn"," "]})," ",P.jsxs("p",{className:"text-gray-600 dark:text-gray-300 leading-relaxed",children:[" ","Click on any node to dive deeper, ask questions, and watch new connections emerge as you explore your learning path."," "]})," "]})," "]})," "]})," "]})," "," ",P.jsxs("section",{className:"py-20 bg-gradient-to-r from-indigo-500 to-purple-600",children:[" ",P.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",P.jsxs("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[" ",P.jsxs("div",{className:"text-white",children:[" ",P.jsx("div",{className:"text-4xl font-bold mb-2",children:"10K+"})," ",P.jsx("div",{className:"text-indigo-100",children:"Concepts Explored"})," "]})," ",P.jsxs("div",{className:"text-white",children:[" ",P.jsx("div",{className:"text-4xl font-bold mb-2",children:"5K+"})," ",P.jsx("div",{className:"text-indigo-100",children:"Active Learners"})," "]})," ",P.jsxs("div",{className:"text-white",children:[" ",P.jsx("div",{className:"text-4xl font-bold mb-2",children:"98%"})," ",P.jsx("div",{className:"text-indigo-100",children:"Learning Success"})," "]})," ",P.jsxs("div",{className:"text-white",children:[" ",P.jsx("div",{className:"text-4xl font-bold mb-2",children:"24/7"})," ",P.jsx("div",{className:"text-indigo-100",children:"AI Support"})," "]})," "]})," "]})," "]})," "," ",P.jsxs("section",{className:"py-20 bg-white dark:bg-gray-800",children:[" ",P.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",P.jsxs("div",{className:"text-center mb-16",children:[" ",P.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:[" ","Perfect for Every Learning Style"," "]})," ",P.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",children:[" ","Whether you're a student, researcher, or curious mind, TinkFlow adapts to your learning needs"," "]})," "]})," ",P.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[" ",P.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/10 dark:to-blue-800/10 p-8 rounded-2xl border border-blue-200 dark:border-blue-700/30",children:[" ",P.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Academic Learning"," "]})," ",P.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Break down complex academic subjects into digestible, interconnected concepts. Perfect for studying sciences, humanities, and technical topics."," "]})," ",P.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",P.jsx("li",{children:" Research paper analysis"})," ",P.jsx("li",{children:" Concept mapping for exams"})," ",P.jsx("li",{children:" Cross-disciplinary connections"})," "]})," "]})," ",P.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/10 dark:to-purple-800/10 p-8 rounded-2xl border border-purple-200 dark:border-purple-700/30",children:[" ",P.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Creative Exploration"," "]})," ",P.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Explore ideas, brainstorm solutions, and discover unexpected connections. Great for creative professionals and innovators."," "]})," ",P.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",P.jsx("li",{children:" Idea generation workflows"})," ",P.jsx("li",{children:" Problem-solving frameworks"})," ",P.jsx("li",{children:" Innovation mapping"})," "]})," "]})," ",P.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/10 dark:to-green-800/10 p-8 rounded-2xl border border-green-200 dark:border-green-700/30",children:[" ",P.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Technical Deep Dives"," "]})," ",P.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Understand complex systems, architectures, and technologies through interactive exploration and AI-guided explanations."," "]})," ",P.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",P.jsx("li",{children:" System architecture learning"})," ",P.jsx("li",{children:" Technology stack exploration"})," ",P.jsx("li",{children:" Code concept mapping"})," "]})," "]})," ",P.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/10 dark:to-orange-800/10 p-8 rounded-2xl border border-orange-200 dark:border-orange-700/30",children:[" ",P.jsxs("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:[" "," Professional Development"," "]})," ",P.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:[" ","Build skills, understand industry trends, and create learning paths for career advancement with AI-powered insights."," "]})," ",P.jsxs("ul",{className:"space-y-2 text-gray-600 dark:text-gray-300",children:[" ",P.jsx("li",{children:" Skill gap analysis"})," ",P.jsx("li",{children:" Career pathway planning"})," ",P.jsx("li",{children:" Industry trend mapping"})," "]})," "]})," "]})," "]})," "]})," "," ",P.jsxs("section",{className:"py-20 bg-gray-50 dark:bg-gray-900",children:[" ",P.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[" ",P.jsxs("h2",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-6",children:[" ","Ready to Transform Your Learning?"," "]})," ",P.jsxs("p",{className:"text-xl text-gray-600 dark:text-gray-300 mb-10",children:[" ","Join thousands of learners who are already exploring concepts in revolutionary ways with TinkFlow's AI-powered platform."," "]})," ",P.jsxs("button",{onClick:t,className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white px-12 py-4 rounded-xl text-lg font-semibold hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[" ","Start Learning for Free"," "]})," ",P.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:[" ","No credit card required  Get started in seconds"," "]})," "]})," "]})," "," ",P.jsxs("footer",{className:"bg-gray-900 text-white py-12",children:[" ",P.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[" ",P.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[" ",P.jsxs("div",{className:"col-span-1",children:[" ",P.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[" ",P.jsxs("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center",children:[" ",P.jsx("span",{className:"text-white font-bold text-sm",children:"T"})," "]})," ",P.jsx("span",{className:"text-xl font-bold",children:"TinkFlow"})," "]})," ",P.jsxs("p",{className:"text-gray-400 text-sm",children:[" ","AI-powered concept learning platform for curious minds."," "]})," "]})," ",P.jsxs("div",{children:[" ",P.jsx("h4",{className:"font-semibold mb-4",children:"Product"})," ",P.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",P.jsx("li",{children:P.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Features"})})," ",P.jsx("li",{children:P.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Pricing"})})," ",P.jsx("li",{children:P.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})})," "]})," "]})," ",P.jsxs("div",{children:[" ",P.jsx("h4",{className:"font-semibold mb-4",children:"Resources"})," ",P.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",P.jsx("li",{children:P.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Documentation"})})," ",P.jsx("li",{children:P.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Tutorials"})})," ",P.jsx("li",{children:P.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Blog"})})," "]})," "]})," ",P.jsxs("div",{children:[" ",P.jsx("h4",{className:"font-semibold mb-4",children:"Company"})," ",P.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[" ",P.jsx("li",{children:P.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"About"})})," ",P.jsx("li",{children:P.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})})," ",P.jsx("li",{children:P.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"})})," "]})," "]})," "]})," ",P.jsxs("div",{className:"border-t border-gray-800 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[" ",P.jsxs("p",{className:"text-gray-400 text-sm",children:[" "," 2024 TinkFlow. All rights reserved."," "]})," ",P.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[" ",P.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",P.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",P.jsx("path",{d:"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"})," "]})," "]})," ",P.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",P.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",P.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"})," "]})," "]})," ",P.jsxs("a",{href:"#",className:"text-gray-400 hover:text-white transition-colors",children:[" ",P.jsxs("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:[" ",P.jsx("path",{d:"M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.747.099.12.112.225.085.344-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.001 12.017z"})," "]})," "]})," "]})," "]})," "]})," "]})," "]})}const nX=async()=>{try{await IH(pp),console.log("User signed out successfully")}catch(t){throw console.error("Error signing out:",t),t}},rX=()=>{const[t,e]=Q.useState(null);return Q.useEffect(()=>{const r=CH(pp,s=>{e(s),s?console.log("User signed in:",s.uid):console.log("No user signed in")});return()=>r()},[]),{user:t,signOut:async()=>{try{await nX(),e(null)}catch(r){console.error("Error in sign out:",r)}}}},s4=t=>!!(t&&t.uid),Uh=[{id:"1",type:"staticEditable",data:{label:"The _artificial intelligence_ system processes _natural language_ effectively",title:"AI & Natural Language",suggestions:["Machine Learning","Neural Networks","Deep Learning"],tokenColors:{},previousNode:null},position:{x:250,y:25},draggable:!1}],wl=[],iX=async t=>{if(!s4({uid:t}))throw new Error(lr.AUTH_REQUIRED);try{const e=a_(Ci,Yr.BOARDS),n=gU(e,yU("userId","==",t),EU("createdAt","desc")),r=await E_(n);if(r.empty){const o={id:`board_${Date.now()}`,userId:t,name:"Default Board",createdAt:Yt.now(),isOpen:!0};return await __(Gl(Ci,Yr.BOARDS,o.id),o),console.log("Created default board:",o),[o]}const s=r.docs.map(o=>({id:o.id,...o.data()}));return console.log("Fetched all boards:",s),s}catch(e){if(console.error("Fetch all boards error:",e),e.code==="failed-precondition"||e.message?.includes("requires an index")){const n=`
Firestore database index is missing. To fix this:

1. Visit the Firebase Console: https://console.firebase.google.com/
2. Navigate to your project
3. Go to Firestore Database > Indexes
4. Create a composite index for collection "boards" with:
   - Field: userId (Ascending)
   - Field: createdAt (Descending)

Or click this direct link if available in the error logs above.

Using fallback board data for now...
            `.trim();return console.warn(n),[{id:`fallback_${Date.now()}`,userId:t,name:"Fallback Board (Create Index)",createdAt:Yt.now(),isOpen:!0,isFallback:!0}]}throw new Error(lr.LOAD_FAILED)}},hw=async t=>{if(!t)return console.warn("No board ID provided for fetching nodes"),Uh;try{const e=a_(Ci,Yr.BOARDS,t,Yr.NODES),n=await E_(e);if(n.empty)return console.log("No nodes found for board, using initial nodes"),Uh;const r=n.docs.map(s=>{const o=s.data(),u={...o.data,tokenColors:o.data?.tokenColors||{},previousNode:o.data?.previousNode||null};return{id:s.id,type:o.type,position:o.position,data:u,draggable:o.draggable,style:o.style}});return console.log("Fetched nodes from board:",r),r}catch(e){return console.error("Fetch nodes error:",e),Uh}},dw=async t=>{if(!t)return console.warn("No board ID provided for fetching edges"),wl;try{const e=a_(Ci,Yr.BOARDS,t,Yr.EDGES),n=await E_(e);if(n.empty)return console.log("No edges found for board, using initial edges"),wl;const r=n.docs.map(s=>({id:s.id,...s.data()}));return console.log("Fetched edges from board:",r),r}catch(e){return console.error("Fetch edges error:",e),wl}},sX=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving nodes:",{boardId:t,nodesCount:e?.length});return}try{const n=GN(Ci);e.forEach(r=>{const s=Gl(Ci,Yr.BOARDS,t,Yr.NODES,r.id),o={type:r.type,data:r.data,position:r.position,updatedAt:Yt.now()};r.draggable!=null&&(o.draggable=r.draggable),r.style!=null&&(o.style=r.style),n.set(s,o)}),await n.commit(),console.log("Nodes saved to board")}catch(n){throw console.error("Save nodes error:",n),new Error(lr.SAVE_FAILED)}},aX=async(t,e)=>{if(!t||!e?.length){console.warn("Invalid parameters for saving edges:",{boardId:t,edgesCount:e?.length});return}try{const n=GN(Ci);e.forEach(r=>{const s=Gl(Ci,Yr.BOARDS,t,Yr.EDGES,r.id),o={source:r.source,target:r.target,updatedAt:Yt.now()};r.sourceHandle!=null&&(o.sourceHandle=r.sourceHandle),r.targetHandle!=null&&(o.targetHandle=r.targetHandle),r.style!=null&&(o.style=r.style),r.markerEnd!=null&&(o.markerEnd=r.markerEnd),n.set(s,o)}),await n.commit(),console.log("Edges saved to board")}catch(n){throw console.error("Save edges error:",n),new Error(lr.SAVE_FAILED)}},oX=async(t,e,n)=>{if(!s4({uid:t}))throw new Error(lr.AUTH_REQUIRED);try{const r={id:`board_${Date.now()}`,userId:t,name:e||`Board ${n.length+1}`,createdAt:Yt.now(),isOpen:!1};return console.log("Creating board:",r),await __(Gl(Ci,Yr.BOARDS,r.id),r),console.log("Board created successfully:",r),r}catch(r){throw console.error("Error creating new board:",r),r.code==="permission-denied"?new Error("Permission denied. Please check your Firestore security rules."):r.code==="failed-precondition"?new Error("Database configuration error. Please check Firestore setup."):new Error("Failed to create board. Please try again.")}},uX=async t=>{if(!t)throw new Error("Board ID is required for deletion");try{await SU(Gl(Ci,Yr.BOARDS,t)),console.log("Board deleted successfully")}catch(e){throw console.error("Error deleting board:",e),e.code==="permission-denied"?new Error("Permission denied. Cannot delete this board."):e}},il=async(t,e)=>{if(!t||!e)throw new Error("Board ID and updates are required");try{const n={...e,updatedAt:Yt.now()};await __(Gl(Ci,Yr.BOARDS,t),n,{merge:!0}),console.log("Board status updated:",n)}catch(n){throw console.error("Error updating board status:",n),n}},lX=t=>{if(!t||!t.data)return t;const e={...t},n={...t.data};return n.title||(n.title=n.label||n.summary||"Node"),n.suggestions||(n.suggestions=[]),e.draggable===void 0&&(e.draggable=!0),e.data=n,e},cX=t=>Array.isArray(t)?t.map(lX):[],hX=(t,e={})=>{const[n,r,s]=xP([]),[o,u,c]=wP([]),[d,f]=Q.useState(!0),[m,y]=Q.useState(!1),[b,T]=Q.useState(!1),[w,I]=Q.useState([]),[L,k]=Q.useState(null),q=Q.useRef(null),{showSuccess:$,showError:j,showInfo:te}=e,Y=C=>{const O=C.find(K=>K.isOpen===!0);if(O)return O;if(C.length>0){const K={...C[0],isOpen:!0};return il(K.id,K).catch(console.error),K}return null};Q.useEffect(()=>{(async()=>{if(t)try{f(!0);const O=await iX(t.uid);I(O);const K=O.some(re=>re.isFallback);K&&j&&j("Database index missing. Please create the required Firestore index. Check console for details.");const z=Y(O);if(!z){console.error("No board found for user"),j&&j("No boards found. Creating a default board..."),r(Uh),u(wl);return}k(z);const[J,se]=await Promise.all([hw(z.id),dw(z.id)]);r(J),u(se),te&&!K&&te("Board loaded successfully!")}catch(O){console.error("Error loading initial data:",O),j&&j("Failed to load board data. Using default board."),r(Uh),u(wl)}finally{f(!1)}})()},[t,r,u]);const M=async(C,O,K)=>{q.current&&clearTimeout(q.current);const z=setTimeout(async()=>{try{T(!0);const J=[];O&&O.length>0&&J.push(sX(C,O)),K&&K.length>0&&J.push(aX(C,K)),J.length>0&&(await Promise.all(J),console.log("Auto-save completed successfully"))}catch(J){console.error("Auto-save failed:",J),j&&j("Failed to save changes automatically")}finally{T(!1),q.current=null}},1e3);q.current=z};Q.useEffect(()=>(!d&&L&&!m&&!L.isFallback&&M(L.id,n,o),()=>{q.current&&clearTimeout(q.current)}),[n,o,d,L,m]);const N=async C=>{try{if(L?.id===C)return;if(L?.isFallback||w.find(K=>K.id===C)?.isFallback){j&&j("Cannot switch to fallback board. Please create the missing Firestore index first.");return}if(y(!0),L&&!L.isFallback){const K={...L,isOpen:!1};await il(L.id,K),I(z=>z.map(J=>J.id===L.id?K:J))}const O=w.find(K=>K.id===C);if(O){const K={...O,isOpen:!0};await il(C,K),k(K),I(re=>re.map(A=>A.id===C?K:A));const[z,J]=await Promise.all([hw(C),dw(C)]),se=cX(z);r(se),u(J),$&&$(`Switched to "${K.name}"`)}else console.error("Board not found:",C),j&&j("Board not found")}catch(O){console.error("Error switching board:",O),j&&j("Failed to switch board. Please try again.")}finally{y(!1)}};return{nodes:n,edges:o,allBoards:w,currentBoard:L,isLoading:d,isSwitchingBoard:m,isSaving:b,onNodesChange:s,onEdgesChange:c,setNodes:r,switchToBoard:N,createNewBoard:async C=>{try{if(!t)return j&&j("You must be logged in to create a board"),null;te&&te("Creating new board...");const O=await oX(t.uid,C||null,w);if(O){if(L&&!L.isFallback){const z={...L,isOpen:!1};il(L.id,z).catch(console.error)}const K={...O,isOpen:!0};return I(z=>{const J=z.map(se=>se.id===L?.id?{...se,isOpen:!1}:se);return[K,...J]}),k(K),il(O.id,K).catch(console.error),r([{id:"1",type:"staticEditable",data:{label:C||"New Board"},position:{x:250,y:25},draggable:!1}]),u(wl),$&&$(`Board "${O.name}" created and opened!`),K}else return j&&j("Failed to create board. Please try again."),null}catch(O){return j&&j(`Failed to create board: ${O.message}`),null}},deleteBoard:async C=>{try{if(w.length<=1){j&&j("Cannot delete the last board!");return}if(!w.find(K=>K.id===C)){console.error("Board not found for deletion"),j&&j("Board not found");return}if(te&&te("Deleting board..."),L?.id===C){const K=w.find(z=>z.id!==C);K&&await N(K.id)}await uX(C),I(K=>K.filter(z=>z.id!==C)),$&&$("Board deleted successfully!")}catch(O){console.error("Error deleting board:",O),j&&j("Failed to delete board. Please try again.")}},updateBoardName:async C=>{if(L&&L.name!==C){const O={...L,name:C};k(O),I(K=>K.map(z=>z.id===L.id?O:z));try{await il(L.id,O),console.log("Board name updated successfully")}catch(K){console.error("Error updating board name:",K)}}},clearBoardState:()=>{q.current&&(clearTimeout(q.current),q.current=null),I([]),k(null),r([]),u([]),f(!0),y(!1),T(!1)}}},dX=()=>{const[t,e]=Q.useState([]),n=f=>{e(m=>m.filter(y=>y.id!==f))},r=f=>{const m=Date.now().toString(),y={id:m,timestamp:new Date,...f};return e(b=>[...b,y]),f.autoRemove!==!1&&setTimeout(()=>{n(m)},f.duration||5e3),m};return{notifications:t,addNotification:r,removeNotification:n,clearAllNotifications:()=>{e([])},showSuccess:(f,m={})=>r({type:"success",message:f,...m}),showError:(f,m={})=>r({type:"error",message:f,duration:7e3,...m}),showInfo:(f,m={})=>r({type:"info",message:f,...m}),showWarning:(f,m={})=>r({type:"warning",message:f,duration:6e3,...m})}},a4=t=>{const e=[],n=t.split("_");for(let r=0;r<n.length;r++)if(r%2===0)n[r].split(/\s+/).filter(o=>o.trim()!=="").forEach(o=>{e.push({word:o.trim()})});else{const s=n[r].trim();s.split(/\s+/).filter(u=>u.trim()!=="").forEach(u=>{e.push({word:u.trim(),myConcept:s})})}return e},fw=()=>{const t=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return t[Math.floor(Math.random()*t.length)]},P0=t=>{if(!t)return"#000000";const e=parseInt(t.substring(1,3),16),n=parseInt(t.substring(3,5),16),r=parseInt(t.substring(5,7),16);return(e*299+n*587+r*114)/1e3>=128?"#000000":"#ffffff"},M0=(t,e)=>{if(!t)return"#000000";let n=t.startsWith("#")?t.substring(1):t;const r=parseInt(n,16),s=255,o=e,u=r>>16,c=r>>8&255,d=r&255,f=Math.round((s-u)*o)+u,m=Math.round((s-c)*o)+c,y=Math.round((s-d)*o)+d;return`#${(16777216+f*65536+m*256+y).toString(16).slice(1)}`},fX=t=>{const e=t.replace("#",""),n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16),o=30,u=Math.min(255,Math.max(0,n+(Math.random()-.5)*o*2)),c=Math.min(255,Math.max(0,r+(Math.random()-.5)*o*2)),d=Math.min(255,Math.max(0,s+(Math.random()-.5)*o*2));return`#${Math.round(u).toString(16).padStart(2,"0")}${Math.round(c).toString(16).padStart(2,"0")}${Math.round(d).toString(16).padStart(2,"0")}`},pX=t=>{const r=(Math.random()-.5)*150*2;return{x:t.x+r,y:t.y+200}},mX=()=>`node_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,gX=(t,e)=>`edge_${t}_${e}`,yX=(t,e,n,r,s,o,u)=>({id:mX(),type:"draggableEditable",position:t,draggable:!0,data:{label:e,title:e,summary:r,full_text:n,suggestions:[],myColor:s,tokenColors:{},previousNode:u}}),EX=(t,e,n,r)=>({id:gX(t,e),source:t,target:e,sourceHandle:r,targetHandle:null,style:{stroke:n,strokeWidth:3},markerEnd:{type:Yh.ArrowClosed,color:n}}),pw=async t=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const e=t.trim();if(!e)throw new Error("Message cannot be empty or just whitespace");const r=await R3(D_,"groqChat")({message:e});return console.log("groqChat response:",r.data),r.data.response}catch(e){throw console.error("Firebase function error:",e),console.error("Message sent:",t),e}},_X=async(t,e)=>{try{if(!t||typeof t!="string")throw new Error("Message must be a non-empty string");const n=t.trim();if(!n)throw new Error("Message cannot be empty or just whitespace");const r=R3(D_,"groqChat");console.log("Starting streaming request...");const{stream:s,data:o}=await r.stream({message:n});console.log("Stream started, waiting for chunks...");let u="";for await(const d of s)if(console.log("Received chunk:",d),d&&typeof d=="object"&&"type"in d&&"content"in d){const f=d;console.log("Processing chunk:",f),f.type==="chunk"&&f.content&&(u+=f.content,e?.(f.content))}console.log("Waiting for final result...");const c=await o;return console.log("Final result received:",c),c&&typeof c=="object"&&"response"in c?(console.log("Returning final result response"),c.response):(console.log("Returning accumulated response:",u),u)}catch(n){throw console.error("Firebase function streaming error:",n),n}},bX=async(t,e,n)=>{try{const r=`You are an expert educator. Explain the following concept to a beginner.

        Context: ${e}

        Instructions:
        - Highlight every key term with [square-braces], e.g., [variable].
        - Use simple language and practical examples or analogies.
        - Use only correct HTML or MARKDOWN for all formatting (headings, lists, tables, images, code).
        - All HTML elements (including headings, lists, tables, images, code) MUST use inline CSS for styling.
        - For inline CSS, use: <span style="color:#fff;background:#222;padding:4px;border-radius:4px;">example</span>
        - For images: <img src="IMAGE_URL" alt="desc" style="max-width:100%;border-radius:8px;">
        - For code: <pre style="background:#222;color:#fff;padding:8px;border-radius:6px;"><code>console.log("Hello World");</code></pre>
        - For tables: <table style="border-collapse:collapse;width:100%;"><tr><th style="background:#222;color:#fff;padding:6px;">Header</th></tr><tr><td style="padding:6px;">Data</td></tr></table>
        - For lists: <ul style="padding-left:20px;"><li style="margin-bottom:4px;">Item 1</li></ul>
        - No introductions, conclusions, or extra commentary.
        - Start directly with the explanation.

        Concept: `,s=`Summarize in exactly 40 words or less.

        CRITICAL:
        - Preserve ALL [square-braces] concepts exactly
        - Every key concept MUST use [square-braces]
        - NO introductory phrases like "Here is..." or "Summary..."
        - NO bullet points or formatting except [square-braces]
        - Start immediately with summary content
        - ONLY the summary text

        Text to summarize: `,o=`You are an expert educator. Respond ONLY with a valid JSON object in the following format: {"topics": ["[concept1]", "[concept2]", "[concept3]"]}. 

        Instructions:
        - Suggest exactly 3 topics that are logical next steps for learning the given concept.
        - Each topic must be no more than 5 words.
        - Each topic MUST be enclosed in double quotes, e.g., "example topic".
        - Do NOT include any explanation, commentary, or formatting outside the JSON object.
        - Only output the JSON object as specified.

        Concept: `,u=pw(r+t),c=pw(o+t);let d="";const f=_X(s+t,k=>{d+=k,n(k)}),[m,y,b]=await Promise.all([u,c,f]);let T=y??"";T=T.replace(/^```json\s*/i,"").replace(/^```\s*/i,"").replace(/```$/i,"");let w=[];const I=T.match(/"(.*?)"/g);I&&(w=I.map(k=>k.replace(/"/g,"")));const L={firstResponse:{response:m?.replace(/\[/g,"_").replace(/\]/g,"_").replace(/```/g,"").replace(/markdown/g,"")},secondResponse:{response:b?.replace(/\[/g,"_").replace(/\]/g,"_").replace(/Here is a summary of the text in exactly 40 words or less:/g,"").replace("/Here is a summary of the text in 40 words or less:/g","")},thirdResponse:{response:w}};return console.log("askAITwice response:",L),L}catch(r){throw console.error("Error in askAITwice:",r),r}},o4=Q.createContext(null),TX=({children:t,nodes:e,onNodesChange:n,onEdgesChange:r,setNodes:s,showExplanation:o})=>{const u=(c,d,f,m,y,b,T)=>{const w=e.find(Y=>Y.id===d);if(!w)return null;const I=w.data.tokenColors||{},L=c.myConcept||c.word;if(I[L])return console.log(`Token "${L}" is already colored, ignoring click`),null;let k;m==="staticEditable"?k=fw():k=y?fX(y):fw();const q={...I};c.myConcept?q[c.myConcept]=k:q[c.word]=k,s(Y=>Y.map(M=>M.id===d?{...M,data:{...M.data,tokenColors:q}}:M));const $=pX(f),j=yX($,c.word,"Loading...","",k,m,d);j.data.isLoading=!0;const te=EX(d,j.id,k,T);return n([{type:"add",item:j}]),r([{type:"add",item:te}]),bX(c.word,b||"",Y=>{s(M=>M.map(N=>{if(N.id===j.id){const D=N.data.summary||"";return{...N,data:{...N.data,label:D+Y,summary:D+Y}}}return N}))}).then(Y=>{const M=Y.firstResponse?.response||c.word,N=Y.secondResponse?.response||c.word,D=Y.thirdResponse?.response||{};s(U=>U.map(B=>B.id===j.id?{...B,data:{...B.data,label:N,title:c.word,summary:N,full_text:M,suggestions:D,isLoading:!1}}:B))}).catch(()=>{s(Y=>Y.map(M=>M.id===j.id?{...M,data:{...M.data,label:c.word,title:c.word,summary:c.word,full_text:c.word,suggestions:[],isLoading:!1}}:M))}),k};return P.jsx(o4.Provider,{value:{handleTokenClick:u,setNodes:s,showExplanation:o},children:t})},u4=()=>{const t=Q.useContext(o4);if(!t)throw new Error("useTokenInteraction must be used within a TokenInteractionProvider");return t},l4=({size:t="medium",color:e="#4f86f7"})=>{const n={small:"w-4 h-4 border-2",medium:"w-8 h-8 border-3",large:"w-12 h-12 border-4"};return P.jsx("div",{className:"flex items-center justify-center",children:P.jsx("div",{className:`${n[t]} border-gray-200 dark:border-gray-700 border-t-indigo-500 dark:border-t-indigo-400 rounded-full animate-spin`,style:{borderTopColor:e}})})};function vX({data:t,id:e}){const[n,r]=Q.useState(!1),[s,o]=Q.useState(t.summary||t.label||"Static Node"),[u,c]=Q.useState(!1),{handleTokenClick:d,showExplanation:f}=u4(),{getNode:m,setViewport:y}=dd();Q.useEffect(()=>{n||o(t.summary||t.label||"Static Node")},[t.summary,t.label,n]);const b=a4(s),T=(N,D)=>{D.stopPropagation(),console.log("Static Token clicked:",N),d(N,e,{x:0,y:0},"staticEditable",t.myColor,t.summary||t.label||"Draggable Node",N.suggestionId)},w=N=>{N.stopPropagation(),r(!0)},I=()=>{r(!1)},L=N=>{N.stopPropagation()},k=N=>{N.stopPropagation(),N.key==="Enter"&&I(),N.key==="Escape"&&(o(t.summary||t.label||"Static Node"),r(!1))},q=N=>{N.stopPropagation(),c(!u)},$=N=>{N.stopPropagation(),f&&f(t.title||"Explanation",t.full_text||"No detailed information available.")},j=N=>{if(N.stopPropagation(),t.previousNode){const D=m(t.previousNode);if(D){const{x:U,y:B}=D.position;y({x:-U+200,y:-B+100,zoom:1},{duration:500})}}},te=(()=>{const N=t.tokenColors||{};return b.map((D,U)=>{const B=D.myConcept||D.word,V=N[B],C=!V;return P.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-200 ease-out
                              ${C?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"} 
                              ${D.myConcept?"bg-blue-500/10 border border-blue-500/30":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:V||"transparent",color:V?t.myColor||"#ffffff":"inherit",border:V?`1px solid ${V}`:""},onClick:O=>C?T(D,O):O.stopPropagation(),children:[D.word,U<b.length-1?" ":""]},U)})})(),Y=P.jsxs("div",{className:"node-buttons",children:[t.previousNode&&P.jsx("button",{className:"node-expand-btn previous-node-btn",onClick:j,title:"Go to previous node",children:""}),b.length>5&&P.jsx("button",{className:"node-expand-btn",onClick:q,title:u?"Show less":"Show more",children:u?"":"+"}),P.jsx("button",{className:"node-expand-btn explanation-btn-icon",onClick:$,title:"Show full text",children:""})]}),M=Q.useMemo(()=>t.isLoading?P.jsxs("div",{className:"flex items-center justify-center gap-2 py-8",children:[P.jsx(l4,{size:"small",color:t.myColor||"#6366f1"}),P.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}):n?P.jsx("input",{type:"text",value:s,onChange:N=>o(N.target.value),onBlur:I,onKeyDown:k,onClick:L,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):P.jsxs("div",{className:"flex flex-col gap-3",children:[P.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[P.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),P.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&P.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                         hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:j,title:"Go to previous node",children:""}),b.length>5&&P.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:q,title:u?"Show less":"Show more",children:u?"":"+"}),P.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                     hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                     transition-all duration-150 flex items-center justify-center text-sm`,onClick:$,title:"Show full text",children:""})]})]}),P.jsx("div",{className:"flex-1",children:P.jsxs("div",{className:"cursor-text leading-relaxed break-words text-lg font-medium",onClick:w,children:[te,b.length>5&&!u&&P.jsx("span",{className:"text-slate-500 font-normal",children:"..."})]})}),P.jsxs("div",{className:"mt-2",children:[P.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),P.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((N,D)=>{const B=(t.tokenColors||{})[N],V=!B;return P.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${V?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:B||"transparent",color:B?t.myColor||"#ffffff":"inherit",border:B?`1px solid ${B}`:""},onClick:C=>V?T({word:N,myConcept:N,suggestionId:t.label+N+D},C):C.stopPropagation(),children:[N,D<t.suggestions.length-1?" ":"",P.jsx(Er,{type:"source",position:He.Right,id:t.label+N+D})]},D)}):P.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]}),[n,s,u,b.length,w,I,k,L,te,Y]);return P.jsxs("div",{className:`bg-[#1a1a1d] border border-white/[0.1] rounded-[20px] p-7 min-w-[320px] max-w-[500px] 
                       transition-all duration-150 ease-in-out cursor-pointer select-none overflow-hidden
                       opacity-[0.98] border-b-[3px] border-b-white/[0.06]
                       hover:opacity-100 hover:bg-[#28282c] hover:border-white/[0.2]`,style:{backgroundColor:t.myColor,color:t.myColor?P0(t.myColor):"#f8faff",border:t.myColor?`1px solid ${M0(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.1)"},children:[P.jsx("div",{className:"relative pointer-events-auto text-[#f8faff] text-[18px] leading-[1.7] font-semibold",children:M}),P.jsx(Er,{type:"source",position:He.Bottom,id:"bottom-source"}),P.jsx(Er,{type:"target",position:He.Bottom,id:"bottom-target"})]})}function AX({data:t,id:e}){const[n,r]=Q.useState(!1),[s,o]=Q.useState(t.summary||t.label||"Draggable Node"),[u,c]=Q.useState(t.expanded||!1),{getNodes:d,getNode:f,setViewport:m}=dd(),{handleTokenClick:y,showExplanation:b}=u4();Q.useEffect(()=>{n||o(t.summary||t.label||"Draggable Node")},[t.summary,t.label,n]);const T=a4(s),w=u||T.length<=5?T:T.slice(0,5),I=()=>!0,L=(U,B)=>{B.stopPropagation();const C=d().find(K=>K.id===e);return C?y(U,e,C.position,C.type||"draggableEditable",t.myColor,t.summary||t.label||"Draggable Node"):void 0},k=U=>{U.stopPropagation(),r(!0)},q=()=>{r(!1)},$=U=>{U.stopPropagation()},j=U=>{U.stopPropagation(),U.key==="Enter"&&q(),U.key==="Escape"&&(o(t.summary||t.label||"Draggable Node"),r(!1))},te=U=>{U.stopPropagation(),c(!u),!u&&t.onExpand&&t.onExpand()},Y=U=>{U.stopPropagation(),b&&b(t.title,t.full_text||"No detailed information available.")},M=U=>{if(U.stopPropagation(),t.previousNode){const B=f(t.previousNode);if(B){const{x:V,y:C}=B.position;m({x:-V+200,y:-C+100,zoom:1},{duration:500})}}},N=Q.useMemo(()=>{const U={};return w.forEach(B=>{const V=B.myConcept||B.word;U[V]||(U[V]=[]),U[V].push(B)}),U},[w]),D=Q.useMemo(()=>n?P.jsx("input",{type:"text",value:s,onChange:U=>o(U.target.value),onBlur:q,onKeyDown:j,onClick:$,className:`w-full bg-gray-700/50 border border-white/15 rounded-lg px-4 py-3 text-gray-100 
                             placeholder-gray-500 focus:outline-none focus:border-blue-500/60 focus:bg-gray-600/50 
                             focus:ring-2 focus:ring-blue-500/25 transition-all duration-200 nodrag`,placeholder:"Enter node content...",autoFocus:!0}):P.jsxs(P.Fragment,{children:[t.isLoading&&P.jsxs("div",{className:"flex items-center justify-center gap-2 py-5",children:[P.jsx(l4,{size:"small",color:t.myColor||"#6366f1"}),P.jsx("span",{className:"text-slate-400 text-sm",children:"Loading concept..."})]}),P.jsxs("div",{className:"flex flex-col gap-3",children:[P.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-white/10",children:[P.jsx("div",{className:"text-base font-semibold text-gray-100",children:t.title||"Node"}),P.jsxs("div",{className:"flex gap-2",children:[t.previousNode&&P.jsx("button",{className:`w-8 h-8 bg-gray-500/25 text-gray-400 border border-gray-500/35 rounded-lg 
                                             hover:bg-gray-500/35 hover:border-gray-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:M,title:"Go to previous node",children:""}),T.length>5&&P.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                             hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                             transition-all duration-150 flex items-center justify-center text-sm font-semibold`,onClick:te,title:u?"Show less":"Show more",children:u?"":"+"}),P.jsx("button",{className:`w-8 h-8 bg-blue-500/25 text-blue-400 border border-blue-500/35 rounded-lg 
                                         hover:bg-blue-500/35 hover:border-blue-500/55 hover:-translate-y-0.5 
                                         transition-all duration-150 flex items-center justify-center text-sm`,onClick:Y,title:"Show full text",children:""})]})]}),P.jsx("div",{className:"flex-1",children:P.jsxs("div",{className:"cursor-text leading-relaxed break-words",onClick:k,children:[w.map((U,B)=>{const V=t.tokenColors||{},C=U.myConcept||U.word,O=V[C],K=!O;return P.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-lg font-medium transition-all duration-300 ease-out
                                                  ${K?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40 hover:shadow-lg hover:shadow-blue-500/25 hover:scale-105 hover:-translate-y-0.5 active:scale-95 active:translate-y-0":"cursor-not-allowed opacity-70"} 
                                                  ${U.myConcept?"bg-blue-500/10 border border-blue-500/30 shadow-md":"border border-transparent hover:border-blue-500/30"}`,style:{backgroundColor:O||"transparent",color:O?P0(O):"inherit",border:O?`1px solid ${M0(O,20)}`:"",boxShadow:O?`0 0 0 1px ${O}25`:""},onClick:z=>K?L(U,z):z.stopPropagation(),children:[U.word,B<w.length-1?" ":""]},B)}),T.length>5&&!u&&P.jsx("span",{className:"text-slate-500 font-normal",children:"..."})]})}),P.jsxs("div",{className:"mt-2",children:[P.jsx("div",{className:"text-sm font-semibold text-slate-400 mb-1.5",children:"Suggestions"}),P.jsx("div",{className:"flex flex-wrap gap-1",children:t.suggestions&&t.suggestions.length>0?t.suggestions.map((U,B)=>{const C=(t.tokenColors||{})[U],O=!C;return P.jsxs("span",{className:`inline-block px-2 py-1 m-0.5 rounded-md text-sm 
                                                      bg-white/5 border border-white/10 transition-all duration-200 
                                                      ${O?"cursor-pointer hover:bg-blue-500/20 hover:border-blue-500/40":"cursor-not-allowed opacity-70"}`,style:{backgroundColor:C||"transparent",color:C?P0(C):"inherit",border:C?`1px solid ${M0(C,20)}`:""},onClick:K=>O?L({word:U,myConcept:U,suggestionId:t.label+U+B},K):K.stopPropagation(),children:[U,P.jsx(Er,{type:"source",position:He.Bottom,id:t.label+U+B})]},B)}):P.jsx("div",{className:"text-slate-500 italic text-sm",children:"No suggestions"})})]})]})]}),[n,s,w,T,u,N,k,q,j,$,te,Y,L,I,t.previousNode,M,t.tokenColors,t.myColor,t.isLoading]);return P.jsxs("div",{className:`bg-[#202023] border border-white/[0.12] rounded-2xl p-5 min-w-[280px] max-w-[450px] 
                       shadow-[0_10px_30px_rgba(0,0,0,0.5),0_1px_4px_rgba(0,0,0,0.7)] 
                       transition-all duration-200 ease-in-out cursor-grab select-none overflow-hidden
                       hover:transform hover:-translate-y-[3px] hover:shadow-[0_12px_35px_rgba(0,0,0,0.6),0_2px_6px_rgba(0,0,0,0.8)] 
                       hover:border-white/[0.18] hover:bg-[#242427]`,style:{background:t.myColor,color:t.myColor?P0(t.myColor):"#f0f4f8",border:t.myColor?`1px solid ${M0(t.myColor,20)}`:"1px solid rgba(255, 255, 255, 0.12)"},children:[P.jsx("div",{className:"relative pointer-events-auto text-[#f0f4f8] text-[17px] leading-[1.7] font-medium",children:D}),P.jsx(Er,{type:"source",position:He.Bottom,id:"bottom-source"}),P.jsx(Er,{type:"target",position:He.Top,id:"top-target"}),P.jsx(Er,{type:"source",position:He.Left,id:"left-source"}),P.jsx(Er,{type:"target",position:He.Left,id:"left-target"}),P.jsx(Er,{type:"source",position:He.Right,id:"right-source"}),P.jsx(Er,{type:"target",position:He.Right,id:"right-target"})]})}const SX={staticEditable:vX,draggableEditable:AX};function xX(){const[t,e]=Q.useState(!1),[n,r]=Q.useState(!1),[s,o]=Q.useState(null),u=Q.useCallback((J,se)=>{o({title:J,text:se}),e(!0)},[]),c=Q.useCallback(()=>{e(!1)},[]),{user:d,signOut:f}=rX(),{notifications:m,removeNotification:y,showSuccess:b,showError:T,showInfo:w}=dX(),{nodes:I,edges:L,allBoards:k,currentBoard:q,isSwitchingBoard:$,isSaving:j,onNodesChange:te,onEdgesChange:Y,setNodes:M,switchToBoard:N,createNewBoard:D,deleteBoard:U,updateBoardName:B,clearBoardState:V}=hX(d,{showSuccess:b,showError:T,showInfo:w}),C=async()=>{await f(),V()},O=()=>{r(!0)},K=Q.useCallback(J=>{const se={id:`e${J.source}-${J.target}`,source:J.source,target:J.target,sourceHandle:J.sourceHandle,targetHandle:J.targetHandle};Y([{type:"add",item:se}])},[Y]),z=Q.useMemo(()=>P.jsxs(LC,{nodes:I,edges:L,onNodesChange:te,onEdgesChange:Y,onConnect:K,nodeTypes:SX,connectionMode:ja.Loose,fitView:!0,className:"bg-gray-50 dark:bg-gray-900 w-full h-full",children:[P.jsx(OP,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg"}),P.jsx(HP,{variant:di.Cross,gap:30,size:10,lineWidth:.5,color:"#94a3b8",className:"bg-gray-50 dark:bg-gray-900"})]}),[I,L,te,Y,K]);return d?P.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 relative",style:{height:"100vh",width:"100vw",overflow:"hidden"},children:[P.jsx(eX,{notifications:m,onRemove:y}),P.jsxs("div",{style:{height:"100%",position:"relative"},children:[P.jsxs(nI,{direction:"horizontal",children:[P.jsx(_E,{defaultSize:15,minSize:10,maxSize:30,children:P.jsx("div",{className:"bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700",children:P.jsx(cz,{allBoards:k,currentBoard:q,onSwitchBoard:N,onCreateBoard:async J=>{await D(J)},onDeleteBoard:U,onSignOut:C,isLoading:$})})}),P.jsx(rI,{}),P.jsx(_E,{children:P.jsxs("div",{className:"bg-white dark:bg-gray-800",style:{height:"100%",position:"relative"},children:[P.jsx(ZK,{name:q?.name||"Loading...",onSetName:B,user:d,isSaving:j}),P.jsx("div",{className:"bg-gray-50 dark:bg-gray-900",style:{height:"calc(100% - 60px)",width:"100%"},children:P.jsx(TX,{nodes:I,onNodesChange:te,onEdgesChange:Y,setNodes:M,showExplanation:u,children:z})})]})})]}),t&&P.jsx(KP,{defaultSize:{width:320},style:{background:"transparent",position:"fixed",right:"6px",top:"70px",borderRadius:"20px"},enable:{right:!1,top:!1,bottom:!1,left:!0},children:P.jsx("div",{className:`bg-gradient-to-b from-blue-50 to-white dark:from-gray-800 dark:to-gray-900 
                                       border-l-4 border-blue-500 dark:border-blue-400
                                       shadow-2xl shadow-blue-500/20 dark:shadow-blue-400/20
                                       animate-in slide-in-from-right-5 fade-in duration-300
                                       transition-all ease-out overflow-auto
                                       ring-2 ring-blue-500/20 dark:ring-blue-400/20 rounded-xl`,style:{maxHeight:"87vh",height:"auto",overflow:"auto"},children:P.jsx("div",{className:"overflow-hidden bg-gradient-to-br from-blue-50/80 to-white/95 dark:from-gray-800/95 dark:to-gray-900/95 backdrop-blur-sm",children:P.jsx(XK,{explanation:s,onClose:c,isVisible:t})})})})]})]}):n?P.jsx(uz,{}):P.jsx(tX,{onLogin:O})}function wX(){return P.jsx(WK,{children:P.jsx(xX,{})})}const c4=document.getElementById("root");if(!c4)throw new Error("Failed to find the root element");Y6.createRoot(c4).render(P.jsx(Q.StrictMode,{children:P.jsx(wX,{})}));
